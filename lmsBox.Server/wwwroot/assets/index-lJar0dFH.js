(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function a(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=a(l);fetch(l.href,o)}})();function zi(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Em={exports:{}},Pl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy;function vN(){if(vy)return Pl;vy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function a(r,l,o){var d=null;if(o!==void 0&&(d=""+o),l.key!==void 0&&(d=""+l.key),"key"in l){o={};for(var u in l)u!=="key"&&(o[u]=l[u])}else o=l;return l=o.ref,{$$typeof:s,type:r,key:d,ref:l!==void 0?l:null,props:o}}return Pl.Fragment=e,Pl.jsx=a,Pl.jsxs=a,Pl}var jy;function jN(){return jy||(jy=1,Em.exports=vN()),Em.exports}var t=jN(),Tm={exports:{}},Te={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wy;function wN(){if(wy)return Te;wy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function j(P){return P===null||typeof P!="object"?null:(P=v&&P[v]||P["@@iterator"],typeof P=="function"?P:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,N={};function D(P,W,de){this.props=P,this.context=W,this.refs=N,this.updater=de||S}D.prototype.isReactComponent={},D.prototype.setState=function(P,W){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,W,"setState")},D.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function E(){}E.prototype=D.prototype;function A(P,W,de){this.props=P,this.context=W,this.refs=N,this.updater=de||S}var T=A.prototype=new E;T.constructor=A,C(T,D.prototype),T.isPureReactComponent=!0;var w=Array.isArray;function _(){}var R={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function H(P,W,de){var he=de.ref;return{$$typeof:s,type:P,key:W,ref:he!==void 0?he:null,props:de}}function q(P,W){return H(P.type,W,P.props)}function ne(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function U(P){var W={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(de){return W[de]})}var re=/\/+/g;function fe(P,W){return typeof P=="object"&&P!==null&&P.key!=null?U(""+P.key):W.toString(36)}function Z(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(_,_):(P.status="pending",P.then(function(W){P.status==="pending"&&(P.status="fulfilled",P.value=W)},function(W){P.status==="pending"&&(P.status="rejected",P.reason=W)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function B(P,W,de,he,je){var ke=typeof P;(ke==="undefined"||ke==="boolean")&&(P=null);var Oe=!1;if(P===null)Oe=!0;else switch(ke){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(P.$$typeof){case s:case e:Oe=!0;break;case p:return Oe=P._init,B(Oe(P._payload),W,de,he,je)}}if(Oe)return je=je(P),Oe=he===""?"."+fe(P,0):he,w(je)?(de="",Oe!=null&&(de=Oe.replace(re,"$&/")+"/"),B(je,W,de,"",function(Ut){return Ut})):je!=null&&(ne(je)&&(je=q(je,de+(je.key==null||P&&P.key===je.key?"":(""+je.key).replace(re,"$&/")+"/")+Oe)),W.push(je)),1;Oe=0;var ft=he===""?".":he+":";if(w(P))for(var Xe=0;Xe<P.length;Xe++)he=P[Xe],ke=ft+fe(he,Xe),Oe+=B(he,W,de,ke,je);else if(Xe=j(P),typeof Xe=="function")for(P=Xe.call(P),Xe=0;!(he=P.next()).done;)he=he.value,ke=ft+fe(he,Xe++),Oe+=B(he,W,de,ke,je);else if(ke==="object"){if(typeof P.then=="function")return B(Z(P),W,de,he,je);throw W=String(P),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function L(P,W,de){if(P==null)return P;var he=[],je=0;return B(P,he,"","",function(ke){return W.call(de,ke,je++)}),he}function Y(P){if(P._status===-1){var W=P._result;W=W(),W.then(function(de){(P._status===0||P._status===-1)&&(P._status=1,P._result=de)},function(de){(P._status===0||P._status===-1)&&(P._status=2,P._result=de)}),P._status===-1&&(P._status=0,P._result=W)}if(P._status===1)return P._result.default;throw P._result}var O=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},I={map:L,forEach:function(P,W,de){L(P,function(){W.apply(this,arguments)},de)},count:function(P){var W=0;return L(P,function(){W++}),W},toArray:function(P){return L(P,function(W){return W})||[]},only:function(P){if(!ne(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Te.Activity=y,Te.Children=I,Te.Component=D,Te.Fragment=a,Te.Profiler=l,Te.PureComponent=A,Te.StrictMode=r,Te.Suspense=m,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Te.__COMPILER_RUNTIME={__proto__:null,c:function(P){return R.H.useMemoCache(P)}},Te.cache=function(P){return function(){return P.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(P,W,de){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var he=C({},P.props),je=P.key;if(W!=null)for(ke in W.key!==void 0&&(je=""+W.key),W)!z.call(W,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&W.ref===void 0||(he[ke]=W[ke]);var ke=arguments.length-2;if(ke===1)he.children=de;else if(1<ke){for(var Oe=Array(ke),ft=0;ft<ke;ft++)Oe[ft]=arguments[ft+2];he.children=Oe}return H(P.type,je,he)},Te.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:o,_context:P},P},Te.createElement=function(P,W,de){var he,je={},ke=null;if(W!=null)for(he in W.key!==void 0&&(ke=""+W.key),W)z.call(W,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(je[he]=W[he]);var Oe=arguments.length-2;if(Oe===1)je.children=de;else if(1<Oe){for(var ft=Array(Oe),Xe=0;Xe<Oe;Xe++)ft[Xe]=arguments[Xe+2];je.children=ft}if(P&&P.defaultProps)for(he in Oe=P.defaultProps,Oe)je[he]===void 0&&(je[he]=Oe[he]);return H(P,ke,je)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(P){return{$$typeof:u,render:P}},Te.isValidElement=ne,Te.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:Y}},Te.memo=function(P,W){return{$$typeof:f,type:P,compare:W===void 0?null:W}},Te.startTransition=function(P){var W=R.T,de={};R.T=de;try{var he=P(),je=R.S;je!==null&&je(de,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(_,O)}catch(ke){O(ke)}finally{W!==null&&de.types!==null&&(W.types=de.types),R.T=W}},Te.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Te.use=function(P){return R.H.use(P)},Te.useActionState=function(P,W,de){return R.H.useActionState(P,W,de)},Te.useCallback=function(P,W){return R.H.useCallback(P,W)},Te.useContext=function(P){return R.H.useContext(P)},Te.useDebugValue=function(){},Te.useDeferredValue=function(P,W){return R.H.useDeferredValue(P,W)},Te.useEffect=function(P,W){return R.H.useEffect(P,W)},Te.useEffectEvent=function(P){return R.H.useEffectEvent(P)},Te.useId=function(){return R.H.useId()},Te.useImperativeHandle=function(P,W,de){return R.H.useImperativeHandle(P,W,de)},Te.useInsertionEffect=function(P,W){return R.H.useInsertionEffect(P,W)},Te.useLayoutEffect=function(P,W){return R.H.useLayoutEffect(P,W)},Te.useMemo=function(P,W){return R.H.useMemo(P,W)},Te.useOptimistic=function(P,W){return R.H.useOptimistic(P,W)},Te.useReducer=function(P,W,de){return R.H.useReducer(P,W,de)},Te.useRef=function(P){return R.H.useRef(P)},Te.useState=function(P){return R.H.useState(P)},Te.useSyncExternalStore=function(P,W,de){return R.H.useSyncExternalStore(P,W,de)},Te.useTransition=function(){return R.H.useTransition()},Te.version="19.2.0",Te}var Ny;function Wf(){return Ny||(Ny=1,Tm.exports=wN()),Tm.exports}var b=Wf();const ct=zi(b);var Rm={exports:{}},Ul={},Dm={exports:{}},Mm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy;function NN(){return Sy||(Sy=1,(function(s){function e(B,L){var Y=B.length;B.push(L);e:for(;0<Y;){var O=Y-1>>>1,I=B[O];if(0<l(I,L))B[O]=L,B[Y]=I,Y=O;else break e}}function a(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var L=B[0],Y=B.pop();if(Y!==L){B[0]=Y;e:for(var O=0,I=B.length,P=I>>>1;O<P;){var W=2*(O+1)-1,de=B[W],he=W+1,je=B[he];if(0>l(de,Y))he<I&&0>l(je,de)?(B[O]=je,B[he]=Y,O=he):(B[O]=de,B[W]=Y,O=W);else if(he<I&&0>l(je,Y))B[O]=je,B[he]=Y,O=he;else break e}}return L}function l(B,L){var Y=B.sortIndex-L.sortIndex;return Y!==0?Y:B.id-L.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var d=Date,u=d.now();s.unstable_now=function(){return d.now()-u}}var m=[],f=[],p=1,y=null,v=3,j=!1,S=!1,C=!1,N=!1,D=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function T(B){for(var L=a(f);L!==null;){if(L.callback===null)r(f);else if(L.startTime<=B)r(f),L.sortIndex=L.expirationTime,e(m,L);else break;L=a(f)}}function w(B){if(C=!1,T(B),!S)if(a(m)!==null)S=!0,_||(_=!0,U());else{var L=a(f);L!==null&&Z(w,L.startTime-B)}}var _=!1,R=-1,z=5,H=-1;function q(){return N?!0:!(s.unstable_now()-H<z)}function ne(){if(N=!1,_){var B=s.unstable_now();H=B;var L=!0;try{e:{S=!1,C&&(C=!1,E(R),R=-1),j=!0;var Y=v;try{t:{for(T(B),y=a(m);y!==null&&!(y.expirationTime>B&&q());){var O=y.callback;if(typeof O=="function"){y.callback=null,v=y.priorityLevel;var I=O(y.expirationTime<=B);if(B=s.unstable_now(),typeof I=="function"){y.callback=I,T(B),L=!0;break t}y===a(m)&&r(m),T(B)}else r(m);y=a(m)}if(y!==null)L=!0;else{var P=a(f);P!==null&&Z(w,P.startTime-B),L=!1}}break e}finally{y=null,v=Y,j=!1}L=void 0}}finally{L?U():_=!1}}}var U;if(typeof A=="function")U=function(){A(ne)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,fe=re.port2;re.port1.onmessage=ne,U=function(){fe.postMessage(null)}}else U=function(){D(ne,0)};function Z(B,L){R=D(function(){B(s.unstable_now())},L)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(B){B.callback=null},s.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<B?Math.floor(1e3/B):5},s.unstable_getCurrentPriorityLevel=function(){return v},s.unstable_next=function(B){switch(v){case 1:case 2:case 3:var L=3;break;default:L=v}var Y=v;v=L;try{return B()}finally{v=Y}},s.unstable_requestPaint=function(){N=!0},s.unstable_runWithPriority=function(B,L){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Y=v;v=B;try{return L()}finally{v=Y}},s.unstable_scheduleCallback=function(B,L,Y){var O=s.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?O+Y:O):Y=O,B){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=Y+I,B={id:p++,callback:L,priorityLevel:B,startTime:Y,expirationTime:I,sortIndex:-1},Y>O?(B.sortIndex=Y,e(f,B),a(m)===null&&B===a(f)&&(C?(E(R),R=-1):C=!0,Z(w,Y-O))):(B.sortIndex=I,e(m,B),S||j||(S=!0,_||(_=!0,U()))),B},s.unstable_shouldYield=q,s.unstable_wrapCallback=function(B){var L=v;return function(){var Y=v;v=L;try{return B.apply(this,arguments)}finally{v=Y}}}})(Mm)),Mm}var Cy;function SN(){return Cy||(Cy=1,Dm.exports=NN()),Dm.exports}var Lm={exports:{}},Jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function CN(){if(ky)return Jt;ky=1;var s=Wf();function e(m){var f="https://react.dev/errors/"+m;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+m+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(e(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(m,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:m,containerInfo:f,implementation:p}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(m,f){if(m==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Jt.createPortal=function(m,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(m,f,null,p)},Jt.flushSync=function(m){var f=d.T,p=r.p;try{if(d.T=null,r.p=2,m)return m()}finally{d.T=f,r.p=p,r.d.f()}},Jt.preconnect=function(m,f){typeof m=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(m,f))},Jt.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},Jt.preinit=function(m,f){if(typeof m=="string"&&f&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,j=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(m,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:j}):p==="script"&&r.d.X(m,{crossOrigin:y,integrity:v,fetchPriority:j,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Jt.preinitModule=function(m,f){if(typeof m=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);r.d.M(m,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(m)},Jt.preload=function(m,f){if(typeof m=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin);r.d.L(m,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Jt.preloadModule=function(m,f){if(typeof m=="string")if(f){var p=u(f.as,f.crossOrigin);r.d.m(m,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(m)},Jt.requestFormReset=function(m){r.d.r(m)},Jt.unstable_batchedUpdates=function(m,f){return m(f)},Jt.useFormState=function(m,f,p){return d.H.useFormState(m,f,p)},Jt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Jt.version="19.2.0",Jt}var _y;function kN(){if(_y)return Lm.exports;_y=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Lm.exports=CN(),Lm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay;function _N(){if(Ay)return Ul;Ay=1;var s=SN(),e=Wf(),a=kN();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var i=n,c=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(c=i.return),n=i.return;while(n)}return i.tag===3?c:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function u(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(o(n)!==n)throw Error(r(188))}function f(n){var i=n.alternate;if(!i){if(i=o(n),i===null)throw Error(r(188));return i!==n?null:n}for(var c=n,h=i;;){var g=c.return;if(g===null)break;var x=g.alternate;if(x===null){if(h=g.return,h!==null){c=h;continue}break}if(g.child===x.child){for(x=g.child;x;){if(x===c)return m(g),n;if(x===h)return m(g),i;x=x.sibling}throw Error(r(188))}if(c.return!==h.return)c=g,h=x;else{for(var k=!1,M=g.child;M;){if(M===c){k=!0,c=g,h=x;break}if(M===h){k=!0,h=g,c=x;break}M=M.sibling}if(!k){for(M=x.child;M;){if(M===c){k=!0,c=x,h=g;break}if(M===h){k=!0,h=x,c=g;break}M=M.sibling}if(!k)throw Error(r(189))}}if(c.alternate!==h)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),A=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),ne=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=ne&&n[ne]||n["@@iterator"],typeof n=="function"?n:null)}var re=Symbol.for("react.client.reference");function fe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===re?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case D:return"Profiler";case N:return"StrictMode";case w:return"Suspense";case _:return"SuspenseList";case H:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case S:return"Portal";case A:return n.displayName||"Context";case E:return(n._context.displayName||"Context")+".Consumer";case T:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return i=n.displayName||null,i!==null?i:fe(n.type)||"Memo";case z:i=n._payload,n=n._init;try{return fe(n(i))}catch{}}return null}var Z=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},O=[],I=-1;function P(n){return{current:n}}function W(n){0>I||(n.current=O[I],O[I]=null,I--)}function de(n,i){I++,O[I]=n.current,n.current=i}var he=P(null),je=P(null),ke=P(null),Oe=P(null);function ft(n,i){switch(de(ke,i),de(je,n),de(he,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?V0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=V0(i),n=$0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}W(he),de(he,n)}function Xe(){W(he),W(je),W(ke)}function Ut(n){n.memoizedState!==null&&de(Oe,n);var i=he.current,c=$0(i,n.type);i!==c&&(de(je,n),de(he,c))}function xe(n){je.current===n&&(W(he),W(je)),Oe.current===n&&(W(Oe),Ml._currentValue=Y)}var Ae,jt;function wt(n){if(Ae===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);Ae=i&&i[1]||"",jt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ae+n+jt}var un=!1;function hn(n,i){if(!n||un)return"";un=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(i){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ae){var te=ae}Reflect.construct(n,[],ce)}else{try{ce.call()}catch(ae){te=ae}n.call(ce.prototype)}}else{try{throw Error()}catch(ae){te=ae}(ce=n())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ae){if(ae&&te&&typeof ae.stack=="string")return[ae.stack,te.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=h.DetermineComponentFrameRoot(),k=x[0],M=x[1];if(k&&M){var F=k.split(`
`),J=M.split(`
`);for(g=h=0;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;for(;g<J.length&&!J[g].includes("DetermineComponentFrameRoot");)g++;if(h===F.length||g===J.length)for(h=F.length-1,g=J.length-1;1<=h&&0<=g&&F[h]!==J[g];)g--;for(;1<=h&&0<=g;h--,g--)if(F[h]!==J[g]){if(h!==1||g!==1)do if(h--,g--,0>g||F[h]!==J[g]){var le=`
`+F[h].replace(" at new "," at ");return n.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",n.displayName)),le}while(1<=h&&0<=g);break}}}finally{un=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?wt(c):""}function Aa(n,i){switch(n.tag){case 26:case 27:case 5:return wt(n.type);case 16:return wt("Lazy");case 13:return n.child!==i&&i!==null?wt("Suspense Fallback"):wt("Suspense");case 19:return wt("SuspenseList");case 0:case 15:return hn(n.type,!1);case 11:return hn(n.type.render,!1);case 1:return hn(n.type,!0);case 31:return wt("Activity");default:return""}}function mn(n){try{var i="",c=null;do i+=Aa(n,c),c=n,n=n.return;while(n);return i}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var fn=Object.prototype.hasOwnProperty,V=s.unstable_scheduleCallback,ee=s.unstable_cancelCallback,ie=s.unstable_shouldYield,ye=s.unstable_requestPaint,me=s.unstable_now,pe=s.unstable_getCurrentPriorityLevel,we=s.unstable_ImmediatePriority,$e=s.unstable_UserBlockingPriority,Be=s.unstable_NormalPriority,Yt=s.unstable_LowPriority,Ea=s.unstable_IdlePriority,Ls=s.log,Br=s.unstable_setDisableYieldValue,Zs=null,Bt=null;function Os(n){if(typeof Ls=="function"&&Br(n),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(Zs,n)}catch{}}var At=Math.clz32?Math.clz32:vu,Ns=Math.log,Kn=Math.LN2;function vu(n){return n>>>=0,n===0?32:31-(Ns(n)/Kn|0)|0}var Fr=256,Hr=262144,qr=4194304;function rs(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Jn(n,i,c){var h=n.pendingLanes;if(h===0)return 0;var g=0,x=n.suspendedLanes,k=n.pingedLanes;n=n.warmLanes;var M=h&134217727;return M!==0?(h=M&~x,h!==0?g=rs(h):(k&=M,k!==0?g=rs(k):c||(c=M&~n,c!==0&&(g=rs(c))))):(M=h&~x,M!==0?g=rs(M):k!==0?g=rs(k):c||(c=h&~n,c!==0&&(g=rs(c)))),g===0?0:i!==0&&i!==g&&(i&x)===0&&(x=g&-g,c=i&-i,x>=c||x===32&&(c&4194048)!==0)?i:g}function er(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Lo(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oo(){var n=qr;return qr<<=1,(qr&62914560)===0&&(qr=4194304),n}function Vr(n){for(var i=[],c=0;31>c;c++)i.push(n);return i}function tr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function zo(n,i,c,h,g,x){var k=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var M=n.entanglements,F=n.expirationTimes,J=n.hiddenUpdates;for(c=k&~c;0<c;){var le=31-At(c),ce=1<<le;M[le]=0,F[le]=-1;var te=J[le];if(te!==null)for(J[le]=null,le=0;le<te.length;le++){var ae=te[le];ae!==null&&(ae.lane&=-536870913)}c&=~ce}h!==0&&Po(n,h,0),x!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=x&~(k&~i))}function Po(n,i,c){n.pendingLanes|=i,n.suspendedLanes&=~i;var h=31-At(i);n.entangledLanes|=i,n.entanglements[h]=n.entanglements[h]|1073741824|c&261930}function sr(n,i){var c=n.entangledLanes|=i;for(n=n.entanglements;c;){var h=31-At(c),g=1<<h;g&i|n[h]&i&&(n[h]|=i),c&=~g}}function Uo(n,i){var c=i&-i;return c=(c&42)!==0?1:Qi(c),(c&(n.suspendedLanes|i))!==0?0:c}function Qi(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Yi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Bo(){var n=L.p;return n!==0?n:(n=window.event,n===void 0?32:my(n.type))}function Fo(n,i){var c=L.p;try{return L.p=n,i()}finally{L.p=c}}var pa=Math.random().toString(36).slice(2),Ft="__reactFiber$"+pa,Kt="__reactProps$"+pa,pn="__reactContainer$"+pa,Gi="__reactEvents$"+pa,Ho="__reactListeners$"+pa,ju="__reactHandles$"+pa,qo="__reactResources$"+pa,gn="__reactMarker$"+pa;function Wi(n){delete n[Ft],delete n[Kt],delete n[Gi],delete n[Ho],delete n[ju]}function $(n){var i=n[Ft];if(i)return i;for(var c=n.parentNode;c;){if(i=c[pn]||c[Ft]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(n=Z0(n);n!==null;){if(c=n[Ft])return c;n=Z0(n)}return i}n=c,c=n.parentNode}return null}function ue(n){if(n=n[Ft]||n[pn]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function be(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function Qe(n){var i=n[qo];return i||(i=n[qo]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ze(n){n[gn]=!0}var xn=new Set,Vo={};function Ta(n,i){$r(n,i),$r(n+"Capture",i)}function $r(n,i){for(Vo[n]=i,n=0;n<i.length;n++)xn.add(i[n])}var u2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mp={},Lp={};function h2(n){return fn.call(Lp,n)?!0:fn.call(Mp,n)?!1:u2.test(n)?Lp[n]=!0:(Mp[n]=!0,!1)}function $o(n,i,c){if(h2(i))if(c===null)n.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var h=i.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+c)}}function Io(n,i,c){if(c===null)n.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+c)}}function Ra(n,i,c,h){if(h===null)n.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(i,c,""+h)}}function zs(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Op(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function m2(n,i,c){var h=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var g=h.get,x=h.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return g.call(this)},set:function(k){c=""+k,x.call(this,k)}}),Object.defineProperty(n,i,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(k){c=""+k},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function wu(n){if(!n._valueTracker){var i=Op(n)?"checked":"value";n._valueTracker=m2(n,i,""+n[i])}}function zp(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var c=i.getValue(),h="";return n&&(h=Op(n)?n.checked?"true":"false":n.value),n=h,n!==c?(i.setValue(n),!0):!1}function Qo(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var f2=/[\n"\\]/g;function Ps(n){return n.replace(f2,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Nu(n,i,c,h,g,x,k,M){n.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?n.type=k:n.removeAttribute("type"),i!=null?k==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+zs(i)):n.value!==""+zs(i)&&(n.value=""+zs(i)):k!=="submit"&&k!=="reset"||n.removeAttribute("value"),i!=null?Su(n,k,zs(i)):c!=null?Su(n,k,zs(c)):h!=null&&n.removeAttribute("value"),g==null&&x!=null&&(n.defaultChecked=!!x),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?n.name=""+zs(M):n.removeAttribute("name")}function Pp(n,i,c,h,g,x,k,M){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.type=x),i!=null||c!=null){if(!(x!=="submit"&&x!=="reset"||i!=null)){wu(n);return}c=c!=null?""+zs(c):"",i=i!=null?""+zs(i):c,M||i===n.value||(n.value=i),n.defaultValue=i}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,n.checked=M?n.checked:!!h,n.defaultChecked=!!h,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(n.name=k),wu(n)}function Su(n,i,c){i==="number"&&Qo(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function Ir(n,i,c,h){if(n=n.options,i){i={};for(var g=0;g<c.length;g++)i["$"+c[g]]=!0;for(c=0;c<n.length;c++)g=i.hasOwnProperty("$"+n[c].value),n[c].selected!==g&&(n[c].selected=g),g&&h&&(n[c].defaultSelected=!0)}else{for(c=""+zs(c),i=null,g=0;g<n.length;g++){if(n[g].value===c){n[g].selected=!0,h&&(n[g].defaultSelected=!0);return}i!==null||n[g].disabled||(i=n[g])}i!==null&&(i.selected=!0)}}function Up(n,i,c){if(i!=null&&(i=""+zs(i),i!==n.value&&(n.value=i),c==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=c!=null?""+zs(c):""}function Bp(n,i,c,h){if(i==null){if(h!=null){if(c!=null)throw Error(r(92));if(Z(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),i=c}c=zs(i),n.defaultValue=c,h=n.textContent,h===c&&h!==""&&h!==null&&(n.value=h),wu(n)}function Qr(n,i){if(i){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=i;return}}n.textContent=i}var p2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fp(n,i,c){var h=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":h?n.setProperty(i,c):typeof c!="number"||c===0||p2.has(i)?i==="float"?n.cssFloat=c:n[i]=(""+c).trim():n[i]=c+"px"}function Hp(n,i,c){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||i!=null&&i.hasOwnProperty(h)||(h.indexOf("--")===0?n.setProperty(h,""):h==="float"?n.cssFloat="":n[h]="");for(var g in i)h=i[g],i.hasOwnProperty(g)&&c[g]!==h&&Fp(n,g,h)}else for(var x in i)i.hasOwnProperty(x)&&Fp(n,x,i[x])}function Cu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var g2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),x2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yo(n){return x2.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Da(){}var ku=null;function _u(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Yr=null,Gr=null;function qp(n){var i=ue(n);if(i&&(n=i.stateNode)){var c=n[Kt]||null;e:switch(n=i.stateNode,i.type){case"input":if(Nu(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ps(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var h=c[i];if(h!==n&&h.form===n.form){var g=h[Kt]||null;if(!g)throw Error(r(90));Nu(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<c.length;i++)h=c[i],h.form===n.form&&zp(h)}break e;case"textarea":Up(n,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&Ir(n,!!c.multiple,i,!1)}}}var Au=!1;function Vp(n,i,c){if(Au)return n(i,c);Au=!0;try{var h=n(i);return h}finally{if(Au=!1,(Yr!==null||Gr!==null)&&(Lc(),Yr&&(i=Yr,n=Gr,Gr=Yr=null,qp(i),n)))for(i=0;i<n.length;i++)qp(n[i])}}function Xi(n,i){var c=n.stateNode;if(c===null)return null;var h=c[Kt]||null;if(h===null)return null;c=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(r(231,i,typeof c));return c}var Ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Eu=!1;if(Ma)try{var Zi={};Object.defineProperty(Zi,"passive",{get:function(){Eu=!0}}),window.addEventListener("test",Zi,Zi),window.removeEventListener("test",Zi,Zi)}catch{Eu=!1}var yn=null,Tu=null,Go=null;function $p(){if(Go)return Go;var n,i=Tu,c=i.length,h,g="value"in yn?yn.value:yn.textContent,x=g.length;for(n=0;n<c&&i[n]===g[n];n++);var k=c-n;for(h=1;h<=k&&i[c-h]===g[x-h];h++);return Go=g.slice(n,1<h?1-h:void 0)}function Wo(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Xo(){return!0}function Ip(){return!1}function os(n){function i(c,h,g,x,k){this._reactName=c,this._targetInst=g,this.type=h,this.nativeEvent=x,this.target=k,this.currentTarget=null;for(var M in n)n.hasOwnProperty(M)&&(c=n[M],this[M]=c?c(x):x[M]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Xo:Ip,this.isPropagationStopped=Ip,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),i}var ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zo=os(ar),Ki=y({},ar,{view:0,detail:0}),y2=os(Ki),Ru,Du,Ji,Ko=y({},Ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ji&&(Ji&&n.type==="mousemove"?(Ru=n.screenX-Ji.screenX,Du=n.screenY-Ji.screenY):Du=Ru=0,Ji=n),Ru)},movementY:function(n){return"movementY"in n?n.movementY:Du}}),Qp=os(Ko),b2=y({},Ko,{dataTransfer:0}),v2=os(b2),j2=y({},Ki,{relatedTarget:0}),Mu=os(j2),w2=y({},ar,{animationName:0,elapsedTime:0,pseudoElement:0}),N2=os(w2),S2=y({},ar,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),C2=os(S2),k2=y({},ar,{data:0}),Yp=os(k2),_2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T2(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=E2[n])?!!i[n]:!1}function Lu(){return T2}var R2=y({},Ki,{key:function(n){if(n.key){var i=_2[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Wo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?A2[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lu,charCode:function(n){return n.type==="keypress"?Wo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Wo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),D2=os(R2),M2=y({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gp=os(M2),L2=y({},Ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lu}),O2=os(L2),z2=y({},ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),P2=os(z2),U2=y({},Ko,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),B2=os(U2),F2=y({},ar,{newState:0,oldState:0}),H2=os(F2),q2=[9,13,27,32],Ou=Ma&&"CompositionEvent"in window,el=null;Ma&&"documentMode"in document&&(el=document.documentMode);var V2=Ma&&"TextEvent"in window&&!el,Wp=Ma&&(!Ou||el&&8<el&&11>=el),Xp=" ",Zp=!1;function Kp(n,i){switch(n){case"keyup":return q2.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Wr=!1;function $2(n,i){switch(n){case"compositionend":return Jp(i);case"keypress":return i.which!==32?null:(Zp=!0,Xp);case"textInput":return n=i.data,n===Xp&&Zp?null:n;default:return null}}function I2(n,i){if(Wr)return n==="compositionend"||!Ou&&Kp(n,i)?(n=$p(),Go=Tu=yn=null,Wr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Wp&&i.locale!=="ko"?null:i.data;default:return null}}var Q2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eg(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Q2[n.type]:i==="textarea"}function tg(n,i,c,h){Yr?Gr?Gr.push(h):Gr=[h]:Yr=h,i=Hc(i,"onChange"),0<i.length&&(c=new Zo("onChange","change",null,c,h),n.push({event:c,listeners:i}))}var tl=null,sl=null;function Y2(n){P0(n,0)}function Jo(n){var i=be(n);if(zp(i))return n}function sg(n,i){if(n==="change")return i}var ag=!1;if(Ma){var zu;if(Ma){var Pu="oninput"in document;if(!Pu){var ng=document.createElement("div");ng.setAttribute("oninput","return;"),Pu=typeof ng.oninput=="function"}zu=Pu}else zu=!1;ag=zu&&(!document.documentMode||9<document.documentMode)}function rg(){tl&&(tl.detachEvent("onpropertychange",ig),sl=tl=null)}function ig(n){if(n.propertyName==="value"&&Jo(sl)){var i=[];tg(i,sl,n,_u(n)),Vp(Y2,i)}}function G2(n,i,c){n==="focusin"?(rg(),tl=i,sl=c,tl.attachEvent("onpropertychange",ig)):n==="focusout"&&rg()}function W2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Jo(sl)}function X2(n,i){if(n==="click")return Jo(i)}function Z2(n,i){if(n==="input"||n==="change")return Jo(i)}function K2(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Ss=typeof Object.is=="function"?Object.is:K2;function al(n,i){if(Ss(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var c=Object.keys(n),h=Object.keys(i);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var g=c[h];if(!fn.call(i,g)||!Ss(n[g],i[g]))return!1}return!0}function lg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function og(n,i){var c=lg(n);n=0;for(var h;c;){if(c.nodeType===3){if(h=n+c.textContent.length,n<=i&&h>=i)return{node:c,offset:i-n};n=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=lg(c)}}function cg(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?cg(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function dg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Qo(n.document);i instanceof n.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)n=i.contentWindow;else break;i=Qo(n.document)}return i}function Uu(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var J2=Ma&&"documentMode"in document&&11>=document.documentMode,Xr=null,Bu=null,nl=null,Fu=!1;function ug(n,i,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Fu||Xr==null||Xr!==Qo(h)||(h=Xr,"selectionStart"in h&&Uu(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),nl&&al(nl,h)||(nl=h,h=Hc(Bu,"onSelect"),0<h.length&&(i=new Zo("onSelect","select",null,i,c),n.push({event:i,listeners:h}),i.target=Xr)))}function nr(n,i){var c={};return c[n.toLowerCase()]=i.toLowerCase(),c["Webkit"+n]="webkit"+i,c["Moz"+n]="moz"+i,c}var Zr={animationend:nr("Animation","AnimationEnd"),animationiteration:nr("Animation","AnimationIteration"),animationstart:nr("Animation","AnimationStart"),transitionrun:nr("Transition","TransitionRun"),transitionstart:nr("Transition","TransitionStart"),transitioncancel:nr("Transition","TransitionCancel"),transitionend:nr("Transition","TransitionEnd")},Hu={},hg={};Ma&&(hg=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function rr(n){if(Hu[n])return Hu[n];if(!Zr[n])return n;var i=Zr[n],c;for(c in i)if(i.hasOwnProperty(c)&&c in hg)return Hu[n]=i[c];return n}var mg=rr("animationend"),fg=rr("animationiteration"),pg=rr("animationstart"),ew=rr("transitionrun"),tw=rr("transitionstart"),sw=rr("transitioncancel"),gg=rr("transitionend"),xg=new Map,qu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qu.push("scrollEnd");function Ks(n,i){xg.set(n,i),Ta(i,[n])}var ec=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Us=[],Kr=0,Vu=0;function tc(){for(var n=Kr,i=Vu=Kr=0;i<n;){var c=Us[i];Us[i++]=null;var h=Us[i];Us[i++]=null;var g=Us[i];Us[i++]=null;var x=Us[i];if(Us[i++]=null,h!==null&&g!==null){var k=h.pending;k===null?g.next=g:(g.next=k.next,k.next=g),h.pending=g}x!==0&&yg(c,g,x)}}function sc(n,i,c,h){Us[Kr++]=n,Us[Kr++]=i,Us[Kr++]=c,Us[Kr++]=h,Vu|=h,n.lanes|=h,n=n.alternate,n!==null&&(n.lanes|=h)}function $u(n,i,c,h){return sc(n,i,c,h),ac(n)}function ir(n,i){return sc(n,null,null,i),ac(n)}function yg(n,i,c){n.lanes|=c;var h=n.alternate;h!==null&&(h.lanes|=c);for(var g=!1,x=n.return;x!==null;)x.childLanes|=c,h=x.alternate,h!==null&&(h.childLanes|=c),x.tag===22&&(n=x.stateNode,n===null||n._visibility&1||(g=!0)),n=x,x=x.return;return n.tag===3?(x=n.stateNode,g&&i!==null&&(g=31-At(c),n=x.hiddenUpdates,h=n[g],h===null?n[g]=[i]:h.push(i),i.lane=c|536870912),x):null}function ac(n){if(50<kl)throw kl=0,Jh=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Jr={};function aw(n,i,c,h){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(n,i,c,h){return new aw(n,i,c,h)}function Iu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function La(n,i){var c=n.alternate;return c===null?(c=Cs(n.tag,i,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=i,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&65011712,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,i=n.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function bg(n,i){n.flags&=65011714;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,i=c.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function nc(n,i,c,h,g,x){var k=0;if(h=n,typeof n=="function")Iu(n)&&(k=1);else if(typeof n=="string")k=oN(n,c,he.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case H:return n=Cs(31,c,i,g),n.elementType=H,n.lanes=x,n;case C:return lr(c.children,g,x,i);case N:k=8,g|=24;break;case D:return n=Cs(12,c,i,g|2),n.elementType=D,n.lanes=x,n;case w:return n=Cs(13,c,i,g),n.elementType=w,n.lanes=x,n;case _:return n=Cs(19,c,i,g),n.elementType=_,n.lanes=x,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case A:k=10;break e;case E:k=9;break e;case T:k=11;break e;case R:k=14;break e;case z:k=16,h=null;break e}k=29,c=Error(r(130,n===null?"null":typeof n,"")),h=null}return i=Cs(k,c,i,g),i.elementType=n,i.type=h,i.lanes=x,i}function lr(n,i,c,h){return n=Cs(7,n,h,i),n.lanes=c,n}function Qu(n,i,c){return n=Cs(6,n,null,i),n.lanes=c,n}function vg(n){var i=Cs(18,null,null,0);return i.stateNode=n,i}function Yu(n,i,c){return i=Cs(4,n.children!==null?n.children:[],n.key,i),i.lanes=c,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var jg=new WeakMap;function Bs(n,i){if(typeof n=="object"&&n!==null){var c=jg.get(n);return c!==void 0?c:(i={value:n,source:i,stack:mn(i)},jg.set(n,i),i)}return{value:n,source:i,stack:mn(i)}}var ei=[],ti=0,rc=null,rl=0,Fs=[],Hs=0,bn=null,ga=1,xa="";function Oa(n,i){ei[ti++]=rl,ei[ti++]=rc,rc=n,rl=i}function wg(n,i,c){Fs[Hs++]=ga,Fs[Hs++]=xa,Fs[Hs++]=bn,bn=n;var h=ga;n=xa;var g=32-At(h)-1;h&=~(1<<g),c+=1;var x=32-At(i)+g;if(30<x){var k=g-g%5;x=(h&(1<<k)-1).toString(32),h>>=k,g-=k,ga=1<<32-At(i)+g|c<<g|h,xa=x+n}else ga=1<<x|c<<g|h,xa=n}function Gu(n){n.return!==null&&(Oa(n,1),wg(n,1,0))}function Wu(n){for(;n===rc;)rc=ei[--ti],ei[ti]=null,rl=ei[--ti],ei[ti]=null;for(;n===bn;)bn=Fs[--Hs],Fs[Hs]=null,xa=Fs[--Hs],Fs[Hs]=null,ga=Fs[--Hs],Fs[Hs]=null}function Ng(n,i){Fs[Hs++]=ga,Fs[Hs++]=xa,Fs[Hs++]=bn,ga=i.id,xa=i.overflow,bn=n}var Gt=null,ut=null,Ie=!1,vn=null,qs=!1,Xu=Error(r(519));function jn(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw il(Bs(i,n)),Xu}function Sg(n){var i=n.stateNode,c=n.type,h=n.memoizedProps;switch(i[Ft]=n,i[Kt]=h,c){case"dialog":Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":case"embed":Ue("load",i);break;case"video":case"audio":for(c=0;c<Al.length;c++)Ue(Al[c],i);break;case"source":Ue("error",i);break;case"img":case"image":case"link":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"input":Ue("invalid",i),Pp(i,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Ue("invalid",i);break;case"textarea":Ue("invalid",i),Bp(i,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||h.suppressHydrationWarning===!0||H0(i.textContent,c)?(h.popover!=null&&(Ue("beforetoggle",i),Ue("toggle",i)),h.onScroll!=null&&Ue("scroll",i),h.onScrollEnd!=null&&Ue("scrollend",i),h.onClick!=null&&(i.onclick=Da),i=!0):i=!1,i||jn(n,!0)}function Cg(n){for(Gt=n.return;Gt;)switch(Gt.tag){case 5:case 31:case 13:qs=!1;return;case 27:case 3:qs=!0;return;default:Gt=Gt.return}}function si(n){if(n!==Gt)return!1;if(!Ie)return Cg(n),Ie=!0,!1;var i=n.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||fm(n.type,n.memoizedProps)),c=!c),c&&ut&&jn(n),Cg(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ut=X0(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ut=X0(n)}else i===27?(i=ut,On(n.type)?(n=bm,bm=null,ut=n):ut=i):ut=Gt?$s(n.stateNode.nextSibling):null;return!0}function or(){ut=Gt=null,Ie=!1}function Zu(){var n=vn;return n!==null&&(hs===null?hs=n:hs.push.apply(hs,n),vn=null),n}function il(n){vn===null?vn=[n]:vn.push(n)}var Ku=P(null),cr=null,za=null;function wn(n,i,c){de(Ku,i._currentValue),i._currentValue=c}function Pa(n){n._currentValue=Ku.current,W(Ku)}function Ju(n,i,c){for(;n!==null;){var h=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),n===c)break;n=n.return}}function eh(n,i,c,h){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var x=g.dependencies;if(x!==null){var k=g.child;x=x.firstContext;e:for(;x!==null;){var M=x;x=g;for(var F=0;F<i.length;F++)if(M.context===i[F]){x.lanes|=c,M=x.alternate,M!==null&&(M.lanes|=c),Ju(x.return,c,n),h||(k=null);break e}x=M.next}}else if(g.tag===18){if(k=g.return,k===null)throw Error(r(341));k.lanes|=c,x=k.alternate,x!==null&&(x.lanes|=c),Ju(k,c,n),k=null}else k=g.child;if(k!==null)k.return=g;else for(k=g;k!==null;){if(k===n){k=null;break}if(g=k.sibling,g!==null){g.return=k.return,k=g;break}k=k.return}g=k}}function ai(n,i,c,h){n=null;for(var g=i,x=!1;g!==null;){if(!x){if((g.flags&524288)!==0)x=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var k=g.alternate;if(k===null)throw Error(r(387));if(k=k.memoizedProps,k!==null){var M=g.type;Ss(g.pendingProps.value,k.value)||(n!==null?n.push(M):n=[M])}}else if(g===Oe.current){if(k=g.alternate,k===null)throw Error(r(387));k.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(Ml):n=[Ml])}g=g.return}n!==null&&eh(i,n,c,h),i.flags|=262144}function ic(n){for(n=n.firstContext;n!==null;){if(!Ss(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function dr(n){cr=n,za=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Wt(n){return kg(cr,n)}function lc(n,i){return cr===null&&dr(n),kg(n,i)}function kg(n,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},za===null){if(n===null)throw Error(r(308));za=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else za=za.next=i;return c}var nw=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(c,h){n.push(h)}};this.abort=function(){i.aborted=!0,n.forEach(function(c){return c()})}},rw=s.unstable_scheduleCallback,iw=s.unstable_NormalPriority,Et={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function th(){return{controller:new nw,data:new Map,refCount:0}}function ll(n){n.refCount--,n.refCount===0&&rw(iw,function(){n.controller.abort()})}var ol=null,sh=0,ni=0,ri=null;function lw(n,i){if(ol===null){var c=ol=[];sh=0,ni=rm(),ri={status:"pending",value:void 0,then:function(h){c.push(h)}}}return sh++,i.then(_g,_g),i}function _g(){if(--sh===0&&ol!==null){ri!==null&&(ri.status="fulfilled");var n=ol;ol=null,ni=0,ri=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function ow(n,i){var c=[],h={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return n.then(function(){h.status="fulfilled",h.value=i;for(var g=0;g<c.length;g++)(0,c[g])(i)},function(g){for(h.status="rejected",h.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),h}var Ag=B.S;B.S=function(n,i){u0=me(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&lw(n,i),Ag!==null&&Ag(n,i)};var ur=P(null);function ah(){var n=ur.current;return n!==null?n:dt.pooledCache}function oc(n,i){i===null?de(ur,ur.current):de(ur,i.pool)}function Eg(){var n=ah();return n===null?null:{parent:Et._currentValue,pool:n}}var ii=Error(r(460)),nh=Error(r(474)),cc=Error(r(542)),dc={then:function(){}};function Tg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Rg(n,i,c){switch(c=n[c],c===void 0?n.push(i):c!==i&&(i.then(Da,Da),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Mg(n),n;default:if(typeof i.status=="string")i.then(Da,Da);else{if(n=dt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(h){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=h}},function(h){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=h}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Mg(n),n}throw mr=i,ii}}function hr(n){try{var i=n._init;return i(n._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(mr=c,ii):c}}var mr=null;function Dg(){if(mr===null)throw Error(r(459));var n=mr;return mr=null,n}function Mg(n){if(n===ii||n===cc)throw Error(r(483))}var li=null,cl=0;function uc(n){var i=cl;return cl+=1,li===null&&(li=[]),Rg(li,n,i)}function dl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function hc(n,i){throw i.$$typeof===v?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Lg(n){function i(X,Q){if(n){var K=X.deletions;K===null?(X.deletions=[Q],X.flags|=16):K.push(Q)}}function c(X,Q){if(!n)return null;for(;Q!==null;)i(X,Q),Q=Q.sibling;return null}function h(X){for(var Q=new Map;X!==null;)X.key!==null?Q.set(X.key,X):Q.set(X.index,X),X=X.sibling;return Q}function g(X,Q){return X=La(X,Q),X.index=0,X.sibling=null,X}function x(X,Q,K){return X.index=K,n?(K=X.alternate,K!==null?(K=K.index,K<Q?(X.flags|=67108866,Q):K):(X.flags|=67108866,Q)):(X.flags|=1048576,Q)}function k(X){return n&&X.alternate===null&&(X.flags|=67108866),X}function M(X,Q,K,oe){return Q===null||Q.tag!==6?(Q=Qu(K,X.mode,oe),Q.return=X,Q):(Q=g(Q,K),Q.return=X,Q)}function F(X,Q,K,oe){var Ce=K.type;return Ce===C?le(X,Q,K.props.children,oe,K.key):Q!==null&&(Q.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===z&&hr(Ce)===Q.type)?(Q=g(Q,K.props),dl(Q,K),Q.return=X,Q):(Q=nc(K.type,K.key,K.props,null,X.mode,oe),dl(Q,K),Q.return=X,Q)}function J(X,Q,K,oe){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==K.containerInfo||Q.stateNode.implementation!==K.implementation?(Q=Yu(K,X.mode,oe),Q.return=X,Q):(Q=g(Q,K.children||[]),Q.return=X,Q)}function le(X,Q,K,oe,Ce){return Q===null||Q.tag!==7?(Q=lr(K,X.mode,oe,Ce),Q.return=X,Q):(Q=g(Q,K),Q.return=X,Q)}function ce(X,Q,K){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=Qu(""+Q,X.mode,K),Q.return=X,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case j:return K=nc(Q.type,Q.key,Q.props,null,X.mode,K),dl(K,Q),K.return=X,K;case S:return Q=Yu(Q,X.mode,K),Q.return=X,Q;case z:return Q=hr(Q),ce(X,Q,K)}if(Z(Q)||U(Q))return Q=lr(Q,X.mode,K,null),Q.return=X,Q;if(typeof Q.then=="function")return ce(X,uc(Q),K);if(Q.$$typeof===A)return ce(X,lc(X,Q),K);hc(X,Q)}return null}function te(X,Q,K,oe){var Ce=Q!==null?Q.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ce!==null?null:M(X,Q,""+K,oe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case j:return K.key===Ce?F(X,Q,K,oe):null;case S:return K.key===Ce?J(X,Q,K,oe):null;case z:return K=hr(K),te(X,Q,K,oe)}if(Z(K)||U(K))return Ce!==null?null:le(X,Q,K,oe,null);if(typeof K.then=="function")return te(X,Q,uc(K),oe);if(K.$$typeof===A)return te(X,Q,lc(X,K),oe);hc(X,K)}return null}function ae(X,Q,K,oe,Ce){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return X=X.get(K)||null,M(Q,X,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case j:return X=X.get(oe.key===null?K:oe.key)||null,F(Q,X,oe,Ce);case S:return X=X.get(oe.key===null?K:oe.key)||null,J(Q,X,oe,Ce);case z:return oe=hr(oe),ae(X,Q,K,oe,Ce)}if(Z(oe)||U(oe))return X=X.get(K)||null,le(Q,X,oe,Ce,null);if(typeof oe.then=="function")return ae(X,Q,K,uc(oe),Ce);if(oe.$$typeof===A)return ae(X,Q,K,lc(Q,oe),Ce);hc(Q,oe)}return null}function ve(X,Q,K,oe){for(var Ce=null,Ye=null,Ne=Q,Me=Q=0,He=null;Ne!==null&&Me<K.length;Me++){Ne.index>Me?(He=Ne,Ne=null):He=Ne.sibling;var Ge=te(X,Ne,K[Me],oe);if(Ge===null){Ne===null&&(Ne=He);break}n&&Ne&&Ge.alternate===null&&i(X,Ne),Q=x(Ge,Q,Me),Ye===null?Ce=Ge:Ye.sibling=Ge,Ye=Ge,Ne=He}if(Me===K.length)return c(X,Ne),Ie&&Oa(X,Me),Ce;if(Ne===null){for(;Me<K.length;Me++)Ne=ce(X,K[Me],oe),Ne!==null&&(Q=x(Ne,Q,Me),Ye===null?Ce=Ne:Ye.sibling=Ne,Ye=Ne);return Ie&&Oa(X,Me),Ce}for(Ne=h(Ne);Me<K.length;Me++)He=ae(Ne,X,Me,K[Me],oe),He!==null&&(n&&He.alternate!==null&&Ne.delete(He.key===null?Me:He.key),Q=x(He,Q,Me),Ye===null?Ce=He:Ye.sibling=He,Ye=He);return n&&Ne.forEach(function(Fn){return i(X,Fn)}),Ie&&Oa(X,Me),Ce}function _e(X,Q,K,oe){if(K==null)throw Error(r(151));for(var Ce=null,Ye=null,Ne=Q,Me=Q=0,He=null,Ge=K.next();Ne!==null&&!Ge.done;Me++,Ge=K.next()){Ne.index>Me?(He=Ne,Ne=null):He=Ne.sibling;var Fn=te(X,Ne,Ge.value,oe);if(Fn===null){Ne===null&&(Ne=He);break}n&&Ne&&Fn.alternate===null&&i(X,Ne),Q=x(Fn,Q,Me),Ye===null?Ce=Fn:Ye.sibling=Fn,Ye=Fn,Ne=He}if(Ge.done)return c(X,Ne),Ie&&Oa(X,Me),Ce;if(Ne===null){for(;!Ge.done;Me++,Ge=K.next())Ge=ce(X,Ge.value,oe),Ge!==null&&(Q=x(Ge,Q,Me),Ye===null?Ce=Ge:Ye.sibling=Ge,Ye=Ge);return Ie&&Oa(X,Me),Ce}for(Ne=h(Ne);!Ge.done;Me++,Ge=K.next())Ge=ae(Ne,X,Me,Ge.value,oe),Ge!==null&&(n&&Ge.alternate!==null&&Ne.delete(Ge.key===null?Me:Ge.key),Q=x(Ge,Q,Me),Ye===null?Ce=Ge:Ye.sibling=Ge,Ye=Ge);return n&&Ne.forEach(function(bN){return i(X,bN)}),Ie&&Oa(X,Me),Ce}function ot(X,Q,K,oe){if(typeof K=="object"&&K!==null&&K.type===C&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case j:e:{for(var Ce=K.key;Q!==null;){if(Q.key===Ce){if(Ce=K.type,Ce===C){if(Q.tag===7){c(X,Q.sibling),oe=g(Q,K.props.children),oe.return=X,X=oe;break e}}else if(Q.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===z&&hr(Ce)===Q.type){c(X,Q.sibling),oe=g(Q,K.props),dl(oe,K),oe.return=X,X=oe;break e}c(X,Q);break}else i(X,Q);Q=Q.sibling}K.type===C?(oe=lr(K.props.children,X.mode,oe,K.key),oe.return=X,X=oe):(oe=nc(K.type,K.key,K.props,null,X.mode,oe),dl(oe,K),oe.return=X,X=oe)}return k(X);case S:e:{for(Ce=K.key;Q!==null;){if(Q.key===Ce)if(Q.tag===4&&Q.stateNode.containerInfo===K.containerInfo&&Q.stateNode.implementation===K.implementation){c(X,Q.sibling),oe=g(Q,K.children||[]),oe.return=X,X=oe;break e}else{c(X,Q);break}else i(X,Q);Q=Q.sibling}oe=Yu(K,X.mode,oe),oe.return=X,X=oe}return k(X);case z:return K=hr(K),ot(X,Q,K,oe)}if(Z(K))return ve(X,Q,K,oe);if(U(K)){if(Ce=U(K),typeof Ce!="function")throw Error(r(150));return K=Ce.call(K),_e(X,Q,K,oe)}if(typeof K.then=="function")return ot(X,Q,uc(K),oe);if(K.$$typeof===A)return ot(X,Q,lc(X,K),oe);hc(X,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,Q!==null&&Q.tag===6?(c(X,Q.sibling),oe=g(Q,K),oe.return=X,X=oe):(c(X,Q),oe=Qu(K,X.mode,oe),oe.return=X,X=oe),k(X)):c(X,Q)}return function(X,Q,K,oe){try{cl=0;var Ce=ot(X,Q,K,oe);return li=null,Ce}catch(Ne){if(Ne===ii||Ne===cc)throw Ne;var Ye=Cs(29,Ne,null,X.mode);return Ye.lanes=oe,Ye.return=X,Ye}finally{}}}var fr=Lg(!0),Og=Lg(!1),Nn=!1;function rh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ih(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Sn(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Cn(n,i,c){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(We&2)!==0){var g=h.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),h.pending=i,i=ac(n),yg(n,null,c),i}return sc(n,h,i,c),ac(n)}function ul(n,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var h=i.lanes;h&=n.pendingLanes,c|=h,i.lanes=c,sr(n,c)}}function lh(n,i){var c=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var g=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var k={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};x===null?g=x=k:x=x.next=k,c=c.next}while(c!==null);x===null?g=x=i:x=x.next=i}else g=x=i;c={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:x,shared:h.shared,callbacks:h.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=i:n.next=i,c.lastBaseUpdate=i}var oh=!1;function hl(){if(oh){var n=ri;if(n!==null)throw n}}function ml(n,i,c,h){oh=!1;var g=n.updateQueue;Nn=!1;var x=g.firstBaseUpdate,k=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var F=M,J=F.next;F.next=null,k===null?x=J:k.next=J,k=F;var le=n.alternate;le!==null&&(le=le.updateQueue,M=le.lastBaseUpdate,M!==k&&(M===null?le.firstBaseUpdate=J:M.next=J,le.lastBaseUpdate=F))}if(x!==null){var ce=g.baseState;k=0,le=J=F=null,M=x;do{var te=M.lane&-536870913,ae=te!==M.lane;if(ae?(Fe&te)===te:(h&te)===te){te!==0&&te===ni&&(oh=!0),le!==null&&(le=le.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var ve=n,_e=M;te=i;var ot=c;switch(_e.tag){case 1:if(ve=_e.payload,typeof ve=="function"){ce=ve.call(ot,ce,te);break e}ce=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=_e.payload,te=typeof ve=="function"?ve.call(ot,ce,te):ve,te==null)break e;ce=y({},ce,te);break e;case 2:Nn=!0}}te=M.callback,te!==null&&(n.flags|=64,ae&&(n.flags|=8192),ae=g.callbacks,ae===null?g.callbacks=[te]:ae.push(te))}else ae={lane:te,tag:M.tag,payload:M.payload,callback:M.callback,next:null},le===null?(J=le=ae,F=ce):le=le.next=ae,k|=te;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;ae=M,M=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);le===null&&(F=ce),g.baseState=F,g.firstBaseUpdate=J,g.lastBaseUpdate=le,x===null&&(g.shared.lanes=0),Tn|=k,n.lanes=k,n.memoizedState=ce}}function zg(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function Pg(n,i){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)zg(c[n],i)}var oi=P(null),mc=P(0);function Ug(n,i){n=Qa,de(mc,n),de(oi,i),Qa=n|i.baseLanes}function ch(){de(mc,Qa),de(oi,oi.current)}function dh(){Qa=mc.current,W(oi),W(mc)}var ks=P(null),Vs=null;function kn(n){var i=n.alternate;de(Nt,Nt.current&1),de(ks,n),Vs===null&&(i===null||oi.current!==null||i.memoizedState!==null)&&(Vs=n)}function uh(n){de(Nt,Nt.current),de(ks,n),Vs===null&&(Vs=n)}function Bg(n){n.tag===22?(de(Nt,Nt.current),de(ks,n),Vs===null&&(Vs=n)):_n()}function _n(){de(Nt,Nt.current),de(ks,ks.current)}function _s(n){W(ks),Vs===n&&(Vs=null),W(Nt)}var Nt=P(0);function fc(n){for(var i=n;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||xm(c)||ym(c)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ua=0,Re=null,it=null,Tt=null,pc=!1,ci=!1,pr=!1,gc=0,fl=0,di=null,cw=0;function bt(){throw Error(r(321))}function hh(n,i){if(i===null)return!1;for(var c=0;c<i.length&&c<n.length;c++)if(!Ss(n[c],i[c]))return!1;return!0}function mh(n,i,c,h,g,x){return Ua=x,Re=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,B.H=n===null||n.memoizedState===null?wx:Ah,pr=!1,x=c(h,g),pr=!1,ci&&(x=Hg(i,c,h,g)),Fg(n),x}function Fg(n){B.H=xl;var i=it!==null&&it.next!==null;if(Ua=0,Tt=it=Re=null,pc=!1,fl=0,di=null,i)throw Error(r(300));n===null||Rt||(n=n.dependencies,n!==null&&ic(n)&&(Rt=!0))}function Hg(n,i,c,h){Re=n;var g=0;do{if(ci&&(di=null),fl=0,ci=!1,25<=g)throw Error(r(301));if(g+=1,Tt=it=null,n.updateQueue!=null){var x=n.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}B.H=Nx,x=i(c,h)}while(ci);return x}function dw(){var n=B.H,i=n.useState()[0];return i=typeof i.then=="function"?pl(i):i,n=n.useState()[0],(it!==null?it.memoizedState:null)!==n&&(Re.flags|=1024),i}function fh(){var n=gc!==0;return gc=0,n}function ph(n,i,c){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~c}function gh(n){if(pc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}pc=!1}Ua=0,Tt=it=Re=null,ci=!1,fl=gc=0,di=null}function is(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Re.memoizedState=Tt=n:Tt=Tt.next=n,Tt}function St(){if(it===null){var n=Re.alternate;n=n!==null?n.memoizedState:null}else n=it.next;var i=Tt===null?Re.memoizedState:Tt.next;if(i!==null)Tt=i,it=n;else{if(n===null)throw Re.alternate===null?Error(r(467)):Error(r(310));it=n,n={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Tt===null?Re.memoizedState=Tt=n:Tt=Tt.next=n}return Tt}function xc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pl(n){var i=fl;return fl+=1,di===null&&(di=[]),n=Rg(di,n,i),i=Re,(Tt===null?i.memoizedState:Tt.next)===null&&(i=i.alternate,B.H=i===null||i.memoizedState===null?wx:Ah),n}function yc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return pl(n);if(n.$$typeof===A)return Wt(n)}throw Error(r(438,String(n)))}function xh(n){var i=null,c=Re.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var h=Re.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(i={data:h.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=xc(),Re.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(n),h=0;h<n;h++)c[h]=q;return i.index++,c}function Ba(n,i){return typeof i=="function"?i(n):i}function bc(n){var i=St();return yh(i,it,n)}function yh(n,i,c){var h=n.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=c;var g=n.baseQueue,x=h.pending;if(x!==null){if(g!==null){var k=g.next;g.next=x.next,x.next=k}i.baseQueue=g=x,h.pending=null}if(x=n.baseState,g===null)n.memoizedState=x;else{i=g.next;var M=k=null,F=null,J=i,le=!1;do{var ce=J.lane&-536870913;if(ce!==J.lane?(Fe&ce)===ce:(Ua&ce)===ce){var te=J.revertLane;if(te===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ce===ni&&(le=!0);else if((Ua&te)===te){J=J.next,te===ni&&(le=!0);continue}else ce={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},F===null?(M=F=ce,k=x):F=F.next=ce,Re.lanes|=te,Tn|=te;ce=J.action,pr&&c(x,ce),x=J.hasEagerState?J.eagerState:c(x,ce)}else te={lane:ce,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},F===null?(M=F=te,k=x):F=F.next=te,Re.lanes|=ce,Tn|=ce;J=J.next}while(J!==null&&J!==i);if(F===null?k=x:F.next=M,!Ss(x,n.memoizedState)&&(Rt=!0,le&&(c=ri,c!==null)))throw c;n.memoizedState=x,n.baseState=k,n.baseQueue=F,h.lastRenderedState=x}return g===null&&(h.lanes=0),[n.memoizedState,h.dispatch]}function bh(n){var i=St(),c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=n;var h=c.dispatch,g=c.pending,x=i.memoizedState;if(g!==null){c.pending=null;var k=g=g.next;do x=n(x,k.action),k=k.next;while(k!==g);Ss(x,i.memoizedState)||(Rt=!0),i.memoizedState=x,i.baseQueue===null&&(i.baseState=x),c.lastRenderedState=x}return[x,h]}function qg(n,i,c){var h=Re,g=St(),x=Ie;if(x){if(c===void 0)throw Error(r(407));c=c()}else c=i();var k=!Ss((it||g).memoizedState,c);if(k&&(g.memoizedState=c,Rt=!0),g=g.queue,wh(Ig.bind(null,h,g,n),[n]),g.getSnapshot!==i||k||Tt!==null&&Tt.memoizedState.tag&1){if(h.flags|=2048,ui(9,{destroy:void 0},$g.bind(null,h,g,c,i),null),dt===null)throw Error(r(349));x||(Ua&127)!==0||Vg(h,i,c)}return c}function Vg(n,i,c){n.flags|=16384,n={getSnapshot:i,value:c},i=Re.updateQueue,i===null?(i=xc(),Re.updateQueue=i,i.stores=[n]):(c=i.stores,c===null?i.stores=[n]:c.push(n))}function $g(n,i,c,h){i.value=c,i.getSnapshot=h,Qg(i)&&Yg(n)}function Ig(n,i,c){return c(function(){Qg(i)&&Yg(n)})}function Qg(n){var i=n.getSnapshot;n=n.value;try{var c=i();return!Ss(n,c)}catch{return!0}}function Yg(n){var i=ir(n,2);i!==null&&ms(i,n,2)}function vh(n){var i=is();if(typeof n=="function"){var c=n;if(n=c(),pr){Os(!0);try{c()}finally{Os(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:n},i}function Gg(n,i,c,h){return n.baseState=c,yh(n,it,typeof h=="function"?h:Ba)}function uw(n,i,c,h,g){if(wc(n))throw Error(r(485));if(n=i.action,n!==null){var x={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){x.listeners.push(k)}};B.T!==null?c(!0):x.isTransition=!1,h(x),c=i.pending,c===null?(x.next=i.pending=x,Wg(i,x)):(x.next=c.next,i.pending=c.next=x)}}function Wg(n,i){var c=i.action,h=i.payload,g=n.state;if(i.isTransition){var x=B.T,k={};B.T=k;try{var M=c(g,h),F=B.S;F!==null&&F(k,M),Xg(n,i,M)}catch(J){jh(n,i,J)}finally{x!==null&&k.types!==null&&(x.types=k.types),B.T=x}}else try{x=c(g,h),Xg(n,i,x)}catch(J){jh(n,i,J)}}function Xg(n,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){Zg(n,i,h)},function(h){return jh(n,i,h)}):Zg(n,i,c)}function Zg(n,i,c){i.status="fulfilled",i.value=c,Kg(i),n.state=c,i=n.pending,i!==null&&(c=i.next,c===i?n.pending=null:(c=c.next,i.next=c,Wg(n,c)))}function jh(n,i,c){var h=n.pending;if(n.pending=null,h!==null){h=h.next;do i.status="rejected",i.reason=c,Kg(i),i=i.next;while(i!==h)}n.action=null}function Kg(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Jg(n,i){return i}function ex(n,i){if(Ie){var c=dt.formState;if(c!==null){e:{var h=Re;if(Ie){if(ut){t:{for(var g=ut,x=qs;g.nodeType!==8;){if(!x){g=null;break t}if(g=$s(g.nextSibling),g===null){g=null;break t}}x=g.data,g=x==="F!"||x==="F"?g:null}if(g){ut=$s(g.nextSibling),h=g.data==="F!";break e}}jn(h)}h=!1}h&&(i=c[0])}}return c=is(),c.memoizedState=c.baseState=i,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jg,lastRenderedState:i},c.queue=h,c=bx.bind(null,Re,h),h.dispatch=c,h=vh(!1),x=_h.bind(null,Re,!1,h.queue),h=is(),g={state:i,dispatch:null,action:n,pending:null},h.queue=g,c=uw.bind(null,Re,g,x,c),g.dispatch=c,h.memoizedState=n,[i,c,!1]}function tx(n){var i=St();return sx(i,it,n)}function sx(n,i,c){if(i=yh(n,i,Jg)[0],n=bc(Ba)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var h=pl(i)}catch(k){throw k===ii?cc:k}else h=i;i=St();var g=i.queue,x=g.dispatch;return c!==i.memoizedState&&(Re.flags|=2048,ui(9,{destroy:void 0},hw.bind(null,g,c),null)),[h,x,n]}function hw(n,i){n.action=i}function ax(n){var i=St(),c=it;if(c!==null)return sx(i,c,n);St(),i=i.memoizedState,c=St();var h=c.queue.dispatch;return c.memoizedState=n,[i,h,!1]}function ui(n,i,c,h){return n={tag:n,create:c,deps:h,inst:i,next:null},i=Re.updateQueue,i===null&&(i=xc(),Re.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=n.next=n:(h=c.next,c.next=n,n.next=h,i.lastEffect=n),n}function nx(){return St().memoizedState}function vc(n,i,c,h){var g=is();Re.flags|=n,g.memoizedState=ui(1|i,{destroy:void 0},c,h===void 0?null:h)}function jc(n,i,c,h){var g=St();h=h===void 0?null:h;var x=g.memoizedState.inst;it!==null&&h!==null&&hh(h,it.memoizedState.deps)?g.memoizedState=ui(i,x,c,h):(Re.flags|=n,g.memoizedState=ui(1|i,x,c,h))}function rx(n,i){vc(8390656,8,n,i)}function wh(n,i){jc(2048,8,n,i)}function mw(n){Re.flags|=4;var i=Re.updateQueue;if(i===null)i=xc(),Re.updateQueue=i,i.events=[n];else{var c=i.events;c===null?i.events=[n]:c.push(n)}}function ix(n){var i=St().memoizedState;return mw({ref:i,nextImpl:n}),function(){if((We&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function lx(n,i){return jc(4,2,n,i)}function ox(n,i){return jc(4,4,n,i)}function cx(n,i){if(typeof i=="function"){n=n();var c=i(n);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function dx(n,i,c){c=c!=null?c.concat([n]):null,jc(4,4,cx.bind(null,i,n),c)}function Nh(){}function ux(n,i){var c=St();i=i===void 0?null:i;var h=c.memoizedState;return i!==null&&hh(i,h[1])?h[0]:(c.memoizedState=[n,i],n)}function hx(n,i){var c=St();i=i===void 0?null:i;var h=c.memoizedState;if(i!==null&&hh(i,h[1]))return h[0];if(h=n(),pr){Os(!0);try{n()}finally{Os(!1)}}return c.memoizedState=[h,i],h}function Sh(n,i,c){return c===void 0||(Ua&1073741824)!==0&&(Fe&261930)===0?n.memoizedState=i:(n.memoizedState=c,n=m0(),Re.lanes|=n,Tn|=n,c)}function mx(n,i,c,h){return Ss(c,i)?c:oi.current!==null?(n=Sh(n,c,h),Ss(n,i)||(Rt=!0),n):(Ua&42)===0||(Ua&1073741824)!==0&&(Fe&261930)===0?(Rt=!0,n.memoizedState=c):(n=m0(),Re.lanes|=n,Tn|=n,i)}function fx(n,i,c,h,g){var x=L.p;L.p=x!==0&&8>x?x:8;var k=B.T,M={};B.T=M,_h(n,!1,i,c);try{var F=g(),J=B.S;if(J!==null&&J(M,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var le=ow(F,h);gl(n,i,le,Ts(n))}else gl(n,i,h,Ts(n))}catch(ce){gl(n,i,{then:function(){},status:"rejected",reason:ce},Ts())}finally{L.p=x,k!==null&&M.types!==null&&(k.types=M.types),B.T=k}}function fw(){}function Ch(n,i,c,h){if(n.tag!==5)throw Error(r(476));var g=px(n).queue;fx(n,g,i,Y,c===null?fw:function(){return gx(n),c(h)})}function px(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:Y},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:c},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function gx(n){var i=px(n);i.next===null&&(i=n.alternate.memoizedState),gl(n,i.next.queue,{},Ts())}function kh(){return Wt(Ml)}function xx(){return St().memoizedState}function yx(){return St().memoizedState}function pw(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var c=Ts();n=Sn(c);var h=Cn(i,n,c);h!==null&&(ms(h,i,c),ul(h,i,c)),i={cache:th()},n.payload=i;return}i=i.return}}function gw(n,i,c){var h=Ts();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},wc(n)?vx(i,c):(c=$u(n,i,c,h),c!==null&&(ms(c,n,h),jx(c,i,h)))}function bx(n,i,c){var h=Ts();gl(n,i,c,h)}function gl(n,i,c,h){var g={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(wc(n))vx(i,g);else{var x=n.alternate;if(n.lanes===0&&(x===null||x.lanes===0)&&(x=i.lastRenderedReducer,x!==null))try{var k=i.lastRenderedState,M=x(k,c);if(g.hasEagerState=!0,g.eagerState=M,Ss(M,k))return sc(n,i,g,0),dt===null&&tc(),!1}catch{}finally{}if(c=$u(n,i,g,h),c!==null)return ms(c,n,h),jx(c,i,h),!0}return!1}function _h(n,i,c,h){if(h={lane:2,revertLane:rm(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},wc(n)){if(i)throw Error(r(479))}else i=$u(n,c,h,2),i!==null&&ms(i,n,2)}function wc(n){var i=n.alternate;return n===Re||i!==null&&i===Re}function vx(n,i){ci=pc=!0;var c=n.pending;c===null?i.next=i:(i.next=c.next,c.next=i),n.pending=i}function jx(n,i,c){if((c&4194048)!==0){var h=i.lanes;h&=n.pendingLanes,c|=h,i.lanes=c,sr(n,c)}}var xl={readContext:Wt,use:yc,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useLayoutEffect:bt,useInsertionEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useSyncExternalStore:bt,useId:bt,useHostTransitionStatus:bt,useFormState:bt,useActionState:bt,useOptimistic:bt,useMemoCache:bt,useCacheRefresh:bt};xl.useEffectEvent=bt;var wx={readContext:Wt,use:yc,useCallback:function(n,i){return is().memoizedState=[n,i===void 0?null:i],n},useContext:Wt,useEffect:rx,useImperativeHandle:function(n,i,c){c=c!=null?c.concat([n]):null,vc(4194308,4,cx.bind(null,i,n),c)},useLayoutEffect:function(n,i){return vc(4194308,4,n,i)},useInsertionEffect:function(n,i){vc(4,2,n,i)},useMemo:function(n,i){var c=is();i=i===void 0?null:i;var h=n();if(pr){Os(!0);try{n()}finally{Os(!1)}}return c.memoizedState=[h,i],h},useReducer:function(n,i,c){var h=is();if(c!==void 0){var g=c(i);if(pr){Os(!0);try{c(i)}finally{Os(!1)}}}else g=i;return h.memoizedState=h.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},h.queue=n,n=n.dispatch=gw.bind(null,Re,n),[h.memoizedState,n]},useRef:function(n){var i=is();return n={current:n},i.memoizedState=n},useState:function(n){n=vh(n);var i=n.queue,c=bx.bind(null,Re,i);return i.dispatch=c,[n.memoizedState,c]},useDebugValue:Nh,useDeferredValue:function(n,i){var c=is();return Sh(c,n,i)},useTransition:function(){var n=vh(!1);return n=fx.bind(null,Re,n.queue,!0,!1),is().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,c){var h=Re,g=is();if(Ie){if(c===void 0)throw Error(r(407));c=c()}else{if(c=i(),dt===null)throw Error(r(349));(Fe&127)!==0||Vg(h,i,c)}g.memoizedState=c;var x={value:c,getSnapshot:i};return g.queue=x,rx(Ig.bind(null,h,x,n),[n]),h.flags|=2048,ui(9,{destroy:void 0},$g.bind(null,h,x,c,i),null),c},useId:function(){var n=is(),i=dt.identifierPrefix;if(Ie){var c=xa,h=ga;c=(h&~(1<<32-At(h)-1)).toString(32)+c,i="_"+i+"R_"+c,c=gc++,0<c&&(i+="H"+c.toString(32)),i+="_"}else c=cw++,i="_"+i+"r_"+c.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:kh,useFormState:ex,useActionState:ex,useOptimistic:function(n){var i=is();i.memoizedState=i.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=_h.bind(null,Re,!0,c),c.dispatch=i,[n,i]},useMemoCache:xh,useCacheRefresh:function(){return is().memoizedState=pw.bind(null,Re)},useEffectEvent:function(n){var i=is(),c={impl:n};return i.memoizedState=c,function(){if((We&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Ah={readContext:Wt,use:yc,useCallback:ux,useContext:Wt,useEffect:wh,useImperativeHandle:dx,useInsertionEffect:lx,useLayoutEffect:ox,useMemo:hx,useReducer:bc,useRef:nx,useState:function(){return bc(Ba)},useDebugValue:Nh,useDeferredValue:function(n,i){var c=St();return mx(c,it.memoizedState,n,i)},useTransition:function(){var n=bc(Ba)[0],i=St().memoizedState;return[typeof n=="boolean"?n:pl(n),i]},useSyncExternalStore:qg,useId:xx,useHostTransitionStatus:kh,useFormState:tx,useActionState:tx,useOptimistic:function(n,i){var c=St();return Gg(c,it,n,i)},useMemoCache:xh,useCacheRefresh:yx};Ah.useEffectEvent=ix;var Nx={readContext:Wt,use:yc,useCallback:ux,useContext:Wt,useEffect:wh,useImperativeHandle:dx,useInsertionEffect:lx,useLayoutEffect:ox,useMemo:hx,useReducer:bh,useRef:nx,useState:function(){return bh(Ba)},useDebugValue:Nh,useDeferredValue:function(n,i){var c=St();return it===null?Sh(c,n,i):mx(c,it.memoizedState,n,i)},useTransition:function(){var n=bh(Ba)[0],i=St().memoizedState;return[typeof n=="boolean"?n:pl(n),i]},useSyncExternalStore:qg,useId:xx,useHostTransitionStatus:kh,useFormState:ax,useActionState:ax,useOptimistic:function(n,i){var c=St();return it!==null?Gg(c,it,n,i):(c.baseState=n,[n,c.queue.dispatch])},useMemoCache:xh,useCacheRefresh:yx};Nx.useEffectEvent=ix;function Eh(n,i,c,h){i=n.memoizedState,c=c(h,i),c=c==null?i:y({},i,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var Th={enqueueSetState:function(n,i,c){n=n._reactInternals;var h=Ts(),g=Sn(h);g.payload=i,c!=null&&(g.callback=c),i=Cn(n,g,h),i!==null&&(ms(i,n,h),ul(i,n,h))},enqueueReplaceState:function(n,i,c){n=n._reactInternals;var h=Ts(),g=Sn(h);g.tag=1,g.payload=i,c!=null&&(g.callback=c),i=Cn(n,g,h),i!==null&&(ms(i,n,h),ul(i,n,h))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var c=Ts(),h=Sn(c);h.tag=2,i!=null&&(h.callback=i),i=Cn(n,h,c),i!==null&&(ms(i,n,c),ul(i,n,c))}};function Sx(n,i,c,h,g,x,k){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,x,k):i.prototype&&i.prototype.isPureReactComponent?!al(c,h)||!al(g,x):!0}function Cx(n,i,c,h){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,h),i.state!==n&&Th.enqueueReplaceState(i,i.state,null)}function gr(n,i){var c=i;if("ref"in i){c={};for(var h in i)h!=="ref"&&(c[h]=i[h])}if(n=n.defaultProps){c===i&&(c=y({},c));for(var g in n)c[g]===void 0&&(c[g]=n[g])}return c}function kx(n){ec(n)}function _x(n){console.error(n)}function Ax(n){ec(n)}function Nc(n,i){try{var c=n.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(h){setTimeout(function(){throw h})}}function Ex(n,i,c){try{var h=n.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Rh(n,i,c){return c=Sn(c),c.tag=3,c.payload={element:null},c.callback=function(){Nc(n,i)},c}function Tx(n){return n=Sn(n),n.tag=3,n}function Rx(n,i,c,h){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var x=h.value;n.payload=function(){return g(x)},n.callback=function(){Ex(i,c,h)}}var k=c.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(n.callback=function(){Ex(i,c,h),typeof g!="function"&&(Rn===null?Rn=new Set([this]):Rn.add(this));var M=h.stack;this.componentDidCatch(h.value,{componentStack:M!==null?M:""})})}function xw(n,i,c,h,g){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(i=c.alternate,i!==null&&ai(i,c,g,!0),c=ks.current,c!==null){switch(c.tag){case 31:case 13:return Vs===null?Oc():c.alternate===null&&vt===0&&(vt=3),c.flags&=-257,c.flags|=65536,c.lanes=g,h===dc?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([h]):i.add(h),sm(n,h,g)),!1;case 22:return c.flags|=65536,h===dc?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([h]):c.add(h)),sm(n,h,g)),!1}throw Error(r(435,c.tag))}return sm(n,h,g),Oc(),!1}if(Ie)return i=ks.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,h!==Xu&&(n=Error(r(422),{cause:h}),il(Bs(n,c)))):(h!==Xu&&(i=Error(r(423),{cause:h}),il(Bs(i,c))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,h=Bs(h,c),g=Rh(n.stateNode,h,g),lh(n,g),vt!==4&&(vt=2)),!1;var x=Error(r(520),{cause:h});if(x=Bs(x,c),Cl===null?Cl=[x]:Cl.push(x),vt!==4&&(vt=2),i===null)return!0;h=Bs(h,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,n=g&-g,c.lanes|=n,n=Rh(c.stateNode,h,n),lh(c,n),!1;case 1:if(i=c.type,x=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Rn===null||!Rn.has(x))))return c.flags|=65536,g&=-g,c.lanes|=g,g=Tx(g),Rx(g,n,c,h),lh(c,g),!1}c=c.return}while(c!==null);return!1}var Dh=Error(r(461)),Rt=!1;function Xt(n,i,c,h){i.child=n===null?Og(i,null,c,h):fr(i,n.child,c,h)}function Dx(n,i,c,h,g){c=c.render;var x=i.ref;if("ref"in h){var k={};for(var M in h)M!=="ref"&&(k[M]=h[M])}else k=h;return dr(i),h=mh(n,i,c,k,x,g),M=fh(),n!==null&&!Rt?(ph(n,i,g),Fa(n,i,g)):(Ie&&M&&Gu(i),i.flags|=1,Xt(n,i,h,g),i.child)}function Mx(n,i,c,h,g){if(n===null){var x=c.type;return typeof x=="function"&&!Iu(x)&&x.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=x,Lx(n,i,x,h,g)):(n=nc(c.type,null,h,i,i.mode,g),n.ref=i.ref,n.return=i,i.child=n)}if(x=n.child,!Fh(n,g)){var k=x.memoizedProps;if(c=c.compare,c=c!==null?c:al,c(k,h)&&n.ref===i.ref)return Fa(n,i,g)}return i.flags|=1,n=La(x,h),n.ref=i.ref,n.return=i,i.child=n}function Lx(n,i,c,h,g){if(n!==null){var x=n.memoizedProps;if(al(x,h)&&n.ref===i.ref)if(Rt=!1,i.pendingProps=h=x,Fh(n,g))(n.flags&131072)!==0&&(Rt=!0);else return i.lanes=n.lanes,Fa(n,i,g)}return Mh(n,i,c,h,g)}function Ox(n,i,c,h){var g=h.children,x=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((i.flags&128)!==0){if(x=x!==null?x.baseLanes|c:c,n!==null){for(h=i.child=n.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;h=g&~x}else h=0,i.child=null;return zx(n,i,x,c,h)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&oc(i,x!==null?x.cachePool:null),x!==null?Ug(i,x):ch(),Bg(i);else return h=i.lanes=536870912,zx(n,i,x!==null?x.baseLanes|c:c,c,h)}else x!==null?(oc(i,x.cachePool),Ug(i,x),_n(),i.memoizedState=null):(n!==null&&oc(i,null),ch(),_n());return Xt(n,i,g,c),i.child}function yl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function zx(n,i,c,h,g){var x=ah();return x=x===null?null:{parent:Et._currentValue,pool:x},i.memoizedState={baseLanes:c,cachePool:x},n!==null&&oc(i,null),ch(),Bg(i),n!==null&&ai(n,i,h,!0),i.childLanes=g,null}function Sc(n,i){return i=kc({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function Px(n,i,c){return fr(i,n.child,null,c),n=Sc(i,i.pendingProps),n.flags|=2,_s(i),i.memoizedState=null,n}function yw(n,i,c){var h=i.pendingProps,g=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Ie){if(h.mode==="hidden")return n=Sc(i,h),i.lanes=536870912,yl(null,n);if(uh(i),(n=ut)?(n=W0(n,qs),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:bn!==null?{id:ga,overflow:xa}:null,retryLane:536870912,hydrationErrors:null},c=vg(n),c.return=i,i.child=c,Gt=i,ut=null)):n=null,n===null)throw jn(i);return i.lanes=536870912,null}return Sc(i,h)}var x=n.memoizedState;if(x!==null){var k=x.dehydrated;if(uh(i),g)if(i.flags&256)i.flags&=-257,i=Px(n,i,c);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(Rt||ai(n,i,c,!1),g=(c&n.childLanes)!==0,Rt||g){if(h=dt,h!==null&&(k=Uo(h,c),k!==0&&k!==x.retryLane))throw x.retryLane=k,ir(n,k),ms(h,n,k),Dh;Oc(),i=Px(n,i,c)}else n=x.treeContext,ut=$s(k.nextSibling),Gt=i,Ie=!0,vn=null,qs=!1,n!==null&&Ng(i,n),i=Sc(i,h),i.flags|=4096;return i}return n=La(n.child,{mode:h.mode,children:h.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Cc(n,i){var c=i.ref;if(c===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(n===null||n.ref!==c)&&(i.flags|=4194816)}}function Mh(n,i,c,h,g){return dr(i),c=mh(n,i,c,h,void 0,g),h=fh(),n!==null&&!Rt?(ph(n,i,g),Fa(n,i,g)):(Ie&&h&&Gu(i),i.flags|=1,Xt(n,i,c,g),i.child)}function Ux(n,i,c,h,g,x){return dr(i),i.updateQueue=null,c=Hg(i,h,c,g),Fg(n),h=fh(),n!==null&&!Rt?(ph(n,i,x),Fa(n,i,x)):(Ie&&h&&Gu(i),i.flags|=1,Xt(n,i,c,x),i.child)}function Bx(n,i,c,h,g){if(dr(i),i.stateNode===null){var x=Jr,k=c.contextType;typeof k=="object"&&k!==null&&(x=Wt(k)),x=new c(h,x),i.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Th,i.stateNode=x,x._reactInternals=i,x=i.stateNode,x.props=h,x.state=i.memoizedState,x.refs={},rh(i),k=c.contextType,x.context=typeof k=="object"&&k!==null?Wt(k):Jr,x.state=i.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(Eh(i,c,k,h),x.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(k=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),k!==x.state&&Th.enqueueReplaceState(x,x.state,null),ml(i,h,x,g),hl(),x.state=i.memoizedState),typeof x.componentDidMount=="function"&&(i.flags|=4194308),h=!0}else if(n===null){x=i.stateNode;var M=i.memoizedProps,F=gr(c,M);x.props=F;var J=x.context,le=c.contextType;k=Jr,typeof le=="object"&&le!==null&&(k=Wt(le));var ce=c.getDerivedStateFromProps;le=typeof ce=="function"||typeof x.getSnapshotBeforeUpdate=="function",M=i.pendingProps!==M,le||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(M||J!==k)&&Cx(i,x,h,k),Nn=!1;var te=i.memoizedState;x.state=te,ml(i,h,x,g),hl(),J=i.memoizedState,M||te!==J||Nn?(typeof ce=="function"&&(Eh(i,c,ce,h),J=i.memoizedState),(F=Nn||Sx(i,c,F,h,te,J,k))?(le||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(i.flags|=4194308)):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=J),x.props=h,x.state=J,x.context=k,h=F):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{x=i.stateNode,ih(n,i),k=i.memoizedProps,le=gr(c,k),x.props=le,ce=i.pendingProps,te=x.context,J=c.contextType,F=Jr,typeof J=="object"&&J!==null&&(F=Wt(J)),M=c.getDerivedStateFromProps,(J=typeof M=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k!==ce||te!==F)&&Cx(i,x,h,F),Nn=!1,te=i.memoizedState,x.state=te,ml(i,h,x,g),hl();var ae=i.memoizedState;k!==ce||te!==ae||Nn||n!==null&&n.dependencies!==null&&ic(n.dependencies)?(typeof M=="function"&&(Eh(i,c,M,h),ae=i.memoizedState),(le=Nn||Sx(i,c,le,h,te,ae,F)||n!==null&&n.dependencies!==null&&ic(n.dependencies))?(J||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(h,ae,F),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(h,ae,F)),typeof x.componentDidUpdate=="function"&&(i.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof x.componentDidUpdate!="function"||k===n.memoizedProps&&te===n.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&te===n.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=ae),x.props=h,x.state=ae,x.context=F,h=le):(typeof x.componentDidUpdate!="function"||k===n.memoizedProps&&te===n.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&te===n.memoizedState||(i.flags|=1024),h=!1)}return x=h,Cc(n,i),h=(i.flags&128)!==0,x||h?(x=i.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:x.render(),i.flags|=1,n!==null&&h?(i.child=fr(i,n.child,null,g),i.child=fr(i,null,c,g)):Xt(n,i,c,g),i.memoizedState=x.state,n=i.child):n=Fa(n,i,g),n}function Fx(n,i,c,h){return or(),i.flags|=256,Xt(n,i,c,h),i.child}var Lh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Oh(n){return{baseLanes:n,cachePool:Eg()}}function zh(n,i,c){return n=n!==null?n.childLanes&~c:0,i&&(n|=Es),n}function Hx(n,i,c){var h=i.pendingProps,g=!1,x=(i.flags&128)!==0,k;if((k=x)||(k=n!==null&&n.memoizedState===null?!1:(Nt.current&2)!==0),k&&(g=!0,i.flags&=-129),k=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ie){if(g?kn(i):_n(),(n=ut)?(n=W0(n,qs),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:bn!==null?{id:ga,overflow:xa}:null,retryLane:536870912,hydrationErrors:null},c=vg(n),c.return=i,i.child=c,Gt=i,ut=null)):n=null,n===null)throw jn(i);return ym(n)?i.lanes=32:i.lanes=536870912,null}var M=h.children;return h=h.fallback,g?(_n(),g=i.mode,M=kc({mode:"hidden",children:M},g),h=lr(h,g,c,null),M.return=i,h.return=i,M.sibling=h,i.child=M,h=i.child,h.memoizedState=Oh(c),h.childLanes=zh(n,k,c),i.memoizedState=Lh,yl(null,h)):(kn(i),Ph(i,M))}var F=n.memoizedState;if(F!==null&&(M=F.dehydrated,M!==null)){if(x)i.flags&256?(kn(i),i.flags&=-257,i=Uh(n,i,c)):i.memoizedState!==null?(_n(),i.child=n.child,i.flags|=128,i=null):(_n(),M=h.fallback,g=i.mode,h=kc({mode:"visible",children:h.children},g),M=lr(M,g,c,null),M.flags|=2,h.return=i,M.return=i,h.sibling=M,i.child=h,fr(i,n.child,null,c),h=i.child,h.memoizedState=Oh(c),h.childLanes=zh(n,k,c),i.memoizedState=Lh,i=yl(null,h));else if(kn(i),ym(M)){if(k=M.nextSibling&&M.nextSibling.dataset,k)var J=k.dgst;k=J,h=Error(r(419)),h.stack="",h.digest=k,il({value:h,source:null,stack:null}),i=Uh(n,i,c)}else if(Rt||ai(n,i,c,!1),k=(c&n.childLanes)!==0,Rt||k){if(k=dt,k!==null&&(h=Uo(k,c),h!==0&&h!==F.retryLane))throw F.retryLane=h,ir(n,h),ms(k,n,h),Dh;xm(M)||Oc(),i=Uh(n,i,c)}else xm(M)?(i.flags|=192,i.child=n.child,i=null):(n=F.treeContext,ut=$s(M.nextSibling),Gt=i,Ie=!0,vn=null,qs=!1,n!==null&&Ng(i,n),i=Ph(i,h.children),i.flags|=4096);return i}return g?(_n(),M=h.fallback,g=i.mode,F=n.child,J=F.sibling,h=La(F,{mode:"hidden",children:h.children}),h.subtreeFlags=F.subtreeFlags&65011712,J!==null?M=La(J,M):(M=lr(M,g,c,null),M.flags|=2),M.return=i,h.return=i,h.sibling=M,i.child=h,yl(null,h),h=i.child,M=n.child.memoizedState,M===null?M=Oh(c):(g=M.cachePool,g!==null?(F=Et._currentValue,g=g.parent!==F?{parent:F,pool:F}:g):g=Eg(),M={baseLanes:M.baseLanes|c,cachePool:g}),h.memoizedState=M,h.childLanes=zh(n,k,c),i.memoizedState=Lh,yl(n.child,h)):(kn(i),c=n.child,n=c.sibling,c=La(c,{mode:"visible",children:h.children}),c.return=i,c.sibling=null,n!==null&&(k=i.deletions,k===null?(i.deletions=[n],i.flags|=16):k.push(n)),i.child=c,i.memoizedState=null,c)}function Ph(n,i){return i=kc({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function kc(n,i){return n=Cs(22,n,null,i),n.lanes=0,n}function Uh(n,i,c){return fr(i,n.child,null,c),n=Ph(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function qx(n,i,c){n.lanes|=i;var h=n.alternate;h!==null&&(h.lanes|=i),Ju(n.return,i,c)}function Bh(n,i,c,h,g,x){var k=n.memoizedState;k===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:g,treeForkCount:x}:(k.isBackwards=i,k.rendering=null,k.renderingStartTime=0,k.last=h,k.tail=c,k.tailMode=g,k.treeForkCount=x)}function Vx(n,i,c){var h=i.pendingProps,g=h.revealOrder,x=h.tail;h=h.children;var k=Nt.current,M=(k&2)!==0;if(M?(k=k&1|2,i.flags|=128):k&=1,de(Nt,k),Xt(n,i,h,c),h=Ie?rl:0,!M&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&qx(n,c,i);else if(n.tag===19)qx(n,c,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(c=i.child,g=null;c!==null;)n=c.alternate,n!==null&&fc(n)===null&&(g=c),c=c.sibling;c=g,c===null?(g=i.child,i.child=null):(g=c.sibling,c.sibling=null),Bh(i,!1,g,c,x,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=i.child,i.child=null;g!==null;){if(n=g.alternate,n!==null&&fc(n)===null){i.child=g;break}n=g.sibling,g.sibling=c,c=g,g=n}Bh(i,!0,c,null,x,h);break;case"together":Bh(i,!1,null,null,void 0,h);break;default:i.memoizedState=null}return i.child}function Fa(n,i,c){if(n!==null&&(i.dependencies=n.dependencies),Tn|=i.lanes,(c&i.childLanes)===0)if(n!==null){if(ai(n,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,c=La(n,n.pendingProps),i.child=c,c.return=i;n.sibling!==null;)n=n.sibling,c=c.sibling=La(n,n.pendingProps),c.return=i;c.sibling=null}return i.child}function Fh(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&ic(n)))}function bw(n,i,c){switch(i.tag){case 3:ft(i,i.stateNode.containerInfo),wn(i,Et,n.memoizedState.cache),or();break;case 27:case 5:Ut(i);break;case 4:ft(i,i.stateNode.containerInfo);break;case 10:wn(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,uh(i),null;break;case 13:var h=i.memoizedState;if(h!==null)return h.dehydrated!==null?(kn(i),i.flags|=128,null):(c&i.child.childLanes)!==0?Hx(n,i,c):(kn(i),n=Fa(n,i,c),n!==null?n.sibling:null);kn(i);break;case 19:var g=(n.flags&128)!==0;if(h=(c&i.childLanes)!==0,h||(ai(n,i,c,!1),h=(c&i.childLanes)!==0),g){if(h)return Vx(n,i,c);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),de(Nt,Nt.current),h)break;return null;case 22:return i.lanes=0,Ox(n,i,c,i.pendingProps);case 24:wn(i,Et,n.memoizedState.cache)}return Fa(n,i,c)}function $x(n,i,c){if(n!==null)if(n.memoizedProps!==i.pendingProps)Rt=!0;else{if(!Fh(n,c)&&(i.flags&128)===0)return Rt=!1,bw(n,i,c);Rt=(n.flags&131072)!==0}else Rt=!1,Ie&&(i.flags&1048576)!==0&&wg(i,rl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var h=i.pendingProps;if(n=hr(i.elementType),i.type=n,typeof n=="function")Iu(n)?(h=gr(n,h),i.tag=1,i=Bx(null,i,n,h,c)):(i.tag=0,i=Mh(null,i,n,h,c));else{if(n!=null){var g=n.$$typeof;if(g===T){i.tag=11,i=Dx(null,i,n,h,c);break e}else if(g===R){i.tag=14,i=Mx(null,i,n,h,c);break e}}throw i=fe(n)||n,Error(r(306,i,""))}}return i;case 0:return Mh(n,i,i.type,i.pendingProps,c);case 1:return h=i.type,g=gr(h,i.pendingProps),Bx(n,i,h,g,c);case 3:e:{if(ft(i,i.stateNode.containerInfo),n===null)throw Error(r(387));h=i.pendingProps;var x=i.memoizedState;g=x.element,ih(n,i),ml(i,h,null,c);var k=i.memoizedState;if(h=k.cache,wn(i,Et,h),h!==x.cache&&eh(i,[Et],c,!0),hl(),h=k.element,x.isDehydrated)if(x={element:h,isDehydrated:!1,cache:k.cache},i.updateQueue.baseState=x,i.memoizedState=x,i.flags&256){i=Fx(n,i,h,c);break e}else if(h!==g){g=Bs(Error(r(424)),i),il(g),i=Fx(n,i,h,c);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ut=$s(n.firstChild),Gt=i,Ie=!0,vn=null,qs=!0,c=Og(i,null,h,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(or(),h===g){i=Fa(n,i,c);break e}Xt(n,i,h,c)}i=i.child}return i;case 26:return Cc(n,i),n===null?(c=ty(i.type,null,i.pendingProps,null))?i.memoizedState=c:Ie||(c=i.type,n=i.pendingProps,h=qc(ke.current).createElement(c),h[Ft]=i,h[Kt]=n,Zt(h,c,n),Ze(h),i.stateNode=h):i.memoizedState=ty(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Ut(i),n===null&&Ie&&(h=i.stateNode=K0(i.type,i.pendingProps,ke.current),Gt=i,qs=!0,g=ut,On(i.type)?(bm=g,ut=$s(h.firstChild)):ut=g),Xt(n,i,i.pendingProps.children,c),Cc(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ie&&((g=h=ut)&&(h=Ww(h,i.type,i.pendingProps,qs),h!==null?(i.stateNode=h,Gt=i,ut=$s(h.firstChild),qs=!1,g=!0):g=!1),g||jn(i)),Ut(i),g=i.type,x=i.pendingProps,k=n!==null?n.memoizedProps:null,h=x.children,fm(g,x)?h=null:k!==null&&fm(g,k)&&(i.flags|=32),i.memoizedState!==null&&(g=mh(n,i,dw,null,null,c),Ml._currentValue=g),Cc(n,i),Xt(n,i,h,c),i.child;case 6:return n===null&&Ie&&((n=c=ut)&&(c=Xw(c,i.pendingProps,qs),c!==null?(i.stateNode=c,Gt=i,ut=null,n=!0):n=!1),n||jn(i)),null;case 13:return Hx(n,i,c);case 4:return ft(i,i.stateNode.containerInfo),h=i.pendingProps,n===null?i.child=fr(i,null,h,c):Xt(n,i,h,c),i.child;case 11:return Dx(n,i,i.type,i.pendingProps,c);case 7:return Xt(n,i,i.pendingProps,c),i.child;case 8:return Xt(n,i,i.pendingProps.children,c),i.child;case 12:return Xt(n,i,i.pendingProps.children,c),i.child;case 10:return h=i.pendingProps,wn(i,i.type,h.value),Xt(n,i,h.children,c),i.child;case 9:return g=i.type._context,h=i.pendingProps.children,dr(i),g=Wt(g),h=h(g),i.flags|=1,Xt(n,i,h,c),i.child;case 14:return Mx(n,i,i.type,i.pendingProps,c);case 15:return Lx(n,i,i.type,i.pendingProps,c);case 19:return Vx(n,i,c);case 31:return yw(n,i,c);case 22:return Ox(n,i,c,i.pendingProps);case 24:return dr(i),h=Wt(Et),n===null?(g=ah(),g===null&&(g=dt,x=th(),g.pooledCache=x,x.refCount++,x!==null&&(g.pooledCacheLanes|=c),g=x),i.memoizedState={parent:h,cache:g},rh(i),wn(i,Et,g)):((n.lanes&c)!==0&&(ih(n,i),ml(i,null,null,c),hl()),g=n.memoizedState,x=i.memoizedState,g.parent!==h?(g={parent:h,cache:h},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),wn(i,Et,h)):(h=x.cache,wn(i,Et,h),h!==g.cache&&eh(i,[Et],c,!0))),Xt(n,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Ha(n){n.flags|=4}function Hh(n,i,c,h,g){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(x0())n.flags|=8192;else throw mr=dc,nh}else n.flags&=-16777217}function Ix(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!iy(i))if(x0())n.flags|=8192;else throw mr=dc,nh}function _c(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Oo():536870912,n.lanes|=i,pi|=i)}function bl(n,i){if(!Ie)switch(n.tailMode){case"hidden":i=n.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function ht(n){var i=n.alternate!==null&&n.alternate.child===n.child,c=0,h=0;if(i)for(var g=n.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=h,n.childLanes=c,i}function vw(n,i,c){var h=i.pendingProps;switch(Wu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(i),null;case 1:return ht(i),null;case 3:return c=i.stateNode,h=null,n!==null&&(h=n.memoizedState.cache),i.memoizedState.cache!==h&&(i.flags|=2048),Pa(Et),Xe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(si(i)?Ha(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Zu())),ht(i),null;case 26:var g=i.type,x=i.memoizedState;return n===null?(Ha(i),x!==null?(ht(i),Ix(i,x)):(ht(i),Hh(i,g,null,h,c))):x?x!==n.memoizedState?(Ha(i),ht(i),Ix(i,x)):(ht(i),i.flags&=-16777217):(n=n.memoizedProps,n!==h&&Ha(i),ht(i),Hh(i,g,n,h,c)),null;case 27:if(xe(i),c=ke.current,g=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==h&&Ha(i);else{if(!h){if(i.stateNode===null)throw Error(r(166));return ht(i),null}n=he.current,si(i)?Sg(i):(n=K0(g,h,c),i.stateNode=n,Ha(i))}return ht(i),null;case 5:if(xe(i),g=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==h&&Ha(i);else{if(!h){if(i.stateNode===null)throw Error(r(166));return ht(i),null}if(x=he.current,si(i))Sg(i);else{var k=qc(ke.current);switch(x){case 1:x=k.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:x=k.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":x=k.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":x=k.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":x=k.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof h.is=="string"?k.createElement("select",{is:h.is}):k.createElement("select"),h.multiple?x.multiple=!0:h.size&&(x.size=h.size);break;default:x=typeof h.is=="string"?k.createElement(g,{is:h.is}):k.createElement(g)}}x[Ft]=i,x[Kt]=h;e:for(k=i.child;k!==null;){if(k.tag===5||k.tag===6)x.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===i)break e;for(;k.sibling===null;){if(k.return===null||k.return===i)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}i.stateNode=x;e:switch(Zt(x,g,h),g){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Ha(i)}}return ht(i),Hh(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,c),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==h&&Ha(i);else{if(typeof h!="string"&&i.stateNode===null)throw Error(r(166));if(n=ke.current,si(i)){if(n=i.stateNode,c=i.memoizedProps,h=null,g=Gt,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}n[Ft]=i,n=!!(n.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||H0(n.nodeValue,c)),n||jn(i,!0)}else n=qc(n).createTextNode(h),n[Ft]=i,i.stateNode=n}return ht(i),null;case 31:if(c=i.memoizedState,n===null||n.memoizedState!==null){if(h=si(i),c!==null){if(n===null){if(!h)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Ft]=i}else or(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ht(i),n=!1}else c=Zu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=c),n=!0;if(!n)return i.flags&256?(_s(i),i):(_s(i),null);if((i.flags&128)!==0)throw Error(r(558))}return ht(i),null;case 13:if(h=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=si(i),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(r(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Ft]=i}else or(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ht(i),g=!1}else g=Zu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(_s(i),i):(_s(i),null)}return _s(i),(i.flags&128)!==0?(i.lanes=c,i):(c=h!==null,n=n!==null&&n.memoizedState!==null,c&&(h=i.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool),x=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),x!==g&&(h.flags|=2048)),c!==n&&c&&(i.child.flags|=8192),_c(i,i.updateQueue),ht(i),null);case 4:return Xe(),n===null&&cm(i.stateNode.containerInfo),ht(i),null;case 10:return Pa(i.type),ht(i),null;case 19:if(W(Nt),h=i.memoizedState,h===null)return ht(i),null;if(g=(i.flags&128)!==0,x=h.rendering,x===null)if(g)bl(h,!1);else{if(vt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(x=fc(n),x!==null){for(i.flags|=128,bl(h,!1),n=x.updateQueue,i.updateQueue=n,_c(i,n),i.subtreeFlags=0,n=c,c=i.child;c!==null;)bg(c,n),c=c.sibling;return de(Nt,Nt.current&1|2),Ie&&Oa(i,h.treeForkCount),i.child}n=n.sibling}h.tail!==null&&me()>Dc&&(i.flags|=128,g=!0,bl(h,!1),i.lanes=4194304)}else{if(!g)if(n=fc(x),n!==null){if(i.flags|=128,g=!0,n=n.updateQueue,i.updateQueue=n,_c(i,n),bl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!x.alternate&&!Ie)return ht(i),null}else 2*me()-h.renderingStartTime>Dc&&c!==536870912&&(i.flags|=128,g=!0,bl(h,!1),i.lanes=4194304);h.isBackwards?(x.sibling=i.child,i.child=x):(n=h.last,n!==null?n.sibling=x:i.child=x,h.last=x)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=me(),n.sibling=null,c=Nt.current,de(Nt,g?c&1|2:c&1),Ie&&Oa(i,h.treeForkCount),n):(ht(i),null);case 22:case 23:return _s(i),dh(),h=i.memoizedState!==null,n!==null?n.memoizedState!==null!==h&&(i.flags|=8192):h&&(i.flags|=8192),h?(c&536870912)!==0&&(i.flags&128)===0&&(ht(i),i.subtreeFlags&6&&(i.flags|=8192)):ht(i),c=i.updateQueue,c!==null&&_c(i,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),h=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),h!==c&&(i.flags|=2048),n!==null&&W(ur),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Pa(Et),ht(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function jw(n,i){switch(Wu(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Pa(Et),Xe(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return xe(i),null;case 31:if(i.memoizedState!==null){if(_s(i),i.alternate===null)throw Error(r(340));or()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(_s(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));or()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return W(Nt),null;case 4:return Xe(),null;case 10:return Pa(i.type),null;case 22:case 23:return _s(i),dh(),n!==null&&W(ur),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Pa(Et),null;case 25:return null;default:return null}}function Qx(n,i){switch(Wu(i),i.tag){case 3:Pa(Et),Xe();break;case 26:case 27:case 5:xe(i);break;case 4:Xe();break;case 31:i.memoizedState!==null&&_s(i);break;case 13:_s(i);break;case 19:W(Nt);break;case 10:Pa(i.type);break;case 22:case 23:_s(i),dh(),n!==null&&W(ur);break;case 24:Pa(Et)}}function vl(n,i){try{var c=i.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var g=h.next;c=g;do{if((c.tag&n)===n){h=void 0;var x=c.create,k=c.inst;h=x(),k.destroy=h}c=c.next}while(c!==g)}}catch(M){at(i,i.return,M)}}function An(n,i,c){try{var h=i.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var x=g.next;h=x;do{if((h.tag&n)===n){var k=h.inst,M=k.destroy;if(M!==void 0){k.destroy=void 0,g=i;var F=c,J=M;try{J()}catch(le){at(g,F,le)}}}h=h.next}while(h!==x)}}catch(le){at(i,i.return,le)}}function Yx(n){var i=n.updateQueue;if(i!==null){var c=n.stateNode;try{Pg(i,c)}catch(h){at(n,n.return,h)}}}function Gx(n,i,c){c.props=gr(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(h){at(n,i,h)}}function jl(n,i){try{var c=n.ref;if(c!==null){switch(n.tag){case 26:case 27:case 5:var h=n.stateNode;break;case 30:h=n.stateNode;break;default:h=n.stateNode}typeof c=="function"?n.refCleanup=c(h):c.current=h}}catch(g){at(n,i,g)}}function ya(n,i){var c=n.ref,h=n.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(g){at(n,i,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){at(n,i,g)}else c.current=null}function Wx(n){var i=n.type,c=n.memoizedProps,h=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(g){at(n,n.return,g)}}function qh(n,i,c){try{var h=n.stateNode;Vw(h,n.type,c,i),h[Kt]=i}catch(g){at(n,n.return,g)}}function Xx(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&On(n.type)||n.tag===4}function Vh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Xx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&On(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function $h(n,i,c){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(n,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(n),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Da));else if(h!==4&&(h===27&&On(n.type)&&(c=n.stateNode,i=null),n=n.child,n!==null))for($h(n,i,c),n=n.sibling;n!==null;)$h(n,i,c),n=n.sibling}function Ac(n,i,c){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?c.insertBefore(n,i):c.appendChild(n);else if(h!==4&&(h===27&&On(n.type)&&(c=n.stateNode),n=n.child,n!==null))for(Ac(n,i,c),n=n.sibling;n!==null;)Ac(n,i,c),n=n.sibling}function Zx(n){var i=n.stateNode,c=n.memoizedProps;try{for(var h=n.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);Zt(i,h,c),i[Ft]=n,i[Kt]=c}catch(x){at(n,n.return,x)}}var qa=!1,Dt=!1,Ih=!1,Kx=typeof WeakSet=="function"?WeakSet:Set,$t=null;function ww(n,i){if(n=n.containerInfo,hm=Wc,n=dg(n),Uu(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var g=h.anchorOffset,x=h.focusNode;h=h.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var k=0,M=-1,F=-1,J=0,le=0,ce=n,te=null;t:for(;;){for(var ae;ce!==c||g!==0&&ce.nodeType!==3||(M=k+g),ce!==x||h!==0&&ce.nodeType!==3||(F=k+h),ce.nodeType===3&&(k+=ce.nodeValue.length),(ae=ce.firstChild)!==null;)te=ce,ce=ae;for(;;){if(ce===n)break t;if(te===c&&++J===g&&(M=k),te===x&&++le===h&&(F=k),(ae=ce.nextSibling)!==null)break;ce=te,te=ce.parentNode}ce=ae}c=M===-1||F===-1?null:{start:M,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(mm={focusedElem:n,selectionRange:c},Wc=!1,$t=i;$t!==null;)if(i=$t,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,$t=n;else for(;$t!==null;){switch(i=$t,x=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(c=0;c<n.length;c++)g=n[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&x!==null){n=void 0,c=i,g=x.memoizedProps,x=x.memoizedState,h=c.stateNode;try{var ve=gr(c.type,g);n=h.getSnapshotBeforeUpdate(ve,x),h.__reactInternalSnapshotBeforeUpdate=n}catch(_e){at(c,c.return,_e)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,c=n.nodeType,c===9)gm(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":gm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,$t=n;break}$t=i.return}}function Jx(n,i,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:$a(n,c),h&4&&vl(5,c);break;case 1:if($a(n,c),h&4)if(n=c.stateNode,i===null)try{n.componentDidMount()}catch(k){at(c,c.return,k)}else{var g=gr(c.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(g,i,n.__reactInternalSnapshotBeforeUpdate)}catch(k){at(c,c.return,k)}}h&64&&Yx(c),h&512&&jl(c,c.return);break;case 3:if($a(n,c),h&64&&(n=c.updateQueue,n!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{Pg(n,i)}catch(k){at(c,c.return,k)}}break;case 27:i===null&&h&4&&Zx(c);case 26:case 5:$a(n,c),i===null&&h&4&&Wx(c),h&512&&jl(c,c.return);break;case 12:$a(n,c);break;case 31:$a(n,c),h&4&&s0(n,c);break;case 13:$a(n,c),h&4&&a0(n,c),h&64&&(n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(c=Rw.bind(null,c),Zw(n,c))));break;case 22:if(h=c.memoizedState!==null||qa,!h){i=i!==null&&i.memoizedState!==null||Dt,g=qa;var x=Dt;qa=h,(Dt=i)&&!x?Ia(n,c,(c.subtreeFlags&8772)!==0):$a(n,c),qa=g,Dt=x}break;case 30:break;default:$a(n,c)}}function e0(n){var i=n.alternate;i!==null&&(n.alternate=null,e0(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Wi(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var pt=null,cs=!1;function Va(n,i,c){for(c=c.child;c!==null;)t0(n,i,c),c=c.sibling}function t0(n,i,c){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Zs,c)}catch{}switch(c.tag){case 26:Dt||ya(c,i),Va(n,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Dt||ya(c,i);var h=pt,g=cs;On(c.type)&&(pt=c.stateNode,cs=!1),Va(n,i,c),Tl(c.stateNode),pt=h,cs=g;break;case 5:Dt||ya(c,i);case 6:if(h=pt,g=cs,pt=null,Va(n,i,c),pt=h,cs=g,pt!==null)if(cs)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(c.stateNode)}catch(x){at(c,i,x)}else try{pt.removeChild(c.stateNode)}catch(x){at(c,i,x)}break;case 18:pt!==null&&(cs?(n=pt,Y0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,c.stateNode),Ni(n)):Y0(pt,c.stateNode));break;case 4:h=pt,g=cs,pt=c.stateNode.containerInfo,cs=!0,Va(n,i,c),pt=h,cs=g;break;case 0:case 11:case 14:case 15:An(2,c,i),Dt||An(4,c,i),Va(n,i,c);break;case 1:Dt||(ya(c,i),h=c.stateNode,typeof h.componentWillUnmount=="function"&&Gx(c,i,h)),Va(n,i,c);break;case 21:Va(n,i,c);break;case 22:Dt=(h=Dt)||c.memoizedState!==null,Va(n,i,c),Dt=h;break;default:Va(n,i,c)}}function s0(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ni(n)}catch(c){at(i,i.return,c)}}}function a0(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ni(n)}catch(c){at(i,i.return,c)}}function Nw(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Kx),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Kx),i;default:throw Error(r(435,n.tag))}}function Ec(n,i){var c=Nw(n);i.forEach(function(h){if(!c.has(h)){c.add(h);var g=Dw.bind(null,n,h);h.then(g,g)}})}function ds(n,i){var c=i.deletions;if(c!==null)for(var h=0;h<c.length;h++){var g=c[h],x=n,k=i,M=k;e:for(;M!==null;){switch(M.tag){case 27:if(On(M.type)){pt=M.stateNode,cs=!1;break e}break;case 5:pt=M.stateNode,cs=!1;break e;case 3:case 4:pt=M.stateNode.containerInfo,cs=!0;break e}M=M.return}if(pt===null)throw Error(r(160));t0(x,k,g),pt=null,cs=!1,x=g.alternate,x!==null&&(x.return=null),g.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)n0(i,n),i=i.sibling}var Js=null;function n0(n,i){var c=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ds(i,n),us(n),h&4&&(An(3,n,n.return),vl(3,n),An(5,n,n.return));break;case 1:ds(i,n),us(n),h&512&&(Dt||c===null||ya(c,c.return)),h&64&&qa&&(n=n.updateQueue,n!==null&&(h=n.callbacks,h!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var g=Js;if(ds(i,n),us(n),h&512&&(Dt||c===null||ya(c,c.return)),h&4){var x=c!==null?c.memoizedState:null;if(h=n.memoizedState,c===null)if(h===null)if(n.stateNode===null){e:{h=n.type,c=n.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":x=g.getElementsByTagName("title")[0],(!x||x[gn]||x[Ft]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=g.createElement(h),g.head.insertBefore(x,g.querySelector("head > title"))),Zt(x,h,c),x[Ft]=n,Ze(x),h=x;break e;case"link":var k=ny("link","href",g).get(h+(c.href||""));if(k){for(var M=0;M<k.length;M++)if(x=k[M],x.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&x.getAttribute("rel")===(c.rel==null?null:c.rel)&&x.getAttribute("title")===(c.title==null?null:c.title)&&x.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){k.splice(M,1);break t}}x=g.createElement(h),Zt(x,h,c),g.head.appendChild(x);break;case"meta":if(k=ny("meta","content",g).get(h+(c.content||""))){for(M=0;M<k.length;M++)if(x=k[M],x.getAttribute("content")===(c.content==null?null:""+c.content)&&x.getAttribute("name")===(c.name==null?null:c.name)&&x.getAttribute("property")===(c.property==null?null:c.property)&&x.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&x.getAttribute("charset")===(c.charSet==null?null:c.charSet)){k.splice(M,1);break t}}x=g.createElement(h),Zt(x,h,c),g.head.appendChild(x);break;default:throw Error(r(468,h))}x[Ft]=n,Ze(x),h=x}n.stateNode=h}else ry(g,n.type,n.stateNode);else n.stateNode=ay(g,h,n.memoizedProps);else x!==h?(x===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):x.count--,h===null?ry(g,n.type,n.stateNode):ay(g,h,n.memoizedProps)):h===null&&n.stateNode!==null&&qh(n,n.memoizedProps,c.memoizedProps)}break;case 27:ds(i,n),us(n),h&512&&(Dt||c===null||ya(c,c.return)),c!==null&&h&4&&qh(n,n.memoizedProps,c.memoizedProps);break;case 5:if(ds(i,n),us(n),h&512&&(Dt||c===null||ya(c,c.return)),n.flags&32){g=n.stateNode;try{Qr(g,"")}catch(ve){at(n,n.return,ve)}}h&4&&n.stateNode!=null&&(g=n.memoizedProps,qh(n,g,c!==null?c.memoizedProps:g)),h&1024&&(Ih=!0);break;case 6:if(ds(i,n),us(n),h&4){if(n.stateNode===null)throw Error(r(162));h=n.memoizedProps,c=n.stateNode;try{c.nodeValue=h}catch(ve){at(n,n.return,ve)}}break;case 3:if(Ic=null,g=Js,Js=Vc(i.containerInfo),ds(i,n),Js=g,us(n),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Ni(i.containerInfo)}catch(ve){at(n,n.return,ve)}Ih&&(Ih=!1,r0(n));break;case 4:h=Js,Js=Vc(n.stateNode.containerInfo),ds(i,n),us(n),Js=h;break;case 12:ds(i,n),us(n);break;case 31:ds(i,n),us(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,Ec(n,h)));break;case 13:ds(i,n),us(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Rc=me()),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,Ec(n,h)));break;case 22:g=n.memoizedState!==null;var F=c!==null&&c.memoizedState!==null,J=qa,le=Dt;if(qa=J||g,Dt=le||F,ds(i,n),Dt=le,qa=J,us(n),h&8192)e:for(i=n.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(c===null||F||qa||Dt||xr(n)),c=null,i=n;;){if(i.tag===5||i.tag===26){if(c===null){F=c=i;try{if(x=F.stateNode,g)k=x.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{M=F.stateNode;var ce=F.memoizedProps.style,te=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;M.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(ve){at(F,F.return,ve)}}}else if(i.tag===6){if(c===null){F=i;try{F.stateNode.nodeValue=g?"":F.memoizedProps}catch(ve){at(F,F.return,ve)}}}else if(i.tag===18){if(c===null){F=i;try{var ae=F.stateNode;g?G0(ae,!0):G0(F.stateNode,!1)}catch(ve){at(F,F.return,ve)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}h&4&&(h=n.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,Ec(n,c))));break;case 19:ds(i,n),us(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,Ec(n,h)));break;case 30:break;case 21:break;default:ds(i,n),us(n)}}function us(n){var i=n.flags;if(i&2){try{for(var c,h=n.return;h!==null;){if(Xx(h)){c=h;break}h=h.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var g=c.stateNode,x=Vh(n);Ac(n,x,g);break;case 5:var k=c.stateNode;c.flags&32&&(Qr(k,""),c.flags&=-33);var M=Vh(n);Ac(n,M,k);break;case 3:case 4:var F=c.stateNode.containerInfo,J=Vh(n);$h(n,J,F);break;default:throw Error(r(161))}}catch(le){at(n,n.return,le)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function r0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;r0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function $a(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Jx(n,i.alternate,i),i=i.sibling}function xr(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:An(4,i,i.return),xr(i);break;case 1:ya(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&Gx(i,i.return,c),xr(i);break;case 27:Tl(i.stateNode);case 26:case 5:ya(i,i.return),xr(i);break;case 22:i.memoizedState===null&&xr(i);break;case 30:xr(i);break;default:xr(i)}n=n.sibling}}function Ia(n,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var h=i.alternate,g=n,x=i,k=x.flags;switch(x.tag){case 0:case 11:case 15:Ia(g,x,c),vl(4,x);break;case 1:if(Ia(g,x,c),h=x,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(J){at(h,h.return,J)}if(h=x,g=h.updateQueue,g!==null){var M=h.stateNode;try{var F=g.shared.hiddenCallbacks;if(F!==null)for(g.shared.hiddenCallbacks=null,g=0;g<F.length;g++)zg(F[g],M)}catch(J){at(h,h.return,J)}}c&&k&64&&Yx(x),jl(x,x.return);break;case 27:Zx(x);case 26:case 5:Ia(g,x,c),c&&h===null&&k&4&&Wx(x),jl(x,x.return);break;case 12:Ia(g,x,c);break;case 31:Ia(g,x,c),c&&k&4&&s0(g,x);break;case 13:Ia(g,x,c),c&&k&4&&a0(g,x);break;case 22:x.memoizedState===null&&Ia(g,x,c),jl(x,x.return);break;case 30:break;default:Ia(g,x,c)}i=i.sibling}}function Qh(n,i){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&ll(c))}function Yh(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ll(n))}function ea(n,i,c,h){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)i0(n,i,c,h),i=i.sibling}function i0(n,i,c,h){var g=i.flags;switch(i.tag){case 0:case 11:case 15:ea(n,i,c,h),g&2048&&vl(9,i);break;case 1:ea(n,i,c,h);break;case 3:ea(n,i,c,h),g&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ll(n)));break;case 12:if(g&2048){ea(n,i,c,h),n=i.stateNode;try{var x=i.memoizedProps,k=x.id,M=x.onPostCommit;typeof M=="function"&&M(k,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(F){at(i,i.return,F)}}else ea(n,i,c,h);break;case 31:ea(n,i,c,h);break;case 13:ea(n,i,c,h);break;case 23:break;case 22:x=i.stateNode,k=i.alternate,i.memoizedState!==null?x._visibility&2?ea(n,i,c,h):wl(n,i):x._visibility&2?ea(n,i,c,h):(x._visibility|=2,hi(n,i,c,h,(i.subtreeFlags&10256)!==0||!1)),g&2048&&Qh(k,i);break;case 24:ea(n,i,c,h),g&2048&&Yh(i.alternate,i);break;default:ea(n,i,c,h)}}function hi(n,i,c,h,g){for(g=g&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var x=n,k=i,M=c,F=h,J=k.flags;switch(k.tag){case 0:case 11:case 15:hi(x,k,M,F,g),vl(8,k);break;case 23:break;case 22:var le=k.stateNode;k.memoizedState!==null?le._visibility&2?hi(x,k,M,F,g):wl(x,k):(le._visibility|=2,hi(x,k,M,F,g)),g&&J&2048&&Qh(k.alternate,k);break;case 24:hi(x,k,M,F,g),g&&J&2048&&Yh(k.alternate,k);break;default:hi(x,k,M,F,g)}i=i.sibling}}function wl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=n,h=i,g=h.flags;switch(h.tag){case 22:wl(c,h),g&2048&&Qh(h.alternate,h);break;case 24:wl(c,h),g&2048&&Yh(h.alternate,h);break;default:wl(c,h)}i=i.sibling}}var Nl=8192;function mi(n,i,c){if(n.subtreeFlags&Nl)for(n=n.child;n!==null;)l0(n,i,c),n=n.sibling}function l0(n,i,c){switch(n.tag){case 26:mi(n,i,c),n.flags&Nl&&n.memoizedState!==null&&cN(c,Js,n.memoizedState,n.memoizedProps);break;case 5:mi(n,i,c);break;case 3:case 4:var h=Js;Js=Vc(n.stateNode.containerInfo),mi(n,i,c),Js=h;break;case 22:n.memoizedState===null&&(h=n.alternate,h!==null&&h.memoizedState!==null?(h=Nl,Nl=16777216,mi(n,i,c),Nl=h):mi(n,i,c));break;default:mi(n,i,c)}}function o0(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Sl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var h=i[c];$t=h,d0(h,n)}o0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)c0(n),n=n.sibling}function c0(n){switch(n.tag){case 0:case 11:case 15:Sl(n),n.flags&2048&&An(9,n,n.return);break;case 3:Sl(n);break;case 12:Sl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Tc(n)):Sl(n);break;default:Sl(n)}}function Tc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var h=i[c];$t=h,d0(h,n)}o0(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:An(8,i,i.return),Tc(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,Tc(i));break;default:Tc(i)}n=n.sibling}}function d0(n,i){for(;$t!==null;){var c=$t;switch(c.tag){case 0:case 11:case 15:An(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:ll(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,$t=h;else e:for(c=n;$t!==null;){h=$t;var g=h.sibling,x=h.return;if(e0(h),h===c){$t=null;break e}if(g!==null){g.return=x,$t=g;break e}$t=x}}}var Sw={getCacheForType:function(n){var i=Wt(Et),c=i.data.get(n);return c===void 0&&(c=n(),i.data.set(n,c)),c},cacheSignal:function(){return Wt(Et).controller.signal}},Cw=typeof WeakMap=="function"?WeakMap:Map,We=0,dt=null,Pe=null,Fe=0,st=0,As=null,En=!1,fi=!1,Gh=!1,Qa=0,vt=0,Tn=0,yr=0,Wh=0,Es=0,pi=0,Cl=null,hs=null,Xh=!1,Rc=0,u0=0,Dc=1/0,Mc=null,Rn=null,Ht=0,Dn=null,gi=null,Ya=0,Zh=0,Kh=null,h0=null,kl=0,Jh=null;function Ts(){return(We&2)!==0&&Fe!==0?Fe&-Fe:B.T!==null?rm():Bo()}function m0(){if(Es===0)if((Fe&536870912)===0||Ie){var n=Hr;Hr<<=1,(Hr&3932160)===0&&(Hr=262144),Es=n}else Es=536870912;return n=ks.current,n!==null&&(n.flags|=32),Es}function ms(n,i,c){(n===dt&&(st===2||st===9)||n.cancelPendingCommit!==null)&&(xi(n,0),Mn(n,Fe,Es,!1)),tr(n,c),((We&2)===0||n!==dt)&&(n===dt&&((We&2)===0&&(yr|=c),vt===4&&Mn(n,Fe,Es,!1)),ba(n))}function f0(n,i,c){if((We&6)!==0)throw Error(r(327));var h=!c&&(i&127)===0&&(i&n.expiredLanes)===0||er(n,i),g=h?Aw(n,i):tm(n,i,!0),x=h;do{if(g===0){fi&&!h&&Mn(n,i,0,!1);break}else{if(c=n.current.alternate,x&&!kw(c)){g=tm(n,i,!1),x=!1;continue}if(g===2){if(x=i,n.errorRecoveryDisabledLanes&x)var k=0;else k=n.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){i=k;e:{var M=n;g=Cl;var F=M.current.memoizedState.isDehydrated;if(F&&(xi(M,k).flags|=256),k=tm(M,k,!1),k!==2){if(Gh&&!F){M.errorRecoveryDisabledLanes|=x,yr|=x,g=4;break e}x=hs,hs=g,x!==null&&(hs===null?hs=x:hs.push.apply(hs,x))}g=k}if(x=!1,g!==2)continue}}if(g===1){xi(n,0),Mn(n,i,0,!0);break}e:{switch(h=n,x=g,x){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Mn(h,i,Es,!En);break e;case 2:hs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(g=Rc+300-me(),10<g)){if(Mn(h,i,Es,!En),Jn(h,0,!0)!==0)break e;Ya=i,h.timeoutHandle=I0(p0.bind(null,h,c,hs,Mc,Xh,i,Es,yr,pi,En,x,"Throttled",-0,0),g);break e}p0(h,c,hs,Mc,Xh,i,Es,yr,pi,En,x,null,-0,0)}}break}while(!0);ba(n)}function p0(n,i,c,h,g,x,k,M,F,J,le,ce,te,ae){if(n.timeoutHandle=-1,ce=i.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Da},l0(i,x,ce);var ve=(x&62914560)===x?Rc-me():(x&4194048)===x?u0-me():0;if(ve=dN(ce,ve),ve!==null){Ya=x,n.cancelPendingCommit=ve(N0.bind(null,n,i,x,c,h,g,k,M,F,le,ce,null,te,ae)),Mn(n,x,k,!J);return}}N0(n,i,x,c,h,g,k,M,F)}function kw(n){for(var i=n;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var g=c[h],x=g.getSnapshot;g=g.value;try{if(!Ss(x(),g))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Mn(n,i,c,h){i&=~Wh,i&=~yr,n.suspendedLanes|=i,n.pingedLanes&=~i,h&&(n.warmLanes|=i),h=n.expirationTimes;for(var g=i;0<g;){var x=31-At(g),k=1<<x;h[x]=-1,g&=~k}c!==0&&Po(n,c,i)}function Lc(){return(We&6)===0?(_l(0),!1):!0}function em(){if(Pe!==null){if(st===0)var n=Pe.return;else n=Pe,za=cr=null,gh(n),li=null,cl=0,n=Pe;for(;n!==null;)Qx(n.alternate,n),n=n.return;Pe=null}}function xi(n,i){var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,Qw(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),Ya=0,em(),dt=n,Pe=c=La(n.current,null),Fe=i,st=0,As=null,En=!1,fi=er(n,i),Gh=!1,pi=Es=Wh=yr=Tn=vt=0,hs=Cl=null,Xh=!1,(i&8)!==0&&(i|=i&32);var h=n.entangledLanes;if(h!==0)for(n=n.entanglements,h&=i;0<h;){var g=31-At(h),x=1<<g;i|=n[g],h&=~x}return Qa=i,tc(),c}function g0(n,i){Re=null,B.H=xl,i===ii||i===cc?(i=Dg(),st=3):i===nh?(i=Dg(),st=4):st=i===Dh?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,As=i,Pe===null&&(vt=1,Nc(n,Bs(i,n.current)))}function x0(){var n=ks.current;return n===null?!0:(Fe&4194048)===Fe?Vs===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?n===Vs:!1}function y0(){var n=B.H;return B.H=xl,n===null?xl:n}function b0(){var n=B.A;return B.A=Sw,n}function Oc(){vt=4,En||(Fe&4194048)!==Fe&&ks.current!==null||(fi=!0),(Tn&134217727)===0&&(yr&134217727)===0||dt===null||Mn(dt,Fe,Es,!1)}function tm(n,i,c){var h=We;We|=2;var g=y0(),x=b0();(dt!==n||Fe!==i)&&(Mc=null,xi(n,i)),i=!1;var k=vt;e:do try{if(st!==0&&Pe!==null){var M=Pe,F=As;switch(st){case 8:em(),k=6;break e;case 3:case 2:case 9:case 6:ks.current===null&&(i=!0);var J=st;if(st=0,As=null,yi(n,M,F,J),c&&fi){k=0;break e}break;default:J=st,st=0,As=null,yi(n,M,F,J)}}_w(),k=vt;break}catch(le){g0(n,le)}while(!0);return i&&n.shellSuspendCounter++,za=cr=null,We=h,B.H=g,B.A=x,Pe===null&&(dt=null,Fe=0,tc()),k}function _w(){for(;Pe!==null;)v0(Pe)}function Aw(n,i){var c=We;We|=2;var h=y0(),g=b0();dt!==n||Fe!==i?(Mc=null,Dc=me()+500,xi(n,i)):fi=er(n,i);e:do try{if(st!==0&&Pe!==null){i=Pe;var x=As;t:switch(st){case 1:st=0,As=null,yi(n,i,x,1);break;case 2:case 9:if(Tg(x)){st=0,As=null,j0(i);break}i=function(){st!==2&&st!==9||dt!==n||(st=7),ba(n)},x.then(i,i);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:Tg(x)?(st=0,As=null,j0(i)):(st=0,As=null,yi(n,i,x,7));break;case 5:var k=null;switch(Pe.tag){case 26:k=Pe.memoizedState;case 5:case 27:var M=Pe;if(k?iy(k):M.stateNode.complete){st=0,As=null;var F=M.sibling;if(F!==null)Pe=F;else{var J=M.return;J!==null?(Pe=J,zc(J)):Pe=null}break t}}st=0,As=null,yi(n,i,x,5);break;case 6:st=0,As=null,yi(n,i,x,6);break;case 8:em(),vt=6;break e;default:throw Error(r(462))}}Ew();break}catch(le){g0(n,le)}while(!0);return za=cr=null,B.H=h,B.A=g,We=c,Pe!==null?0:(dt=null,Fe=0,tc(),vt)}function Ew(){for(;Pe!==null&&!ie();)v0(Pe)}function v0(n){var i=$x(n.alternate,n,Qa);n.memoizedProps=n.pendingProps,i===null?zc(n):Pe=i}function j0(n){var i=n,c=i.alternate;switch(i.tag){case 15:case 0:i=Ux(c,i,i.pendingProps,i.type,void 0,Fe);break;case 11:i=Ux(c,i,i.pendingProps,i.type.render,i.ref,Fe);break;case 5:gh(i);default:Qx(c,i),i=Pe=bg(i,Qa),i=$x(c,i,Qa)}n.memoizedProps=n.pendingProps,i===null?zc(n):Pe=i}function yi(n,i,c,h){za=cr=null,gh(i),li=null,cl=0;var g=i.return;try{if(xw(n,g,i,c,Fe)){vt=1,Nc(n,Bs(c,n.current)),Pe=null;return}}catch(x){if(g!==null)throw Pe=g,x;vt=1,Nc(n,Bs(c,n.current)),Pe=null;return}i.flags&32768?(Ie||h===1?n=!0:fi||(Fe&536870912)!==0?n=!1:(En=n=!0,(h===2||h===9||h===3||h===6)&&(h=ks.current,h!==null&&h.tag===13&&(h.flags|=16384))),w0(i,n)):zc(i)}function zc(n){var i=n;do{if((i.flags&32768)!==0){w0(i,En);return}n=i.return;var c=vw(i.alternate,i,Qa);if(c!==null){Pe=c;return}if(i=i.sibling,i!==null){Pe=i;return}Pe=i=n}while(i!==null);vt===0&&(vt=5)}function w0(n,i){do{var c=jw(n.alternate,n);if(c!==null){c.flags&=32767,Pe=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(n=n.sibling,n!==null)){Pe=n;return}Pe=n=c}while(n!==null);vt=6,Pe=null}function N0(n,i,c,h,g,x,k,M,F){n.cancelPendingCommit=null;do Pc();while(Ht!==0);if((We&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(x=i.lanes|i.childLanes,x|=Vu,zo(n,c,x,k,M,F),n===dt&&(Pe=dt=null,Fe=0),gi=i,Dn=n,Ya=c,Zh=x,Kh=g,h0=h,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Mw(Be,function(){return A0(),null})):(n.callbackNode=null,n.callbackPriority=0),h=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||h){h=B.T,B.T=null,g=L.p,L.p=2,k=We,We|=4;try{ww(n,i,c)}finally{We=k,L.p=g,B.T=h}}Ht=1,S0(),C0(),k0()}}function S0(){if(Ht===1){Ht=0;var n=Dn,i=gi,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=B.T,B.T=null;var h=L.p;L.p=2;var g=We;We|=4;try{n0(i,n);var x=mm,k=dg(n.containerInfo),M=x.focusedElem,F=x.selectionRange;if(k!==M&&M&&M.ownerDocument&&cg(M.ownerDocument.documentElement,M)){if(F!==null&&Uu(M)){var J=F.start,le=F.end;if(le===void 0&&(le=J),"selectionStart"in M)M.selectionStart=J,M.selectionEnd=Math.min(le,M.value.length);else{var ce=M.ownerDocument||document,te=ce&&ce.defaultView||window;if(te.getSelection){var ae=te.getSelection(),ve=M.textContent.length,_e=Math.min(F.start,ve),ot=F.end===void 0?_e:Math.min(F.end,ve);!ae.extend&&_e>ot&&(k=ot,ot=_e,_e=k);var X=og(M,_e),Q=og(M,ot);if(X&&Q&&(ae.rangeCount!==1||ae.anchorNode!==X.node||ae.anchorOffset!==X.offset||ae.focusNode!==Q.node||ae.focusOffset!==Q.offset)){var K=ce.createRange();K.setStart(X.node,X.offset),ae.removeAllRanges(),_e>ot?(ae.addRange(K),ae.extend(Q.node,Q.offset)):(K.setEnd(Q.node,Q.offset),ae.addRange(K))}}}}for(ce=[],ae=M;ae=ae.parentNode;)ae.nodeType===1&&ce.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ce.length;M++){var oe=ce[M];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Wc=!!hm,mm=hm=null}finally{We=g,L.p=h,B.T=c}}n.current=i,Ht=2}}function C0(){if(Ht===2){Ht=0;var n=Dn,i=gi,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=B.T,B.T=null;var h=L.p;L.p=2;var g=We;We|=4;try{Jx(n,i.alternate,i)}finally{We=g,L.p=h,B.T=c}}Ht=3}}function k0(){if(Ht===4||Ht===3){Ht=0,ye();var n=Dn,i=gi,c=Ya,h=h0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ht=5:(Ht=0,gi=Dn=null,_0(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(Rn=null),Yi(c),i=i.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Zs,i,void 0,(i.current.flags&128)===128)}catch{}if(h!==null){i=B.T,g=L.p,L.p=2,B.T=null;try{for(var x=n.onRecoverableError,k=0;k<h.length;k++){var M=h[k];x(M.value,{componentStack:M.stack})}}finally{B.T=i,L.p=g}}(Ya&3)!==0&&Pc(),ba(n),g=n.pendingLanes,(c&261930)!==0&&(g&42)!==0?n===Jh?kl++:(kl=0,Jh=n):kl=0,_l(0)}}function _0(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,ll(i)))}function Pc(){return S0(),C0(),k0(),A0()}function A0(){if(Ht!==5)return!1;var n=Dn,i=Zh;Zh=0;var c=Yi(Ya),h=B.T,g=L.p;try{L.p=32>c?32:c,B.T=null,c=Kh,Kh=null;var x=Dn,k=Ya;if(Ht=0,gi=Dn=null,Ya=0,(We&6)!==0)throw Error(r(331));var M=We;if(We|=4,c0(x.current),i0(x,x.current,k,c),We=M,_l(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Zs,x)}catch{}return!0}finally{L.p=g,B.T=h,_0(n,i)}}function E0(n,i,c){i=Bs(c,i),i=Rh(n.stateNode,i,2),n=Cn(n,i,2),n!==null&&(tr(n,2),ba(n))}function at(n,i,c){if(n.tag===3)E0(n,n,c);else for(;i!==null;){if(i.tag===3){E0(i,n,c);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Rn===null||!Rn.has(h))){n=Bs(c,n),c=Tx(2),h=Cn(i,c,2),h!==null&&(Rx(c,h,i,n),tr(h,2),ba(h));break}}i=i.return}}function sm(n,i,c){var h=n.pingCache;if(h===null){h=n.pingCache=new Cw;var g=new Set;h.set(i,g)}else g=h.get(i),g===void 0&&(g=new Set,h.set(i,g));g.has(c)||(Gh=!0,g.add(c),n=Tw.bind(null,n,i,c),i.then(n,n))}function Tw(n,i,c){var h=n.pingCache;h!==null&&h.delete(i),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,dt===n&&(Fe&c)===c&&(vt===4||vt===3&&(Fe&62914560)===Fe&&300>me()-Rc?(We&2)===0&&xi(n,0):Wh|=c,pi===Fe&&(pi=0)),ba(n)}function T0(n,i){i===0&&(i=Oo()),n=ir(n,i),n!==null&&(tr(n,i),ba(n))}function Rw(n){var i=n.memoizedState,c=0;i!==null&&(c=i.retryLane),T0(n,c)}function Dw(n,i){var c=0;switch(n.tag){case 31:case 13:var h=n.stateNode,g=n.memoizedState;g!==null&&(c=g.retryLane);break;case 19:h=n.stateNode;break;case 22:h=n.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(i),T0(n,c)}function Mw(n,i){return V(n,i)}var Uc=null,bi=null,am=!1,Bc=!1,nm=!1,Ln=0;function ba(n){n!==bi&&n.next===null&&(bi===null?Uc=bi=n:bi=bi.next=n),Bc=!0,am||(am=!0,Ow())}function _l(n,i){if(!nm&&Bc){nm=!0;do for(var c=!1,h=Uc;h!==null;){if(n!==0){var g=h.pendingLanes;if(g===0)var x=0;else{var k=h.suspendedLanes,M=h.pingedLanes;x=(1<<31-At(42|n)+1)-1,x&=g&~(k&~M),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(c=!0,L0(h,x))}else x=Fe,x=Jn(h,h===dt?x:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(x&3)===0||er(h,x)||(c=!0,L0(h,x));h=h.next}while(c);nm=!1}}function Lw(){R0()}function R0(){Bc=am=!1;var n=0;Ln!==0&&Iw()&&(n=Ln);for(var i=me(),c=null,h=Uc;h!==null;){var g=h.next,x=D0(h,i);x===0?(h.next=null,c===null?Uc=g:c.next=g,g===null&&(bi=c)):(c=h,(n!==0||(x&3)!==0)&&(Bc=!0)),h=g}Ht!==0&&Ht!==5||_l(n),Ln!==0&&(Ln=0)}function D0(n,i){for(var c=n.suspendedLanes,h=n.pingedLanes,g=n.expirationTimes,x=n.pendingLanes&-62914561;0<x;){var k=31-At(x),M=1<<k,F=g[k];F===-1?((M&c)===0||(M&h)!==0)&&(g[k]=Lo(M,i)):F<=i&&(n.expiredLanes|=M),x&=~M}if(i=dt,c=Fe,c=Jn(n,n===i?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h=n.callbackNode,c===0||n===i&&(st===2||st===9)||n.cancelPendingCommit!==null)return h!==null&&h!==null&&ee(h),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||er(n,c)){if(i=c&-c,i===n.callbackPriority)return i;switch(h!==null&&ee(h),Yi(c)){case 2:case 8:c=$e;break;case 32:c=Be;break;case 268435456:c=Ea;break;default:c=Be}return h=M0.bind(null,n),c=V(c,h),n.callbackPriority=i,n.callbackNode=c,i}return h!==null&&h!==null&&ee(h),n.callbackPriority=2,n.callbackNode=null,2}function M0(n,i){if(Ht!==0&&Ht!==5)return n.callbackNode=null,n.callbackPriority=0,null;var c=n.callbackNode;if(Pc()&&n.callbackNode!==c)return null;var h=Fe;return h=Jn(n,n===dt?h:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h===0?null:(f0(n,h,i),D0(n,me()),n.callbackNode!=null&&n.callbackNode===c?M0.bind(null,n):null)}function L0(n,i){if(Pc())return null;f0(n,i,!0)}function Ow(){Yw(function(){(We&6)!==0?V(we,Lw):R0()})}function rm(){if(Ln===0){var n=ni;n===0&&(n=Fr,Fr<<=1,(Fr&261888)===0&&(Fr=256)),Ln=n}return Ln}function O0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Yo(""+n)}function z0(n,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,n.id&&c.setAttribute("form",n.id),i.parentNode.insertBefore(c,i),n=new FormData(n),c.parentNode.removeChild(c),n}function zw(n,i,c,h,g){if(i==="submit"&&c&&c.stateNode===g){var x=O0((g[Kt]||null).action),k=h.submitter;k&&(i=(i=k[Kt]||null)?O0(i.formAction):k.getAttribute("formAction"),i!==null&&(x=i,k=null));var M=new Zo("action","action",null,h,g);n.push({event:M,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ln!==0){var F=k?z0(g,k):new FormData(g);Ch(c,{pending:!0,data:F,method:g.method,action:x},null,F)}}else typeof x=="function"&&(M.preventDefault(),F=k?z0(g,k):new FormData(g),Ch(c,{pending:!0,data:F,method:g.method,action:x},x,F))},currentTarget:g}]})}}for(var im=0;im<qu.length;im++){var lm=qu[im],Pw=lm.toLowerCase(),Uw=lm[0].toUpperCase()+lm.slice(1);Ks(Pw,"on"+Uw)}Ks(mg,"onAnimationEnd"),Ks(fg,"onAnimationIteration"),Ks(pg,"onAnimationStart"),Ks("dblclick","onDoubleClick"),Ks("focusin","onFocus"),Ks("focusout","onBlur"),Ks(ew,"onTransitionRun"),Ks(tw,"onTransitionStart"),Ks(sw,"onTransitionCancel"),Ks(gg,"onTransitionEnd"),$r("onMouseEnter",["mouseout","mouseover"]),$r("onMouseLeave",["mouseout","mouseover"]),$r("onPointerEnter",["pointerout","pointerover"]),$r("onPointerLeave",["pointerout","pointerover"]),Ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ta("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Al));function P0(n,i){i=(i&4)!==0;for(var c=0;c<n.length;c++){var h=n[c],g=h.event;h=h.listeners;e:{var x=void 0;if(i)for(var k=h.length-1;0<=k;k--){var M=h[k],F=M.instance,J=M.currentTarget;if(M=M.listener,F!==x&&g.isPropagationStopped())break e;x=M,g.currentTarget=J;try{x(g)}catch(le){ec(le)}g.currentTarget=null,x=F}else for(k=0;k<h.length;k++){if(M=h[k],F=M.instance,J=M.currentTarget,M=M.listener,F!==x&&g.isPropagationStopped())break e;x=M,g.currentTarget=J;try{x(g)}catch(le){ec(le)}g.currentTarget=null,x=F}}}}function Ue(n,i){var c=i[Gi];c===void 0&&(c=i[Gi]=new Set);var h=n+"__bubble";c.has(h)||(U0(i,n,2,!1),c.add(h))}function om(n,i,c){var h=0;i&&(h|=4),U0(c,n,h,i)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function cm(n){if(!n[Fc]){n[Fc]=!0,xn.forEach(function(c){c!=="selectionchange"&&(Bw.has(c)||om(c,!1,n),om(c,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Fc]||(i[Fc]=!0,om("selectionchange",!1,i))}}function U0(n,i,c,h){switch(my(i)){case 2:var g=mN;break;case 8:g=fN;break;default:g=Sm}c=g.bind(null,i,c,n),g=void 0,!Eu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),h?g!==void 0?n.addEventListener(i,c,{capture:!0,passive:g}):n.addEventListener(i,c,!0):g!==void 0?n.addEventListener(i,c,{passive:g}):n.addEventListener(i,c,!1)}function dm(n,i,c,h,g){var x=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var k=h.tag;if(k===3||k===4){var M=h.stateNode.containerInfo;if(M===g)break;if(k===4)for(k=h.return;k!==null;){var F=k.tag;if((F===3||F===4)&&k.stateNode.containerInfo===g)return;k=k.return}for(;M!==null;){if(k=$(M),k===null)return;if(F=k.tag,F===5||F===6||F===26||F===27){h=x=k;continue e}M=M.parentNode}}h=h.return}Vp(function(){var J=x,le=_u(c),ce=[];e:{var te=xg.get(n);if(te!==void 0){var ae=Zo,ve=n;switch(n){case"keypress":if(Wo(c)===0)break e;case"keydown":case"keyup":ae=D2;break;case"focusin":ve="focus",ae=Mu;break;case"focusout":ve="blur",ae=Mu;break;case"beforeblur":case"afterblur":ae=Mu;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Qp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=v2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=O2;break;case mg:case fg:case pg:ae=N2;break;case gg:ae=P2;break;case"scroll":case"scrollend":ae=y2;break;case"wheel":ae=B2;break;case"copy":case"cut":case"paste":ae=C2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Gp;break;case"toggle":case"beforetoggle":ae=H2}var _e=(i&4)!==0,ot=!_e&&(n==="scroll"||n==="scrollend"),X=_e?te!==null?te+"Capture":null:te;_e=[];for(var Q=J,K;Q!==null;){var oe=Q;if(K=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||K===null||X===null||(oe=Xi(Q,X),oe!=null&&_e.push(El(Q,oe,K))),ot)break;Q=Q.return}0<_e.length&&(te=new ae(te,ve,null,c,le),ce.push({event:te,listeners:_e}))}}if((i&7)===0){e:{if(te=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",te&&c!==ku&&(ve=c.relatedTarget||c.fromElement)&&($(ve)||ve[pn]))break e;if((ae||te)&&(te=le.window===le?le:(te=le.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(ve=c.relatedTarget||c.toElement,ae=J,ve=ve?$(ve):null,ve!==null&&(ot=o(ve),_e=ve.tag,ve!==ot||_e!==5&&_e!==27&&_e!==6)&&(ve=null)):(ae=null,ve=J),ae!==ve)){if(_e=Qp,oe="onMouseLeave",X="onMouseEnter",Q="mouse",(n==="pointerout"||n==="pointerover")&&(_e=Gp,oe="onPointerLeave",X="onPointerEnter",Q="pointer"),ot=ae==null?te:be(ae),K=ve==null?te:be(ve),te=new _e(oe,Q+"leave",ae,c,le),te.target=ot,te.relatedTarget=K,oe=null,$(le)===J&&(_e=new _e(X,Q+"enter",ve,c,le),_e.target=K,_e.relatedTarget=ot,oe=_e),ot=oe,ae&&ve)t:{for(_e=Fw,X=ae,Q=ve,K=0,oe=X;oe;oe=_e(oe))K++;oe=0;for(var Ce=Q;Ce;Ce=_e(Ce))oe++;for(;0<K-oe;)X=_e(X),K--;for(;0<oe-K;)Q=_e(Q),oe--;for(;K--;){if(X===Q||Q!==null&&X===Q.alternate){_e=X;break t}X=_e(X),Q=_e(Q)}_e=null}else _e=null;ae!==null&&B0(ce,te,ae,_e,!1),ve!==null&&ot!==null&&B0(ce,ot,ve,_e,!0)}}e:{if(te=J?be(J):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var Ye=sg;else if(eg(te))if(ag)Ye=Z2;else{Ye=W2;var Ne=G2}else ae=te.nodeName,!ae||ae.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?J&&Cu(J.elementType)&&(Ye=sg):Ye=X2;if(Ye&&(Ye=Ye(n,J))){tg(ce,Ye,c,le);break e}Ne&&Ne(n,te,J),n==="focusout"&&J&&te.type==="number"&&J.memoizedProps.value!=null&&Su(te,"number",te.value)}switch(Ne=J?be(J):window,n){case"focusin":(eg(Ne)||Ne.contentEditable==="true")&&(Xr=Ne,Bu=J,nl=null);break;case"focusout":nl=Bu=Xr=null;break;case"mousedown":Fu=!0;break;case"contextmenu":case"mouseup":case"dragend":Fu=!1,ug(ce,c,le);break;case"selectionchange":if(J2)break;case"keydown":case"keyup":ug(ce,c,le)}var Me;if(Ou)e:{switch(n){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Wr?Kp(n,c)&&(He="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(He="onCompositionStart");He&&(Wp&&c.locale!=="ko"&&(Wr||He!=="onCompositionStart"?He==="onCompositionEnd"&&Wr&&(Me=$p()):(yn=le,Tu="value"in yn?yn.value:yn.textContent,Wr=!0)),Ne=Hc(J,He),0<Ne.length&&(He=new Yp(He,n,null,c,le),ce.push({event:He,listeners:Ne}),Me?He.data=Me:(Me=Jp(c),Me!==null&&(He.data=Me)))),(Me=V2?$2(n,c):I2(n,c))&&(He=Hc(J,"onBeforeInput"),0<He.length&&(Ne=new Yp("onBeforeInput","beforeinput",null,c,le),ce.push({event:Ne,listeners:He}),Ne.data=Me)),zw(ce,n,J,c,le)}P0(ce,i)})}function El(n,i,c){return{instance:n,listener:i,currentTarget:c}}function Hc(n,i){for(var c=i+"Capture",h=[];n!==null;){var g=n,x=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||x===null||(g=Xi(n,c),g!=null&&h.unshift(El(n,g,x)),g=Xi(n,i),g!=null&&h.push(El(n,g,x))),n.tag===3)return h;n=n.return}return[]}function Fw(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function B0(n,i,c,h,g){for(var x=i._reactName,k=[];c!==null&&c!==h;){var M=c,F=M.alternate,J=M.stateNode;if(M=M.tag,F!==null&&F===h)break;M!==5&&M!==26&&M!==27||J===null||(F=J,g?(J=Xi(c,x),J!=null&&k.unshift(El(c,J,F))):g||(J=Xi(c,x),J!=null&&k.push(El(c,J,F)))),c=c.return}k.length!==0&&n.push({event:i,listeners:k})}var Hw=/\r\n?/g,qw=/\u0000|\uFFFD/g;function F0(n){return(typeof n=="string"?n:""+n).replace(Hw,`
`).replace(qw,"")}function H0(n,i){return i=F0(i),F0(n)===i}function lt(n,i,c,h,g,x){switch(c){case"children":typeof h=="string"?i==="body"||i==="textarea"&&h===""||Qr(n,h):(typeof h=="number"||typeof h=="bigint")&&i!=="body"&&Qr(n,""+h);break;case"className":Io(n,"class",h);break;case"tabIndex":Io(n,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Io(n,c,h);break;case"style":Hp(n,h,x);break;case"data":if(i!=="object"){Io(n,"data",h);break}case"src":case"href":if(h===""&&(i!=="a"||c!=="href")){n.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(c);break}h=Yo(""+h),n.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(c==="formAction"?(i!=="input"&&lt(n,i,"name",g.name,g,null),lt(n,i,"formEncType",g.formEncType,g,null),lt(n,i,"formMethod",g.formMethod,g,null),lt(n,i,"formTarget",g.formTarget,g,null)):(lt(n,i,"encType",g.encType,g,null),lt(n,i,"method",g.method,g,null),lt(n,i,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(c);break}h=Yo(""+h),n.setAttribute(c,h);break;case"onClick":h!=null&&(n.onclick=Da);break;case"onScroll":h!=null&&Ue("scroll",n);break;case"onScrollEnd":h!=null&&Ue("scrollend",n);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(g.children!=null)throw Error(r(60));n.innerHTML=c}}break;case"multiple":n.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":n.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){n.removeAttribute("xlink:href");break}c=Yo(""+h),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(c,""+h):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":h===!0?n.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(c,h):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?n.setAttribute(c,h):n.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?n.removeAttribute(c):n.setAttribute(c,h);break;case"popover":Ue("beforetoggle",n),Ue("toggle",n),$o(n,"popover",h);break;case"xlinkActuate":Ra(n,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Ra(n,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Ra(n,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Ra(n,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Ra(n,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Ra(n,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Ra(n,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Ra(n,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Ra(n,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":$o(n,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=g2.get(c)||c,$o(n,c,h))}}function um(n,i,c,h,g,x){switch(c){case"style":Hp(n,h,x);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(g.children!=null)throw Error(r(60));n.innerHTML=c}}break;case"children":typeof h=="string"?Qr(n,h):(typeof h=="number"||typeof h=="bigint")&&Qr(n,""+h);break;case"onScroll":h!=null&&Ue("scroll",n);break;case"onScrollEnd":h!=null&&Ue("scrollend",n);break;case"onClick":h!=null&&(n.onclick=Da);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vo.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),i=c.slice(2,g?c.length-7:void 0),x=n[Kt]||null,x=x!=null?x[c]:null,typeof x=="function"&&n.removeEventListener(i,x,g),typeof h=="function")){typeof x!="function"&&x!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(i,h,g);break e}c in n?n[c]=h:h===!0?n.setAttribute(c,""):$o(n,c,h)}}}function Zt(n,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",n),Ue("load",n);var h=!1,g=!1,x;for(x in c)if(c.hasOwnProperty(x)){var k=c[x];if(k!=null)switch(x){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:lt(n,i,x,k,c,null)}}g&&lt(n,i,"srcSet",c.srcSet,c,null),h&&lt(n,i,"src",c.src,c,null);return;case"input":Ue("invalid",n);var M=x=k=g=null,F=null,J=null;for(h in c)if(c.hasOwnProperty(h)){var le=c[h];if(le!=null)switch(h){case"name":g=le;break;case"type":k=le;break;case"checked":F=le;break;case"defaultChecked":J=le;break;case"value":x=le;break;case"defaultValue":M=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,i));break;default:lt(n,i,h,le,c,null)}}Pp(n,x,M,F,J,k,g,!1);return;case"select":Ue("invalid",n),h=k=x=null;for(g in c)if(c.hasOwnProperty(g)&&(M=c[g],M!=null))switch(g){case"value":x=M;break;case"defaultValue":k=M;break;case"multiple":h=M;default:lt(n,i,g,M,c,null)}i=x,c=k,n.multiple=!!h,i!=null?Ir(n,!!h,i,!1):c!=null&&Ir(n,!!h,c,!0);return;case"textarea":Ue("invalid",n),x=g=h=null;for(k in c)if(c.hasOwnProperty(k)&&(M=c[k],M!=null))switch(k){case"value":h=M;break;case"defaultValue":g=M;break;case"children":x=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(91));break;default:lt(n,i,k,M,c,null)}Bp(n,h,g,x);return;case"option":for(F in c)if(c.hasOwnProperty(F)&&(h=c[F],h!=null))switch(F){case"selected":n.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:lt(n,i,F,h,c,null)}return;case"dialog":Ue("beforetoggle",n),Ue("toggle",n),Ue("cancel",n),Ue("close",n);break;case"iframe":case"object":Ue("load",n);break;case"video":case"audio":for(h=0;h<Al.length;h++)Ue(Al[h],n);break;case"image":Ue("error",n),Ue("load",n);break;case"details":Ue("toggle",n);break;case"embed":case"source":case"link":Ue("error",n),Ue("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in c)if(c.hasOwnProperty(J)&&(h=c[J],h!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:lt(n,i,J,h,c,null)}return;default:if(Cu(i)){for(le in c)c.hasOwnProperty(le)&&(h=c[le],h!==void 0&&um(n,i,le,h,c,void 0));return}}for(M in c)c.hasOwnProperty(M)&&(h=c[M],h!=null&&lt(n,i,M,h,c,null))}function Vw(n,i,c,h){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,x=null,k=null,M=null,F=null,J=null,le=null;for(ae in c){var ce=c[ae];if(c.hasOwnProperty(ae)&&ce!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":F=ce;default:h.hasOwnProperty(ae)||lt(n,i,ae,null,h,ce)}}for(var te in h){var ae=h[te];if(ce=c[te],h.hasOwnProperty(te)&&(ae!=null||ce!=null))switch(te){case"type":x=ae;break;case"name":g=ae;break;case"checked":J=ae;break;case"defaultChecked":le=ae;break;case"value":k=ae;break;case"defaultValue":M=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,i));break;default:ae!==ce&&lt(n,i,te,ae,h,ce)}}Nu(n,k,M,F,J,le,x,g);return;case"select":ae=k=M=te=null;for(x in c)if(F=c[x],c.hasOwnProperty(x)&&F!=null)switch(x){case"value":break;case"multiple":ae=F;default:h.hasOwnProperty(x)||lt(n,i,x,null,h,F)}for(g in h)if(x=h[g],F=c[g],h.hasOwnProperty(g)&&(x!=null||F!=null))switch(g){case"value":te=x;break;case"defaultValue":M=x;break;case"multiple":k=x;default:x!==F&&lt(n,i,g,x,h,F)}i=M,c=k,h=ae,te!=null?Ir(n,!!c,te,!1):!!h!=!!c&&(i!=null?Ir(n,!!c,i,!0):Ir(n,!!c,c?[]:"",!1));return;case"textarea":ae=te=null;for(M in c)if(g=c[M],c.hasOwnProperty(M)&&g!=null&&!h.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:lt(n,i,M,null,h,g)}for(k in h)if(g=h[k],x=c[k],h.hasOwnProperty(k)&&(g!=null||x!=null))switch(k){case"value":te=g;break;case"defaultValue":ae=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==x&&lt(n,i,k,g,h,x)}Up(n,te,ae);return;case"option":for(var ve in c)if(te=c[ve],c.hasOwnProperty(ve)&&te!=null&&!h.hasOwnProperty(ve))switch(ve){case"selected":n.selected=!1;break;default:lt(n,i,ve,null,h,te)}for(F in h)if(te=h[F],ae=c[F],h.hasOwnProperty(F)&&te!==ae&&(te!=null||ae!=null))switch(F){case"selected":n.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:lt(n,i,F,te,h,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in c)te=c[_e],c.hasOwnProperty(_e)&&te!=null&&!h.hasOwnProperty(_e)&&lt(n,i,_e,null,h,te);for(J in h)if(te=h[J],ae=c[J],h.hasOwnProperty(J)&&te!==ae&&(te!=null||ae!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,i));break;default:lt(n,i,J,te,h,ae)}return;default:if(Cu(i)){for(var ot in c)te=c[ot],c.hasOwnProperty(ot)&&te!==void 0&&!h.hasOwnProperty(ot)&&um(n,i,ot,void 0,h,te);for(le in h)te=h[le],ae=c[le],!h.hasOwnProperty(le)||te===ae||te===void 0&&ae===void 0||um(n,i,le,te,h,ae);return}}for(var X in c)te=c[X],c.hasOwnProperty(X)&&te!=null&&!h.hasOwnProperty(X)&&lt(n,i,X,null,h,te);for(ce in h)te=h[ce],ae=c[ce],!h.hasOwnProperty(ce)||te===ae||te==null&&ae==null||lt(n,i,ce,te,h,ae)}function q0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $w(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var g=c[h],x=g.transferSize,k=g.initiatorType,M=g.duration;if(x&&M&&q0(k)){for(k=0,M=g.responseEnd,h+=1;h<c.length;h++){var F=c[h],J=F.startTime;if(J>M)break;var le=F.transferSize,ce=F.initiatorType;le&&q0(ce)&&(F=F.responseEnd,k+=le*(F<M?1:(M-J)/(F-J)))}if(--h,i+=8*(x+k)/(g.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var hm=null,mm=null;function qc(n){return n.nodeType===9?n:n.ownerDocument}function V0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function fm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var pm=null;function Iw(){var n=window.event;return n&&n.type==="popstate"?n===pm?!1:(pm=n,!0):(pm=null,!1)}var I0=typeof setTimeout=="function"?setTimeout:void 0,Qw=typeof clearTimeout=="function"?clearTimeout:void 0,Q0=typeof Promise=="function"?Promise:void 0,Yw=typeof queueMicrotask=="function"?queueMicrotask:typeof Q0<"u"?function(n){return Q0.resolve(null).then(n).catch(Gw)}:I0;function Gw(n){setTimeout(function(){throw n})}function On(n){return n==="head"}function Y0(n,i){var c=i,h=0;do{var g=c.nextSibling;if(n.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(h===0){n.removeChild(g),Ni(i);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")Tl(n.ownerDocument.documentElement);else if(c==="head"){c=n.ownerDocument.head,Tl(c);for(var x=c.firstChild;x;){var k=x.nextSibling,M=x.nodeName;x[gn]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&x.rel.toLowerCase()==="stylesheet"||c.removeChild(x),x=k}}else c==="body"&&Tl(n.ownerDocument.body);c=g}while(c);Ni(i)}function G0(n,i){var c=n;n=0;do{var h=c.nextSibling;if(c.nodeType===1?i?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(i?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(n===0)break;n--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||n++;c=h}while(c)}function gm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":gm(c),Wi(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function Ww(n,i,c,h){for(;n.nodeType===1;){var g=c;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!h&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(h){if(!n[gn])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(x=n.getAttribute("rel"),x==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(x!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(x=n.getAttribute("src"),(x!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&x&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var x=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===x)return n}else return n;if(n=$s(n.nextSibling),n===null)break}return null}function Xw(n,i,c){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=$s(n.nextSibling),n===null))return null;return n}function W0(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=$s(n.nextSibling),n===null))return null;return n}function xm(n){return n.data==="$?"||n.data==="$~"}function ym(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Zw(n,i){var c=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||c.readyState!=="loading")i();else{var h=function(){i(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),n._reactRetry=h}}function $s(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var bm=null;function X0(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"||c==="/&"){if(i===0)return $s(n.nextSibling);i--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||i++}n=n.nextSibling}return null}function Z0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(i===0)return n;i--}else c!=="/$"&&c!=="/&"||i++}n=n.previousSibling}return null}function K0(n,i,c){switch(i=qc(c),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Tl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Wi(n)}var Is=new Map,J0=new Set;function Vc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ga=L.d;L.d={f:Kw,r:Jw,D:eN,C:tN,L:sN,m:aN,X:rN,S:nN,M:iN};function Kw(){var n=Ga.f(),i=Lc();return n||i}function Jw(n){var i=ue(n);i!==null&&i.tag===5&&i.type==="form"?gx(i):Ga.r(n)}var vi=typeof document>"u"?null:document;function ey(n,i,c){var h=vi;if(h&&typeof i=="string"&&i){var g=Ps(i);g='link[rel="'+n+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),J0.has(g)||(J0.add(g),n={rel:n,crossOrigin:c,href:i},h.querySelector(g)===null&&(i=h.createElement("link"),Zt(i,"link",n),Ze(i),h.head.appendChild(i)))}}function eN(n){Ga.D(n),ey("dns-prefetch",n,null)}function tN(n,i){Ga.C(n,i),ey("preconnect",n,i)}function sN(n,i,c){Ga.L(n,i,c);var h=vi;if(h&&n&&i){var g='link[rel="preload"][as="'+Ps(i)+'"]';i==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Ps(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Ps(c.imageSizes)+'"]')):g+='[href="'+Ps(n)+'"]';var x=g;switch(i){case"style":x=ji(n);break;case"script":x=wi(n)}Is.has(x)||(n=y({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:n,as:i},c),Is.set(x,n),h.querySelector(g)!==null||i==="style"&&h.querySelector(Rl(x))||i==="script"&&h.querySelector(Dl(x))||(i=h.createElement("link"),Zt(i,"link",n),Ze(i),h.head.appendChild(i)))}}function aN(n,i){Ga.m(n,i);var c=vi;if(c&&n){var h=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+Ps(h)+'"][href="'+Ps(n)+'"]',x=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=wi(n)}if(!Is.has(x)&&(n=y({rel:"modulepreload",href:n},i),Is.set(x,n),c.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Dl(x)))return}h=c.createElement("link"),Zt(h,"link",n),Ze(h),c.head.appendChild(h)}}}function nN(n,i,c){Ga.S(n,i,c);var h=vi;if(h&&n){var g=Qe(h).hoistableStyles,x=ji(n);i=i||"default";var k=g.get(x);if(!k){var M={loading:0,preload:null};if(k=h.querySelector(Rl(x)))M.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":i},c),(c=Is.get(x))&&vm(n,c);var F=k=h.createElement("link");Ze(F),Zt(F,"link",n),F._p=new Promise(function(J,le){F.onload=J,F.onerror=le}),F.addEventListener("load",function(){M.loading|=1}),F.addEventListener("error",function(){M.loading|=2}),M.loading|=4,$c(k,i,h)}k={type:"stylesheet",instance:k,count:1,state:M},g.set(x,k)}}}function rN(n,i){Ga.X(n,i);var c=vi;if(c&&n){var h=Qe(c).hoistableScripts,g=wi(n),x=h.get(g);x||(x=c.querySelector(Dl(g)),x||(n=y({src:n,async:!0},i),(i=Is.get(g))&&jm(n,i),x=c.createElement("script"),Ze(x),Zt(x,"link",n),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},h.set(g,x))}}function iN(n,i){Ga.M(n,i);var c=vi;if(c&&n){var h=Qe(c).hoistableScripts,g=wi(n),x=h.get(g);x||(x=c.querySelector(Dl(g)),x||(n=y({src:n,async:!0,type:"module"},i),(i=Is.get(g))&&jm(n,i),x=c.createElement("script"),Ze(x),Zt(x,"link",n),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},h.set(g,x))}}function ty(n,i,c,h){var g=(g=ke.current)?Vc(g):null;if(!g)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=ji(c.href),c=Qe(g).hoistableStyles,h=c.get(i),h||(h={type:"style",instance:null,count:0,state:null},c.set(i,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=ji(c.href);var x=Qe(g).hoistableStyles,k=x.get(n);if(k||(g=g.ownerDocument||g,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(n,k),(x=g.querySelector(Rl(n)))&&!x._p&&(k.instance=x,k.state.loading=5),Is.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Is.set(n,c),x||lN(g,n,c,k.state))),i&&h===null)throw Error(r(528,""));return k}if(i&&h!==null)throw Error(r(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=wi(c),c=Qe(g).hoistableScripts,h=c.get(i),h||(h={type:"script",instance:null,count:0,state:null},c.set(i,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function ji(n){return'href="'+Ps(n)+'"'}function Rl(n){return'link[rel="stylesheet"]['+n+"]"}function sy(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function lN(n,i,c,h){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?h.loading=1:(i=n.createElement("link"),h.preload=i,i.addEventListener("load",function(){return h.loading|=1}),i.addEventListener("error",function(){return h.loading|=2}),Zt(i,"link",c),Ze(i),n.head.appendChild(i))}function wi(n){return'[src="'+Ps(n)+'"]'}function Dl(n){return"script[async]"+n}function ay(n,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var h=n.querySelector('style[data-href~="'+Ps(c.href)+'"]');if(h)return i.instance=h,Ze(h),h;var g=y({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(n.ownerDocument||n).createElement("style"),Ze(h),Zt(h,"style",g),$c(h,c.precedence,n),i.instance=h;case"stylesheet":g=ji(c.href);var x=n.querySelector(Rl(g));if(x)return i.state.loading|=4,i.instance=x,Ze(x),x;h=sy(c),(g=Is.get(g))&&vm(h,g),x=(n.ownerDocument||n).createElement("link"),Ze(x);var k=x;return k._p=new Promise(function(M,F){k.onload=M,k.onerror=F}),Zt(x,"link",h),i.state.loading|=4,$c(x,c.precedence,n),i.instance=x;case"script":return x=wi(c.src),(g=n.querySelector(Dl(x)))?(i.instance=g,Ze(g),g):(h=c,(g=Is.get(x))&&(h=y({},c),jm(h,g)),n=n.ownerDocument||n,g=n.createElement("script"),Ze(g),Zt(g,"link",h),n.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(h=i.instance,i.state.loading|=4,$c(h,c.precedence,n));return i.instance}function $c(n,i,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,x=g,k=0;k<h.length;k++){var M=h[k];if(M.dataset.precedence===i)x=M;else if(x!==g)break}x?x.parentNode.insertBefore(n,x.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(n,i.firstChild))}function vm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function jm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Ic=null;function ny(n,i,c){if(Ic===null){var h=new Map,g=Ic=new Map;g.set(c,h)}else g=Ic,h=g.get(c),h||(h=new Map,g.set(c,h));if(h.has(n))return h;for(h.set(n,null),c=c.getElementsByTagName(n),g=0;g<c.length;g++){var x=c[g];if(!(x[gn]||x[Ft]||n==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var k=x.getAttribute(i)||"";k=n+k;var M=h.get(k);M?M.push(x):h.set(k,[x])}}return h}function ry(n,i,c){n=n.ownerDocument||n,n.head.insertBefore(c,i==="title"?n.querySelector("head > title"):null)}function oN(n,i,c){if(c===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function iy(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function cN(n,i,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=ji(h.href),x=i.querySelector(Rl(g));if(x){i=x._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Qc.bind(n),i.then(n,n)),c.state.loading|=4,c.instance=x,Ze(x);return}x=i.ownerDocument||i,h=sy(h),(g=Is.get(g))&&vm(h,g),x=x.createElement("link"),Ze(x);var k=x;k._p=new Promise(function(M,F){k.onload=M,k.onerror=F}),Zt(x,"link",h),c.instance=x}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(c,i),(i=c.state.preload)&&(c.state.loading&3)===0&&(n.count++,c=Qc.bind(n),i.addEventListener("load",c),i.addEventListener("error",c))}}var wm=0;function dN(n,i){return n.stylesheets&&n.count===0&&Gc(n,n.stylesheets),0<n.count||0<n.imgCount?function(c){var h=setTimeout(function(){if(n.stylesheets&&Gc(n,n.stylesheets),n.unsuspend){var x=n.unsuspend;n.unsuspend=null,x()}},6e4+i);0<n.imgBytes&&wm===0&&(wm=62500*$w());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Gc(n,n.stylesheets),n.unsuspend)){var x=n.unsuspend;n.unsuspend=null,x()}},(n.imgBytes>wm?50:800)+i);return n.unsuspend=c,function(){n.unsuspend=null,clearTimeout(h),clearTimeout(g)}}:null}function Qc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gc(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Yc=null;function Gc(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Yc=new Map,i.forEach(uN,n),Yc=null,Qc.call(n))}function uN(n,i){if(!(i.state.loading&4)){var c=Yc.get(n);if(c)var h=c.get(null);else{c=new Map,Yc.set(n,c);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<g.length;x++){var k=g[x];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(c.set(k.dataset.precedence,k),h=k)}h&&c.set(null,h)}g=i.instance,k=g.getAttribute("data-precedence"),x=c.get(k)||h,x===h&&c.set(null,g),c.set(k,g),this.count++,h=Qc.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),x?x.parentNode.insertBefore(g,x.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),i.state.loading|=4}}var Ml={$$typeof:A,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function hN(n,i,c,h,g,x,k,M,F){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vr(0),this.hiddenUpdates=Vr(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=x,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function ly(n,i,c,h,g,x,k,M,F,J,le,ce){return n=new hN(n,i,c,k,F,J,le,ce,M),i=1,x===!0&&(i|=24),x=Cs(3,null,null,i),n.current=x,x.stateNode=n,i=th(),i.refCount++,n.pooledCache=i,i.refCount++,x.memoizedState={element:h,isDehydrated:c,cache:i},rh(x),n}function oy(n){return n?(n=Jr,n):Jr}function cy(n,i,c,h,g,x){g=oy(g),h.context===null?h.context=g:h.pendingContext=g,h=Sn(i),h.payload={element:c},x=x===void 0?null:x,x!==null&&(h.callback=x),c=Cn(n,h,i),c!==null&&(ms(c,n,i),ul(c,n,i))}function dy(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<i?c:i}}function Nm(n,i){dy(n,i),(n=n.alternate)&&dy(n,i)}function uy(n){if(n.tag===13||n.tag===31){var i=ir(n,67108864);i!==null&&ms(i,n,67108864),Nm(n,67108864)}}function hy(n){if(n.tag===13||n.tag===31){var i=Ts();i=Qi(i);var c=ir(n,i);c!==null&&ms(c,n,i),Nm(n,i)}}var Wc=!0;function mN(n,i,c,h){var g=B.T;B.T=null;var x=L.p;try{L.p=2,Sm(n,i,c,h)}finally{L.p=x,B.T=g}}function fN(n,i,c,h){var g=B.T;B.T=null;var x=L.p;try{L.p=8,Sm(n,i,c,h)}finally{L.p=x,B.T=g}}function Sm(n,i,c,h){if(Wc){var g=Cm(h);if(g===null)dm(n,i,h,Xc,c),fy(n,h);else if(gN(g,n,i,c,h))h.stopPropagation();else if(fy(n,h),i&4&&-1<pN.indexOf(n)){for(;g!==null;){var x=ue(g);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var k=rs(x.pendingLanes);if(k!==0){var M=x;for(M.pendingLanes|=2,M.entangledLanes|=2;k;){var F=1<<31-At(k);M.entanglements[1]|=F,k&=~F}ba(x),(We&6)===0&&(Dc=me()+500,_l(0))}}break;case 31:case 13:M=ir(x,2),M!==null&&ms(M,x,2),Lc(),Nm(x,2)}if(x=Cm(h),x===null&&dm(n,i,h,Xc,c),x===g)break;g=x}g!==null&&h.stopPropagation()}else dm(n,i,h,null,c)}}function Cm(n){return n=_u(n),km(n)}var Xc=null;function km(n){if(Xc=null,n=$(n),n!==null){var i=o(n);if(i===null)n=null;else{var c=i.tag;if(c===13){if(n=d(i),n!==null)return n;n=null}else if(c===31){if(n=u(i),n!==null)return n;n=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Xc=n,null}function my(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pe()){case we:return 2;case $e:return 8;case Be:case Yt:return 32;case Ea:return 268435456;default:return 32}default:return 32}}var _m=!1,zn=null,Pn=null,Un=null,Ll=new Map,Ol=new Map,Bn=[],pN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fy(n,i){switch(n){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":Pn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":Ll.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(i.pointerId)}}function zl(n,i,c,h,g,x){return n===null||n.nativeEvent!==x?(n={blockedOn:i,domEventName:c,eventSystemFlags:h,nativeEvent:x,targetContainers:[g]},i!==null&&(i=ue(i),i!==null&&uy(i)),n):(n.eventSystemFlags|=h,i=n.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),n)}function gN(n,i,c,h,g){switch(i){case"focusin":return zn=zl(zn,n,i,c,h,g),!0;case"dragenter":return Pn=zl(Pn,n,i,c,h,g),!0;case"mouseover":return Un=zl(Un,n,i,c,h,g),!0;case"pointerover":var x=g.pointerId;return Ll.set(x,zl(Ll.get(x)||null,n,i,c,h,g)),!0;case"gotpointercapture":return x=g.pointerId,Ol.set(x,zl(Ol.get(x)||null,n,i,c,h,g)),!0}return!1}function py(n){var i=$(n.target);if(i!==null){var c=o(i);if(c!==null){if(i=c.tag,i===13){if(i=d(c),i!==null){n.blockedOn=i,Fo(n.priority,function(){hy(c)});return}}else if(i===31){if(i=u(c),i!==null){n.blockedOn=i,Fo(n.priority,function(){hy(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Zc(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var c=Cm(n.nativeEvent);if(c===null){c=n.nativeEvent;var h=new c.constructor(c.type,c);ku=h,c.target.dispatchEvent(h),ku=null}else return i=ue(c),i!==null&&uy(i),n.blockedOn=c,!1;i.shift()}return!0}function gy(n,i,c){Zc(n)&&c.delete(i)}function xN(){_m=!1,zn!==null&&Zc(zn)&&(zn=null),Pn!==null&&Zc(Pn)&&(Pn=null),Un!==null&&Zc(Un)&&(Un=null),Ll.forEach(gy),Ol.forEach(gy)}function Kc(n,i){n.blockedOn===i&&(n.blockedOn=null,_m||(_m=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,xN)))}var Jc=null;function xy(n){Jc!==n&&(Jc=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Jc===n&&(Jc=null);for(var i=0;i<n.length;i+=3){var c=n[i],h=n[i+1],g=n[i+2];if(typeof h!="function"){if(km(h||c)===null)continue;break}var x=ue(c);x!==null&&(n.splice(i,3),i-=3,Ch(x,{pending:!0,data:g,method:c.method,action:h},h,g))}}))}function Ni(n){function i(F){return Kc(F,n)}zn!==null&&Kc(zn,n),Pn!==null&&Kc(Pn,n),Un!==null&&Kc(Un,n),Ll.forEach(i),Ol.forEach(i);for(var c=0;c<Bn.length;c++){var h=Bn[c];h.blockedOn===n&&(h.blockedOn=null)}for(;0<Bn.length&&(c=Bn[0],c.blockedOn===null);)py(c),c.blockedOn===null&&Bn.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var g=c[h],x=c[h+1],k=g[Kt]||null;if(typeof x=="function")k||xy(c);else if(k){var M=null;if(x&&x.hasAttribute("formAction")){if(g=x,k=x[Kt]||null)M=k.formAction;else if(km(g)!==null)continue}else M=k.action;typeof M=="function"?c[h+1]=M:(c.splice(h,3),h-=3),xy(c)}}}function yy(){function n(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(k){return g=k})},focusReset:"manual",scroll:"manual"})}function i(){g!==null&&(g(),g=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),g!==null&&(g(),g=null)}}}function Am(n){this._internalRoot=n}ed.prototype.render=Am.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var c=i.current,h=Ts();cy(c,h,n,i,null,null)},ed.prototype.unmount=Am.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;cy(n.current,2,null,n,null,null),Lc(),i[pn]=null}};function ed(n){this._internalRoot=n}ed.prototype.unstable_scheduleHydration=function(n){if(n){var i=Bo();n={blockedOn:null,target:n,priority:i};for(var c=0;c<Bn.length&&i!==0&&i<Bn[c].priority;c++);Bn.splice(c,0,n),c===0&&py(n)}};var by=e.version;if(by!=="19.2.0")throw Error(r(527,by,"19.2.0"));L.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=f(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var yN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{Zs=td.inject(yN),Bt=td}catch{}}return Ul.createRoot=function(n,i){if(!l(n))throw Error(r(299));var c=!1,h="",g=kx,x=_x,k=Ax;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(x=i.onCaughtError),i.onRecoverableError!==void 0&&(k=i.onRecoverableError)),i=ly(n,1,!1,null,null,c,h,null,g,x,k,yy),n[pn]=i.current,cm(n),new Am(i)},Ul.hydrateRoot=function(n,i,c){if(!l(n))throw Error(r(299));var h=!1,g="",x=kx,k=_x,M=Ax,F=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(k=c.onCaughtError),c.onRecoverableError!==void 0&&(M=c.onRecoverableError),c.formState!==void 0&&(F=c.formState)),i=ly(n,1,!0,i,c??null,h,g,F,x,k,M,yy),i.context=oy(null),c=i.current,h=Ts(),h=Qi(h),g=Sn(h),g.callback=null,Cn(c,g,h),c=h,i.current.lanes=c,tr(i,c),ba(i),n[pn]=i.current,cm(n),new ed(i)},Ul.version="19.2.0",Ul}var Ey;function AN(){if(Ey)return Rm.exports;Ey=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Rm.exports=_N(),Rm.exports}var EN=AN();const TN=zi(EN);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ty="popstate";function RN(s={}){function e(r,l){let{pathname:o,search:d,hash:u}=r.location;return yf("",{pathname:o,search:d,hash:u},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function a(r,l){return typeof l=="string"?l:oo(l)}return MN(e,a,null,s)}function xt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Gs(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DN(){return Math.random().toString(36).substring(2,10)}function Ry(s,e){return{usr:s.state,key:s.key,idx:e}}function yf(s,e,a=null,r){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Pi(e):e,state:a,key:e&&e.key||r||DN()}}function oo({pathname:s="/",search:e="",hash:a=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function Pi(s){let e={};if(s){let a=s.indexOf("#");a>=0&&(e.hash=s.substring(a),s=s.substring(0,a));let r=s.indexOf("?");r>=0&&(e.search=s.substring(r),s=s.substring(0,r)),s&&(e.pathname=s)}return e}function MN(s,e,a,r={}){let{window:l=document.defaultView,v5Compat:o=!1}=r,d=l.history,u="POP",m=null,f=p();f==null&&(f=0,d.replaceState({...d.state,idx:f},""));function p(){return(d.state||{idx:null}).idx}function y(){u="POP";let N=p(),D=N==null?null:N-f;f=N,m&&m({action:u,location:C.location,delta:D})}function v(N,D){u="PUSH";let E=yf(C.location,N,D);f=p()+1;let A=Ry(E,f),T=C.createHref(E);try{d.pushState(A,"",T)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;l.location.assign(T)}o&&m&&m({action:u,location:C.location,delta:1})}function j(N,D){u="REPLACE";let E=yf(C.location,N,D);f=p();let A=Ry(E,f),T=C.createHref(E);d.replaceState(A,"",T),o&&m&&m({action:u,location:C.location,delta:0})}function S(N){return LN(N)}let C={get action(){return u},get location(){return s(l,d)},listen(N){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(Ty,y),m=N,()=>{l.removeEventListener(Ty,y),m=null}},createHref(N){return e(l,N)},createURL:S,encodeLocation(N){let D=S(N);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:v,replace:j,go(N){return d.go(N)}};return C}function LN(s,e=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),xt(a,"No window.location.(origin|href) available to create URL");let r=typeof s=="string"?s:oo(s);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=a+r),new URL(r,a)}function c1(s,e,a="/"){return ON(s,e,a,!1)}function ON(s,e,a,r){let l=typeof e=="string"?Pi(e):e,o=nn(l.pathname||"/",a);if(o==null)return null;let d=d1(s);zN(d);let u=null;for(let m=0;u==null&&m<d.length;++m){let f=YN(o);u=IN(d[m],f,r)}return u}function d1(s,e=[],a=[],r="",l=!1){let o=(d,u,m=l,f)=>{let p={relativePath:f===void 0?d.path||"":f,caseSensitive:d.caseSensitive===!0,childrenIndex:u,route:d};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&m)return;xt(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let y=an([r,p.relativePath]),v=a.concat(p);d.children&&d.children.length>0&&(xt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),d1(d.children,e,v,y,m)),!(d.path==null&&!d.index)&&e.push({path:y,score:VN(y,d.index),routesMeta:v})};return s.forEach((d,u)=>{if(d.path===""||!d.path?.includes("?"))o(d,u);else for(let m of u1(d.path))o(d,u,!0,m)}),e}function u1(s){let e=s.split("/");if(e.length===0)return[];let[a,...r]=e,l=a.endsWith("?"),o=a.replace(/\?$/,"");if(r.length===0)return l?[o,""]:[o];let d=u1(r.join("/")),u=[];return u.push(...d.map(m=>m===""?o:[o,m].join("/"))),l&&u.push(...d),u.map(m=>s.startsWith("/")&&m===""?"/":m)}function zN(s){s.sort((e,a)=>e.score!==a.score?a.score-e.score:$N(e.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}var PN=/^:[\w-]+$/,UN=3,BN=2,FN=1,HN=10,qN=-2,Dy=s=>s==="*";function VN(s,e){let a=s.split("/"),r=a.length;return a.some(Dy)&&(r+=qN),e&&(r+=BN),a.filter(l=>!Dy(l)).reduce((l,o)=>l+(PN.test(o)?UN:o===""?FN:HN),r)}function $N(s,e){return s.length===e.length&&s.slice(0,-1).every((r,l)=>r===e[l])?s[s.length-1]-e[e.length-1]:0}function IN(s,e,a=!1){let{routesMeta:r}=s,l={},o="/",d=[];for(let u=0;u<r.length;++u){let m=r[u],f=u===r.length-1,p=o==="/"?e:e.slice(o.length)||"/",y=Dd({path:m.relativePath,caseSensitive:m.caseSensitive,end:f},p),v=m.route;if(!y&&f&&a&&!r[r.length-1].route.index&&(y=Dd({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},p)),!y)return null;Object.assign(l,y.params),d.push({params:l,pathname:an([o,y.pathname]),pathnameBase:ZN(an([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=an([o,y.pathnameBase]))}return d}function Dd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[a,r]=QN(s.path,s.caseSensitive,s.end),l=e.match(a);if(!l)return null;let o=l[0],d=o.replace(/(.)\/+$/,"$1"),u=l.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:y},v)=>{if(p==="*"){let S=u[v]||"";d=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const j=u[v];return y&&!j?f[p]=void 0:f[p]=(j||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:d,pattern:s}}function QN(s,e=!1,a=!0){Gs(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let r=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,u,m)=>(r.push({paramName:u,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(r.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),r]}function YN(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gs(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function nn(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let a=e.endsWith("/")?e.length-1:e.length,r=s.charAt(a);return r&&r!=="/"?null:s.slice(a)||"/"}function GN(s,e="/"){let{pathname:a,search:r="",hash:l=""}=typeof s=="string"?Pi(s):s;return{pathname:a?a.startsWith("/")?a:WN(a,e):e,search:KN(r),hash:JN(l)}}function WN(s,e){let a=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?a.length>1&&a.pop():l!=="."&&a.push(l)}),a.length>1?a.join("/"):"/"}function Om(s,e,a,r){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function XN(s){return s.filter((e,a)=>a===0||e.route.path&&e.route.path.length>0)}function Xf(s){let e=XN(s);return e.map((a,r)=>r===e.length-1?a.pathname:a.pathnameBase)}function Zf(s,e,a,r=!1){let l;typeof s=="string"?l=Pi(s):(l={...s},xt(!l.pathname||!l.pathname.includes("?"),Om("?","pathname","search",l)),xt(!l.pathname||!l.pathname.includes("#"),Om("#","pathname","hash",l)),xt(!l.search||!l.search.includes("#"),Om("#","search","hash",l)));let o=s===""||l.pathname==="",d=o?"/":l.pathname,u;if(d==null)u=a;else{let y=e.length-1;if(!r&&d.startsWith("..")){let v=d.split("/");for(;v[0]==="..";)v.shift(),y-=1;l.pathname=v.join("/")}u=y>=0?e[y]:"/"}let m=GN(l,u),f=d&&d!=="/"&&d.endsWith("/"),p=(o||d===".")&&a.endsWith("/");return!m.pathname.endsWith("/")&&(f||p)&&(m.pathname+="/"),m}var an=s=>s.join("/").replace(/\/\/+/g,"/"),ZN=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),KN=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,JN=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function e5(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var h1=["POST","PUT","PATCH","DELETE"];new Set(h1);var t5=["GET",...h1];new Set(t5);var Ui=b.createContext(null);Ui.displayName="DataRouter";var Qd=b.createContext(null);Qd.displayName="DataRouterState";b.createContext(!1);var m1=b.createContext({isTransitioning:!1});m1.displayName="ViewTransition";var s5=b.createContext(new Map);s5.displayName="Fetchers";var a5=b.createContext(null);a5.displayName="Await";var da=b.createContext(null);da.displayName="Navigation";var wo=b.createContext(null);wo.displayName="Location";var ua=b.createContext({outlet:null,matches:[],isDataRoute:!1});ua.displayName="Route";var Kf=b.createContext(null);Kf.displayName="RouteError";function n5(s,{relative:e}={}){xt(Bi(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:r}=b.useContext(da),{hash:l,pathname:o,search:d}=No(s,{relative:e}),u=o;return a!=="/"&&(u=o==="/"?a:an([a,o])),r.createHref({pathname:u,search:d,hash:l})}function Bi(){return b.useContext(wo)!=null}function Xs(){return xt(Bi(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(wo).location}var f1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function p1(s){b.useContext(da).static||b.useLayoutEffect(s)}function ze(){let{isDataRoute:s}=b.useContext(ua);return s?x5():r5()}function r5(){xt(Bi(),"useNavigate() may be used only in the context of a <Router> component.");let s=b.useContext(Ui),{basename:e,navigator:a}=b.useContext(da),{matches:r}=b.useContext(ua),{pathname:l}=Xs(),o=JSON.stringify(Xf(r)),d=b.useRef(!1);return p1(()=>{d.current=!0}),b.useCallback((m,f={})=>{if(Gs(d.current,f1),!d.current)return;if(typeof m=="number"){a.go(m);return}let p=Zf(m,JSON.parse(o),l,f.relative==="path");s==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:an([e,p.pathname])),(f.replace?a.replace:a.push)(p,f.state,f)},[e,a,o,l,s])}b.createContext(null);function Xn(){let{matches:s}=b.useContext(ua),e=s[s.length-1];return e?e.params:{}}function No(s,{relative:e}={}){let{matches:a}=b.useContext(ua),{pathname:r}=Xs(),l=JSON.stringify(Xf(a));return b.useMemo(()=>Zf(s,JSON.parse(l),r,e==="path"),[s,l,r,e])}function i5(s,e){return g1(s,e)}function g1(s,e,a,r,l){xt(Bi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=b.useContext(da),{matches:d}=b.useContext(ua),u=d[d.length-1],m=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",y=u&&u.route;{let E=y&&y.path||"";x1(f,!y||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let v=Xs(),j;if(e){let E=typeof e=="string"?Pi(e):e;xt(p==="/"||E.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${E.pathname}" was given in the \`location\` prop.`),j=E}else j=v;let S=j.pathname||"/",C=S;if(p!=="/"){let E=p.replace(/^\//,"").split("/");C="/"+S.replace(/^\//,"").split("/").slice(E.length).join("/")}let N=c1(s,{pathname:C});Gs(y||N!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),Gs(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=u5(N&&N.map(E=>Object.assign({},E,{params:Object.assign({},m,E.params),pathname:an([p,o.encodeLocation?o.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?p:an([p,o.encodeLocation?o.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),d,a,r,l);return e&&D?b.createElement(wo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},D):D}function l5(){let s=g5(),e=e5(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),a=s instanceof Error?s.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:o},"ErrorBoundary")," or"," ",b.createElement("code",{style:o},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),a?b.createElement("pre",{style:l},a):null,d)}var o5=b.createElement(l5,null),c5=class extends b.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.unstable_onError?this.props.unstable_onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?b.createElement(ua.Provider,{value:this.props.routeContext},b.createElement(Kf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function d5({routeContext:s,match:e,children:a}){let r=b.useContext(Ui);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(ua.Provider,{value:s},a)}function u5(s,e=[],a=null,r=null,l=null){if(s==null){if(!a)return null;if(a.errors)s=a.matches;else if(e.length===0&&!a.initialized&&a.matches.length>0)s=a.matches;else return null}let o=s,d=a?.errors;if(d!=null){let f=o.findIndex(p=>p.route.id&&d?.[p.route.id]!==void 0);xt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,m=-1;if(a)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(m=f),p.route.id){let{loaderData:y,errors:v}=a,j=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||j){u=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((f,p,y)=>{let v,j=!1,S=null,C=null;a&&(v=d&&p.route.id?d[p.route.id]:void 0,S=p.route.errorElement||o5,u&&(m<0&&y===0?(x1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,C=null):m===y&&(j=!0,C=p.route.hydrateFallbackElement||null)));let N=e.concat(o.slice(0,y+1)),D=()=>{let E;return v?E=S:j?E=C:p.route.Component?E=b.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=f,b.createElement(d5,{match:p,routeContext:{outlet:f,matches:N,isDataRoute:a!=null},children:E})};return a&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?b.createElement(c5,{location:a.location,revalidation:a.revalidation,component:S,error:v,children:D(),routeContext:{outlet:null,matches:N,isDataRoute:!0},unstable_onError:r}):D()},null)}function Jf(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h5(s){let e=b.useContext(Ui);return xt(e,Jf(s)),e}function m5(s){let e=b.useContext(Qd);return xt(e,Jf(s)),e}function f5(s){let e=b.useContext(ua);return xt(e,Jf(s)),e}function ep(s){let e=f5(s),a=e.matches[e.matches.length-1];return xt(a.route.id,`${s} can only be used on routes that contain a unique "id"`),a.route.id}function p5(){return ep("useRouteId")}function g5(){let s=b.useContext(Kf),e=m5("useRouteError"),a=ep("useRouteError");return s!==void 0?s:e.errors?.[a]}function x5(){let{router:s}=h5("useNavigate"),e=ep("useNavigate"),a=b.useRef(!1);return p1(()=>{a.current=!0}),b.useCallback(async(l,o={})=>{Gs(a.current,f1),a.current&&(typeof l=="number"?s.navigate(l):await s.navigate(l,{fromRouteId:e,...o}))},[s,e])}var My={};function x1(s,e,a){!e&&!My[s]&&(My[s]=!0,Gs(!1,a))}b.memo(y5);function y5({routes:s,future:e,state:a,unstable_onError:r}){return g1(s,void 0,a,r,e)}function Rr({to:s,replace:e,state:a,relative:r}){xt(Bi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=b.useContext(da);Gs(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=b.useContext(ua),{pathname:d}=Xs(),u=ze(),m=Zf(s,Xf(o),d,r==="path"),f=JSON.stringify(m);return b.useEffect(()=>{u(JSON.parse(f),{replace:e,state:a,relative:r})},[u,f,r,e,a]),null}function Ee(s){xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function b5({basename:s="/",children:e=null,location:a,navigationType:r="POP",navigator:l,static:o=!1}){xt(!Bi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:d,navigator:l,static:o,future:{}}),[d,l,o]);typeof a=="string"&&(a=Pi(a));let{pathname:m="/",search:f="",hash:p="",state:y=null,key:v="default"}=a,j=b.useMemo(()=>{let S=nn(m,d);return S==null?null:{location:{pathname:S,search:f,hash:p,state:y,key:v},navigationType:r}},[d,m,f,p,y,v,r]);return Gs(j!=null,`<Router basename="${d}"> is not able to match the URL "${m}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:b.createElement(da.Provider,{value:u},b.createElement(wo.Provider,{children:e,value:j}))}function v5({children:s,location:e}){return i5(bf(s),e)}function bf(s,e=[]){let a=[];return b.Children.forEach(s,(r,l)=>{if(!b.isValidElement(r))return;let o=[...e,l];if(r.type===b.Fragment){a.push.apply(a,bf(r.props.children,o));return}xt(r.type===Ee,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let d={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(d.children=bf(r.props.children,o)),a.push(d)}),a}var Sd="get",Cd="application/x-www-form-urlencoded";function Yd(s){return s!=null&&typeof s.tagName=="string"}function j5(s){return Yd(s)&&s.tagName.toLowerCase()==="button"}function w5(s){return Yd(s)&&s.tagName.toLowerCase()==="form"}function N5(s){return Yd(s)&&s.tagName.toLowerCase()==="input"}function S5(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function C5(s,e){return s.button===0&&(!e||e==="_self")&&!S5(s)}function vf(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,a)=>{let r=s[a];return e.concat(Array.isArray(r)?r.map(l=>[a,l]):[[a,r]])},[]))}function k5(s,e){let a=vf(s);return e&&e.forEach((r,l)=>{a.has(l)||e.getAll(l).forEach(o=>{a.append(l,o)})}),a}var sd=null;function _5(){if(sd===null)try{new FormData(document.createElement("form"),0),sd=!1}catch{sd=!0}return sd}var A5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zm(s){return s!=null&&!A5.has(s)?(Gs(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Cd}"`),null):s}function E5(s,e){let a,r,l,o,d;if(w5(s)){let u=s.getAttribute("action");r=u?nn(u,e):null,a=s.getAttribute("method")||Sd,l=zm(s.getAttribute("enctype"))||Cd,o=new FormData(s)}else if(j5(s)||N5(s)&&(s.type==="submit"||s.type==="image")){let u=s.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=s.getAttribute("formaction")||u.getAttribute("action");if(r=m?nn(m,e):null,a=s.getAttribute("formmethod")||u.getAttribute("method")||Sd,l=zm(s.getAttribute("formenctype"))||zm(u.getAttribute("enctype"))||Cd,o=new FormData(u,s),!_5()){let{name:f,type:p,value:y}=s;if(p==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,y)}}else{if(Yd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Sd,r=null,l=Cd,d=s}return o&&l==="text/plain"&&(d=o,o=void 0),{action:r,method:a.toLowerCase(),encType:l,formData:o,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function tp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function T5(s,e,a){let r=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return r.pathname==="/"?r.pathname=`_root.${a}`:e&&nn(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${a}`,r}async function R5(s,e){if(s.id in e)return e[s.id];try{let a=await import(s.module);return e[s.id]=a,a}catch(a){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function D5(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function M5(s,e,a){let r=await Promise.all(s.map(async l=>{let o=e.routes[l.route.id];if(o){let d=await R5(o,a);return d.links?d.links():[]}return[]}));return P5(r.flat(1).filter(D5).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Ly(s,e,a,r,l,o){let d=(m,f)=>a[f]?m.route.id!==a[f].route.id:!0,u=(m,f)=>a[f].pathname!==m.pathname||a[f].route.path?.endsWith("*")&&a[f].params["*"]!==m.params["*"];return o==="assets"?e.filter((m,f)=>d(m,f)||u(m,f)):o==="data"?e.filter((m,f)=>{let p=r.routes[m.route.id];if(!p||!p.hasLoader)return!1;if(d(m,f)||u(m,f))return!0;if(m.route.shouldRevalidate){let y=m.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function L5(s,e,{includeHydrateFallback:a}={}){return O5(s.map(r=>{let l=e.routes[r.route.id];if(!l)return[];let o=[l.module];return l.clientActionModule&&(o=o.concat(l.clientActionModule)),l.clientLoaderModule&&(o=o.concat(l.clientLoaderModule)),a&&l.hydrateFallbackModule&&(o=o.concat(l.hydrateFallbackModule)),l.imports&&(o=o.concat(l.imports)),o}).flat(1))}function O5(s){return[...new Set(s)]}function z5(s){let e={},a=Object.keys(s).sort();for(let r of a)e[r]=s[r];return e}function P5(s,e){let a=new Set;return new Set(e),s.reduce((r,l)=>{let o=JSON.stringify(z5(l));return a.has(o)||(a.add(o),r.push({key:o,link:l})),r},[])}function y1(){let s=b.useContext(Ui);return tp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function U5(){let s=b.useContext(Qd);return tp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var sp=b.createContext(void 0);sp.displayName="FrameworkContext";function b1(){let s=b.useContext(sp);return tp(s,"You must render this element inside a <HydratedRouter> element"),s}function B5(s,e){let a=b.useContext(sp),[r,l]=b.useState(!1),[o,d]=b.useState(!1),{onFocus:u,onBlur:m,onMouseEnter:f,onMouseLeave:p,onTouchStart:y}=e,v=b.useRef(null);b.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let C=D=>{D.forEach(E=>{d(E.isIntersecting)})},N=new IntersectionObserver(C,{threshold:.5});return v.current&&N.observe(v.current),()=>{N.disconnect()}}},[s]),b.useEffect(()=>{if(r){let C=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(C)}}},[r]);let j=()=>{l(!0)},S=()=>{l(!1),d(!1)};return a?s!=="intent"?[o,v,{}]:[o,v,{onFocus:Bl(u,j),onBlur:Bl(m,S),onMouseEnter:Bl(f,j),onMouseLeave:Bl(p,S),onTouchStart:Bl(y,j)}]:[!1,v,{}]}function Bl(s,e){return a=>{s&&s(a),a.defaultPrevented||e(a)}}function F5({page:s,...e}){let{router:a}=y1(),r=b.useMemo(()=>c1(a.routes,s,a.basename),[a.routes,s,a.basename]);return r?b.createElement(q5,{page:s,matches:r,...e}):null}function H5(s){let{manifest:e,routeModules:a}=b1(),[r,l]=b.useState([]);return b.useEffect(()=>{let o=!1;return M5(s,e,a).then(d=>{o||l(d)}),()=>{o=!0}},[s,e,a]),r}function q5({page:s,matches:e,...a}){let r=Xs(),{manifest:l,routeModules:o}=b1(),{basename:d}=y1(),{loaderData:u,matches:m}=U5(),f=b.useMemo(()=>Ly(s,e,m,l,r,"data"),[s,e,m,l,r]),p=b.useMemo(()=>Ly(s,e,m,l,r,"assets"),[s,e,m,l,r]),y=b.useMemo(()=>{if(s===r.pathname+r.search+r.hash)return[];let S=new Set,C=!1;if(e.forEach(D=>{let E=l.routes[D.route.id];!E||!E.hasLoader||(!f.some(A=>A.route.id===D.route.id)&&D.route.id in u&&o[D.route.id]?.shouldRevalidate||E.hasClientLoader?C=!0:S.add(D.route.id))}),S.size===0)return[];let N=T5(s,d,"data");return C&&S.size>0&&N.searchParams.set("_routes",e.filter(D=>S.has(D.route.id)).map(D=>D.route.id).join(",")),[N.pathname+N.search]},[d,u,r,l,f,e,s,o]),v=b.useMemo(()=>L5(p,l),[p,l]),j=H5(p);return b.createElement(b.Fragment,null,y.map(S=>b.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...a})),v.map(S=>b.createElement("link",{key:S,rel:"modulepreload",href:S,...a})),j.map(({key:S,link:C})=>b.createElement("link",{key:S,nonce:a.nonce,...C})))}function V5(...s){return e=>{s.forEach(a=>{typeof a=="function"?a(e):a!=null&&(a.current=e)})}}var v1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{v1&&(window.__reactRouterVersion="7.9.4")}catch{}function $5({basename:s,children:e,window:a}){let r=b.useRef();r.current==null&&(r.current=RN({window:a,v5Compat:!0}));let l=r.current,[o,d]=b.useState({action:l.action,location:l.location}),u=b.useCallback(m=>{b.startTransition(()=>d(m))},[d]);return b.useLayoutEffect(()=>l.listen(u),[l,u]),b.createElement(b5,{basename:s,children:e,location:o.location,navigationType:o.action,navigator:l})}var j1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ls=b.forwardRef(function({onClick:e,discover:a="render",prefetch:r="none",relative:l,reloadDocument:o,replace:d,state:u,target:m,to:f,preventScrollReset:p,viewTransition:y,...v},j){let{basename:S}=b.useContext(da),C=typeof f=="string"&&j1.test(f),N,D=!1;if(typeof f=="string"&&C&&(N=f,v1))try{let H=new URL(window.location.href),q=f.startsWith("//")?new URL(H.protocol+f):new URL(f),ne=nn(q.pathname,S);q.origin===H.origin&&ne!=null?f=ne+q.search+q.hash:D=!0}catch{Gs(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=n5(f,{relative:l}),[A,T,w]=B5(r,v),_=Y5(f,{replace:d,state:u,target:m,preventScrollReset:p,relative:l,viewTransition:y});function R(H){e&&e(H),H.defaultPrevented||_(H)}let z=b.createElement("a",{...v,...w,href:N||E,onClick:D||o?e:R,ref:V5(j,T),target:m,"data-discover":!C&&a==="render"?"true":void 0});return A&&!C?b.createElement(b.Fragment,null,z,b.createElement(F5,{page:E})):z});ls.displayName="Link";var Ti=b.forwardRef(function({"aria-current":e="page",caseSensitive:a=!1,className:r="",end:l=!1,style:o,to:d,viewTransition:u,children:m,...f},p){let y=No(d,{relative:f.relative}),v=Xs(),j=b.useContext(Qd),{navigator:S,basename:C}=b.useContext(da),N=j!=null&&K5(y)&&u===!0,D=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,E=v.pathname,A=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;a||(E=E.toLowerCase(),A=A?A.toLowerCase():null,D=D.toLowerCase()),A&&C&&(A=nn(A,C)||A);const T=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let w=E===D||!l&&E.startsWith(D)&&E.charAt(T)==="/",_=A!=null&&(A===D||!l&&A.startsWith(D)&&A.charAt(D.length)==="/"),R={isActive:w,isPending:_,isTransitioning:N},z=w?e:void 0,H;typeof r=="function"?H=r(R):H=[r,w?"active":null,_?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let q=typeof o=="function"?o(R):o;return b.createElement(ls,{...f,"aria-current":z,className:H,ref:p,style:q,to:d,viewTransition:u},typeof m=="function"?m(R):m)});Ti.displayName="NavLink";var I5=b.forwardRef(({discover:s="render",fetcherKey:e,navigate:a,reloadDocument:r,replace:l,state:o,method:d=Sd,action:u,onSubmit:m,relative:f,preventScrollReset:p,viewTransition:y,...v},j)=>{let S=X5(),C=Z5(u,{relative:f}),N=d.toLowerCase()==="get"?"get":"post",D=typeof u=="string"&&j1.test(u),E=A=>{if(m&&m(A),A.defaultPrevented)return;A.preventDefault();let T=A.nativeEvent.submitter,w=T?.getAttribute("formmethod")||d;S(T||A.currentTarget,{fetcherKey:e,method:w,navigate:a,replace:l,state:o,relative:f,preventScrollReset:p,viewTransition:y})};return b.createElement("form",{ref:j,method:N,action:C,onSubmit:r?m:E,...v,"data-discover":!D&&s==="render"?"true":void 0})});I5.displayName="Form";function Q5(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function w1(s){let e=b.useContext(Ui);return xt(e,Q5(s)),e}function Y5(s,{target:e,replace:a,state:r,preventScrollReset:l,relative:o,viewTransition:d}={}){let u=ze(),m=Xs(),f=No(s,{relative:o});return b.useCallback(p=>{if(C5(p,e)){p.preventDefault();let y=a!==void 0?a:oo(m)===oo(f);u(s,{replace:y,state:r,preventScrollReset:l,relative:o,viewTransition:d})}},[m,u,f,a,r,e,s,l,o,d])}function ap(s){Gs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=b.useRef(vf(s)),a=b.useRef(!1),r=Xs(),l=b.useMemo(()=>k5(r.search,a.current?null:e.current),[r.search]),o=ze(),d=b.useCallback((u,m)=>{const f=vf(typeof u=="function"?u(new URLSearchParams(l)):u);a.current=!0,o("?"+f,m)},[o,l]);return[l,d]}var G5=0,W5=()=>`__${String(++G5)}__`;function X5(){let{router:s}=w1("useSubmit"),{basename:e}=b.useContext(da),a=p5();return b.useCallback(async(r,l={})=>{let{action:o,method:d,encType:u,formData:m,body:f}=E5(r,e);if(l.navigate===!1){let p=l.fetcherKey||W5();await s.fetch(p,a,l.action||o,{preventScrollReset:l.preventScrollReset,formData:m,body:f,formMethod:l.method||d,formEncType:l.encType||u,flushSync:l.flushSync})}else await s.navigate(l.action||o,{preventScrollReset:l.preventScrollReset,formData:m,body:f,formMethod:l.method||d,formEncType:l.encType||u,replace:l.replace,state:l.state,fromRouteId:a,flushSync:l.flushSync,viewTransition:l.viewTransition})},[s,e,a])}function Z5(s,{relative:e}={}){let{basename:a}=b.useContext(da),r=b.useContext(ua);xt(r,"useFormAction must be used inside a RouteContext");let[l]=r.matches.slice(-1),o={...No(s||".",{relative:e})},d=Xs();if(s==null){o.search=d.search;let u=new URLSearchParams(o.search),m=u.getAll("index");if(m.some(p=>p==="")){u.delete("index"),m.filter(y=>y).forEach(y=>u.append("index",y));let p=u.toString();o.search=p?`?${p}`:""}}return(!s||s===".")&&l.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(o.pathname=o.pathname==="/"?a:an([a,o.pathname])),oo(o)}function K5(s,{relative:e}={}){let a=b.useContext(m1);xt(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=w1("useViewTransitionState"),l=No(s,{relative:e});if(!a.isTransitioning)return!1;let o=nn(a.currentLocation.pathname,r)||a.currentLocation.pathname,d=nn(a.nextLocation.pathname,r)||a.nextLocation.pathname;return Dd(l.pathname,d)!=null||Dd(l.pathname,o)!=null}let J5={data:""},eS=s=>{if(typeof window=="object"){let e=(s?s.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(s||document.head).appendChild(e),e.firstChild}return s||J5},tS=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,sS=/\/\*[^]*?\*\/|  +/g,Oy=/\n+/g,Hn=(s,e)=>{let a="",r="",l="";for(let o in s){let d=s[o];o[0]=="@"?o[1]=="i"?a=o+" "+d+";":r+=o[1]=="f"?Hn(d,o):o+"{"+Hn(d,o[1]=="k"?"":e)+"}":typeof d=="object"?r+=Hn(d,e?e.replace(/([^,])+/g,u=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,u):u?u+" "+m:m)):o):d!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),l+=Hn.p?Hn.p(o,d):o+":"+d+";")}return a+(e&&l?e+"{"+l+"}":l)+r},Wa={},N1=s=>{if(typeof s=="object"){let e="";for(let a in s)e+=a+N1(s[a]);return e}return s},aS=(s,e,a,r,l)=>{let o=N1(s),d=Wa[o]||(Wa[o]=(m=>{let f=0,p=11;for(;f<m.length;)p=101*p+m.charCodeAt(f++)>>>0;return"go"+p})(o));if(!Wa[d]){let m=o!==s?s:(f=>{let p,y,v=[{}];for(;p=tS.exec(f.replace(sS,""));)p[4]?v.shift():p[3]?(y=p[3].replace(Oy," ").trim(),v.unshift(v[0][y]=v[0][y]||{})):v[0][p[1]]=p[2].replace(Oy," ").trim();return v[0]})(s);Wa[d]=Hn(l?{["@keyframes "+d]:m}:m,a?"":"."+d)}let u=a&&Wa.g?Wa.g:null;return a&&(Wa.g=Wa[d]),((m,f,p,y)=>{y?f.data=f.data.replace(y,m):f.data.indexOf(m)===-1&&(f.data=p?m+f.data:f.data+m)})(Wa[d],e,r,u),d},nS=(s,e,a)=>s.reduce((r,l,o)=>{let d=e[o];if(d&&d.call){let u=d(a),m=u&&u.props&&u.props.className||/^go/.test(u)&&u;d=m?"."+m:u&&typeof u=="object"?u.props?"":Hn(u,""):u===!1?"":u}return r+l+(d??"")},"");function Gd(s){let e=this||{},a=s.call?s(e.p):s;return aS(a.unshift?a.raw?nS(a,[].slice.call(arguments,1),e.p):a.reduce((r,l)=>Object.assign(r,l&&l.call?l(e.p):l),{}):a,eS(e.target),e.g,e.o,e.k)}let S1,jf,wf;Gd.bind({g:1});let rn=Gd.bind({k:1});function rS(s,e,a,r){Hn.p=e,S1=s,jf=a,wf=r}function Zn(s,e){let a=this||{};return function(){let r=arguments;function l(o,d){let u=Object.assign({},o),m=u.className||l.className;a.p=Object.assign({theme:jf&&jf()},u),a.o=/ *go\d+/.test(m),u.className=Gd.apply(a,r)+(m?" "+m:"");let f=s;return s[0]&&(f=u.as||s,delete u.as),wf&&f[0]&&wf(u),S1(f,u)}return l}}var iS=s=>typeof s=="function",Md=(s,e)=>iS(s)?s(e):s,lS=(()=>{let s=0;return()=>(++s).toString()})(),C1=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");s=!e||e.matches}return s}})(),oS=20,np="default",k1=(s,e)=>{let{toastLimit:a}=s.settings;switch(e.type){case 0:return{...s,toasts:[e.toast,...s.toasts].slice(0,a)};case 1:return{...s,toasts:s.toasts.map(d=>d.id===e.toast.id?{...d,...e.toast}:d)};case 2:let{toast:r}=e;return k1(s,{type:s.toasts.find(d=>d.id===r.id)?1:0,toast:r});case 3:let{toastId:l}=e;return{...s,toasts:s.toasts.map(d=>d.id===l||l===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return e.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(d=>d.id!==e.toastId)};case 5:return{...s,pausedAt:e.time};case 6:let o=e.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+o}))}}},kd=[],_1={toasts:[],pausedAt:void 0,settings:{toastLimit:oS}},Ca={},A1=(s,e=np)=>{Ca[e]=k1(Ca[e]||_1,s),kd.forEach(([a,r])=>{a===e&&r(Ca[e])})},E1=s=>Object.keys(Ca).forEach(e=>A1(s,e)),cS=s=>Object.keys(Ca).find(e=>Ca[e].toasts.some(a=>a.id===s)),Wd=(s=np)=>e=>{A1(e,s)},dS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},uS=(s={},e=np)=>{let[a,r]=b.useState(Ca[e]||_1),l=b.useRef(Ca[e]);b.useEffect(()=>(l.current!==Ca[e]&&r(Ca[e]),kd.push([e,r]),()=>{let d=kd.findIndex(([u])=>u===e);d>-1&&kd.splice(d,1)}),[e]);let o=a.toasts.map(d=>{var u,m,f;return{...s,...s[d.type],...d,removeDelay:d.removeDelay||((u=s[d.type])==null?void 0:u.removeDelay)||s?.removeDelay,duration:d.duration||((m=s[d.type])==null?void 0:m.duration)||s?.duration||dS[d.type],style:{...s.style,...(f=s[d.type])==null?void 0:f.style,...d.style}}});return{...a,toasts:o}},hS=(s,e="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...a,id:a?.id||lS()}),So=s=>(e,a)=>{let r=hS(e,s,a);return Wd(r.toasterId||cS(r.id))({type:2,toast:r}),r.id},qt=(s,e)=>So("blank")(s,e);qt.error=So("error");qt.success=So("success");qt.loading=So("loading");qt.custom=So("custom");qt.dismiss=(s,e)=>{let a={type:3,toastId:s};e?Wd(e)(a):E1(a)};qt.dismissAll=s=>qt.dismiss(void 0,s);qt.remove=(s,e)=>{let a={type:4,toastId:s};e?Wd(e)(a):E1(a)};qt.removeAll=s=>qt.remove(void 0,s);qt.promise=(s,e,a)=>{let r=qt.loading(e.loading,{...a,...a?.loading});return typeof s=="function"&&(s=s()),s.then(l=>{let o=e.success?Md(e.success,l):void 0;return o?qt.success(o,{id:r,...a,...a?.success}):qt.dismiss(r),l}).catch(l=>{let o=e.error?Md(e.error,l):void 0;o?qt.error(o,{id:r,...a,...a?.error}):qt.dismiss(r)}),s};var mS=1e3,fS=(s,e="default")=>{let{toasts:a,pausedAt:r}=uS(s,e),l=b.useRef(new Map).current,o=b.useCallback((y,v=mS)=>{if(l.has(y))return;let j=setTimeout(()=>{l.delete(y),d({type:4,toastId:y})},v);l.set(y,j)},[]);b.useEffect(()=>{if(r)return;let y=Date.now(),v=a.map(j=>{if(j.duration===1/0)return;let S=(j.duration||0)+j.pauseDuration-(y-j.createdAt);if(S<0){j.visible&&qt.dismiss(j.id);return}return setTimeout(()=>qt.dismiss(j.id,e),S)});return()=>{v.forEach(j=>j&&clearTimeout(j))}},[a,r,e]);let d=b.useCallback(Wd(e),[e]),u=b.useCallback(()=>{d({type:5,time:Date.now()})},[d]),m=b.useCallback((y,v)=>{d({type:1,toast:{id:y,height:v}})},[d]),f=b.useCallback(()=>{r&&d({type:6,time:Date.now()})},[r,d]),p=b.useCallback((y,v)=>{let{reverseOrder:j=!1,gutter:S=8,defaultPosition:C}=v||{},N=a.filter(A=>(A.position||C)===(y.position||C)&&A.height),D=N.findIndex(A=>A.id===y.id),E=N.filter((A,T)=>T<D&&A.visible).length;return N.filter(A=>A.visible).slice(...j?[E+1]:[0,E]).reduce((A,T)=>A+(T.height||0)+S,0)},[a]);return b.useEffect(()=>{a.forEach(y=>{if(y.dismissed)o(y.id,y.removeDelay);else{let v=l.get(y.id);v&&(clearTimeout(v),l.delete(y.id))}})},[a,o]),{toasts:a,handlers:{updateHeight:m,startPause:u,endPause:f,calculateOffset:p}}},pS=rn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,gS=rn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,xS=rn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,yS=Zn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${gS} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${xS} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,bS=rn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,vS=Zn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${bS} 1s linear infinite;
`,jS=rn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,wS=rn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,NS=Zn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${jS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${wS} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,SS=Zn("div")`
  position: absolute;
`,CS=Zn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,kS=rn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_S=Zn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${kS} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,AS=({toast:s})=>{let{icon:e,type:a,iconTheme:r}=s;return e!==void 0?typeof e=="string"?b.createElement(_S,null,e):e:a==="blank"?null:b.createElement(CS,null,b.createElement(vS,{...r}),a!=="loading"&&b.createElement(SS,null,a==="error"?b.createElement(yS,{...r}):b.createElement(NS,{...r})))},ES=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,TS=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,RS="0%{opacity:0;} 100%{opacity:1;}",DS="0%{opacity:1;} 100%{opacity:0;}",MS=Zn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,LS=Zn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,OS=(s,e)=>{let a=s.includes("top")?1:-1,[r,l]=C1()?[RS,DS]:[ES(a),TS(a)];return{animation:e?`${rn(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${rn(l)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},zS=b.memo(({toast:s,position:e,style:a,children:r})=>{let l=s.height?OS(s.position||e||"top-center",s.visible):{opacity:0},o=b.createElement(AS,{toast:s}),d=b.createElement(LS,{...s.ariaProps},Md(s.message,s));return b.createElement(MS,{className:s.className,style:{...l,...a,...s.style}},typeof r=="function"?r({icon:o,message:d}):b.createElement(b.Fragment,null,o,d))});rS(b.createElement);var PS=({id:s,className:e,style:a,onHeightUpdate:r,children:l})=>{let o=b.useCallback(d=>{if(d){let u=()=>{let m=d.getBoundingClientRect().height;r(s,m)};u(),new MutationObserver(u).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[s,r]);return b.createElement("div",{ref:o,className:e,style:a},l)},US=(s,e)=>{let a=s.includes("top"),r=a?{top:0}:{bottom:0},l=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:C1()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(a?1:-1)}px)`,...r,...l}},BS=Gd`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ad=16,Xd=({reverseOrder:s,position:e="top-center",toastOptions:a,gutter:r,children:l,toasterId:o,containerStyle:d,containerClassName:u})=>{let{toasts:m,handlers:f}=fS(a,o);return b.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:ad,left:ad,right:ad,bottom:ad,pointerEvents:"none",...d},className:u,onMouseEnter:f.startPause,onMouseLeave:f.endPause},m.map(p=>{let y=p.position||e,v=f.calculateOffset(p,{reverseOrder:s,gutter:r,defaultPosition:e}),j=US(y,v);return b.createElement(PS,{id:p.id,key:p.id,onHeightUpdate:f.updateHeight,className:p.visible?BS:"",style:j},p.type==="custom"?Md(p.message,p):l?l(p):b.createElement(zS,{toast:p,position:y}))}))},G=qt;const FS="modulepreload",HS=function(s){return"/"+s},zy={},qS=function(e,a,r){let l=Promise.resolve();if(a&&a.length>0){let f=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var d=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),m=u?.nonce||u?.getAttribute("nonce");l=f(a.map(p=>{if(p=HS(p),p in zy)return;zy[p]=!0;const y=p.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const j=document.createElement("link");if(j.rel=y?"stylesheet":FS,y||(j.as="script"),j.crossOrigin="",j.href=p,m&&j.setAttribute("nonce",m),document.head.appendChild(j),y)return new Promise((S,C)=>{j.addEventListener("load",S),j.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(u){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=u,window.dispatchEvent(m),!m.defaultPrevented)throw u}return l.then(u=>{for(const m of u||[])m.status==="rejected"&&o(m.reason);return e().catch(o)})};function T1(s,e){return function(){return s.apply(e,arguments)}}const{toString:VS}=Object.prototype,{getPrototypeOf:rp}=Object,{iterator:Zd,toStringTag:R1}=Symbol,Kd=(s=>e=>{const a=VS.call(e);return s[a]||(s[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),ha=s=>(s=s.toLowerCase(),e=>Kd(e)===s),Jd=s=>e=>typeof e===s,{isArray:Fi}=Array,Ri=Jd("undefined");function Co(s){return s!==null&&!Ri(s)&&s.constructor!==null&&!Ri(s.constructor)&&bs(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const D1=ha("ArrayBuffer");function $S(s){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(s):e=s&&s.buffer&&D1(s.buffer),e}const IS=Jd("string"),bs=Jd("function"),M1=Jd("number"),ko=s=>s!==null&&typeof s=="object",QS=s=>s===!0||s===!1,_d=s=>{if(Kd(s)!=="object")return!1;const e=rp(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(R1 in s)&&!(Zd in s)},YS=s=>{if(!ko(s)||Co(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},GS=ha("Date"),WS=ha("File"),XS=ha("Blob"),ZS=ha("FileList"),KS=s=>ko(s)&&bs(s.pipe),JS=s=>{let e;return s&&(typeof FormData=="function"&&s instanceof FormData||bs(s.append)&&((e=Kd(s))==="formdata"||e==="object"&&bs(s.toString)&&s.toString()==="[object FormData]"))},e6=ha("URLSearchParams"),[t6,s6,a6,n6]=["ReadableStream","Request","Response","Headers"].map(ha),r6=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _o(s,e,{allOwnKeys:a=!1}={}){if(s===null||typeof s>"u")return;let r,l;if(typeof s!="object"&&(s=[s]),Fi(s))for(r=0,l=s.length;r<l;r++)e.call(null,s[r],r,s);else{if(Co(s))return;const o=a?Object.getOwnPropertyNames(s):Object.keys(s),d=o.length;let u;for(r=0;r<d;r++)u=o[r],e.call(null,s[u],u,s)}}function L1(s,e){if(Co(s))return null;e=e.toLowerCase();const a=Object.keys(s);let r=a.length,l;for(;r-- >0;)if(l=a[r],e===l.toLowerCase())return l;return null}const Sr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,O1=s=>!Ri(s)&&s!==Sr;function Nf(){const{caseless:s,skipUndefined:e}=O1(this)&&this||{},a={},r=(l,o)=>{const d=s&&L1(a,o)||o;_d(a[d])&&_d(l)?a[d]=Nf(a[d],l):_d(l)?a[d]=Nf({},l):Fi(l)?a[d]=l.slice():(!e||!Ri(l))&&(a[d]=l)};for(let l=0,o=arguments.length;l<o;l++)arguments[l]&&_o(arguments[l],r);return a}const i6=(s,e,a,{allOwnKeys:r}={})=>(_o(e,(l,o)=>{a&&bs(l)?s[o]=T1(l,a):s[o]=l},{allOwnKeys:r}),s),l6=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),o6=(s,e,a,r)=>{s.prototype=Object.create(e.prototype,r),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:e.prototype}),a&&Object.assign(s.prototype,a)},c6=(s,e,a,r)=>{let l,o,d;const u={};if(e=e||{},s==null)return e;do{for(l=Object.getOwnPropertyNames(s),o=l.length;o-- >0;)d=l[o],(!r||r(d,s,e))&&!u[d]&&(e[d]=s[d],u[d]=!0);s=a!==!1&&rp(s)}while(s&&(!a||a(s,e))&&s!==Object.prototype);return e},d6=(s,e,a)=>{s=String(s),(a===void 0||a>s.length)&&(a=s.length),a-=e.length;const r=s.indexOf(e,a);return r!==-1&&r===a},u6=s=>{if(!s)return null;if(Fi(s))return s;let e=s.length;if(!M1(e))return null;const a=new Array(e);for(;e-- >0;)a[e]=s[e];return a},h6=(s=>e=>s&&e instanceof s)(typeof Uint8Array<"u"&&rp(Uint8Array)),m6=(s,e)=>{const r=(s&&s[Zd]).call(s);let l;for(;(l=r.next())&&!l.done;){const o=l.value;e.call(s,o[0],o[1])}},f6=(s,e)=>{let a;const r=[];for(;(a=s.exec(e))!==null;)r.push(a);return r},p6=ha("HTMLFormElement"),g6=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,l){return r.toUpperCase()+l}),Py=(({hasOwnProperty:s})=>(e,a)=>s.call(e,a))(Object.prototype),x6=ha("RegExp"),z1=(s,e)=>{const a=Object.getOwnPropertyDescriptors(s),r={};_o(a,(l,o)=>{let d;(d=e(l,o,s))!==!1&&(r[o]=d||l)}),Object.defineProperties(s,r)},y6=s=>{z1(s,(e,a)=>{if(bs(s)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=s[a];if(bs(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},b6=(s,e)=>{const a={},r=l=>{l.forEach(o=>{a[o]=!0})};return Fi(s)?r(s):r(String(s).split(e)),a},v6=()=>{},j6=(s,e)=>s!=null&&Number.isFinite(s=+s)?s:e;function w6(s){return!!(s&&bs(s.append)&&s[R1]==="FormData"&&s[Zd])}const N6=s=>{const e=new Array(10),a=(r,l)=>{if(ko(r)){if(e.indexOf(r)>=0)return;if(Co(r))return r;if(!("toJSON"in r)){e[l]=r;const o=Fi(r)?[]:{};return _o(r,(d,u)=>{const m=a(d,l+1);!Ri(m)&&(o[u]=m)}),e[l]=void 0,o}}return r};return a(s,0)},S6=ha("AsyncFunction"),C6=s=>s&&(ko(s)||bs(s))&&bs(s.then)&&bs(s.catch),P1=((s,e)=>s?setImmediate:e?((a,r)=>(Sr.addEventListener("message",({source:l,data:o})=>{l===Sr&&o===a&&r.length&&r.shift()()},!1),l=>{r.push(l),Sr.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",bs(Sr.postMessage)),k6=typeof queueMicrotask<"u"?queueMicrotask.bind(Sr):typeof process<"u"&&process.nextTick||P1,_6=s=>s!=null&&bs(s[Zd]),se={isArray:Fi,isArrayBuffer:D1,isBuffer:Co,isFormData:JS,isArrayBufferView:$S,isString:IS,isNumber:M1,isBoolean:QS,isObject:ko,isPlainObject:_d,isEmptyObject:YS,isReadableStream:t6,isRequest:s6,isResponse:a6,isHeaders:n6,isUndefined:Ri,isDate:GS,isFile:WS,isBlob:XS,isRegExp:x6,isFunction:bs,isStream:KS,isURLSearchParams:e6,isTypedArray:h6,isFileList:ZS,forEach:_o,merge:Nf,extend:i6,trim:r6,stripBOM:l6,inherits:o6,toFlatObject:c6,kindOf:Kd,kindOfTest:ha,endsWith:d6,toArray:u6,forEachEntry:m6,matchAll:f6,isHTMLForm:p6,hasOwnProperty:Py,hasOwnProp:Py,reduceDescriptors:z1,freezeMethods:y6,toObjectSet:b6,toCamelCase:g6,noop:v6,toFiniteNumber:j6,findKey:L1,global:Sr,isContextDefined:O1,isSpecCompliantForm:w6,toJSONObject:N6,isAsyncFn:S6,isThenable:C6,setImmediate:P1,asap:k6,isIterable:_6};function De(s,e,a,r,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",e&&(this.code=e),a&&(this.config=a),r&&(this.request=r),l&&(this.response=l,this.status=l.status?l.status:null)}se.inherits(De,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:se.toJSONObject(this.config),code:this.code,status:this.status}}});const U1=De.prototype,B1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{B1[s]={value:s}});Object.defineProperties(De,B1);Object.defineProperty(U1,"isAxiosError",{value:!0});De.from=(s,e,a,r,l,o)=>{const d=Object.create(U1);se.toFlatObject(s,d,function(p){return p!==Error.prototype},f=>f!=="isAxiosError");const u=s&&s.message?s.message:"Error",m=e==null&&s?s.code:e;return De.call(d,u,m,a,r,l),s&&d.cause==null&&Object.defineProperty(d,"cause",{value:s,configurable:!0}),d.name=s&&s.name||"Error",o&&Object.assign(d,o),d};const A6=null;function Sf(s){return se.isPlainObject(s)||se.isArray(s)}function F1(s){return se.endsWith(s,"[]")?s.slice(0,-2):s}function Uy(s,e,a){return s?s.concat(e).map(function(l,o){return l=F1(l),!a&&o?"["+l+"]":l}).join(a?".":""):e}function E6(s){return se.isArray(s)&&!s.some(Sf)}const T6=se.toFlatObject(se,{},null,function(e){return/^is[A-Z]/.test(e)});function eu(s,e,a){if(!se.isObject(s))throw new TypeError("target must be an object");e=e||new FormData,a=se.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,N){return!se.isUndefined(N[C])});const r=a.metaTokens,l=a.visitor||p,o=a.dots,d=a.indexes,m=(a.Blob||typeof Blob<"u"&&Blob)&&se.isSpecCompliantForm(e);if(!se.isFunction(l))throw new TypeError("visitor must be a function");function f(S){if(S===null)return"";if(se.isDate(S))return S.toISOString();if(se.isBoolean(S))return S.toString();if(!m&&se.isBlob(S))throw new De("Blob is not supported. Use a Buffer instead.");return se.isArrayBuffer(S)||se.isTypedArray(S)?m&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function p(S,C,N){let D=S;if(S&&!N&&typeof S=="object"){if(se.endsWith(C,"{}"))C=r?C:C.slice(0,-2),S=JSON.stringify(S);else if(se.isArray(S)&&E6(S)||(se.isFileList(S)||se.endsWith(C,"[]"))&&(D=se.toArray(S)))return C=F1(C),D.forEach(function(A,T){!(se.isUndefined(A)||A===null)&&e.append(d===!0?Uy([C],T,o):d===null?C:C+"[]",f(A))}),!1}return Sf(S)?!0:(e.append(Uy(N,C,o),f(S)),!1)}const y=[],v=Object.assign(T6,{defaultVisitor:p,convertValue:f,isVisitable:Sf});function j(S,C){if(!se.isUndefined(S)){if(y.indexOf(S)!==-1)throw Error("Circular reference detected in "+C.join("."));y.push(S),se.forEach(S,function(D,E){(!(se.isUndefined(D)||D===null)&&l.call(e,D,se.isString(E)?E.trim():E,C,v))===!0&&j(D,C?C.concat(E):[E])}),y.pop()}}if(!se.isObject(s))throw new TypeError("data must be an object");return j(s),e}function By(s){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function ip(s,e){this._pairs=[],s&&eu(s,this,e)}const H1=ip.prototype;H1.append=function(e,a){this._pairs.push([e,a])};H1.toString=function(e){const a=e?function(r){return e.call(this,r,By)}:By;return this._pairs.map(function(l){return a(l[0])+"="+a(l[1])},"").join("&")};function R6(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function q1(s,e,a){if(!e)return s;const r=a&&a.encode||R6;se.isFunction(a)&&(a={serialize:a});const l=a&&a.serialize;let o;if(l?o=l(e,a):o=se.isURLSearchParams(e)?e.toString():new ip(e,a).toString(r),o){const d=s.indexOf("#");d!==-1&&(s=s.slice(0,d)),s+=(s.indexOf("?")===-1?"?":"&")+o}return s}class Fy{constructor(){this.handlers=[]}use(e,a,r){return this.handlers.push({fulfilled:e,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){se.forEach(this.handlers,function(r){r!==null&&e(r)})}}const V1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},D6=typeof URLSearchParams<"u"?URLSearchParams:ip,M6=typeof FormData<"u"?FormData:null,L6=typeof Blob<"u"?Blob:null,O6={isBrowser:!0,classes:{URLSearchParams:D6,FormData:M6,Blob:L6},protocols:["http","https","file","blob","url","data"]},lp=typeof window<"u"&&typeof document<"u",Cf=typeof navigator=="object"&&navigator||void 0,z6=lp&&(!Cf||["ReactNative","NativeScript","NS"].indexOf(Cf.product)<0),P6=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",U6=lp&&window.location.href||"http://localhost",B6=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:lp,hasStandardBrowserEnv:z6,hasStandardBrowserWebWorkerEnv:P6,navigator:Cf,origin:U6},Symbol.toStringTag,{value:"Module"})),ts={...B6,...O6};function F6(s,e){return eu(s,new ts.classes.URLSearchParams,{visitor:function(a,r,l,o){return ts.isNode&&se.isBuffer(a)?(this.append(r,a.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function H6(s){return se.matchAll(/\w+|\[(\w*)]/g,s).map(e=>e[0]==="[]"?"":e[1]||e[0])}function q6(s){const e={},a=Object.keys(s);let r;const l=a.length;let o;for(r=0;r<l;r++)o=a[r],e[o]=s[o];return e}function $1(s){function e(a,r,l,o){let d=a[o++];if(d==="__proto__")return!0;const u=Number.isFinite(+d),m=o>=a.length;return d=!d&&se.isArray(l)?l.length:d,m?(se.hasOwnProp(l,d)?l[d]=[l[d],r]:l[d]=r,!u):((!l[d]||!se.isObject(l[d]))&&(l[d]=[]),e(a,r,l[d],o)&&se.isArray(l[d])&&(l[d]=q6(l[d])),!u)}if(se.isFormData(s)&&se.isFunction(s.entries)){const a={};return se.forEachEntry(s,(r,l)=>{e(H6(r),l,a,0)}),a}return null}function V6(s,e,a){if(se.isString(s))try{return(e||JSON.parse)(s),se.trim(s)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(s)}const Ao={transitional:V1,adapter:["xhr","http","fetch"],transformRequest:[function(e,a){const r=a.getContentType()||"",l=r.indexOf("application/json")>-1,o=se.isObject(e);if(o&&se.isHTMLForm(e)&&(e=new FormData(e)),se.isFormData(e))return l?JSON.stringify($1(e)):e;if(se.isArrayBuffer(e)||se.isBuffer(e)||se.isStream(e)||se.isFile(e)||se.isBlob(e)||se.isReadableStream(e))return e;if(se.isArrayBufferView(e))return e.buffer;if(se.isURLSearchParams(e))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return F6(e,this.formSerializer).toString();if((u=se.isFileList(e))||r.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return eu(u?{"files[]":e}:e,m&&new m,this.formSerializer)}}return o||l?(a.setContentType("application/json",!1),V6(e)):e}],transformResponse:[function(e){const a=this.transitional||Ao.transitional,r=a&&a.forcedJSONParsing,l=this.responseType==="json";if(se.isResponse(e)||se.isReadableStream(e))return e;if(e&&se.isString(e)&&(r&&!this.responseType||l)){const d=!(a&&a.silentJSONParsing)&&l;try{return JSON.parse(e,this.parseReviver)}catch(u){if(d)throw u.name==="SyntaxError"?De.from(u,De.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ts.classes.FormData,Blob:ts.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};se.forEach(["delete","get","head","post","put","patch"],s=>{Ao.headers[s]={}});const $6=se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),I6=s=>{const e={};let a,r,l;return s&&s.split(`
`).forEach(function(d){l=d.indexOf(":"),a=d.substring(0,l).trim().toLowerCase(),r=d.substring(l+1).trim(),!(!a||e[a]&&$6[a])&&(a==="set-cookie"?e[a]?e[a].push(r):e[a]=[r]:e[a]=e[a]?e[a]+", "+r:r)}),e},Hy=Symbol("internals");function Fl(s){return s&&String(s).trim().toLowerCase()}function Ad(s){return s===!1||s==null?s:se.isArray(s)?s.map(Ad):String(s)}function Q6(s){const e=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(s);)e[r[1]]=r[2];return e}const Y6=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Pm(s,e,a,r,l){if(se.isFunction(r))return r.call(this,e,a);if(l&&(e=a),!!se.isString(e)){if(se.isString(r))return e.indexOf(r)!==-1;if(se.isRegExp(r))return r.test(e)}}function G6(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,a,r)=>a.toUpperCase()+r)}function W6(s,e){const a=se.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(s,r+a,{value:function(l,o,d){return this[r].call(this,e,l,o,d)},configurable:!0})})}let vs=class{constructor(e){e&&this.set(e)}set(e,a,r){const l=this;function o(u,m,f){const p=Fl(m);if(!p)throw new Error("header name must be a non-empty string");const y=se.findKey(l,p);(!y||l[y]===void 0||f===!0||f===void 0&&l[y]!==!1)&&(l[y||m]=Ad(u))}const d=(u,m)=>se.forEach(u,(f,p)=>o(f,p,m));if(se.isPlainObject(e)||e instanceof this.constructor)d(e,a);else if(se.isString(e)&&(e=e.trim())&&!Y6(e))d(I6(e),a);else if(se.isObject(e)&&se.isIterable(e)){let u={},m,f;for(const p of e){if(!se.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[f=p[0]]=(m=u[f])?se.isArray(m)?[...m,p[1]]:[m,p[1]]:p[1]}d(u,a)}else e!=null&&o(a,e,r);return this}get(e,a){if(e=Fl(e),e){const r=se.findKey(this,e);if(r){const l=this[r];if(!a)return l;if(a===!0)return Q6(l);if(se.isFunction(a))return a.call(this,l,r);if(se.isRegExp(a))return a.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,a){if(e=Fl(e),e){const r=se.findKey(this,e);return!!(r&&this[r]!==void 0&&(!a||Pm(this,this[r],r,a)))}return!1}delete(e,a){const r=this;let l=!1;function o(d){if(d=Fl(d),d){const u=se.findKey(r,d);u&&(!a||Pm(r,r[u],u,a))&&(delete r[u],l=!0)}}return se.isArray(e)?e.forEach(o):o(e),l}clear(e){const a=Object.keys(this);let r=a.length,l=!1;for(;r--;){const o=a[r];(!e||Pm(this,this[o],o,e,!0))&&(delete this[o],l=!0)}return l}normalize(e){const a=this,r={};return se.forEach(this,(l,o)=>{const d=se.findKey(r,o);if(d){a[d]=Ad(l),delete a[o];return}const u=e?G6(o):String(o).trim();u!==o&&delete a[o],a[u]=Ad(l),r[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const a=Object.create(null);return se.forEach(this,(r,l)=>{r!=null&&r!==!1&&(a[l]=e&&se.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,a])=>e+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...a){const r=new this(e);return a.forEach(l=>r.set(l)),r}static accessor(e){const r=(this[Hy]=this[Hy]={accessors:{}}).accessors,l=this.prototype;function o(d){const u=Fl(d);r[u]||(W6(l,d),r[u]=!0)}return se.isArray(e)?e.forEach(o):o(e),this}};vs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);se.reduceDescriptors(vs.prototype,({value:s},e)=>{let a=e[0].toUpperCase()+e.slice(1);return{get:()=>s,set(r){this[a]=r}}});se.freezeMethods(vs);function Um(s,e){const a=this||Ao,r=e||a,l=vs.from(r.headers);let o=r.data;return se.forEach(s,function(u){o=u.call(a,o,l.normalize(),e?e.status:void 0)}),l.normalize(),o}function I1(s){return!!(s&&s.__CANCEL__)}function Hi(s,e,a){De.call(this,s??"canceled",De.ERR_CANCELED,e,a),this.name="CanceledError"}se.inherits(Hi,De,{__CANCEL__:!0});function Q1(s,e,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?s(a):e(new De("Request failed with status code "+a.status,[De.ERR_BAD_REQUEST,De.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function X6(s){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return e&&e[1]||""}function Z6(s,e){s=s||10;const a=new Array(s),r=new Array(s);let l=0,o=0,d;return e=e!==void 0?e:1e3,function(m){const f=Date.now(),p=r[o];d||(d=f),a[l]=m,r[l]=f;let y=o,v=0;for(;y!==l;)v+=a[y++],y=y%s;if(l=(l+1)%s,l===o&&(o=(o+1)%s),f-d<e)return;const j=p&&f-p;return j?Math.round(v*1e3/j):void 0}}function K6(s,e){let a=0,r=1e3/e,l,o;const d=(f,p=Date.now())=>{a=p,l=null,o&&(clearTimeout(o),o=null),s(...f)};return[(...f)=>{const p=Date.now(),y=p-a;y>=r?d(f,p):(l=f,o||(o=setTimeout(()=>{o=null,d(l)},r-y)))},()=>l&&d(l)]}const Ld=(s,e,a=3)=>{let r=0;const l=Z6(50,250);return K6(o=>{const d=o.loaded,u=o.lengthComputable?o.total:void 0,m=d-r,f=l(m),p=d<=u;r=d;const y={loaded:d,total:u,progress:u?d/u:void 0,bytes:m,rate:f||void 0,estimated:f&&u&&p?(u-d)/f:void 0,event:o,lengthComputable:u!=null,[e?"download":"upload"]:!0};s(y)},a)},qy=(s,e)=>{const a=s!=null;return[r=>e[0]({lengthComputable:a,total:s,loaded:r}),e[1]]},Vy=s=>(...e)=>se.asap(()=>s(...e)),J6=ts.hasStandardBrowserEnv?((s,e)=>a=>(a=new URL(a,ts.origin),s.protocol===a.protocol&&s.host===a.host&&(e||s.port===a.port)))(new URL(ts.origin),ts.navigator&&/(msie|trident)/i.test(ts.navigator.userAgent)):()=>!0,e4=ts.hasStandardBrowserEnv?{write(s,e,a,r,l,o){const d=[s+"="+encodeURIComponent(e)];se.isNumber(a)&&d.push("expires="+new Date(a).toGMTString()),se.isString(r)&&d.push("path="+r),se.isString(l)&&d.push("domain="+l),o===!0&&d.push("secure"),document.cookie=d.join("; ")},read(s){const e=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function t4(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function s4(s,e){return e?s.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):s}function Y1(s,e,a){let r=!t4(e);return s&&(r||a==!1)?s4(s,e):e}const $y=s=>s instanceof vs?{...s}:s;function Dr(s,e){e=e||{};const a={};function r(f,p,y,v){return se.isPlainObject(f)&&se.isPlainObject(p)?se.merge.call({caseless:v},f,p):se.isPlainObject(p)?se.merge({},p):se.isArray(p)?p.slice():p}function l(f,p,y,v){if(se.isUndefined(p)){if(!se.isUndefined(f))return r(void 0,f,y,v)}else return r(f,p,y,v)}function o(f,p){if(!se.isUndefined(p))return r(void 0,p)}function d(f,p){if(se.isUndefined(p)){if(!se.isUndefined(f))return r(void 0,f)}else return r(void 0,p)}function u(f,p,y){if(y in e)return r(f,p);if(y in s)return r(void 0,f)}const m={url:o,method:o,data:o,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:u,headers:(f,p,y)=>l($y(f),$y(p),y,!0)};return se.forEach(Object.keys({...s,...e}),function(p){const y=m[p]||l,v=y(s[p],e[p],p);se.isUndefined(v)&&y!==u||(a[p]=v)}),a}const G1=s=>{const e=Dr({},s);let{data:a,withXSRFToken:r,xsrfHeaderName:l,xsrfCookieName:o,headers:d,auth:u}=e;if(e.headers=d=vs.from(d),e.url=q1(Y1(e.baseURL,e.url,e.allowAbsoluteUrls),s.params,s.paramsSerializer),u&&d.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),se.isFormData(a)){if(ts.hasStandardBrowserEnv||ts.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(se.isFunction(a.getHeaders)){const m=a.getHeaders(),f=["content-type","content-length"];Object.entries(m).forEach(([p,y])=>{f.includes(p.toLowerCase())&&d.set(p,y)})}}if(ts.hasStandardBrowserEnv&&(r&&se.isFunction(r)&&(r=r(e)),r||r!==!1&&J6(e.url))){const m=l&&o&&e4.read(o);m&&d.set(l,m)}return e},a4=typeof XMLHttpRequest<"u",n4=a4&&function(s){return new Promise(function(a,r){const l=G1(s);let o=l.data;const d=vs.from(l.headers).normalize();let{responseType:u,onUploadProgress:m,onDownloadProgress:f}=l,p,y,v,j,S;function C(){j&&j(),S&&S(),l.cancelToken&&l.cancelToken.unsubscribe(p),l.signal&&l.signal.removeEventListener("abort",p)}let N=new XMLHttpRequest;N.open(l.method.toUpperCase(),l.url,!0),N.timeout=l.timeout;function D(){if(!N)return;const A=vs.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),w={data:!u||u==="text"||u==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:A,config:s,request:N};Q1(function(R){a(R),C()},function(R){r(R),C()},w),N=null}"onloadend"in N?N.onloadend=D:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(D)},N.onabort=function(){N&&(r(new De("Request aborted",De.ECONNABORTED,s,N)),N=null)},N.onerror=function(T){const w=T&&T.message?T.message:"Network Error",_=new De(w,De.ERR_NETWORK,s,N);_.event=T||null,r(_),N=null},N.ontimeout=function(){let T=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const w=l.transitional||V1;l.timeoutErrorMessage&&(T=l.timeoutErrorMessage),r(new De(T,w.clarifyTimeoutError?De.ETIMEDOUT:De.ECONNABORTED,s,N)),N=null},o===void 0&&d.setContentType(null),"setRequestHeader"in N&&se.forEach(d.toJSON(),function(T,w){N.setRequestHeader(w,T)}),se.isUndefined(l.withCredentials)||(N.withCredentials=!!l.withCredentials),u&&u!=="json"&&(N.responseType=l.responseType),f&&([v,S]=Ld(f,!0),N.addEventListener("progress",v)),m&&N.upload&&([y,j]=Ld(m),N.upload.addEventListener("progress",y),N.upload.addEventListener("loadend",j)),(l.cancelToken||l.signal)&&(p=A=>{N&&(r(!A||A.type?new Hi(null,s,N):A),N.abort(),N=null)},l.cancelToken&&l.cancelToken.subscribe(p),l.signal&&(l.signal.aborted?p():l.signal.addEventListener("abort",p)));const E=X6(l.url);if(E&&ts.protocols.indexOf(E)===-1){r(new De("Unsupported protocol "+E+":",De.ERR_BAD_REQUEST,s));return}N.send(o||null)})},r4=(s,e)=>{const{length:a}=s=s?s.filter(Boolean):[];if(e||a){let r=new AbortController,l;const o=function(f){if(!l){l=!0,u();const p=f instanceof Error?f:this.reason;r.abort(p instanceof De?p:new Hi(p instanceof Error?p.message:p))}};let d=e&&setTimeout(()=>{d=null,o(new De(`timeout ${e} of ms exceeded`,De.ETIMEDOUT))},e);const u=()=>{s&&(d&&clearTimeout(d),d=null,s.forEach(f=>{f.unsubscribe?f.unsubscribe(o):f.removeEventListener("abort",o)}),s=null)};s.forEach(f=>f.addEventListener("abort",o));const{signal:m}=r;return m.unsubscribe=()=>se.asap(u),m}},i4=function*(s,e){let a=s.byteLength;if(a<e){yield s;return}let r=0,l;for(;r<a;)l=r+e,yield s.slice(r,l),r=l},l4=async function*(s,e){for await(const a of o4(s))yield*i4(a,e)},o4=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const e=s.getReader();try{for(;;){const{done:a,value:r}=await e.read();if(a)break;yield r}}finally{await e.cancel()}},Iy=(s,e,a,r)=>{const l=l4(s,e);let o=0,d,u=m=>{d||(d=!0,r&&r(m))};return new ReadableStream({async pull(m){try{const{done:f,value:p}=await l.next();if(f){u(),m.close();return}let y=p.byteLength;if(a){let v=o+=y;a(v)}m.enqueue(new Uint8Array(p))}catch(f){throw u(f),f}},cancel(m){return u(m),l.return()}},{highWaterMark:2})},Qy=64*1024,{isFunction:nd}=se,c4=(({Request:s,Response:e})=>({Request:s,Response:e}))(se.global),{ReadableStream:Yy,TextEncoder:Gy}=se.global,Wy=(s,...e)=>{try{return!!s(...e)}catch{return!1}},d4=s=>{s=se.merge.call({skipUndefined:!0},c4,s);const{fetch:e,Request:a,Response:r}=s,l=e?nd(e):typeof fetch=="function",o=nd(a),d=nd(r);if(!l)return!1;const u=l&&nd(Yy),m=l&&(typeof Gy=="function"?(S=>C=>S.encode(C))(new Gy):async S=>new Uint8Array(await new a(S).arrayBuffer())),f=o&&u&&Wy(()=>{let S=!1;const C=new a(ts.origin,{body:new Yy,method:"POST",get duplex(){return S=!0,"half"}}).headers.has("Content-Type");return S&&!C}),p=d&&u&&Wy(()=>se.isReadableStream(new r("").body)),y={stream:p&&(S=>S.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(S=>{!y[S]&&(y[S]=(C,N)=>{let D=C&&C[S];if(D)return D.call(C);throw new De(`Response type '${S}' is not supported`,De.ERR_NOT_SUPPORT,N)})});const v=async S=>{if(S==null)return 0;if(se.isBlob(S))return S.size;if(se.isSpecCompliantForm(S))return(await new a(ts.origin,{method:"POST",body:S}).arrayBuffer()).byteLength;if(se.isArrayBufferView(S)||se.isArrayBuffer(S))return S.byteLength;if(se.isURLSearchParams(S)&&(S=S+""),se.isString(S))return(await m(S)).byteLength},j=async(S,C)=>{const N=se.toFiniteNumber(S.getContentLength());return N??v(C)};return async S=>{let{url:C,method:N,data:D,signal:E,cancelToken:A,timeout:T,onDownloadProgress:w,onUploadProgress:_,responseType:R,headers:z,withCredentials:H="same-origin",fetchOptions:q}=G1(S),ne=e||fetch;R=R?(R+"").toLowerCase():"text";let U=r4([E,A&&A.toAbortSignal()],T),re=null;const fe=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let Z;try{if(_&&f&&N!=="get"&&N!=="head"&&(Z=await j(z,D))!==0){let P=new a(C,{method:"POST",body:D,duplex:"half"}),W;if(se.isFormData(D)&&(W=P.headers.get("content-type"))&&z.setContentType(W),P.body){const[de,he]=qy(Z,Ld(Vy(_)));D=Iy(P.body,Qy,de,he)}}se.isString(H)||(H=H?"include":"omit");const B=o&&"credentials"in a.prototype,L={...q,signal:U,method:N.toUpperCase(),headers:z.normalize().toJSON(),body:D,duplex:"half",credentials:B?H:void 0};re=o&&new a(C,L);let Y=await(o?ne(re,q):ne(C,L));const O=p&&(R==="stream"||R==="response");if(p&&(w||O&&fe)){const P={};["status","statusText","headers"].forEach(je=>{P[je]=Y[je]});const W=se.toFiniteNumber(Y.headers.get("content-length")),[de,he]=w&&qy(W,Ld(Vy(w),!0))||[];Y=new r(Iy(Y.body,Qy,de,()=>{he&&he(),fe&&fe()}),P)}R=R||"text";let I=await y[se.findKey(y,R)||"text"](Y,S);return!O&&fe&&fe(),await new Promise((P,W)=>{Q1(P,W,{data:I,headers:vs.from(Y.headers),status:Y.status,statusText:Y.statusText,config:S,request:re})})}catch(B){throw fe&&fe(),B&&B.name==="TypeError"&&/Load failed|fetch/i.test(B.message)?Object.assign(new De("Network Error",De.ERR_NETWORK,S,re),{cause:B.cause||B}):De.from(B,B&&B.code,S,re)}}},u4=new Map,W1=s=>{let e=s?s.env:{};const{fetch:a,Request:r,Response:l}=e,o=[r,l,a];let d=o.length,u=d,m,f,p=u4;for(;u--;)m=o[u],f=p.get(m),f===void 0&&p.set(m,f=u?new Map:d4(e)),p=f;return f};W1();const kf={http:A6,xhr:n4,fetch:{get:W1}};se.forEach(kf,(s,e)=>{if(s){try{Object.defineProperty(s,"name",{value:e})}catch{}Object.defineProperty(s,"adapterName",{value:e})}});const Xy=s=>`- ${s}`,h4=s=>se.isFunction(s)||s===null||s===!1,X1={getAdapter:(s,e)=>{s=se.isArray(s)?s:[s];const{length:a}=s;let r,l;const o={};for(let d=0;d<a;d++){r=s[d];let u;if(l=r,!h4(r)&&(l=kf[(u=String(r)).toLowerCase()],l===void 0))throw new De(`Unknown adapter '${u}'`);if(l&&(se.isFunction(l)||(l=l.get(e))))break;o[u||"#"+d]=l}if(!l){const d=Object.entries(o).map(([m,f])=>`adapter ${m} `+(f===!1?"is not supported by the environment":"is not available in the build"));let u=a?d.length>1?`since :
`+d.map(Xy).join(`
`):" "+Xy(d[0]):"as no adapter specified";throw new De("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return l},adapters:kf};function Bm(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new Hi(null,s)}function Zy(s){return Bm(s),s.headers=vs.from(s.headers),s.data=Um.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),X1.getAdapter(s.adapter||Ao.adapter,s)(s).then(function(r){return Bm(s),r.data=Um.call(s,s.transformResponse,r),r.headers=vs.from(r.headers),r},function(r){return I1(r)||(Bm(s),r&&r.response&&(r.response.data=Um.call(s,s.transformResponse,r.response),r.response.headers=vs.from(r.response.headers))),Promise.reject(r)})}const Z1="1.12.2",tu={};["object","boolean","number","function","string","symbol"].forEach((s,e)=>{tu[s]=function(r){return typeof r===s||"a"+(e<1?"n ":" ")+s}});const Ky={};tu.transitional=function(e,a,r){function l(o,d){return"[Axios v"+Z1+"] Transitional option '"+o+"'"+d+(r?". "+r:"")}return(o,d,u)=>{if(e===!1)throw new De(l(d," has been removed"+(a?" in "+a:"")),De.ERR_DEPRECATED);return a&&!Ky[d]&&(Ky[d]=!0,console.warn(l(d," has been deprecated since v"+a+" and will be removed in the near future"))),e?e(o,d,u):!0}};tu.spelling=function(e){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function m4(s,e,a){if(typeof s!="object")throw new De("options must be an object",De.ERR_BAD_OPTION_VALUE);const r=Object.keys(s);let l=r.length;for(;l-- >0;){const o=r[l],d=e[o];if(d){const u=s[o],m=u===void 0||d(u,o,s);if(m!==!0)throw new De("option "+o+" must be "+m,De.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new De("Unknown option "+o,De.ERR_BAD_OPTION)}}const Ed={assertOptions:m4,validators:tu},va=Ed.validators;let _r=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Fy,response:new Fy}}async request(e,a){try{return await this._request(e,a)}catch(r){if(r instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const o=l.stack?l.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,a){typeof e=="string"?(a=a||{},a.url=e):a=e||{},a=Dr(this.defaults,a);const{transitional:r,paramsSerializer:l,headers:o}=a;r!==void 0&&Ed.assertOptions(r,{silentJSONParsing:va.transitional(va.boolean),forcedJSONParsing:va.transitional(va.boolean),clarifyTimeoutError:va.transitional(va.boolean)},!1),l!=null&&(se.isFunction(l)?a.paramsSerializer={serialize:l}:Ed.assertOptions(l,{encode:va.function,serialize:va.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Ed.assertOptions(a,{baseUrl:va.spelling("baseURL"),withXsrfToken:va.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let d=o&&se.merge(o.common,o[a.method]);o&&se.forEach(["delete","get","head","post","put","patch","common"],S=>{delete o[S]}),a.headers=vs.concat(d,o);const u=[];let m=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(a)===!1||(m=m&&C.synchronous,u.unshift(C.fulfilled,C.rejected))});const f=[];this.interceptors.response.forEach(function(C){f.push(C.fulfilled,C.rejected)});let p,y=0,v;if(!m){const S=[Zy.bind(this),void 0];for(S.unshift(...u),S.push(...f),v=S.length,p=Promise.resolve(a);y<v;)p=p.then(S[y++],S[y++]);return p}v=u.length;let j=a;for(;y<v;){const S=u[y++],C=u[y++];try{j=S(j)}catch(N){C.call(this,N);break}}try{p=Zy.call(this,j)}catch(S){return Promise.reject(S)}for(y=0,v=f.length;y<v;)p=p.then(f[y++],f[y++]);return p}getUri(e){e=Dr(this.defaults,e);const a=Y1(e.baseURL,e.url,e.allowAbsoluteUrls);return q1(a,e.params,e.paramsSerializer)}};se.forEach(["delete","get","head","options"],function(e){_r.prototype[e]=function(a,r){return this.request(Dr(r||{},{method:e,url:a,data:(r||{}).data}))}});se.forEach(["post","put","patch"],function(e){function a(r){return function(o,d,u){return this.request(Dr(u||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:d}))}}_r.prototype[e]=a(),_r.prototype[e+"Form"]=a(!0)});let f4=class K1{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(o){a=o});const r=this;this.promise.then(l=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](l);r._listeners=null}),this.promise.then=l=>{let o;const d=new Promise(u=>{r.subscribe(u),o=u}).then(l);return d.cancel=function(){r.unsubscribe(o)},d},e(function(o,d,u){r.reason||(r.reason=new Hi(o,d,u),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const a=this._listeners.indexOf(e);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const e=new AbortController,a=r=>{e.abort(r)};return this.subscribe(a),e.signal.unsubscribe=()=>this.unsubscribe(a),e.signal}static source(){let e;return{token:new K1(function(l){e=l}),cancel:e}}};function p4(s){return function(a){return s.apply(null,a)}}function g4(s){return se.isObject(s)&&s.isAxiosError===!0}const _f={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_f).forEach(([s,e])=>{_f[e]=s});function J1(s){const e=new _r(s),a=T1(_r.prototype.request,e);return se.extend(a,_r.prototype,e,{allOwnKeys:!0}),se.extend(a,e,null,{allOwnKeys:!0}),a.create=function(l){return J1(Dr(s,l))},a}const _t=J1(Ao);_t.Axios=_r;_t.CanceledError=Hi;_t.CancelToken=f4;_t.isCancel=I1;_t.VERSION=Z1;_t.toFormData=eu;_t.AxiosError=De;_t.Cancel=_t.CanceledError;_t.all=function(e){return Promise.all(e)};_t.spread=p4;_t.isAxiosError=g4;_t.mergeConfig=Dr;_t.AxiosHeaders=vs;_t.formToJSON=s=>$1(se.isHTMLForm(s)?new FormData(s):s);_t.getAdapter=X1.getAdapter;_t.HttpStatusCode=_f;_t.default=_t;const{Axios:qD,AxiosError:VD,CanceledError:$D,isCancel:ID,CancelToken:QD,VERSION:YD,all:GD,Cancel:WD,isAxiosError:XD,spread:ZD,toFormData:KD,AxiosHeaders:JD,HttpStatusCode:eM,formToJSON:tM,getAdapter:sM,mergeConfig:aM}=_t;var Fm,Jy;function x4(){if(Jy)return Fm;Jy=1;function s(r){this.queue=[],this.timeslotRequests=0,this.interceptors={request:null,response:null},this.handleRequest=this.handleRequest.bind(this),this.handleResponse=this.handleResponse.bind(this),this.enable(r)}s.prototype.getMaxRPS=function(){var r=this.perMilliseconds/1e3;return this.maxRequests/r},s.prototype.getQueue=function(){return this.queue},s.prototype.setMaxRPS=function(r){this.setRateLimitOptions({maxRequests:r,perMilliseconds:1e3})},s.prototype.setRateLimitOptions=function(r){r.maxRPS?this.setMaxRPS(r.maxRPS):(this.perMilliseconds=r.perMilliseconds,this.maxRequests=r.maxRequests)},s.prototype.enable=function(r){function l(o){return Promise.reject(o)}this.interceptors.request=r.interceptors.request.use(this.handleRequest,l),this.interceptors.response=r.interceptors.response.use(this.handleResponse,l)};function e(r){r.cancelToken&&r.cancelToken.throwIfRequested()}s.prototype.handleRequest=function(r){return new Promise((function(l,o){this.push({resolve:function(){try{e(r)}catch(d){return o(d),!1}return l(r),!0}})}).bind(this))},s.prototype.handleResponse=function(r){return this.shift(),r},s.prototype.push=function(r){this.queue.push(r),this.shiftInitial()},s.prototype.shiftInitial=function(){setTimeout((function(){return this.shift()}).bind(this),0)},s.prototype.shift=function(){if(this.queue.length){if(this.timeslotRequests===this.maxRequests){this.timeoutId&&typeof this.timeoutId.ref=="function"&&this.timeoutId.ref();return}var r=this.queue.shift(),l=r.resolve();if(this.timeslotRequests===0&&(this.timeoutId=setTimeout((function(){this.timeslotRequests=0,this.shift()}).bind(this),this.perMilliseconds),typeof this.timeoutId.unref=="function"&&this.queue.length===0&&this.timeoutId.unref()),!l){this.shift();return}this.timeslotRequests+=1}};function a(r,l){var o=new s(r);return o.setRateLimitOptions(l),r.getQueue=s.prototype.getQueue.bind(o),r.getMaxRPS=s.prototype.getMaxRPS.bind(o),r.setMaxRPS=s.prototype.setMaxRPS.bind(o),r.setRateLimitOptions=s.prototype.setRateLimitOptions.bind(o),r}return Fm=a,Fm}var y4=x4();const b4=zi(y4),op=(s,e)=>{if(s){localStorage.setItem("token",s);const a=e||new Date().getTime()+480*60*1e3;localStorage.setItem("tokenExpiration",a.toString())}},ia=()=>{const s=localStorage.getItem("token"),e=localStorage.getItem("tokenExpiration");if(console.log(" getAuthToken called:",{hasToken:!!s,tokenLength:s?.length,tokenPreview:s?.substring(0,20)+"...",expiration:e,localStorage:{token:!!localStorage.getItem("token"),expiration:localStorage.getItem("tokenExpiration")}}),!s||!e)return console.log(" No token or expiration found"),null;const a=new Date().getTime(),r=parseInt(e);if(console.log(" Time check:",{now:a,expirationTime:r,nowDate:new Date(a).toISOString(),expirationDate:new Date(r).toISOString(),diff:r-a,diffMinutes:Math.floor((r-a)/1e3/60)}),a>r)return console.log(" Token expired",{now:a,expirationTime:r,diff:a-r}),Eo(),null;const l=Math.floor((r-a)/1e3/60);return console.log(" Token valid, expires in:",l,"minutes"),s},Eo=()=>{localStorage.removeItem("token"),localStorage.removeItem("tokenExpiration")},su=()=>!!ia(),ej=s=>{s!=="/login"&&s!=="/verify-login"&&localStorage.setItem("lastVisitedPage",s)},tj=()=>localStorage.getItem("lastVisitedPage")||"/courses/all",To=s=>{try{const a=s.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(a).split("").map(function(l){return"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(r)}catch{return null}},cn=()=>{const s=ia();if(!s)return null;const e=To(s),a=e?.["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"];return a||e?.role||"learner"},cp=()=>{const s=cn();return s==="admin"||s==="Admin"||s==="OrgAdmin"||s==="SuperAdmin"},dp=()=>{const s=ia();if(!s)return null;const e=To(s);return e?.name||e?.email||"User"},up=()=>{const s=ia();if(!s)return null;const e=To(s),a=e?.["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"];return a||e?.sub||e?.nameid||e?.userId||null},v4=Object.freeze(Object.defineProperty({__proto__:null,decodeToken:To,getAuthToken:ia,getLastVisitedPage:tj,getUserId:up,getUserName:dp,getUserRole:cn,isAdmin:cp,isAuthenticated:su,removeAuthToken:Eo,saveLastVisitedPage:ej,setAuthToken:op},Symbol.toStringTag,{value:"Module"})),j4=_t.create({baseURL:"https://lmsbox-e0d2dqb4hwb8aqfp.uksouth-01.azurewebsites.net"}),ge=b4(j4,{maxRequests:20,perMilliseconds:6e4});ge.interceptors.request.use(s=>{const e=ia?.();return e&&(s.headers=s.headers||{},s.headers.Authorization=`Bearer ${e}`),s});ge.interceptors.response.use(s=>s,s=>((s.response?.status===429||s.message?.includes("rate limit"))&&console.warn(" Rate limit exceeded:",s.message),s.response?.status===401&&(console.error(" Unauthorized access - 401 response received"),console.error("Request URL:",s.config?.url),console.error("Response data:",s.response?.data),qS(async()=>{const{removeAuthToken:e}=await Promise.resolve().then(()=>v4);return{removeAuthToken:e}},[]).then(({removeAuthToken:e})=>{e(),localStorage.clear(),sessionStorage.clear(),window.location.href="/login"})),Promise.reject(s)));async function hp(){return(await ge.get("/api/profile/me")).data}async function w4({firstName:s,lastName:e}){return(await ge.put("/api/profile",{firstName:s,lastName:e})).data}const N4={name:"Acme Corp",primaryColor:"#e11d48",logo:"/assets/acme-logo.png"},S4={name:"Globex Inc.",primaryColor:"#059669",logo:"/assets/globex-logo.png"},Hm={default:{name:"lmsbox",primaryColor:"#1b365d",logo:"/assets/lmsbox-logo.png"},acme:N4,globex:S4},sj=b.createContext();function C4(){const s=window.location.hostname;return s.includes("acme")?Hm.acme:s.includes("globex")?Hm.globex:Hm.default}function k4({children:s}){const[e]=b.useState(C4());return b.useEffect(()=>{document.documentElement.style.setProperty("--tenant-primary",e.primaryColor)},[e]),t.jsx(sj.Provider,{value:e,children:s})}function au(){return b.useContext(sj)}function qi({isOpen:s,onClose:e,onConfirm:a,title:r,message:l}){return s?t.jsx("div",{className:"fixed inset-0 bg-page-dark-bg bg-opacity-50 z-50 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4 shadow-xl",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r}),t.jsx("p",{className:"text-gray-600 mb-6",children:l}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md cursor-pointer",children:"Cancel"}),t.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-confirm-btn-text bg-confirm-btn hover:bg-confirm-btn-hover hover:text-confirm-btn-text-hover rounded-md cursor-pointer",children:"Confirm"})]})]})}):null}const _a="https://lmsbox-e0d2dqb4hwb8aqfp.uksouth-01.azurewebsites.net";function Ve({hideNavigation:s=!1}){const e=au(),a=ze(),[r,l]=b.useState(!1),[o,d]=b.useState(!1),[u,m]=b.useState(!1),[f,p]=b.useState(""),[y,v]=b.useState(""),j=b.useRef(null),S=b.useRef(null),C=b.useRef(null);b.useEffect(()=>{p(dp()),v(cn())},[]),b.useEffect(()=>{function A(T){j.current&&!j.current.contains(T.target)&&T.target.id!=="toggleOpen"&&m(!1),S.current&&!S.current.contains(T.target)&&!C.current?.contains(T.target)&&l(!1)}return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[]);const N=async()=>{try{d(!1);const A=G.loading("Logging out...");try{await fetch(`${_a}/api/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})}catch(T){console.error("Logout API error:",T)}Eo(),localStorage.clear(),sessionStorage.clear(),G.dismiss(A),G.success("Logged out successfully"),a("/login")}catch(A){console.error("Logout error:",A),G.error("Failed to logout. Please try again.")}},D=()=>{l(!1),d(!0)},E=()=>{a("/courses/all"),l(!1)};return t.jsxs(t.Fragment,{children:[t.jsx("header",{className:"flex shadow-md py-3 px-4 sm:px-10 bg-boxlms-navbar min-h-[70px] tracking-wide relative z-50",children:t.jsxs("div",{className:"flex flex-wrap items-center justify-between lg:gap-y-4 gap-y-6 gap-x-4 w-full",children:[t.jsx(ls,{to:"/admin/dashboard",children:t.jsx("img",{src:e.logo,alt:"Logo",className:"h-8 w-auto"})}),!s&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{ref:j,className:`${u?"block":"hidden"} lg:block fixed lg:relative inset-0 lg:inset-auto z-50`,children:[t.jsx("div",{className:`${u?"block":"hidden"} lg:hidden fixed inset-0 bg-page-dark-bg bg-opacity-40`,onClick:()=>m(!1)}),t.jsx("button",{onClick:()=>m(!1),className:"lg:hidden fixed top-2 right-4 z-50 rounded-full bg-white w-9 h-9 flex items-center justify-center border border-gray-200",children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-3.5 h-3.5 fill-boxlms-profile",viewBox:"0 0 320.591 320.591",children:[t.jsx("path",{d:"M30.391 318.583a30.37 30.37 0 0 1-21.56-7.288c-11.774-11.844-11.774-30.973 0-42.817L266.643 10.665c12.246-11.459 31.462-10.822 42.921 1.424 10.362 11.074 10.966 28.095 1.414 39.875L51.647 311.295a30.366 30.366 0 0 1-21.256 7.288z"}),t.jsx("path",{d:"M287.9 318.583a30.37 30.37 0 0 1-21.257-8.806L8.83 51.963C-2.078 39.225-.595 20.055 12.143 9.146c11.369-9.736 28.136-9.736 39.504 0l259.331 257.813c12.243 11.462 12.876 30.679 1.414 42.922-.456.487-.927.958-1.414 1.414a30.368 30.368 0 0 1-23.078 7.288z"})]})}),t.jsxs("ul",{className:"lg:flex lg:gap-x-10 max-lg:space-y-3 fixed lg:relative bg-white lg:bg-transparent w-2/3 lg:w-auto min-w-[300px] lg:min-w-0 top-0 left-0 h-full lg:h-auto p-4 lg:p-0 shadow-md lg:shadow-none overflow-auto lg:overflow-visible z-50",children:[t.jsx("li",{className:"mb-6 hidden max-lg:block",children:t.jsx(Ti,{to:"/admin/dashboard",children:t.jsx("img",{src:e.logo,alt:"Logo",className:"h-8 w-auto"})})}),[{to:"/admin/dashboard",label:"Dashboard"},{to:"/admin/users",label:"Users"},{to:"/admin/courses",label:"Courses"},{to:"/admin/learning-pathways",label:"Learning Pathways"},{to:"/admin/surveys",label:"Surveys"},{to:"/admin/reports",label:"Reports"}].map(A=>t.jsxs("li",{className:"nav-item relative group",children:[t.jsx(Ti,{to:A.to,className:({isActive:T})=>`block text-[15px] font-medium relative py-2 px-1 transition-colors duration-200
                          ${T?"text-boxlms-navbar-active":"text-boxlms-navbar-txt hover:text-boxlms-navbar-active"}
                          lg:after:content-[""] lg:after:block lg:after:absolute lg:after:h-0.5 
                          lg:after:bg-boxlms-navbar-active lg:after:w-full lg:after:scale-x-0 lg:hover:after:scale-x-100 
                          lg:after:transition-transform lg:after:duration-300 lg:after:origin-left
                          ${T?"lg:after:scale-x-100":""}`,onClick:()=>m(!1),children:A.label}),t.jsx("span",{className:"lg:hidden absolute left-0 w-1 h-full bg-blue-600 transform scale-y-0 group-hover:scale-y-100 transition-transform duration-200"})]},A.to))]})]}),t.jsx("button",{id:"toggleOpen",onClick:()=>m(!u),className:"lg:hidden",children:t.jsx("svg",{className:"w-7 h-7 fill-boxlms-navbar-txt",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})})]}),t.jsx("div",{className:"flex items-center max-sm:ml-auto space-x-6",children:t.jsxs("div",{className:"relative flex items-center space-x-3",children:[t.jsxs("div",{className:"hidden sm:block text-right",children:[t.jsx("div",{className:"text-sm font-medium text-boxlms-navbar-txt",children:f}),y&&t.jsx("div",{className:"text-xs text-gray-500 capitalize",children:y})]}),t.jsx("button",{ref:C,onClick:()=>l(!r),className:"relative px-1",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",className:"cursor-pointer hover:fill-boxlms-profile",viewBox:"0 0 512 512",children:t.jsx("path",{d:"M437.02 74.981C388.667 26.629 324.38 0 256 0S123.333 26.629 74.98 74.981C26.629 123.333 0 187.62 0 256s26.629 132.667 74.98 181.019C123.333 485.371 187.62 512 256 512s132.667-26.629 181.02-74.981C485.371 388.667 512 324.38 512 256s-26.629-132.667-74.98-181.019zM256 482c-66.869 0-127.037-29.202-168.452-75.511C113.223 338.422 178.948 290 256 290c-49.706 0-90-40.294-90-90s40.294-90 90-90 90 40.294 90 90-40.294 90-90 90c77.052 0 142.777 48.422 168.452 116.489C383.037 452.798 322.869 482 256 482z"})})}),r&&t.jsxs("div",{ref:S,className:"absolute right-0 top-10 bg-white shadow-lg py-6 px-6 rounded-sm sm:min-w-[320px] max-sm:min-w-[250px] z-50",children:[t.jsx("h6",{className:"font-semibold text-[15px]",children:"Admin Account"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your admin settings"}),t.jsx("hr",{className:"border-b-0 my-4 border-gray-300"}),t.jsxs("ul",{className:"space-y-1.5",children:[t.jsx("li",{children:t.jsx(ls,{to:"/admin/profile",className:"text-sm text-gray-500 hover:text-slate-900",onClick:()=>l(!1),children:"Profile Settings"})}),t.jsx("li",{children:t.jsx(ls,{to:"/admin/settings",className:"text-sm text-gray-500 hover:text-slate-900",onClick:()=>l(!1),children:"System Settings"})})]}),t.jsx("hr",{className:"border-b-0 my-4 border-gray-300"}),t.jsx("button",{onClick:E,className:"w-full bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded-sm px-4 py-2 text-sm font-medium cursor-pointer hover:brightness-80 mb-2",children:"Switch to Learner View"}),t.jsx("hr",{className:"border-b-0 my-4 border-gray-300"}),t.jsx("button",{onClick:D,className:"w-full bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded-sm px-4 py-2 text-sm font-medium cursor-pointer hover:brightness-80",children:"Logout"}),t.jsx(Xd,{position:"top-right"})]})]})})]})}),t.jsx(qi,{isOpen:o,onClose:()=>d(!1),onConfirm:N,title:"Confirm Logout",message:"Are you sure you want to logout?"})]})}function tt(s){const e=au();b.useEffect(()=>(s?document.title=`${s} - ${e.name}`:document.title=e.name,()=>{document.title=e.name}),[s,e.name])}function _4(){tt("Admin Profile");const[s,e]=b.useState(null),[a,r]=b.useState(!0);return b.useEffect(()=>{(async()=>{try{r(!0);const l=await hp();e(l)}finally{r(!1)}})()},[]),a?t.jsxs(t.Fragment,{children:[t.jsx(Ve,{}),t.jsx("div",{className:"max-w-2xl mx-auto py-12 text-center text-gray-500",children:"Loading profile..."})]}):s?t.jsxs(t.Fragment,{children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-10",children:[t.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-900",children:"Admin Profile"}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-6 border border-gray-100",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"Full Name"}),t.jsxs("div",{className:"text-lg font-medium text-gray-900",children:[s.firstName," ",s.lastName]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"Email"}),t.jsx("div",{className:"text-lg font-medium text-gray-900",children:s.email})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"Organisation"}),t.jsx("div",{className:"text-lg font-medium text-gray-900",children:s.organisation||""})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"Role(s)"}),t.jsx("div",{className:"text-lg font-medium text-gray-900",children:s.roles?.join(", ")||""})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Assigned Learning Pathways"}),s.assignedPathways&&s.assignedPathways.length>0?t.jsx("ul",{className:"list-disc pl-6 space-y-1",children:s.assignedPathways.map(l=>t.jsx("li",{className:"text-gray-800",children:l.title||l.id},l.id))}):t.jsx("div",{className:"text-gray-400",children:"No pathways assigned."})]})]})]})]}):t.jsxs(t.Fragment,{children:[t.jsx(Ve,{}),t.jsx("div",{className:"max-w-2xl mx-auto py-12 text-center text-red-500",children:"Failed to load profile."})]})}function Ar(){const s=au(),[e,a]=b.useState(!1),[r,l]=b.useState(!1),[o,d]=b.useState(!1),[u,m]=b.useState("User"),[f,p]=b.useState(""),[y,v]=b.useState(!1),j=ze(),S=Xs();b.useEffect(()=>{try{const T=ia();if(T){const w=JSON.parse(atob(T.split(".")[1])),_=w.name||w.email?.split("@")[0]||"User";m(_),p(cn()),v(cp())}else{const w=localStorage.getItem("userName");w&&m(w)}}catch(T){console.error("Error extracting user name:",T),m("User")}},[]),b.useEffect(()=>{ej(S.pathname)},[S]),b.useEffect(()=>{const w=setInterval(()=>{!ia()&&S.pathname!=="/login"&&(G.error("Session expired. Please login again."),j("/login"))},6e4);return()=>clearInterval(w)},[j,S.pathname]);const C=b.useRef(null),N=b.useRef(null),D=b.useRef(null);b.useEffect(()=>{function T(w){C.current&&!C.current.contains(w.target)&&w.target.id!=="toggleOpen"&&a(!1),N.current&&!N.current.contains(w.target)&&!D.current.contains(w.target)&&l(!1)}return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]),b.useEffect(()=>{a(!1),l(!1)},[j]);const E=T=>{T.preventDefault(),T.stopPropagation(),d(!0)},A=async()=>{try{d(!1);const T=G.loading("Logging out...");try{await fetch(`${_a}/api/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})}catch(w){console.error("Logout API error:",w)}Eo(),localStorage.clear(),sessionStorage.clear(),G.dismiss(T),G.success("Logged out successfully"),j("/login")}catch(T){console.error("Logout error:",T),G.error("Failed to logout. Please try again.")}};return t.jsx("header",{className:"flex shadow-md py-3 px-4 sm:px-10 bg-boxlms-navbar min-h-[70px] tracking-wide relative z-50",children:t.jsxs("div",{className:"flex flex-wrap items-center justify-between lg:gap-y-4 gap-y-6 gap-x-4 w-full",children:[t.jsx(ls,{to:"/courses/all",className:"hidden lg:block",children:t.jsx("img",{src:s.logo,alt:"Logo",className:"h-8 w-auto"})}),t.jsxs("div",{ref:C,className:`${e?"block":"hidden"} lg:block fixed lg:relative inset-0 lg:inset-auto z-50`,children:[t.jsx("div",{className:`${e?"block":"hidden"} lg:hidden fixed inset-0 bg-page-dark-bg bg-opacity-40`,onClick:()=>a(!1)}),t.jsx("button",{onClick:()=>a(!1),className:"lg:hidden fixed top-2 right-4 z-50 rounded-full bg-white w-9 h-9 flex items-center justify-center border border-gray-200",children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-3.5 h-3.5 fill-boxlms-profile",viewBox:"0 0 320.591 320.591",children:[t.jsx("path",{d:"M30.391 318.583a30.37 30.37 0 0 1-21.56-7.288c-11.774-11.844-11.774-30.973 0-42.817L266.643 10.665c12.246-11.459 31.462-10.822 42.921 1.424 10.362 11.074 10.966 28.095 1.414 39.875L51.647 311.295a30.366 30.366 0 0 1-21.256 7.288z"}),t.jsx("path",{d:"M287.9 318.583a30.37 30.37 0 0 1-21.257-8.806L8.83 51.963C-2.078 39.225-.595 20.055 12.143 9.146c11.369-9.736 28.136-9.736 39.504 0l259.331 257.813c12.243 11.462 12.876 30.679 1.414 42.922-.456.487-.927.958-1.414 1.414a30.368 30.368 0 0 1-23.078 7.288z"})]})}),t.jsx("ul",{className:"lg:flex lg:gap-x-10 max-lg:space-y-3 fixed lg:relative bg-white lg:bg-transparent w-2/3 lg:w-auto min-w-[300px] lg:min-w-0 top-0 left-0 h-full lg:h-auto p-4 lg:p-0 shadow-md lg:shadow-none overflow-auto lg:overflow-visible z-50",children:t.jsx("li",{className:"mb-6 hidden max-lg:block",children:t.jsx(Ti,{to:"/courses/all",children:t.jsx("img",{src:s.logo,alt:"Logo",className:"h-8 w-auto"})})})})]}),t.jsxs("div",{className:"flex items-center max-sm:ml-auto space-x-6",children:[t.jsxs("div",{className:"relative flex items-center space-x-3",children:[t.jsxs("div",{className:"hidden sm:block text-right",children:[t.jsx("div",{className:"text-sm font-medium text-boxlms-navbar-txt",children:u}),f&&t.jsx("div",{className:"text-xs text-gray-500 capitalize",children:f})]}),t.jsx("button",{ref:D,onClick:()=>l(!r),className:"relative px-1",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",className:"cursor-pointer hover:fill-boxlms-profile",viewBox:"0 0 512 512",children:t.jsx("path",{d:"M437.02 74.981C388.667 26.629 324.38 0 256 0S123.333 26.629 74.98 74.981C26.629 123.333 0 187.62 0 256s26.629 132.667 74.98 181.019C123.333 485.371 187.62 512 256 512s132.667-26.629 181.02-74.981C485.371 388.667 512 324.38 512 256s-26.629-132.667-74.98-181.019zM256 482c-66.869 0-127.037-29.202-168.452-75.511C113.223 338.422 178.948 290 256 290c-49.706 0-90-40.294-90-90s40.294-90 90-90 90 40.294 90 90-40.294 90-90 90c77.052 0 142.777 48.422 168.452 116.489C383.037 452.798 322.869 482 256 482z"})})}),r&&t.jsxs("div",{ref:N,className:"absolute right-0 top-10 bg-white shadow-lg py-6 px-6 rounded-sm sm:min-w-[320px] max-sm:min-w-[250px] z-50",children:[t.jsx("h6",{className:"font-semibold text-[15px]",children:"My Account"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your account settings"}),t.jsx("hr",{className:"border-b-0 my-4 border-gray-300"}),t.jsxs("ul",{className:"space-y-1.5",children:[t.jsx("li",{children:t.jsx(ls,{to:"/profile",className:"text-sm text-gray-500 hover:text-slate-900",children:"Profile Settings"})}),t.jsx("li",{children:t.jsx(ls,{to:"/courses/all",className:"text-sm text-gray-500 hover:text-slate-900",children:"My Learning"})}),t.jsx("li",{children:t.jsx(ls,{to:"/courses/certificates",className:"text-sm text-gray-500 hover:text-slate-900",children:"My Certificates"})}),t.jsx("li",{children:t.jsx(ls,{to:"/notifications",className:"text-sm text-gray-500 hover:text-slate-900",children:"Notifications"})}),t.jsx("li",{children:t.jsx(ls,{to:"/help",className:"text-sm text-gray-500 hover:text-slate-900",children:"Help Center"})})]}),y&&t.jsxs(t.Fragment,{children:[t.jsx("hr",{className:"border-b-0 my-4 border-gray-300"}),t.jsx("button",{onClick:()=>{j("/admin/dashboard"),l(!1)},className:"w-full bg-blue-600 text-white rounded-sm px-4 py-2 text-sm font-medium cursor-pointer hover:bg-blue-700 mb-2",children:"Switch to Admin View"})]}),t.jsx("hr",{className:"border-b-0 my-4 border-gray-300"}),t.jsx("button",{onClick:E,className:"w-full bg-logout-btn text-logout-btn-text hover:bg-logout-btn-text hover:text-white rounded-sm px-4 py-2 text-sm font-medium cursor-pointer",children:"Logout"}),t.jsx(Xd,{position:"top-right"})]}),t.jsx(qi,{isOpen:o,onClose:()=>d(!1),onConfirm:A,title:"Confirm Logout",message:"Are you sure you want to logout?"})]}),t.jsx("button",{onClick:()=>a(!0),className:"lg:hidden cursor-pointer"})]})]})})}function A4(){tt("My Profile");const[s,e]=b.useState(null),[a,r]=b.useState(!0);return b.useEffect(()=>{(async()=>{try{r(!0);const l=await hp();e(l)}finally{r(!1)}})()},[]),a?t.jsxs(t.Fragment,{children:[t.jsx(Ar,{}),t.jsx("div",{className:"max-w-2xl mx-auto py-12 text-center text-gray-500",children:"Loading profile..."})]}):s?t.jsxs(t.Fragment,{children:[t.jsx(Ar,{}),t.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-10",children:[t.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-900",children:"My Profile"}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-6 border border-gray-100",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"Full Name"}),t.jsxs("div",{className:"text-lg font-medium text-gray-900",children:[s.firstName," ",s.lastName]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"Email"}),t.jsx("div",{className:"text-lg font-medium text-gray-900",children:s.email})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"Organisation"}),t.jsx("div",{className:"text-lg font-medium text-gray-900",children:s.organisation||""})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"Role(s)"}),t.jsx("div",{className:"text-lg font-medium text-gray-900",children:s.roles?.join(", ")||""})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Assigned Learning Pathways"}),s.assignedPathways&&s.assignedPathways.length>0?t.jsx("ul",{className:"list-disc pl-6 space-y-1",children:s.assignedPathways.map(l=>t.jsx("li",{className:"text-gray-800",children:l.title||l.id},l.id))}):t.jsx("div",{className:"text-gray-400",children:"No pathways assigned."})]})]})]})]}):t.jsxs(t.Fragment,{children:[t.jsx(Ar,{}),t.jsx("div",{className:"max-w-2xl mx-auto py-12 text-center text-red-500",children:"Failed to load profile."})]})}var Ro=s=>s.type==="checkbox",Cr=s=>s instanceof Date,xs=s=>s==null;const aj=s=>typeof s=="object";var Pt=s=>!xs(s)&&!Array.isArray(s)&&aj(s)&&!Cr(s),E4=s=>Pt(s)&&s.target?Ro(s.target)?s.target.checked:s.target.value:s,T4=s=>s.substring(0,s.search(/\.\d+(\.|$)/))||s,R4=(s,e)=>s.has(T4(e)),D4=s=>{const e=s.constructor&&s.constructor.prototype;return Pt(e)&&e.hasOwnProperty("isPrototypeOf")},mp=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function It(s){let e;const a=Array.isArray(s),r=typeof FileList<"u"?s instanceof FileList:!1;if(s instanceof Date)e=new Date(s);else if(!(mp&&(s instanceof Blob||r))&&(a||Pt(s)))if(e=a?[]:Object.create(Object.getPrototypeOf(s)),!a&&!D4(s))e=s;else for(const l in s)s.hasOwnProperty(l)&&(e[l]=It(s[l]));else return s;return e}var nu=s=>/^\w*$/.test(s),Ct=s=>s===void 0,fp=s=>Array.isArray(s)?s.filter(Boolean):[],pp=s=>fp(s.replace(/["|']|\]/g,"").split(/\.|\[/)),Se=(s,e,a)=>{if(!e||!Pt(s))return a;const r=(nu(e)?[e]:pp(e)).reduce((l,o)=>xs(l)?l:l[o],s);return Ct(r)||r===s?Ct(s[e])?a:s[e]:r},Sa=s=>typeof s=="boolean",gt=(s,e,a)=>{let r=-1;const l=nu(e)?[e]:pp(e),o=l.length,d=o-1;for(;++r<o;){const u=l[r];let m=a;if(r!==d){const f=s[u];m=Pt(f)||Array.isArray(f)?f:isNaN(+l[r+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;s[u]=m,s=s[u]}};const eb={BLUR:"blur",FOCUS_OUT:"focusout"},na={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Xa={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},M4=ct.createContext(null);M4.displayName="HookFormContext";var L4=(s,e,a,r=!0)=>{const l={defaultValues:e._defaultValues};for(const o in s)Object.defineProperty(l,o,{get:()=>{const d=o;return e._proxyFormState[d]!==na.all&&(e._proxyFormState[d]=!r||na.all),s[d]}});return l};const O4=typeof window<"u"?ct.useLayoutEffect:ct.useEffect;var Ds=s=>typeof s=="string",z4=(s,e,a,r,l)=>Ds(s)?(r&&e.watch.add(s),Se(a,s,l)):Array.isArray(s)?s.map(o=>(r&&e.watch.add(o),Se(a,o))):(r&&(e.watchAll=!0),a),Af=s=>xs(s)||!aj(s);function qn(s,e,a=new WeakSet){if(Af(s)||Af(e))return s===e;if(Cr(s)&&Cr(e))return s.getTime()===e.getTime();const r=Object.keys(s),l=Object.keys(e);if(r.length!==l.length)return!1;if(a.has(s)||a.has(e))return!0;a.add(s),a.add(e);for(const o of r){const d=s[o];if(!l.includes(o))return!1;if(o!=="ref"){const u=e[o];if(Cr(d)&&Cr(u)||Pt(d)&&Pt(u)||Array.isArray(d)&&Array.isArray(u)?!qn(d,u,a):d!==u)return!1}}return!0}var P4=(s,e,a,r,l)=>e?{...a[s],types:{...a[s]&&a[s].types?a[s].types:{},[r]:l||!0}}:{},Jl=s=>Array.isArray(s)?s:[s],tb=()=>{let s=[];return{get observers(){return s},next:l=>{for(const o of s)o.next&&o.next(l)},subscribe:l=>(s.push(l),{unsubscribe:()=>{s=s.filter(o=>o!==l)}}),unsubscribe:()=>{s=[]}}};function nj(s,e){const a={};for(const r in s)if(s.hasOwnProperty(r)){const l=s[r],o=e[r];if(l&&Pt(l)&&o){const d=nj(l,o);Pt(d)&&(a[r]=d)}else s[r]&&(a[r]=o)}return a}var gs=s=>Pt(s)&&!Object.keys(s).length,gp=s=>s.type==="file",ra=s=>typeof s=="function",Od=s=>{if(!mp)return!1;const e=s?s.ownerDocument:0;return s instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},rj=s=>s.type==="select-multiple",xp=s=>s.type==="radio",U4=s=>xp(s)||Ro(s),qm=s=>Od(s)&&s.isConnected;function B4(s,e){const a=e.slice(0,-1).length;let r=0;for(;r<a;)s=Ct(s)?r++:s[e[r++]];return s}function F4(s){for(const e in s)if(s.hasOwnProperty(e)&&!Ct(s[e]))return!1;return!0}function Mt(s,e){const a=Array.isArray(e)?e:nu(e)?[e]:pp(e),r=a.length===1?s:B4(s,a),l=a.length-1,o=a[l];return r&&delete r[o],l!==0&&(Pt(r)&&gs(r)||Array.isArray(r)&&F4(r))&&Mt(s,a.slice(0,-1)),s}var H4=s=>{for(const e in s)if(ra(s[e]))return!0;return!1};function ij(s){return Array.isArray(s)||Pt(s)&&!H4(s)}function Ef(s,e={}){for(const a in s)ij(s[a])?(e[a]=Array.isArray(s[a])?[]:{},Ef(s[a],e[a])):Ct(s[a])||(e[a]=!0);return e}function _i(s,e,a){a||(a=Ef(e));for(const r in s)ij(s[r])?Ct(e)||Af(a[r])?a[r]=Ef(s[r],Array.isArray(s[r])?[]:{}):_i(s[r],xs(e)?{}:e[r],a[r]):a[r]=!qn(s[r],e[r]);return a}const sb={value:!1,isValid:!1},ab={value:!0,isValid:!0};var lj=s=>{if(Array.isArray(s)){if(s.length>1){const e=s.filter(a=>a&&a.checked&&!a.disabled).map(a=>a.value);return{value:e,isValid:!!e.length}}return s[0].checked&&!s[0].disabled?s[0].attributes&&!Ct(s[0].attributes.value)?Ct(s[0].value)||s[0].value===""?ab:{value:s[0].value,isValid:!0}:ab:sb}return sb},oj=(s,{valueAsNumber:e,valueAsDate:a,setValueAs:r})=>Ct(s)?s:e?s===""?NaN:s&&+s:a&&Ds(s)?new Date(s):r?r(s):s;const nb={isValid:!1,value:null};var cj=s=>Array.isArray(s)?s.reduce((e,a)=>a&&a.checked&&!a.disabled?{isValid:!0,value:a.value}:e,nb):nb;function rb(s){const e=s.ref;return gp(e)?e.files:xp(e)?cj(s.refs).value:rj(e)?[...e.selectedOptions].map(({value:a})=>a):Ro(e)?lj(s.refs).value:oj(Ct(e.value)?s.ref.value:e.value,s)}var q4=(s,e,a,r)=>{const l={};for(const o of s){const d=Se(e,o);d&&gt(l,o,d._f)}return{criteriaMode:a,names:[...s],fields:l,shouldUseNativeValidation:r}},zd=s=>s instanceof RegExp,Hl=s=>Ct(s)?s:zd(s)?s.source:Pt(s)?zd(s.value)?s.value.source:s.value:s,ib=s=>({isOnSubmit:!s||s===na.onSubmit,isOnBlur:s===na.onBlur,isOnChange:s===na.onChange,isOnAll:s===na.all,isOnTouch:s===na.onTouched});const lb="AsyncFunction";var V4=s=>!!s&&!!s.validate&&!!(ra(s.validate)&&s.validate.constructor.name===lb||Pt(s.validate)&&Object.values(s.validate).find(e=>e.constructor.name===lb)),$4=s=>s.mount&&(s.required||s.min||s.max||s.maxLength||s.minLength||s.pattern||s.validate),ob=(s,e,a)=>!a&&(e.watchAll||e.watch.has(s)||[...e.watch].some(r=>s.startsWith(r)&&/^\.\w+/.test(s.slice(r.length))));const eo=(s,e,a,r)=>{for(const l of a||Object.keys(s)){const o=Se(s,l);if(o){const{_f:d,...u}=o;if(d){if(d.refs&&d.refs[0]&&e(d.refs[0],l)&&!r)return!0;if(d.ref&&e(d.ref,d.name)&&!r)return!0;if(eo(u,e))break}else if(Pt(u)&&eo(u,e))break}}};function cb(s,e,a){const r=Se(s,a);if(r||nu(a))return{error:r,name:a};const l=a.split(".");for(;l.length;){const o=l.join("."),d=Se(e,o),u=Se(s,o);if(d&&!Array.isArray(d)&&a!==o)return{name:a};if(u&&u.type)return{name:o,error:u};if(u&&u.root&&u.root.type)return{name:`${o}.root`,error:u.root};l.pop()}return{name:a}}var I4=(s,e,a,r)=>{a(s);const{name:l,...o}=s;return gs(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(d=>e[d]===(!r||na.all))},Q4=(s,e,a)=>!s||!e||s===e||Jl(s).some(r=>r&&(a?r===e:r.startsWith(e)||e.startsWith(r))),Y4=(s,e,a,r,l)=>l.isOnAll?!1:!a&&l.isOnTouch?!(e||s):(a?r.isOnBlur:l.isOnBlur)?!s:(a?r.isOnChange:l.isOnChange)?s:!0,G4=(s,e)=>!fp(Se(s,e)).length&&Mt(s,e),W4=(s,e,a)=>{const r=Jl(Se(s,a));return gt(r,"root",e[a]),gt(s,a,r),s};function db(s,e,a="validate"){if(Ds(s)||Array.isArray(s)&&s.every(Ds)||Sa(s)&&!s)return{type:a,message:Ds(s)?s:"",ref:e}}var Si=s=>Pt(s)&&!zd(s)?s:{value:s,message:""},ub=async(s,e,a,r,l,o)=>{const{ref:d,refs:u,required:m,maxLength:f,minLength:p,min:y,max:v,pattern:j,validate:S,name:C,valueAsNumber:N,mount:D}=s._f,E=Se(a,C);if(!D||e.has(C))return{};const A=u?u[0]:d,T=U=>{l&&A.reportValidity&&(A.setCustomValidity(Sa(U)?"":U||""),A.reportValidity())},w={},_=xp(d),R=Ro(d),z=_||R,H=(N||gp(d))&&Ct(d.value)&&Ct(E)||Od(d)&&d.value===""||E===""||Array.isArray(E)&&!E.length,q=P4.bind(null,C,r,w),ne=(U,re,fe,Z=Xa.maxLength,B=Xa.minLength)=>{const L=U?re:fe;w[C]={type:U?Z:B,message:L,ref:d,...q(U?Z:B,L)}};if(o?!Array.isArray(E)||!E.length:m&&(!z&&(H||xs(E))||Sa(E)&&!E||R&&!lj(u).isValid||_&&!cj(u).isValid)){const{value:U,message:re}=Ds(m)?{value:!!m,message:m}:Si(m);if(U&&(w[C]={type:Xa.required,message:re,ref:A,...q(Xa.required,re)},!r))return T(re),w}if(!H&&(!xs(y)||!xs(v))){let U,re;const fe=Si(v),Z=Si(y);if(!xs(E)&&!isNaN(E)){const B=d.valueAsNumber||E&&+E;xs(fe.value)||(U=B>fe.value),xs(Z.value)||(re=B<Z.value)}else{const B=d.valueAsDate||new Date(E),L=I=>new Date(new Date().toDateString()+" "+I),Y=d.type=="time",O=d.type=="week";Ds(fe.value)&&E&&(U=Y?L(E)>L(fe.value):O?E>fe.value:B>new Date(fe.value)),Ds(Z.value)&&E&&(re=Y?L(E)<L(Z.value):O?E<Z.value:B<new Date(Z.value))}if((U||re)&&(ne(!!U,fe.message,Z.message,Xa.max,Xa.min),!r))return T(w[C].message),w}if((f||p)&&!H&&(Ds(E)||o&&Array.isArray(E))){const U=Si(f),re=Si(p),fe=!xs(U.value)&&E.length>+U.value,Z=!xs(re.value)&&E.length<+re.value;if((fe||Z)&&(ne(fe,U.message,re.message),!r))return T(w[C].message),w}if(j&&!H&&Ds(E)){const{value:U,message:re}=Si(j);if(zd(U)&&!E.match(U)&&(w[C]={type:Xa.pattern,message:re,ref:d,...q(Xa.pattern,re)},!r))return T(re),w}if(S){if(ra(S)){const U=await S(E,a),re=db(U,A);if(re&&(w[C]={...re,...q(Xa.validate,re.message)},!r))return T(re.message),w}else if(Pt(S)){let U={};for(const re in S){if(!gs(U)&&!r)break;const fe=db(await S[re](E,a),A,re);fe&&(U={...fe,...q(re,fe.message)},T(fe.message),r&&(w[C]=U))}if(!gs(U)&&(w[C]={ref:A,...U},!r))return w}}return T(!0),w};const X4={mode:na.onSubmit,reValidateMode:na.onChange,shouldFocusError:!0};function Z4(s={}){let e={...X4,...s},a={submitCount:0,isDirty:!1,isReady:!1,isLoading:ra(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},l=Pt(e.defaultValues)||Pt(e.values)?It(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:It(l),d={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},m,f=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...p};const v={array:tb(),state:tb()},j=e.criteriaMode===na.all,S=V=>ee=>{clearTimeout(f),f=setTimeout(V,ee)},C=async V=>{if(!e.disabled&&(p.isValid||y.isValid||V)){const ee=e.resolver?gs((await R()).errors):await H(r,!0);ee!==a.isValid&&v.state.next({isValid:ee})}},N=(V,ee)=>{!e.disabled&&(p.isValidating||p.validatingFields||y.isValidating||y.validatingFields)&&((V||Array.from(u.mount)).forEach(ie=>{ie&&(ee?gt(a.validatingFields,ie,ee):Mt(a.validatingFields,ie))}),v.state.next({validatingFields:a.validatingFields,isValidating:!gs(a.validatingFields)}))},D=(V,ee=[],ie,ye,me=!0,pe=!0)=>{if(ye&&ie&&!e.disabled){if(d.action=!0,pe&&Array.isArray(Se(r,V))){const we=ie(Se(r,V),ye.argA,ye.argB);me&&gt(r,V,we)}if(pe&&Array.isArray(Se(a.errors,V))){const we=ie(Se(a.errors,V),ye.argA,ye.argB);me&&gt(a.errors,V,we),G4(a.errors,V)}if((p.touchedFields||y.touchedFields)&&pe&&Array.isArray(Se(a.touchedFields,V))){const we=ie(Se(a.touchedFields,V),ye.argA,ye.argB);me&&gt(a.touchedFields,V,we)}(p.dirtyFields||y.dirtyFields)&&(a.dirtyFields=_i(l,o)),v.state.next({name:V,isDirty:ne(V,ee),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else gt(o,V,ee)},E=(V,ee)=>{gt(a.errors,V,ee),v.state.next({errors:a.errors})},A=V=>{a.errors=V,v.state.next({errors:a.errors,isValid:!1})},T=(V,ee,ie,ye)=>{const me=Se(r,V);if(me){const pe=Se(o,V,Ct(ie)?Se(l,V):ie);Ct(pe)||ye&&ye.defaultChecked||ee?gt(o,V,ee?pe:rb(me._f)):fe(V,pe),d.mount&&C()}},w=(V,ee,ie,ye,me)=>{let pe=!1,we=!1;const $e={name:V};if(!e.disabled){if(!ie||ye){(p.isDirty||y.isDirty)&&(we=a.isDirty,a.isDirty=$e.isDirty=ne(),pe=we!==$e.isDirty);const Be=qn(Se(l,V),ee);we=!!Se(a.dirtyFields,V),Be?Mt(a.dirtyFields,V):gt(a.dirtyFields,V,!0),$e.dirtyFields=a.dirtyFields,pe=pe||(p.dirtyFields||y.dirtyFields)&&we!==!Be}if(ie){const Be=Se(a.touchedFields,V);Be||(gt(a.touchedFields,V,ie),$e.touchedFields=a.touchedFields,pe=pe||(p.touchedFields||y.touchedFields)&&Be!==ie)}pe&&me&&v.state.next($e)}return pe?$e:{}},_=(V,ee,ie,ye)=>{const me=Se(a.errors,V),pe=(p.isValid||y.isValid)&&Sa(ee)&&a.isValid!==ee;if(e.delayError&&ie?(m=S(()=>E(V,ie)),m(e.delayError)):(clearTimeout(f),m=null,ie?gt(a.errors,V,ie):Mt(a.errors,V)),(ie?!qn(me,ie):me)||!gs(ye)||pe){const we={...ye,...pe&&Sa(ee)?{isValid:ee}:{},errors:a.errors,name:V};a={...a,...we},v.state.next(we)}},R=async V=>{N(V,!0);const ee=await e.resolver(o,e.context,q4(V||u.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return N(V),ee},z=async V=>{const{errors:ee}=await R(V);if(V)for(const ie of V){const ye=Se(ee,ie);ye?gt(a.errors,ie,ye):Mt(a.errors,ie)}else a.errors=ee;return ee},H=async(V,ee,ie={valid:!0})=>{for(const ye in V){const me=V[ye];if(me){const{_f:pe,...we}=me;if(pe){const $e=u.array.has(pe.name),Be=me._f&&V4(me._f);Be&&p.validatingFields&&N([pe.name],!0);const Yt=await ub(me,u.disabled,o,j,e.shouldUseNativeValidation&&!ee,$e);if(Be&&p.validatingFields&&N([pe.name]),Yt[pe.name]&&(ie.valid=!1,ee))break;!ee&&(Se(Yt,pe.name)?$e?W4(a.errors,Yt,pe.name):gt(a.errors,pe.name,Yt[pe.name]):Mt(a.errors,pe.name))}!gs(we)&&await H(we,ee,ie)}}return ie.valid},q=()=>{for(const V of u.unMount){const ee=Se(r,V);ee&&(ee._f.refs?ee._f.refs.every(ie=>!qm(ie)):!qm(ee._f.ref))&&Oe(V)}u.unMount=new Set},ne=(V,ee)=>!e.disabled&&(V&&ee&&gt(o,V,ee),!qn(I(),l)),U=(V,ee,ie)=>z4(V,u,{...d.mount?o:Ct(ee)?l:Ds(V)?{[V]:ee}:ee},ie,ee),re=V=>fp(Se(d.mount?o:l,V,e.shouldUnregister?Se(l,V,[]):[])),fe=(V,ee,ie={})=>{const ye=Se(r,V);let me=ee;if(ye){const pe=ye._f;pe&&(!pe.disabled&&gt(o,V,oj(ee,pe)),me=Od(pe.ref)&&xs(ee)?"":ee,rj(pe.ref)?[...pe.ref.options].forEach(we=>we.selected=me.includes(we.value)):pe.refs?Ro(pe.ref)?pe.refs.forEach(we=>{(!we.defaultChecked||!we.disabled)&&(Array.isArray(me)?we.checked=!!me.find($e=>$e===we.value):we.checked=me===we.value||!!me)}):pe.refs.forEach(we=>we.checked=we.value===me):gp(pe.ref)?pe.ref.value="":(pe.ref.value=me,pe.ref.type||v.state.next({name:V,values:It(o)})))}(ie.shouldDirty||ie.shouldTouch)&&w(V,me,ie.shouldTouch,ie.shouldDirty,!0),ie.shouldValidate&&O(V)},Z=(V,ee,ie)=>{for(const ye in ee){if(!ee.hasOwnProperty(ye))return;const me=ee[ye],pe=V+"."+ye,we=Se(r,pe);(u.array.has(V)||Pt(me)||we&&!we._f)&&!Cr(me)?Z(pe,me,ie):fe(pe,me,ie)}},B=(V,ee,ie={})=>{const ye=Se(r,V),me=u.array.has(V),pe=It(ee);gt(o,V,pe),me?(v.array.next({name:V,values:It(o)}),(p.isDirty||p.dirtyFields||y.isDirty||y.dirtyFields)&&ie.shouldDirty&&v.state.next({name:V,dirtyFields:_i(l,o),isDirty:ne(V,pe)})):ye&&!ye._f&&!xs(pe)?Z(V,pe,ie):fe(V,pe,ie),ob(V,u)&&v.state.next({...a,name:V}),v.state.next({name:d.mount?V:void 0,values:It(o)})},L=async V=>{d.mount=!0;const ee=V.target;let ie=ee.name,ye=!0;const me=Se(r,ie),pe=Be=>{ye=Number.isNaN(Be)||Cr(Be)&&isNaN(Be.getTime())||qn(Be,Se(o,ie,Be))},we=ib(e.mode),$e=ib(e.reValidateMode);if(me){let Be,Yt;const Ea=ee.type?rb(me._f):E4(V),Ls=V.type===eb.BLUR||V.type===eb.FOCUS_OUT,Br=!$4(me._f)&&!e.resolver&&!Se(a.errors,ie)&&!me._f.deps||Y4(Ls,Se(a.touchedFields,ie),a.isSubmitted,$e,we),Zs=ob(ie,u,Ls);gt(o,ie,Ea),Ls?(!ee||!ee.readOnly)&&(me._f.onBlur&&me._f.onBlur(V),m&&m(0)):me._f.onChange&&me._f.onChange(V);const Bt=w(ie,Ea,Ls),Os=!gs(Bt)||Zs;if(!Ls&&v.state.next({name:ie,type:V.type,values:It(o)}),Br)return(p.isValid||y.isValid)&&(e.mode==="onBlur"?Ls&&C():Ls||C()),Os&&v.state.next({name:ie,...Zs?{}:Bt});if(!Ls&&Zs&&v.state.next({...a}),e.resolver){const{errors:At}=await R([ie]);if(pe(Ea),ye){const Ns=cb(a.errors,r,ie),Kn=cb(At,r,Ns.name||ie);Be=Kn.error,ie=Kn.name,Yt=gs(At)}}else N([ie],!0),Be=(await ub(me,u.disabled,o,j,e.shouldUseNativeValidation))[ie],N([ie]),pe(Ea),ye&&(Be?Yt=!1:(p.isValid||y.isValid)&&(Yt=await H(r,!0)));ye&&(me._f.deps&&(!Array.isArray(me._f.deps)||me._f.deps.length>0)&&O(me._f.deps),_(ie,Yt,Be,Bt))}},Y=(V,ee)=>{if(Se(a.errors,ee)&&V.focus)return V.focus(),1},O=async(V,ee={})=>{let ie,ye;const me=Jl(V);if(e.resolver){const pe=await z(Ct(V)?V:me);ie=gs(pe),ye=V?!me.some(we=>Se(pe,we)):ie}else V?(ye=(await Promise.all(me.map(async pe=>{const we=Se(r,pe);return await H(we&&we._f?{[pe]:we}:we)}))).every(Boolean),!(!ye&&!a.isValid)&&C()):ye=ie=await H(r);return v.state.next({...!Ds(V)||(p.isValid||y.isValid)&&ie!==a.isValid?{}:{name:V},...e.resolver||!V?{isValid:ie}:{},errors:a.errors}),ee.shouldFocus&&!ye&&eo(r,Y,V?me:u.mount),ye},I=(V,ee)=>{let ie={...d.mount?o:l};return ee&&(ie=nj(ee.dirtyFields?a.dirtyFields:a.touchedFields,ie)),Ct(V)?ie:Ds(V)?Se(ie,V):V.map(ye=>Se(ie,ye))},P=(V,ee)=>({invalid:!!Se((ee||a).errors,V),isDirty:!!Se((ee||a).dirtyFields,V),error:Se((ee||a).errors,V),isValidating:!!Se(a.validatingFields,V),isTouched:!!Se((ee||a).touchedFields,V)}),W=V=>{V&&Jl(V).forEach(ee=>Mt(a.errors,ee)),v.state.next({errors:V?a.errors:{}})},de=(V,ee,ie)=>{const ye=(Se(r,V,{_f:{}})._f||{}).ref,me=Se(a.errors,V)||{},{ref:pe,message:we,type:$e,...Be}=me;gt(a.errors,V,{...Be,...ee,ref:ye}),v.state.next({name:V,errors:a.errors,isValid:!1}),ie&&ie.shouldFocus&&ye&&ye.focus&&ye.focus()},he=(V,ee)=>ra(V)?v.state.subscribe({next:ie=>"values"in ie&&V(U(void 0,ee),ie)}):U(V,ee,!0),je=V=>v.state.subscribe({next:ee=>{Q4(V.name,ee.name,V.exact)&&I4(ee,V.formState||p,Aa,V.reRenderRoot)&&V.callback({values:{...o},...a,...ee,defaultValues:l})}}).unsubscribe,ke=V=>(d.mount=!0,y={...y,...V.formState},je({...V,formState:y})),Oe=(V,ee={})=>{for(const ie of V?Jl(V):u.mount)u.mount.delete(ie),u.array.delete(ie),ee.keepValue||(Mt(r,ie),Mt(o,ie)),!ee.keepError&&Mt(a.errors,ie),!ee.keepDirty&&Mt(a.dirtyFields,ie),!ee.keepTouched&&Mt(a.touchedFields,ie),!ee.keepIsValidating&&Mt(a.validatingFields,ie),!e.shouldUnregister&&!ee.keepDefaultValue&&Mt(l,ie);v.state.next({values:It(o)}),v.state.next({...a,...ee.keepDirty?{isDirty:ne()}:{}}),!ee.keepIsValid&&C()},ft=({disabled:V,name:ee})=>{(Sa(V)&&d.mount||V||u.disabled.has(ee))&&(V?u.disabled.add(ee):u.disabled.delete(ee))},Xe=(V,ee={})=>{let ie=Se(r,V);const ye=Sa(ee.disabled)||Sa(e.disabled);return gt(r,V,{...ie||{},_f:{...ie&&ie._f?ie._f:{ref:{name:V}},name:V,mount:!0,...ee}}),u.mount.add(V),ie?ft({disabled:Sa(ee.disabled)?ee.disabled:e.disabled,name:V}):T(V,!0,ee.value),{...ye?{disabled:ee.disabled||e.disabled}:{},...e.progressive?{required:!!ee.required,min:Hl(ee.min),max:Hl(ee.max),minLength:Hl(ee.minLength),maxLength:Hl(ee.maxLength),pattern:Hl(ee.pattern)}:{},name:V,onChange:L,onBlur:L,ref:me=>{if(me){Xe(V,ee),ie=Se(r,V);const pe=Ct(me.value)&&me.querySelectorAll&&me.querySelectorAll("input,select,textarea")[0]||me,we=U4(pe),$e=ie._f.refs||[];if(we?$e.find(Be=>Be===pe):pe===ie._f.ref)return;gt(r,V,{_f:{...ie._f,...we?{refs:[...$e.filter(qm),pe,...Array.isArray(Se(l,V))?[{}]:[]],ref:{type:pe.type,name:V}}:{ref:pe}}}),T(V,!1,void 0,pe)}else ie=Se(r,V,{}),ie._f&&(ie._f.mount=!1),(e.shouldUnregister||ee.shouldUnregister)&&!(R4(u.array,V)&&d.action)&&u.unMount.add(V)}}},Ut=()=>e.shouldFocusError&&eo(r,Y,u.mount),xe=V=>{Sa(V)&&(v.state.next({disabled:V}),eo(r,(ee,ie)=>{const ye=Se(r,ie);ye&&(ee.disabled=ye._f.disabled||V,Array.isArray(ye._f.refs)&&ye._f.refs.forEach(me=>{me.disabled=ye._f.disabled||V}))},0,!1))},Ae=(V,ee)=>async ie=>{let ye;ie&&(ie.preventDefault&&ie.preventDefault(),ie.persist&&ie.persist());let me=It(o);if(v.state.next({isSubmitting:!0}),e.resolver){const{errors:pe,values:we}=await R();a.errors=pe,me=It(we)}else await H(r);if(u.disabled.size)for(const pe of u.disabled)Mt(me,pe);if(Mt(a.errors,"root"),gs(a.errors)){v.state.next({errors:{}});try{await V(me,ie)}catch(pe){ye=pe}}else ee&&await ee({...a.errors},ie),Ut(),setTimeout(Ut);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:gs(a.errors)&&!ye,submitCount:a.submitCount+1,errors:a.errors}),ye)throw ye},jt=(V,ee={})=>{Se(r,V)&&(Ct(ee.defaultValue)?B(V,It(Se(l,V))):(B(V,ee.defaultValue),gt(l,V,It(ee.defaultValue))),ee.keepTouched||Mt(a.touchedFields,V),ee.keepDirty||(Mt(a.dirtyFields,V),a.isDirty=ee.defaultValue?ne(V,It(Se(l,V))):ne()),ee.keepError||(Mt(a.errors,V),p.isValid&&C()),v.state.next({...a}))},wt=(V,ee={})=>{const ie=V?It(V):l,ye=It(ie),me=gs(V),pe=me?l:ye;if(ee.keepDefaultValues||(l=ie),!ee.keepValues){if(ee.keepDirtyValues){const we=new Set([...u.mount,...Object.keys(_i(l,o))]);for(const $e of Array.from(we))Se(a.dirtyFields,$e)?gt(pe,$e,Se(o,$e)):B($e,Se(pe,$e))}else{if(mp&&Ct(V))for(const we of u.mount){const $e=Se(r,we);if($e&&$e._f){const Be=Array.isArray($e._f.refs)?$e._f.refs[0]:$e._f.ref;if(Od(Be)){const Yt=Be.closest("form");if(Yt){Yt.reset();break}}}}if(ee.keepFieldsRef)for(const we of u.mount)B(we,Se(pe,we));else r={}}o=e.shouldUnregister?ee.keepDefaultValues?It(l):{}:It(pe),v.array.next({values:{...pe}}),v.state.next({values:{...pe}})}u={mount:ee.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!p.isValid||!!ee.keepIsValid||!!ee.keepDirtyValues,d.watch=!!e.shouldUnregister,v.state.next({submitCount:ee.keepSubmitCount?a.submitCount:0,isDirty:me?!1:ee.keepDirty?a.isDirty:!!(ee.keepDefaultValues&&!qn(V,l)),isSubmitted:ee.keepIsSubmitted?a.isSubmitted:!1,dirtyFields:me?{}:ee.keepDirtyValues?ee.keepDefaultValues&&o?_i(l,o):a.dirtyFields:ee.keepDefaultValues&&V?_i(l,V):ee.keepDirty?a.dirtyFields:{},touchedFields:ee.keepTouched?a.touchedFields:{},errors:ee.keepErrors?a.errors:{},isSubmitSuccessful:ee.keepIsSubmitSuccessful?a.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:l})},un=(V,ee)=>wt(ra(V)?V(o):V,ee),hn=(V,ee={})=>{const ie=Se(r,V),ye=ie&&ie._f;if(ye){const me=ye.refs?ye.refs[0]:ye.ref;me.focus&&(me.focus(),ee.shouldSelect&&ra(me.select)&&me.select())}},Aa=V=>{a={...a,...V}},fn={control:{register:Xe,unregister:Oe,getFieldState:P,handleSubmit:Ae,setError:de,_subscribe:je,_runSchema:R,_focusError:Ut,_getWatch:U,_getDirty:ne,_setValid:C,_setFieldArray:D,_setDisabledField:ft,_setErrors:A,_getFieldArray:re,_reset:wt,_resetDefaultValues:()=>ra(e.defaultValues)&&e.defaultValues().then(V=>{un(V,e.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:q,_disableForm:xe,_subjects:v,_proxyFormState:p,get _fields(){return r},get _formValues(){return o},get _state(){return d},set _state(V){d=V},get _defaultValues(){return l},get _names(){return u},set _names(V){u=V},get _formState(){return a},get _options(){return e},set _options(V){e={...e,...V}}},subscribe:ke,trigger:O,register:Xe,handleSubmit:Ae,watch:he,setValue:B,getValues:I,reset:un,resetField:jt,clearErrors:W,unregister:Oe,setError:de,setFocus:hn,getFieldState:P};return{...fn,formControl:fn}}function K4(s={}){const e=ct.useRef(void 0),a=ct.useRef(void 0),[r,l]=ct.useState({isDirty:!1,isValidating:!1,isLoading:ra(s.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1,isReady:!1,defaultValues:ra(s.defaultValues)?void 0:s.defaultValues});if(!e.current)if(s.formControl)e.current={...s.formControl,formState:r},s.defaultValues&&!ra(s.defaultValues)&&s.formControl.reset(s.defaultValues,s.resetOptions);else{const{formControl:d,...u}=Z4(s);e.current={...u,formState:r}}const o=e.current.control;return o._options=s,O4(()=>{const d=o._subscribe({formState:o._proxyFormState,callback:()=>l({...o._formState}),reRenderRoot:!0});return l(u=>({...u,isReady:!0})),o._formState.isReady=!0,d},[o]),ct.useEffect(()=>o._disableForm(s.disabled),[o,s.disabled]),ct.useEffect(()=>{s.mode&&(o._options.mode=s.mode),s.reValidateMode&&(o._options.reValidateMode=s.reValidateMode)},[o,s.mode,s.reValidateMode]),ct.useEffect(()=>{s.errors&&(o._setErrors(s.errors),o._focusError())},[o,s.errors]),ct.useEffect(()=>{s.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,s.shouldUnregister]),ct.useEffect(()=>{if(o._proxyFormState.isDirty){const d=o._getDirty();d!==r.isDirty&&o._subjects.state.next({isDirty:d})}},[o,r.isDirty]),ct.useEffect(()=>{s.values&&!qn(s.values,a.current)?(o._reset(s.values,{keepFieldsRef:!0,...o._options.resetOptions}),a.current=s.values,l(d=>({...d}))):o._resetDefaultValues()},[o,s.values]),ct.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=L4(r,o),e.current}function J4(){const[s,e]=b.useState(()=>!!ia());return b.useEffect(()=>{const a=()=>{const l=ia();e(!!l)};a();const r=setInterval(a,6e4);return()=>clearInterval(r)},[]),{isAuthenticated:s}}const co="/assets/lmsbox-logo-qt0ZKbFw.png",eC="/assets/login-image-Cp_HdFoC.png";var Vm={exports:{}},$m,hb;function tC(){if(hb)return $m;hb=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return $m=s,$m}var Im,mb;function sC(){if(mb)return Im;mb=1;var s=tC();function e(){}function a(){}return a.resetWarningCache=e,Im=function(){function r(d,u,m,f,p,y){if(y!==s){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}r.isRequired=r;function l(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:l,element:r,elementType:r,instanceOf:l,node:r,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:a,resetWarningCache:e};return o.PropTypes=o,o},Im}var fb;function aC(){return fb||(fb=1,Vm.exports=sC()()),Vm.exports}var nC=aC();const ps=zi(nC);var rC=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function Tf(){return Tf=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},Tf.apply(this,arguments)}function iC(s,e){if(s==null)return{};var a={},r=Object.keys(s),l,o;for(o=0;o<r.length;o++)l=r[o],!(e.indexOf(l)>=0)&&(a[l]=s[l]);return a}function rd(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function lC(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,Rf(s,e)}function Rf(s,e){return Rf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,l){return r.__proto__=l,r},Rf(s,e)}var ru=(function(s){lC(e,s);function e(){var r;return r=s.call(this)||this,r.handleExpired=r.handleExpired.bind(rd(r)),r.handleErrored=r.handleErrored.bind(rd(r)),r.handleChange=r.handleChange.bind(rd(r)),r.handleRecaptchaRef=r.handleRecaptchaRef.bind(rd(r)),r}var a=e.prototype;return a.getCaptchaFunction=function(l){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[l]:this.props.grecaptcha[l]:null},a.getValue=function(){var l=this.getCaptchaFunction("getResponse");return l&&this._widgetId!==void 0?l(this._widgetId):null},a.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},a.execute=function(){var l=this.getCaptchaFunction("execute");if(l&&this._widgetId!==void 0)return l(this._widgetId);this._executeRequested=!0},a.executeAsync=function(){var l=this;return new Promise(function(o,d){l.executionResolve=o,l.executionReject=d,l.execute()})},a.reset=function(){var l=this.getCaptchaFunction("reset");l&&this._widgetId!==void 0&&l(this._widgetId)},a.forceReset=function(){var l=this.getCaptchaFunction("reset");l&&l()},a.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},a.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},a.handleChange=function(l){this.props.onChange&&this.props.onChange(l),this.executionResolve&&(this.executionResolve(l),delete this.executionReject,delete this.executionResolve)},a.explicitRender=function(){var l=this.getCaptchaFunction("render");if(l&&this._widgetId===void 0){var o=document.createElement("div");this._widgetId=l(o,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(o)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},a.componentDidMount=function(){this.explicitRender()},a.componentDidUpdate=function(){this.explicitRender()},a.handleRecaptchaRef=function(l){this.captcha=l},a.render=function(){var l=this.props;l.sitekey,l.onChange,l.theme,l.type,l.tabindex,l.onExpired,l.onErrored,l.size,l.stoken,l.grecaptcha,l.badge,l.hl,l.isolated;var o=iC(l,rC);return b.createElement("div",Tf({},o,{ref:this.handleRecaptchaRef}))},e})(b.Component);ru.displayName="ReCAPTCHA";ru.propTypes={sitekey:ps.string.isRequired,onChange:ps.func,grecaptcha:ps.object,theme:ps.oneOf(["dark","light"]),type:ps.oneOf(["image","audio"]),tabindex:ps.number,onExpired:ps.func,onErrored:ps.func,size:ps.oneOf(["compact","normal","invisible"]),stoken:ps.string,hl:ps.string,badge:ps.oneOf(["bottomright","bottomleft","inline"]),isolated:ps.bool};ru.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var Qm={exports:{}},Ke={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pb;function oC(){if(pb)return Ke;pb=1;var s=typeof Symbol=="function"&&Symbol.for,e=s?Symbol.for("react.element"):60103,a=s?Symbol.for("react.portal"):60106,r=s?Symbol.for("react.fragment"):60107,l=s?Symbol.for("react.strict_mode"):60108,o=s?Symbol.for("react.profiler"):60114,d=s?Symbol.for("react.provider"):60109,u=s?Symbol.for("react.context"):60110,m=s?Symbol.for("react.async_mode"):60111,f=s?Symbol.for("react.concurrent_mode"):60111,p=s?Symbol.for("react.forward_ref"):60112,y=s?Symbol.for("react.suspense"):60113,v=s?Symbol.for("react.suspense_list"):60120,j=s?Symbol.for("react.memo"):60115,S=s?Symbol.for("react.lazy"):60116,C=s?Symbol.for("react.block"):60121,N=s?Symbol.for("react.fundamental"):60117,D=s?Symbol.for("react.responder"):60118,E=s?Symbol.for("react.scope"):60119;function A(w){if(typeof w=="object"&&w!==null){var _=w.$$typeof;switch(_){case e:switch(w=w.type,w){case m:case f:case r:case o:case l:case y:return w;default:switch(w=w&&w.$$typeof,w){case u:case p:case S:case j:case d:return w;default:return _}}case a:return _}}}function T(w){return A(w)===f}return Ke.AsyncMode=m,Ke.ConcurrentMode=f,Ke.ContextConsumer=u,Ke.ContextProvider=d,Ke.Element=e,Ke.ForwardRef=p,Ke.Fragment=r,Ke.Lazy=S,Ke.Memo=j,Ke.Portal=a,Ke.Profiler=o,Ke.StrictMode=l,Ke.Suspense=y,Ke.isAsyncMode=function(w){return T(w)||A(w)===m},Ke.isConcurrentMode=T,Ke.isContextConsumer=function(w){return A(w)===u},Ke.isContextProvider=function(w){return A(w)===d},Ke.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},Ke.isForwardRef=function(w){return A(w)===p},Ke.isFragment=function(w){return A(w)===r},Ke.isLazy=function(w){return A(w)===S},Ke.isMemo=function(w){return A(w)===j},Ke.isPortal=function(w){return A(w)===a},Ke.isProfiler=function(w){return A(w)===o},Ke.isStrictMode=function(w){return A(w)===l},Ke.isSuspense=function(w){return A(w)===y},Ke.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===f||w===o||w===l||w===y||w===v||typeof w=="object"&&w!==null&&(w.$$typeof===S||w.$$typeof===j||w.$$typeof===d||w.$$typeof===u||w.$$typeof===p||w.$$typeof===N||w.$$typeof===D||w.$$typeof===E||w.$$typeof===C)},Ke.typeOf=A,Ke}var gb;function cC(){return gb||(gb=1,Qm.exports=oC()),Qm.exports}var Ym,xb;function dC(){if(xb)return Ym;xb=1;var s=cC(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[s.ForwardRef]=r,o[s.Memo]=l;function d(S){return s.isMemo(S)?l:o[S.$$typeof]||e}var u=Object.defineProperty,m=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,y=Object.getPrototypeOf,v=Object.prototype;function j(S,C,N){if(typeof C!="string"){if(v){var D=y(C);D&&D!==v&&j(S,D,N)}var E=m(C);f&&(E=E.concat(f(C)));for(var A=d(S),T=d(C),w=0;w<E.length;++w){var _=E[w];if(!a[_]&&!(N&&N[_])&&!(T&&T[_])&&!(A&&A[_])){var R=p(C,_);try{u(S,_,R)}catch{}}}}return S}return Ym=j,Ym}var uC=dC();const hC=zi(uC);function Df(){return Df=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},Df.apply(this,arguments)}function mC(s,e){if(s==null)return{};var a={},r=Object.keys(s),l,o;for(o=0;o<r.length;o++)l=r[o],!(e.indexOf(l)>=0)&&(a[l]=s[l]);return a}function fC(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.__proto__=e}var ta={},pC=0;function gC(s,e){return e=e||{},function(r){var l=r.displayName||r.name||"Component",o=(function(u){fC(m,u);function m(p,y){var v;return v=u.call(this,p,y)||this,v.state={},v.__scriptURL="",v}var f=m.prototype;return f.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+pC++),this.__scriptLoaderID},f.setupScriptURL=function(){return this.__scriptURL=typeof s=="function"?s():s,this.__scriptURL},f.asyncScriptLoaderHandleLoad=function(y){var v=this;this.setState(y,function(){return v.props.asyncScriptOnLoad&&v.props.asyncScriptOnLoad(v.state)})},f.asyncScriptLoaderTriggerOnScriptLoaded=function(){var y=ta[this.__scriptURL];if(!y||!y.loaded)throw new Error("Script is not loaded.");for(var v in y.observers)y.observers[v](y);delete window[e.callbackName]},f.componentDidMount=function(){var y=this,v=this.setupScriptURL(),j=this.asyncScriptLoaderGetScriptLoaderID(),S=e,C=S.globalName,N=S.callbackName,D=S.scriptId;if(C&&typeof window[C]<"u"&&(ta[v]={loaded:!0,observers:{}}),ta[v]){var E=ta[v];if(E&&(E.loaded||E.errored)){this.asyncScriptLoaderHandleLoad(E);return}E.observers[j]=function(R){return y.asyncScriptLoaderHandleLoad(R)};return}var A={};A[j]=function(R){return y.asyncScriptLoaderHandleLoad(R)},ta[v]={loaded:!1,observers:A};var T=document.createElement("script");T.src=v,T.async=!0;for(var w in e.attributes)T.setAttribute(w,e.attributes[w]);D&&(T.id=D);var _=function(z){if(ta[v]){var H=ta[v],q=H.observers;for(var ne in q)z(q[ne])&&delete q[ne]}};N&&typeof window<"u"&&(window[N]=function(){return y.asyncScriptLoaderTriggerOnScriptLoaded()}),T.onload=function(){var R=ta[v];R&&(R.loaded=!0,_(function(z){return N?!1:(z(R),!0)}))},T.onerror=function(){var R=ta[v];R&&(R.errored=!0,_(function(z){return z(R),!0}))},document.body.appendChild(T)},f.componentWillUnmount=function(){var y=this.__scriptURL;if(e.removeOnUnmount===!0)for(var v=document.getElementsByTagName("script"),j=0;j<v.length;j+=1)v[j].src.indexOf(y)>-1&&v[j].parentNode&&v[j].parentNode.removeChild(v[j]);var S=ta[y];S&&(delete S.observers[this.asyncScriptLoaderGetScriptLoaderID()],e.removeOnUnmount===!0&&delete ta[y])},f.render=function(){var y=e.globalName,v=this.props;v.asyncScriptOnLoad;var j=v.forwardedRef,S=mC(v,["asyncScriptOnLoad","forwardedRef"]);return y&&typeof window<"u"&&(S[y]=typeof window[y]<"u"?window[y]:void 0),S.ref=j,b.createElement(r,S)},m})(b.Component),d=b.forwardRef(function(u,m){return b.createElement(o,Df({},u,{forwardedRef:m}))});return d.displayName="AsyncScriptLoader("+l+")",d.propTypes={asyncScriptOnLoad:ps.func},hC(d,r)}}var Mf="onloadcallback",xC="grecaptcha";function Lf(){return typeof window<"u"&&window.recaptchaOptions||{}}function yC(){var s=Lf(),e=s.useRecaptchaNet?"recaptcha.net":"www.google.com";return s.enterprise?"https://"+e+"/recaptcha/enterprise.js?onload="+Mf+"&render=explicit":"https://"+e+"/recaptcha/api.js?onload="+Mf+"&render=explicit"}const bC=gC(yC,{callbackName:Mf,globalName:xC,attributes:Lf().nonce?{nonce:Lf().nonce}:{}})(ru),dj=b.createRef(),vC=async()=>{try{return await dj.current.executeAsync()}catch(s){return console.error("reCAPTCHA execution failed:",s),null}},jC=()=>t.jsx(bC,{ref:dj,size:"invisible",sitekey:"6Lce-vkrAAAAAMzVj9ZeQIvLizgtHLd9Zc2CD4CL"});function yb(){const{register:s,handleSubmit:e,formState:{errors:a}}=K4(),[r,l]=b.useState("idle"),[o,d]=b.useState(""),{isAuthenticated:u}=J4(),m=au(),f=m?.logo||co,p=m?.name||"LMS Box";tt("Login");const y=cn(),v=u?y&&(y==="admin"||y==="Admin"||y==="OrgAdmin"||y==="SuperAdmin")?"/admin/dashboard":"/courses/all":null,j=async S=>{try{l("loading"),d("");const C=await vC();if(!C)throw new Error("reCAPTCHA verification failed");await ge.post("/api/auth/login",{email:S.email,recaptchaToken:C}),l("success"),d("Login link sent! Please check your email to continue.")}catch(C){l("error"),C.message==="reCAPTCHA verification failed"?d("Security check failed. Please try again."):d(C.response?.data?.message||"Failed to send Login link. Please try again.")}};return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-login-page-bg px-4",children:t.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 max-w-6xl w-full items-center",children:[v&&t.jsx(Rr,{to:v,replace:!0}),t.jsxs("div",{className:"bg-login-box-bg p-8 rounded-lg shadow-lg max-w-md w-full mx-auto",children:[t.jsxs("div",{className:"mb-8 text-center",children:[t.jsx("img",{src:f,alt:`${p} Logo`,className:"h-12 mx-auto mb-4"}),t.jsx("h1",{className:"text-3xl font-semibold text-login-box-text",children:"Sign in"}),t.jsx("p",{className:"text-login-box-text text-sm mt-2",children:"Enter your email address to receive a Login link for instant access."})]}),t.jsxs("form",{onSubmit:e(j),className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-login-box-text mb-2",children:"Email address"}),t.jsx("input",{...s("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",placeholder:"Enter your email",className:"w-full border border-login-input-border rounded-lg px-4 py-3 text-sm text-login-box-text focus:ring-2 focus:ring-(--tenant-primary)",disabled:r==="loading"||r==="success"}),a.email&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.email.message})]}),o&&t.jsx("p",{className:`text-sm ${r==="success"?"text-green-600":"text-red-500"}`,children:o}),t.jsx("button",{type:"submit",className:`w-full py-2.5 rounded-lg font-medium transition-colors text-login-btn-text ${r==="loading"?"bg-login-btn-bg/60 cursor-not-allowed":r==="success"?"bg-login-btn-bg cursor-not-allowed":"bg-login-btn-bg hover:brightness-90"}`,disabled:r==="loading"||r==="success",children:r==="loading"?"Sending Login link...":r==="success"?"Check your email":"Send Login link"})]}),!1,t.jsx(jC,{})]}),t.jsx("div",{className:"hidden lg:block",children:t.jsx("img",{src:eC,alt:"Login Illustration",className:"w-full max-w-lg mx-auto object-cover"})})]})})}function wC(){const[s]=ap(),e=ze(),[a,r]=b.useState("verifying");return tt("Verify Login"),b.useEffect(()=>{(async()=>{try{const o=s.get("token");if(!o){r("error");return}const d=new AbortController,u=setTimeout(()=>d.abort(),1e4);try{const m=await ge.post("/api/auth/verify-login-link",{token:o},{signal:d.signal,headers:{"Content-Type":"application/json"}});if(clearTimeout(u),m.data&&m.data.token){console.log(" Login response received:",{hasToken:!!m.data.token,tokenLength:m.data.token?.length,tokenPreview:m.data.token?.substring(0,20)+"...",expires:m.data.expires,expiresDate:m.data.expires?new Date(m.data.expires).toISOString():"N/A"}),op(m.data.token,m.data.expires);const f=localStorage.getItem("token"),p=localStorage.getItem("tokenExpiration");console.log(" Token stored, verification:",{tokenStored:!!f,tokenLength:f?.length,expirationStored:p,expirationDate:p?new Date(parseInt(p)).toISOString():"N/A"}),r("success");try{const j=await ge.get("/api/profile/me"),S=!j.data?.firstName||j.data.firstName.trim().length===0,C=!j.data?.lastName||j.data.lastName.trim().length===0;if(S&&C){e("/profile/complete");return}}catch{}const y=cn();console.log(" User role:",y);let v;y==="admin"||y==="OrgAdmin"?v="/admin/dashboard":v=tj()||"/courses/all",console.log(" Redirecting to:",v),setTimeout(()=>{e(v)},2e3)}else throw new Error("Invalid response format")}catch(m){throw clearTimeout(u),m}}catch(o){console.error("Verification error:",o),r("error")}})()},[s,e]),t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-login-page-bg px-4",children:t.jsxs("div",{className:"bg-login-box-bg p-8 rounded-lg shadow-lg max-w-md w-full mx-auto text-center",children:[t.jsx("img",{src:co,alt:"LMS Logo",className:"h-12 mx-auto mb-4"}),a==="verifying"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-login-btn-bg mx-auto"}),t.jsx("h2",{className:"text-xl font-semibold text-login-box-text mt-4",children:"Verifying your login..."}),t.jsx("p",{className:"text-login-box-text mt-2",children:"Please wait while we verify your login link."})]}),a==="success"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center mx-auto",children:t.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),t.jsx("h2",{className:"text-xl font-semibold mt-4 text-green-600",children:"Login Successful!"}),t.jsx("p",{className:"text-login-box-text mt-2",children:"Redirecting you to the courses..."})]}),a==="error"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"h-12 w-12 rounded-full bg-red-100 flex items-center justify-center mx-auto",children:t.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),t.jsx("h2",{className:"text-xl font-semibold mt-4 text-red-600",children:"Invalid or Expired Link"}),t.jsx("p",{className:"text-login-box-text mt-2",children:"This login link is no longer valid. Please request a new one."}),t.jsx("button",{onClick:()=>e("/login"),className:"mt-4 px-4 py-2 bg-login-btn-bg text-login-btn-text rounded-lg hover:brightness-90 transition-colors cursor-pointer",children:"Back to Login"})]})]})})}function NC(){const[s,e]=b.useState(null),[a,r]=b.useState([]),l=(u,m="info")=>{const f=new Date().toISOString();r(p=>[...p,{timestamp:f,message:u,type:m}])},o=()=>{l(" Checking authentication...");const u=ia(),m=su(),f=cn(),p=localStorage.getItem("token"),y=localStorage.getItem("tokenExpiration");let v=null;u&&(v=To(u));const j={hasToken:!!u,tokenLength:u?.length||0,isAuthenticated:m,role:f,rawToken:p?p.substring(0,30)+"...":"none",rawExpiration:y,expirationDate:y?new Date(parseInt(y)).toISOString():"N/A",currentTime:new Date().getTime(),currentTimeISO:new Date().toISOString(),timeUntilExpiry:y?Math.floor((parseInt(y)-new Date().getTime())/1e3/60):"N/A",decoded:v};e(j),l(` Auth check complete: ${m?"Authenticated":"Not authenticated"}`,m?"success":"warning")};b.useEffect(()=>{l(" AuthTest component mounted"),o();const u=setInterval(()=>{l(" Auto-checking auth status..."),o()},1e4);return()=>clearInterval(u)},[]);const d=()=>{localStorage.clear(),sessionStorage.clear(),l(" Cleared all storage","warning"),o()};return t.jsx("div",{className:"min-h-screen bg-gray-100 p-8",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Authentication Diagnostics"}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Token Status"}),t.jsxs("div",{className:"space-x-2",children:[t.jsx("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Refresh Status"}),t.jsx("button",{onClick:d,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Clear Storage"})]})]}),s&&t.jsxs("div",{className:"space-y-2 font-mono text-sm",children:[t.jsxs("div",{className:`p-2 rounded ${s.isAuthenticated?"bg-green-100":"bg-red-100"}`,children:[t.jsx("strong",{children:"Authenticated:"})," ",s.isAuthenticated?" YES":" NO"]}),t.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[t.jsx("strong",{children:"Has Token:"})," ",s.hasToken?"Yes":"No"," (",s.tokenLength," chars)"]}),t.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[t.jsx("strong",{children:"Role:"})," ",s.role||"None"]}),t.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[t.jsx("strong",{children:"Current Time:"})," ",s.currentTimeISO]}),t.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[t.jsx("strong",{children:"Token Expiration:"})," ",s.expirationDate]}),t.jsxs("div",{className:`p-2 rounded ${typeof s.timeUntilExpiry=="number"&&s.timeUntilExpiry>0?"bg-green-50":"bg-red-50"}`,children:[t.jsx("strong",{children:"Time Until Expiry:"})," ",s.timeUntilExpiry," minutes"]}),t.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[t.jsx("strong",{children:"Raw Token (preview):"})," ",s.rawToken]}),t.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[t.jsx("strong",{children:"Raw Expiration:"})," ",s.rawExpiration]}),s.decoded&&t.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[t.jsx("strong",{children:"Decoded Token:"}),t.jsx("pre",{className:"mt-2 text-xs overflow-auto",children:JSON.stringify(s.decoded,null,2)})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Activity Log"}),t.jsx("div",{className:"space-y-1 max-h-96 overflow-y-auto",children:a.map((u,m)=>t.jsxs("div",{className:`p-2 rounded text-sm font-mono ${u.type==="success"?"bg-green-50":u.type==="warning"?"bg-yellow-50":u.type==="error"?"bg-red-50":"bg-gray-50"}`,children:[t.jsxs("span",{className:"text-gray-500",children:["[",u.timestamp,"]"]})," ",u.message]},m))})]})]})})}function SC(){return t.jsxs("div",{className:"relative bg-white rounded overflow-hidden shadow animate-pulse w-full min-w-0 shrink-0",children:[t.jsx("div",{className:"h-40 md:h-48 lg:h-56 bg-gray-200 w-full"}),t.jsxs("div",{className:"p-4 md:p-5 lg:p-6 w-full",children:[t.jsx("div",{className:"h-5 md:h-6 lg:h-7 bg-gray-200 rounded mb-2 w-full"}),t.jsx("div",{className:"h-4 md:h-5 lg:h-6 bg-gray-200 rounded mb-4 w-3/4"}),t.jsxs("div",{className:"hidden md:block mb-4",children:[t.jsx("div",{className:"h-4 lg:h-5 bg-gray-200 rounded mb-2 w-5/6"}),t.jsx("div",{className:"h-4 lg:h-5 bg-gray-200 rounded w-2/3"})]}),t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"h-2 md:h-3 bg-gray-200 rounded mb-2 md:mb-3 w-full"}),t.jsx("div",{className:"h-4 md:h-5 bg-gray-200 rounded w-20 md:w-24 lg:w-28"})]})]})]})}function CC({count:s=8}){return t.jsx(t.Fragment,{children:Array.from({length:s},(e,a)=>t.jsx(SC,{},a))})}async function kC(s="",e="all",a=null){try{const l=(await ge.get("/api/learner/courses",{params:{...s?.trim()?{search:s.trim()}:{},...e&&e!=="all"?{progress:e}:{}},signal:a})).data;return Array.isArray(l?.items)?l.items:[]}catch(r){if(r.name==="AbortError"||r.code==="ERR_CANCELED")return[];if(r.response?.status===401)return console.warn("Authentication required - user will be redirected to login"),[];throw console.error("Failed to fetch courses from API:",r.message),r}}async function _C(s=null){try{const a=(await ge.get("/api/learner/courses/certificates",{signal:s})).data;return Array.isArray(a?.items)?a.items:[]}catch(e){if(e.name==="AbortError"||e.code==="ERR_CANCELED")return[];if(e.response?.status===401)return console.warn("Authentication required - user will be redirected to login"),[];throw console.error("Failed to fetch certificates from API:",e.message),e}}function AC(s,e){const[a,r]=b.useState(s);return b.useEffect(()=>{const l=setTimeout(()=>{r(s)},e);return()=>{clearTimeout(l)}},[s,e]),a}const EC=ct.memo(function({course:e,onNavigate:a,isCertificate:r=!1}){const[l,o]=b.useState(!1),[d,u]=b.useState(!1),m=b.useCallback(()=>{r&&e.certificateUrl?window.open(e.certificateUrl,"_blank"):r&&!e.certificateUrl?(async()=>{try{const j=localStorage.getItem("token"),S=await fetch(`/api/learner/courses/${e.id}/certificate`,{headers:{Authorization:`Bearer ${j}`}});if(S.ok){const C=await S.json();C.certificateUrl&&window.open(C.certificateUrl,"_blank")}else{const C=await S.json().catch(()=>({}));alert(C.message||"Failed to load certificate. Please try again.")}}catch(j){console.error("Error fetching certificate:",j),alert("Network error. Please check your connection and try again.")}})():a(e.id)},[e.id,e.certificateUrl,a,r]),f=b.useCallback(()=>o(!0),[]),p=b.useCallback(()=>o(!1),[]),y=b.useCallback(()=>{d||u(!0)},[d]);return t.jsxs("div",{onClick:m,onMouseEnter:f,onMouseLeave:p,className:"relative bg-white rounded overflow-hidden shadow hover:shadow-lg cursor-pointer transition",children:[t.jsxs("div",{className:"relative h-40 bg-gray-100 overflow-hidden",children:[t.jsx("img",{src:d?"/assets/default-course-banner.png":e.banner,alt:e.title,loading:"lazy",className:`w-full h-full object-cover transition-transform ${l?"scale-105 filter blur-sm brightness-75":""}`,onError:y}),l&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"bg-white/60 rounded-full p-3",children:r?t.jsx("svg",{className:"w-8 h-8 text-(--tenant-primary)",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z",fill:"currentColor"})}):t.jsx("svg",{className:"w-8 h-8 text-(--tenant-primary)",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M5 3v18l15-9L5 3z",fill:"currentColor"})})})})]}),t.jsxs("div",{className:"p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),r?t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[t.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),t.jsxs("span",{children:["Completed ",e.certificateIssuedDate?new Date(e.certificateIssuedDate).toLocaleDateString():""]})]}),t.jsx("button",{className:"w-full bg-(--tenant-primary) text-white font-medium py-2 rounded hover:opacity-90",children:"View Certificate"})]}):t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"h-2 bg-gray-200 rounded overflow-hidden",children:t.jsx("div",{className:"h-full bg-(--tenant-primary)",style:{width:`${Math.min(100,e.progress)}%`}})}),t.jsx("div",{className:"mt-2 text-sm text-gray-600",children:e.progress===0?t.jsx("span",{className:"inline-block bg-(--tenant-primary) text-white text-xs font-medium px-3 py-1 rounded",children:"START COURSE"}):t.jsxs("span",{children:[e.progress,"% complete"]})})]})]})]})});function TC({initialTab:s={}}){const e=Xn(),a=ze(),[r,l]=b.useState(""),[o,d]=b.useState("recently_accessed"),[u,m]=b.useState("all"),[f,p]=b.useState([]),[y,v]=b.useState(!1),j=AC(r,300),C=e.tab||s||"all";tt("Courses"),b.useEffect(()=>{const T=new AbortController;return(async()=>{v(!0);try{let _;C==="certificates"?_=await _C(T.signal):_=await kC(j,"all",T.signal),T.signal.aborted||p(_)}catch(_){T.signal.aborted||(console.error("Error loading courses:",_),G.error("Failed to load courses"))}finally{T.signal.aborted||v(!1)}})(),()=>{T.abort()}},[C,j]);const N=b.useCallback(T=>{v(!0),a(`/courses/${T}`)},[a]),D=b.useCallback(()=>{l(""),d("recently_accessed"),m("all")},[]),E=b.useMemo(()=>{let T=f.slice();if(r.trim()){const w=r.toLowerCase();T=T.filter(_=>_.title.toLowerCase().includes(w))}return u==="not_started"&&(T=T.filter(w=>w.progress===0)),u==="in_progress"&&(T=T.filter(w=>w.progress>0&&w.progress<100)),u==="completed"&&(T=T.filter(w=>w.progress>=100)),o==="title_az"&&T.sort((w,_)=>w.title.localeCompare(_.title)),o==="title_za"&&T.sort((w,_)=>_.title.localeCompare(w.title)),o==="recently_enrolled"&&T.sort((w,_)=>{const R=w.enrolledDate?new Date(w.enrolledDate):new Date(0);return(_.enrolledDate?new Date(_.enrolledDate):new Date(0))-R}),o==="recently_accessed"&&T.sort((w,_)=>{const R=w.lastAccessedDate?new Date(w.lastAccessedDate):new Date(0);return(_.lastAccessedDate?new Date(_.lastAccessedDate):new Date(0))-R}),T},[f,r,o,u]),A=b.useCallback(T=>{a(`/course/${T}`)},[a]);return t.jsxs("div",{className:"min-h-screen bg-page-bg",children:[t.jsx(Ar,{}),t.jsxs("div",{className:"p-4 max-w-7xl mx-auto",children:[t.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mb-6",children:"My learning"}),t.jsx("div",{className:"border-b border-gray-200 mb-6",children:t.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[t.jsx("button",{onClick:()=>N("all"),className:`py-3 px-1 border-b-2 text-sm font-medium ${C==="all"?"border-(--tenant-primary) text-(--tenant-primary)":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"All courses"}),t.jsx("button",{onClick:()=>N("certificates"),className:`py-3 px-1 border-b-2 text-sm font-medium ${C==="certificates"?"border-(--tenant-primary) text-(--tenant-primary)":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Certifications"})]})}),C==="all"&&t.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-10",children:[t.jsx("div",{className:"flex-1 min-w-[220px]",children:t.jsxs("div",{className:"relative",children:[t.jsx("input",{value:r,onChange:T=>l(T.target.value),placeholder:"Search my courses",className:"w-full border border-gray-300 rounded px-4 py-2"}),t.jsx("button",{className:"absolute right-1 top-1.5 bg-(--tenant-primary) text-white px-3 py-1 rounded",children:""})]})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("label",{className:"text-sm text-gray-600",children:"Sort by"}),t.jsxs("select",{value:o,onChange:T=>d(T.target.value),className:"border rounded px-3 py-2",children:[t.jsx("option",{value:"recently_accessed",children:"Recently Accessed"}),t.jsx("option",{value:"recently_enrolled",children:"Recently Enrolled"}),t.jsx("option",{value:"title_az",children:"Title: A to Z"}),t.jsx("option",{value:"title_za",children:"Title: Z to A"})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("label",{className:"text-sm text-gray-600",children:"Filter by"}),t.jsxs("select",{value:u,onChange:T=>m(T.target.value),className:"border rounded px-3 py-2",children:[t.jsx("option",{value:"all",children:"All progress"}),t.jsx("option",{value:"not_started",children:"Not Started"}),t.jsx("option",{value:"in_progress",children:"In Progress"}),t.jsx("option",{value:"completed",children:"Completed"})]})]}),t.jsx("button",{onClick:D,className:"text-sm text-gray-700 underline ml-2",children:"Reset"})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:y?t.jsx(CC,{count:8}):E.length===0?t.jsx("div",{className:"col-span-full text-gray-600",children:"No data found."}):E.map(T=>t.jsx(EC,{course:T,onNavigate:A,isCertificate:C==="certificates"},T.id))})]})]})}function RC({quizId:s,onComplete:e}){const[a,r]=b.useState(null),[l,o]=b.useState(!0),[d,u]=b.useState({}),[m,f]=b.useState(!1),[p,y]=b.useState(null),[v,j]=b.useState(null),[S,C]=b.useState(0);b.useEffect(()=>{if(!s)return;(async()=>{try{const T=localStorage.getItem("token"),w=await fetch(`${_a}/api/learner/quizzes/${s}`,{headers:{Authorization:`Bearer ${T}`}});if(w.ok){const _=await w.json();r(_),_.isTimed&&j(_.timeLimit*60)}else G.error("Failed to load quiz")}catch(T){console.error("Error loading quiz:",T),G.error("Failed to load quiz")}finally{o(!1)}})()},[s]),b.useEffect(()=>{if(!a?.isTimed||v===null||m)return;const A=setInterval(()=>{j(T=>T<=1?(f(!0),setTimeout(()=>{D(!0)},100),0):T-1)},1e3);return()=>clearInterval(A)},[a,v,m]);const N=(A,T,w=!1)=>{u(_=>{if(w){const R=_[A]||[];return R.includes(T)?{..._,[A]:R.filter(z=>z!==T)}:{..._,[A]:[...R,T]}}else return{..._,[A]:T}})},D=async(A=!1)=>{if(m)return;const T=a.questions.filter(w=>!d[w.id]||Array.isArray(d[w.id])&&d[w.id].length===0);if(!A&&T.length>0){G.error(`Please answer all questions. ${T.length} question(s) remaining.`);return}f(!0);try{const w=localStorage.getItem("token"),_={answers:a.questions.map(z=>{const H=d[z.id];return{questionId:z.id,selectedOptionId:Array.isArray(H)?null:H,selectedOptionIds:Array.isArray(H)?H:null}})},R=await fetch(`${_a}/api/learner/quizzes/${s}/submit`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${w}`},body:JSON.stringify(_)});if(R.ok){const z=await R.json();y(z),z.passed?(G.success(`Quiz passed! Score: ${z.score}%`),e?.(z.score)):G.error(`Quiz failed. Score: ${z.score}%. Required: ${z.passingScore}%`)}else G.error("Failed to submit quiz"),f(!1)}catch(w){console.error("Error submitting quiz:",w),G.error("Failed to submit quiz"),f(!1)}},E=A=>{const T=Math.floor(A/60),w=A%60;return`${T}:${w.toString().padStart(2,"0")}`};return l?t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx("p",{className:"text-gray-500",children:"Loading quiz..."})}):a?m&&p?t.jsx("div",{className:"w-full h-full bg-white p-8 overflow-auto",children:t.jsxs("div",{className:"max-w-2xl mx-auto",children:[t.jsxs("div",{className:`text-center mb-8 p-6 rounded-lg ${p.passed?"bg-green-50":"bg-red-50"}`,children:[t.jsx("div",{className:`text-6xl mb-4 ${p.passed?"text-green-600":"text-red-600"}`,children:p.passed?"":""}),t.jsx("h2",{className:"text-2xl font-bold mb-2",children:p.passed?"Congratulations!":"Keep Trying!"}),t.jsxs("p",{className:"text-lg mb-2",children:["Your Score: ",p.score,"%"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[p.earnedPoints," / ",p.totalPoints," points"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Passing Score: ",p.passingScore,"%"]})]}),p.questionResults&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Question Results"}),a.questions.map((A,T)=>{const w=p.questionResults.find(_=>_.questionId===A.id);return t.jsxs("div",{className:`p-4 border rounded ${w?.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("p",{className:"font-medium",children:["Question ",T+1]}),t.jsx("span",{className:`text-sm ${w?.isCorrect?"text-green-600":"text-red-600"}`,children:w?.isCorrect?"Correct":"Incorrect"})]}),t.jsx("p",{className:"text-gray-700 mb-3",children:A.question}),w?.explanation&&t.jsxs("p",{className:"text-sm text-gray-600 italic mt-2",children:[t.jsx("strong",{children:"Explanation:"})," ",w.explanation]})]},A.id)})]}),a.allowRetake&&!p.passed&&t.jsx("button",{onClick:()=>{f(!1),y(null),u({}),C(0),a.isTimed&&j(a.timeLimit*60)},className:"mt-6 w-full bg-blue-600 text-white px-6 py-3 rounded hover:bg-blue-700",children:"Retake Quiz"})]})}):t.jsx("div",{className:"w-full h-full bg-white p-8 overflow-auto",children:t.jsxs("div",{className:"max-w-2xl mx-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-semibold",children:a.title}),a.description&&t.jsx("p",{className:"text-gray-600 mt-1",children:a.description})]}),a.isTimed&&v!==null&&t.jsxs("div",{className:`text-lg font-semibold ${v<60?"text-red-600":"text-gray-700"}`,children:[" ",E(v)]})]}),t.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-gray-700",children:[t.jsx("strong",{children:"Passing Score:"})," ",a.passingScore,"% |",t.jsx("strong",{className:"ml-2",children:"Total Points:"})," ",a.questions.reduce((A,T)=>A+T.points,0)]}),t.jsxs("p",{className:"text-sm font-semibold text-blue-600",children:["Question ",S+1," of ",a.questions.length]})]})}),t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${(S+1)/a.questions.length*100}%`}})})}),a.questions.map((A,T)=>T===S&&t.jsxs("div",{className:"p-6 border rounded-lg mb-6",children:[t.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Question ",T+1," of ",a.questions.length]}),t.jsx("p",{className:"text-lg font-medium text-gray-900 mb-4",children:A.question}),t.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Points: ",A.points]}),t.jsx("div",{className:"space-y-3",children:A.options.map(w=>t.jsxs("label",{className:"flex items-start space-x-3 p-4 border-2 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[t.jsx("input",{type:A.type==="mc_multi"?"checkbox":"radio",name:`question-${A.id}`,value:w.id,checked:A.type==="mc_multi"?(d[A.id]||[]).includes(w.id):d[A.id]===w.id,onChange:_=>{A.type==="mc_multi"?N(A.id,w.id,!0):N(A.id,w.id,!1)},className:"mt-1 text-blue-600 focus:ring-2 focus:ring-blue-500",disabled:m}),t.jsx("span",{className:"flex-1 text-gray-700",children:w.text})]},w.id))})]},A.id)),t.jsxs("div",{className:"flex items-center justify-between mt-8",children:[t.jsx("button",{onClick:()=>C(A=>Math.max(0,A-1)),disabled:S===0,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed font-medium",children:" Previous"}),S<a.questions.length-1?t.jsx("button",{onClick:()=>C(A=>Math.min(a.questions.length-1,A+1)),className:"px-6 py-3 bg-blue-600 text-white rounded hover:bg-blue-700 font-medium",children:"Next "}):t.jsx("button",{onClick:D,disabled:m,className:"px-6 py-3 bg-green-600 text-white rounded hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium",children:m?"Submitting...":"Submit Quiz"})]}),t.jsx("div",{className:"flex items-center justify-center gap-2 mt-6",children:a.questions.map((A,T)=>{const w=A.type==="mc_multi"?(d[A.id]||[]).length>0:d[A.id]!==void 0;return t.jsx("button",{onClick:()=>C(T),className:`w-3 h-3 rounded-full transition-all ${T===S?"bg-blue-600 w-8":w?"bg-green-500":"bg-gray-300"}`,title:`Question ${T+1}${w?" (Answered)":""}`},A.id)})})]})}):t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx("p",{className:"text-gray-500",children:"Quiz not found"})})}function DC({survey:s,onSubmit:e,onCancel:a,surveyType:r="pre"}){const[l,o]=b.useState({}),[d,u]=b.useState(!1);if(ct.useEffect(()=>{if(s?.alreadyCompleted&&s?.questions){const C={};s.questions.forEach(N=>{N.response&&(C[N.id]={questionId:N.id,answerText:N.response.answerText,selectedOptions:N.response.selectedOptions,ratingValue:N.response.ratingValue})}),o(C)}},[s]),ct.useEffect(()=>{console.log("Survey data:",s),console.log("Questions:",s?.questions)},[s]),!s||!s.questions||s.questions.length===0)return t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-gray-500",children:"No questions available"})});const m=s.alreadyCompleted,f=(C,N)=>{o(D=>({...D,[C]:{questionId:C,answerText:N}}))},p=(C,N,D)=>{o(E=>{const A=E[C]||{selectedOptions:[]};if(D){const T=A.selectedOptions||[],w=T.includes(N)?T.filter(_=>_!==N):[...T,N];return{...E,[C]:{questionId:C,selectedOptions:w}}}else return{...E,[C]:{questionId:C,selectedOptions:[N]}}})},y=(C,N)=>{o(D=>({...D,[C]:{questionId:C,ratingValue:parseInt(N)}}))},v=()=>{const C=s.questions.filter(N=>N.isRequired);for(const N of C){const D=l[N.id];if(!D)return G.error(`Please answer: ${N.questionText}`),!1;if(N.questionType==="Text"&&!D.answerText?.trim())return G.error(`Please answer: ${N.questionText}`),!1;if((N.questionType==="MultipleChoice"||N.questionType==="SingleChoice")&&(!D.selectedOptions||D.selectedOptions.length===0))return G.error(`Please select an option for: ${N.questionText}`),!1;if(N.questionType==="Rating"&&!D.ratingValue)return G.error(`Please provide a rating for: ${N.questionText}`),!1}return!0},j=async()=>{if(v()){u(!0);try{const C=Object.values(l);await e(C)}catch(C){console.error("Error submitting survey:",C),G.error("Failed to submit survey")}finally{u(!1)}}},S=(C,N)=>{const D=l[C.id];switch(console.log(`Rendering question ${N+1}:`,C),C.questionType){case"Text":return t.jsxs("div",{className:"mb-6 p-4 bg-white rounded-lg border",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:[N+1,". ",C.questionText,C.isRequired&&!m&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("textarea",{value:D?.answerText||"",onChange:E=>f(C.id,E.target.value),rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Enter your response...",required:C.isRequired,disabled:m})]},C.id);case"SingleChoice":case"MultipleChoice":{const E=C.options||[],A=C.questionType==="MultipleChoice",T=D?.selectedOptions||[];return t.jsxs("div",{className:"mb-6 p-4 bg-white rounded-lg border",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:[N+1,". ",C.questionText,C.isRequired&&!m&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{className:"space-y-2",children:E.map((w,_)=>t.jsxs("label",{className:`flex items-center gap-2 p-2 rounded ${m?"cursor-not-allowed":"cursor-pointer hover:bg-gray-50"}`,children:[t.jsx("input",{type:A?"checkbox":"radio",name:`question-${C.id}`,checked:T.includes(w),onChange:()=>p(C.id,w,A),className:"w-4 h-4 text-blue-600 focus:ring-blue-500 disabled:cursor-not-allowed",disabled:m}),t.jsx("span",{className:"text-sm text-gray-700",children:w})]},_))})]},C.id)}case"Rating":{const E=C.minRating||1,A=C.maxRating||5,T=D?.ratingValue;return t.jsxs("div",{className:"mb-6 p-4 bg-white rounded-lg border",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:[N+1,". ",C.questionText,C.isRequired&&!m&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-gray-500 mr-2",children:E}),Array.from({length:A-E+1},(w,_)=>{const R=E+_;return t.jsx("button",{type:"button",onClick:()=>!m&&y(C.id,R),disabled:m,className:`w-10 h-10 rounded-full border-2 transition-all ${T===R?"bg-blue-600 text-white border-blue-600 scale-110":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"} ${m?"cursor-not-allowed opacity-75":"cursor-pointer"}`,children:R},R)}),t.jsx("span",{className:"text-sm text-gray-500 ml-2",children:A})]})]},C.id)}default:return null}};return t.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s.title}),s.description&&t.jsx("p",{className:"text-gray-600 mt-2",children:s.description}),s.isMandatory&&!m&&t.jsx("div",{className:"mt-3 px-3 py-2 bg-amber-50 border border-amber-200 rounded-lg",children:t.jsxs("p",{className:"text-sm text-amber-800",children:[t.jsx("span",{className:"font-medium",children:" This survey is mandatory."})," You must complete it to ",r==="pre"?"access the course content":"receive your certificate","."]})}),m&&t.jsx("div",{className:"mt-3 px-3 py-2 bg-green-50 border border-green-200 rounded-lg",children:t.jsxs("p",{className:"text-sm text-green-800",children:[t.jsx("span",{className:"font-medium",children:" Survey completed"})," on ",new Date(s.completedAt).toLocaleDateString()]})})]}),t.jsx("div",{className:"space-y-4",children:s.questions.map((C,N)=>S(C,N))}),t.jsx("div",{className:"mt-8 flex justify-end gap-3",children:!m&&t.jsxs(t.Fragment,{children:[a&&!s.isMandatory&&t.jsx("button",{onClick:a,disabled:d,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Skip for Now"}),t.jsx("button",{onClick:j,disabled:d,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Submitting...":"Submit Survey"})]})})]})}async function MC(s,e=null){try{return(await ge.get(`/api/learner/courses/${s}`,{signal:e})).data}catch(a){return a.name==="AbortError"||a.code==="ERR_CANCELED"||console.warn("Failed to fetch course details from API. Returning null (mocks disabled).",a.message),null}}const aa={async listSurveys(){return(await ge.get("/api/admin/surveys")).data},async getSurvey(s){return(await ge.get(`/api/admin/surveys/${s}`)).data},async createSurvey(s){return(await ge.post("/api/admin/surveys",s)).data},async updateSurvey(s,e){return(await ge.put(`/api/admin/surveys/${s}`,e)).data},async deleteSurvey(s){return(await ge.delete(`/api/admin/surveys/${s}`)).data},async addQuestion(s,e){return(await ge.post(`/api/admin/surveys/${s}/questions`,e)).data},async updateQuestion(s,e,a){return(await ge.put(`/api/admin/surveys/${s}/questions/${e}`,a)).data},async deleteQuestion(s,e){return(await ge.delete(`/api/admin/surveys/${s}/questions/${e}`)).data},async updateSurveyStatus(s,e){return(await ge.put(`/api/admin/surveys/${s}/status`,{status:e})).data},async duplicateSurvey(s){return(await ge.post(`/api/admin/surveys/${s}/duplicate`)).data}},id={async getPreCourseSurvey(s){return(await ge.get(`/api/learner/courses/${s}/survey/pre`)).data},async getPostCourseSurvey(s){return(await ge.get(`/api/learner/courses/${s}/survey/post`)).data},async submitPreCourseSurvey(s,e){return(await ge.post(`/api/learner/courses/${s}/survey/pre/submit`,{answers:e})).data},async submitPostCourseSurvey(s,e){return(await ge.post(`/api/learner/courses/${s}/survey/post/submit`,{answers:e})).data}};function LC({lesson:s,isActive:e,onClick:a}){const r=l=>{switch(l){case"video":return t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zm12 0a2 2 0 012-2h2a2 2 0 012 2v8a2 2 0 01-2 2h-2a2 2 0 01-2-2V6z"})});case"pdf":case"document":return t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})});case"quiz":return t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})});case"scorm":return t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})});case"content":return t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})});case"survey":return t.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[t.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),t.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]});default:return t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})})}};return t.jsxs("div",{onClick:a,className:`flex items-center space-x-3 p-3 rounded cursor-pointer transition ${e?"bg-blue-50 border-l-4 border-blue-600":"hover:bg-gray-50"}`,children:[t.jsx("div",{className:`${s.isCompleted?"text-green-600":"text-gray-400"}`,children:s.isCompleted?t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):t.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"text-gray-500",children:r(s.type)}),t.jsx("p",{className:`text-sm font-medium ${e?"text-blue-600":"text-gray-900"}`,children:s.title})]}),s.duration&&s.duration!=="15:00"&&t.jsx("p",{className:"text-xs text-gray-500 ml-6",children:s.duration}),s.questions&&t.jsxs("p",{className:"text-xs text-gray-500 ml-6",children:[s.questions," questions"]})]})]})}function OC({lesson:s,courseId:e,onProgressUpdate:a}){const r=ct.useRef(null),[l,o]=ct.useState(!1),d=ct.useRef(null),u=ct.useRef(null);ct.useEffect(()=>{if(s)return d.current=Date.now(),u.current=setInterval(()=>{if(d.current){const v=Math.floor((Date.now()-d.current)/1e3);v>0&&(a?.(s.id,{progressPercent:s.progress||0,videoTimestamp:s.videoTimestamp,completed:s.isCompleted,timeSpentSeconds:v}),d.current=Date.now())}},3e4),()=>{if(u.current&&clearInterval(u.current),d.current){const v=Math.floor((Date.now()-d.current)/1e3);v>0&&a?.(s.id,{progressPercent:s.progress||0,videoTimestamp:s.videoTimestamp,completed:s.isCompleted,timeSpentSeconds:v})}}},[s,a]),ct.useEffect(()=>{s&&s.type==="video"&&s.videoTimestamp&&r.current&&!l&&(r.current.currentTime=s.videoTimestamp,o(!0))},[s,l]),ct.useEffect(()=>{if(!s||s.type!=="scorm")return;const v=j=>{if(j.data&&j.data.type==="scorm"){const{status:S,score:C}=j.data;(S==="completed"||S==="passed")&&(a?.(s.id,{progressPercent:100,videoTimestamp:null,completed:!0}),G.success("SCORM lesson completed!"))}};return window.addEventListener("message",v),()=>window.removeEventListener("message",v)},[s,a]);const m=ct.useCallback(v=>{if(!s||s.type!=="video")return;const j=v.target,S=Math.floor(j.currentTime),C=j.duration;if(C>0){const N=Math.floor(S/C*100);S%5===0&&a?.(s.id,{progressPercent:N,videoTimestamp:S,completed:!1})}},[s,a]),f=ct.useCallback(v=>{if(!s||s.type!=="video")return;const S=v.target.duration;a?.(s.id,{progressPercent:100,videoTimestamp:Math.floor(S),completed:!0}),G.success("Video lesson completed!")},[s,a]),p=ct.useCallback(v=>{if(!s||s.type!=="video")return;const j=v.target,S=Math.floor(j.currentTime),C=j.duration,N=C>0?Math.floor(S/C*100):0;a?.(s.id,{progressPercent:N,videoTimestamp:S,completed:!1})},[s,a]);if(!s)return t.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Select a lesson to start learning"});const y=()=>{switch(s.type){case"video":{const v=s.url&&(s.url.includes("youtube.com")||s.url.includes("youtu.be")),j=s.url&&s.url.includes("vimeo.com");let S=s.url;if(v){const C=s.url.match(/(?:youtube\.com\/(?:[^/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?/\s]{11})/)?.[1];C&&(S=`https://www.youtube.com/embed/${C}`)}else if(j){const C=s.url.match(/vimeo\.com\/(?:video\/)?(\d+)/)?.[1];C&&(S=`https://player.vimeo.com/video/${C}`)}return t.jsx("div",{className:"w-full h-full bg-black",children:s.url?v||j?t.jsx("iframe",{src:S,className:"w-full h-full",title:"Video Player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):t.jsxs("video",{ref:r,controls:!0,className:"w-full h-full",src:s.url,controlsList:"nodownload",onTimeUpdate:m,onPause:p,onEnded:f,onError:C=>{console.error("Video load error:",C),console.error("Video URL:",s.url),console.error("Error details:",C.target.error),G.error("Failed to load video. Please check the video URL or file format.")},crossOrigin:"anonymous",children:[t.jsx("source",{src:s.url,type:"video/mp4"}),t.jsx("source",{src:s.url,type:"video/webm"}),t.jsx("source",{src:s.url,type:"video/ogg"}),"Your browser does not support the video tag."]}):t.jsx("div",{className:"flex items-center justify-center h-full text-white text-center",children:t.jsxs("div",{children:[t.jsx("svg",{className:"w-20 h-20 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"})}),t.jsx("p",{children:"Video Player"}),t.jsx("p",{className:"text-sm text-gray-400 mt-2",children:s.duration})]})})})}case"pdf":case"document":return t.jsx("div",{className:"w-full h-full bg-gray-100 relative",children:s.url?t.jsxs(t.Fragment,{children:[t.jsx("object",{data:s.url,type:"application/pdf",className:"w-full h-full",title:"PDF Viewer",children:t.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8",children:[t.jsx("svg",{className:"w-20 h-20 mb-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to display PDF in browser"}),t.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors inline-flex items-center space-x-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),t.jsx("span",{children:"Open PDF in New Tab"})]})]})}),!s.isCompleted&&t.jsx("div",{className:"absolute bottom-4 right-4 z-10",children:t.jsxs("button",{onClick:()=>{a?.(s.id,{progressPercent:100,videoTimestamp:null,completed:!0}),G.success("Lesson marked as complete!")},className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg shadow-lg font-medium transition-colors flex items-center space-x-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),t.jsx("span",{children:"Mark as Complete"})]})})]}):t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsxs("div",{className:"text-gray-600 text-center",children:[t.jsx("svg",{className:"w-20 h-20 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),t.jsx("p",{children:"PDF Viewer"}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Document content will load here"})]})})});case"quiz":return s.quizId?t.jsx(RC,{quizId:s.quizId,onComplete:v=>{a?.(s.id,{progressPercent:100,videoTimestamp:null,completed:!0})},onProgressUpdate:a}):t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx("p",{className:"text-gray-500",children:"Quiz not configured"})});case"scorm":{const v=s.url?`${_a}/api/scorm-proxy?url=${encodeURIComponent(s.url)}`:null,j=v?`/scorm-player.html?url=${encodeURIComponent(v)}&lessonId=${s.id}&courseId=${e}`:null;return t.jsx("div",{className:"w-full h-full bg-white relative",children:j?t.jsx("iframe",{src:j,className:"w-full h-full border-0",title:"SCORM Content",allow:"autoplay; fullscreen"}):t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsxs("div",{className:"text-center text-gray-500",children:[t.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})}),t.jsx("p",{className:"text-lg",children:"SCORM content not available"})]})})})}case"content":return t.jsx("div",{className:"w-full h-full bg-white p-8 overflow-auto",children:t.jsxs("div",{className:"max-w-3xl mx-auto",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:s.title}),t.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:s.content||"<p>No content available</p>"}}),!s.isCompleted&&t.jsx("div",{className:"mt-8",children:t.jsxs("button",{onClick:()=>{a?.(s.id,{progressPercent:100,videoTimestamp:null,completed:!0}),G.success("Lesson marked as complete!")},className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg shadow font-medium transition-colors flex items-center space-x-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),t.jsx("span",{children:"Mark as Complete"})]})})]})});default:return t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsxs("div",{className:"text-gray-600 text-center",children:[t.jsx("svg",{className:"w-20 h-20 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),t.jsxs("p",{className:"text-lg font-medium",children:["Unknown content type: ",s.type]}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This lesson type is not supported yet"})]})})}};return t.jsx("div",{className:"h-full",children:y()})}function zC(){const{courseId:s}=Xn(),e=ze(),[a,r]=b.useState(null),[l,o]=b.useState(null),[d,u]=b.useState(!1),[m,f]=b.useState(!0),[p,y]=b.useState([]),[v,j]=b.useState(null),[S,C]=b.useState(!1);tt(a?`${a.title} - Course Content`:"Course Content"),b.useEffect(()=>{const _=R=>{R.data&&R.data.type==="scorm-lesson-completed"&&(console.log(" Received SCORM completion for lesson:",R.data.lessonId),N(R.data.lessonId,{progressPercent:100,completed:!0}))};return window.addEventListener("message",_),()=>window.removeEventListener("message",_)},[]);const N=async(_,R)=>{try{const z=localStorage.getItem("token");await fetch(`${_a}/api/learner/courses/${s}/lessons/${_}/progress`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${z}`},body:JSON.stringify(R)}),R.completed&&(r(H=>{if(!H)return H;const q={...H,lessons:H.lessons.map(U=>U.id===_?{...U,isCompleted:!0,progressPercent:100}:U)};return q.lessons.every(U=>U.isCompleted)&&q.hasPostSurvey&&!q.postSurveyCompleted&&(p.find(U=>U.surveyType==="post")||A()),q}),l?.id===_&&o(H=>H&&{...H,isCompleted:!0,progressPercent:100}))}catch(z){console.error("Error updating progress:",z)}},D=async _=>{try{const R=localStorage.getItem("token");await fetch(`${_a}/api/learner/courses/${s}/lessons/${_}/access`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${R}`}})}catch(R){console.error("Error tracking lesson access:",R)}},E=async()=>{try{const _=await id.getPreCourseSurvey(s);if(_.alreadyCompleted)return y(z=>[{id:"pre-survey",title:_.title||"Pre-Course Survey",type:"survey",isCompleted:!0,surveyType:"pre",order:-1},...z]),null;const R={id:"pre-survey",title:_.title||"Pre-Course Survey",type:"survey",isCompleted:!1,isMandatory:_.isMandatory,surveyType:"pre",surveyData:_,order:-1};return y(z=>[R,...z]),R}catch(_){return console.log("No pre-survey configured or error loading:",_),null}},A=async()=>{try{const _=await id.getPostCourseSurvey(s);if(_.alreadyCompleted){y(R=>[...R,{id:"post-survey",title:_.title||"Post-Course Survey",type:"survey",isCompleted:!0,surveyType:"post",order:9999}]);return}y(R=>[...R,{id:"post-survey",title:_.title||"Post-Course Survey",type:"survey",isCompleted:!1,isMandatory:_.isMandatory,surveyType:"post",surveyData:_,order:9999}])}catch(_){console.log("No post-survey configured or error loading:",_)}},T=async(_,R)=>{C(!0);try{R==="pre"?await id.submitPreCourseSurvey(s,_):await id.submitPostCourseSurvey(s,_),G.success("Survey submitted successfully!"),y(z=>z.map(H=>H.surveyType===R?{...H,isCompleted:!0}:H)),j(null),await w()}catch(z){console.error("Error submitting survey:",z),G.error("Failed to submit survey")}finally{C(!1)}},w=async(_=null)=>{f(!0);try{const R=await MC(s,_);if(!R&&(!_||!_.aborted)){G.error("Course not found or access denied"),e("/courses/all");return}if(!_||!_.aborted){r(R);let z=null;if(R.hasPreSurvey&&(z=await E()),R.hasPostSurvey&&await A(),z&&!R.preSurveyCompleted)j(z),o(null);else if(R.lessons&&R.lessons.length>0){let H=R.lessons[0];if(R.lastAccessedLessonId){const q=R.lessons.find(ne=>ne.id===R.lastAccessedLessonId);q&&(H=q)}o(H),j(null)}}}catch(R){(!_||!_.aborted)&&(console.error("Error loading course details:",R),G.error("Failed to load course details"),e("/courses/all"))}finally{(!_||!_.aborted)&&f(!1)}};return b.useEffect(()=>{const _=new AbortController;return s?w(_.signal):e("/courses/all"),()=>{_.abort()}},[s,e]),m||!a?t.jsxs("div",{className:"min-h-screen bg-page-bg",children:[t.jsx(Ar,{}),t.jsx("div",{className:"flex items-center justify-center h-96",children:t.jsx("p",{className:"text-gray-500",children:m?"Loading course...":"Course not found"})})]}):t.jsxs("div",{className:"min-h-screen bg-page-bg flex flex-col",children:[t.jsx(Ar,{}),d&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>u(!1)}),t.jsxs("div",{className:"lg:hidden bg-white border-b px-4 py-3 flex items-center justify-between",children:[t.jsxs("button",{onClick:()=>u(!d),className:"flex items-center text-gray-700 hover:text-gray-900",children:[t.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),t.jsx("span",{className:"font-medium",children:"Course Lessons"})]}),t.jsx("button",{onClick:()=>e("/courses/all"),className:"text-sm text-gray-600 hover:text-gray-900",children:"Back to Courses"})]}),t.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[t.jsxs("div",{className:`
          fixed lg:relative inset-y-0 left-0 z-50
          w-80 bg-white border-r overflow-y-auto
          transform transition-transform duration-300 ease-in-out
          ${d?"translate-x-0":"-translate-x-full"}
          lg:translate-x-0
        `,children:[t.jsxs("div",{className:"p-4 border-b",children:[t.jsxs("button",{onClick:()=>{e("/courses/all"),u(!1)},className:"flex items-center text-sm text-gray-600 hover:text-gray-900 mb-3",children:[t.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to courses"]}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:a.title}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[a.lessons.filter(_=>_.isCompleted).length+p.filter(_=>_.isCompleted).length," of ",a.lessons.length+p.length," completed"]})]}),t.jsx("div",{className:"p-4 space-y-2",children:[...p,...a.lessons.map((_,R)=>({..._,order:R}))].sort((_,R)=>_.order-R.order).map(_=>{const R=_.type!=="survey"&&p.some(H=>H.surveyType==="pre"&&H.isMandatory&&!H.isCompleted),z=_.type==="survey"?v?.id===_.id:l?.id===_.id;return t.jsxs("div",{className:"relative",children:[R&&t.jsx("div",{className:"absolute inset-0 bg-gray-100 bg-opacity-70 rounded-lg flex items-center justify-center z-10",children:t.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),t.jsx(LC,{lesson:_,isActive:z,onClick:()=>{if(R){G("Please complete the pre-course survey first",{icon:""});return}_.type==="survey"?(j(_),o(null)):(o(_),j(null),D(_.id)),u(!1)}})]},_.id)})})]}),t.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[t.jsx("div",{className:"flex-1 bg-gray-900 overflow-hidden min-h-[300px] lg:min-h-0",children:v?t.jsx("div",{className:"h-full overflow-y-auto bg-gray-50",children:t.jsx(DC,{survey:v.surveyData,onSubmit:_=>T(_,v.surveyType),onCancel:null,surveyType:v.surveyType})}):t.jsx(OC,{lesson:l,courseId:s,onProgressUpdate:N})}),t.jsx("div",{className:"lg:h-48 bg-white border-t overflow-y-auto",children:t.jsxs("div",{className:"p-4 lg:p-6",children:[(l||v)&&t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-lg lg:text-xl font-semibold text-gray-900 mb-1",children:l?.title||v?.title}),t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:a.title}),l&&t.jsxs("div",{className:"mb-4 pb-4 border-b",children:[t.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-2",children:"Certificates"}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Get certificate by completing entire course"}),a.isCompleted?t.jsx("button",{onClick:async()=>{try{G.loading("Generating certificate...",{id:"cert-gen"});const _=await fetch(`/api/learner/courses/${a.id}/certificate`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(_.ok){const R=await _.json();G.dismiss("cert-gen"),R.certificateUrl?(G.success("Certificate ready! Opening..."),window.open(R.certificateUrl,"_blank")):G.error("Certificate URL not found")}else{const R=await _.json().catch(()=>({}));G.dismiss("cert-gen"),console.error("Certificate error response:",R),console.error("Response status:",_.status),G.error(R.message||"Failed to generate certificate. Please try again.")}}catch(_){G.dismiss("cert-gen"),console.error("Error fetching certificate:",_),G.error("Network error. Please check your connection and try again.")}},className:"px-6 py-2 rounded border border-purple-500 bg-purple-500 text-white transition-colors hover:bg-purple-600",children:"View Certificate"}):t.jsx("button",{disabled:!0,className:"px-6 py-2 rounded border border-gray-300 text-gray-400 cursor-not-allowed",children:"Complete Course to Get Certificate"})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-2",children:"Description"}),t.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:v?.surveyData?.description||a.description})]})]}),!l&&t.jsx("p",{className:"text-gray-500",children:"Choose a lesson from the sidebar to begin learning."})]})})]})]})]})}async function PC(){return(await ge.get("/api/admin/dashboard/stats")).data}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Do(s){return s+.5|0}const $n=(s,e,a)=>Math.max(Math.min(s,a),e);function Wl(s){return $n(Do(s*2.55),0,255)}function Yn(s){return $n(Do(s*255),0,255)}function en(s){return $n(Do(s/2.55)/100,0,1)}function bb(s){return $n(Do(s*100),0,100)}const Qs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Of=[..."0123456789ABCDEF"],UC=s=>Of[s&15],BC=s=>Of[(s&240)>>4]+Of[s&15],ld=s=>(s&240)>>4===(s&15),FC=s=>ld(s.r)&&ld(s.g)&&ld(s.b)&&ld(s.a);function HC(s){var e=s.length,a;return s[0]==="#"&&(e===4||e===5?a={r:255&Qs[s[1]]*17,g:255&Qs[s[2]]*17,b:255&Qs[s[3]]*17,a:e===5?Qs[s[4]]*17:255}:(e===7||e===9)&&(a={r:Qs[s[1]]<<4|Qs[s[2]],g:Qs[s[3]]<<4|Qs[s[4]],b:Qs[s[5]]<<4|Qs[s[6]],a:e===9?Qs[s[7]]<<4|Qs[s[8]]:255})),a}const qC=(s,e)=>s<255?e(s):"";function VC(s){var e=FC(s)?UC:BC;return s?"#"+e(s.r)+e(s.g)+e(s.b)+qC(s.a,e):void 0}const $C=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function uj(s,e,a){const r=e*Math.min(a,1-a),l=(o,d=(o+s/30)%12)=>a-r*Math.max(Math.min(d-3,9-d,1),-1);return[l(0),l(8),l(4)]}function IC(s,e,a){const r=(l,o=(l+s/60)%6)=>a-a*e*Math.max(Math.min(o,4-o,1),0);return[r(5),r(3),r(1)]}function QC(s,e,a){const r=uj(s,1,.5);let l;for(e+a>1&&(l=1/(e+a),e*=l,a*=l),l=0;l<3;l++)r[l]*=1-e-a,r[l]+=e;return r}function YC(s,e,a,r,l){return s===l?(e-a)/r+(e<a?6:0):e===l?(a-s)/r+2:(s-e)/r+4}function yp(s){const a=s.r/255,r=s.g/255,l=s.b/255,o=Math.max(a,r,l),d=Math.min(a,r,l),u=(o+d)/2;let m,f,p;return o!==d&&(p=o-d,f=u>.5?p/(2-o-d):p/(o+d),m=YC(a,r,l,p,o),m=m*60+.5),[m|0,f||0,u]}function bp(s,e,a,r){return(Array.isArray(e)?s(e[0],e[1],e[2]):s(e,a,r)).map(Yn)}function vp(s,e,a){return bp(uj,s,e,a)}function GC(s,e,a){return bp(QC,s,e,a)}function WC(s,e,a){return bp(IC,s,e,a)}function hj(s){return(s%360+360)%360}function XC(s){const e=$C.exec(s);let a=255,r;if(!e)return;e[5]!==r&&(a=e[6]?Wl(+e[5]):Yn(+e[5]));const l=hj(+e[2]),o=+e[3]/100,d=+e[4]/100;return e[1]==="hwb"?r=GC(l,o,d):e[1]==="hsv"?r=WC(l,o,d):r=vp(l,o,d),{r:r[0],g:r[1],b:r[2],a}}function ZC(s,e){var a=yp(s);a[0]=hj(a[0]+e),a=vp(a),s.r=a[0],s.g=a[1],s.b=a[2]}function KC(s){if(!s)return;const e=yp(s),a=e[0],r=bb(e[1]),l=bb(e[2]);return s.a<255?`hsla(${a}, ${r}%, ${l}%, ${en(s.a)})`:`hsl(${a}, ${r}%, ${l}%)`}const vb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},jb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function JC(){const s={},e=Object.keys(jb),a=Object.keys(vb);let r,l,o,d,u;for(r=0;r<e.length;r++){for(d=u=e[r],l=0;l<a.length;l++)o=a[l],u=u.replace(o,vb[o]);o=parseInt(jb[d],16),s[u]=[o>>16&255,o>>8&255,o&255]}return s}let od;function e3(s){od||(od=JC(),od.transparent=[0,0,0,0]);const e=od[s.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const t3=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function s3(s){const e=t3.exec(s);let a=255,r,l,o;if(e){if(e[7]!==r){const d=+e[7];a=e[8]?Wl(d):$n(d*255,0,255)}return r=+e[1],l=+e[3],o=+e[5],r=255&(e[2]?Wl(r):$n(r,0,255)),l=255&(e[4]?Wl(l):$n(l,0,255)),o=255&(e[6]?Wl(o):$n(o,0,255)),{r,g:l,b:o,a}}}function a3(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${en(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const Gm=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,Ci=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function n3(s,e,a){const r=Ci(en(s.r)),l=Ci(en(s.g)),o=Ci(en(s.b));return{r:Yn(Gm(r+a*(Ci(en(e.r))-r))),g:Yn(Gm(l+a*(Ci(en(e.g))-l))),b:Yn(Gm(o+a*(Ci(en(e.b))-o))),a:s.a+a*(e.a-s.a)}}function cd(s,e,a){if(s){let r=yp(s);r[e]=Math.max(0,Math.min(r[e]+r[e]*a,e===0?360:1)),r=vp(r),s.r=r[0],s.g=r[1],s.b=r[2]}}function mj(s,e){return s&&Object.assign(e||{},s)}function wb(s){var e={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(e={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(e.a=Yn(s[3]))):(e=mj(s,{r:0,g:0,b:0,a:1}),e.a=Yn(e.a)),e}function r3(s){return s.charAt(0)==="r"?s3(s):XC(s)}class uo{constructor(e){if(e instanceof uo)return e;const a=typeof e;let r;a==="object"?r=wb(e):a==="string"&&(r=HC(e)||e3(e)||r3(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=mj(this._rgb);return e&&(e.a=en(e.a)),e}set rgb(e){this._rgb=wb(e)}rgbString(){return this._valid?a3(this._rgb):void 0}hexString(){return this._valid?VC(this._rgb):void 0}hslString(){return this._valid?KC(this._rgb):void 0}mix(e,a){if(e){const r=this.rgb,l=e.rgb;let o;const d=a===o?.5:a,u=2*d-1,m=r.a-l.a,f=((u*m===-1?u:(u+m)/(1+u*m))+1)/2;o=1-f,r.r=255&f*r.r+o*l.r+.5,r.g=255&f*r.g+o*l.g+.5,r.b=255&f*r.b+o*l.b+.5,r.a=d*r.a+(1-d)*l.a,this.rgb=r}return this}interpolate(e,a){return e&&(this._rgb=n3(this._rgb,e._rgb,a)),this}clone(){return new uo(this.rgb)}alpha(e){return this._rgb.a=Yn(e),this}clearer(e){const a=this._rgb;return a.a*=1-e,this}greyscale(){const e=this._rgb,a=Do(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=a,this}opaquer(e){const a=this._rgb;return a.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return cd(this._rgb,2,e),this}darken(e){return cd(this._rgb,2,-e),this}saturate(e){return cd(this._rgb,1,e),this}desaturate(e){return cd(this._rgb,1,-e),this}rotate(e){return ZC(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Za(){}const i3=(()=>{let s=0;return()=>s++})();function et(s){return s==null}function Lt(s){if(Array.isArray&&Array.isArray(s))return!0;const e=Object.prototype.toString.call(s);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function qe(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function ns(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function ja(s,e){return ns(s)?s:e}function Le(s,e){return typeof s>"u"?e:s}const l3=(s,e)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100:+s/e,fj=(s,e)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*e:+s;function mt(s,e,a){if(s&&typeof s.call=="function")return s.apply(a,e)}function nt(s,e,a,r){let l,o,d;if(Lt(s))for(o=s.length,l=0;l<o;l++)e.call(a,s[l],l);else if(qe(s))for(d=Object.keys(s),o=d.length,l=0;l<o;l++)e.call(a,s[d[l]],d[l])}function Pd(s,e){let a,r,l,o;if(!s||!e||s.length!==e.length)return!1;for(a=0,r=s.length;a<r;++a)if(l=s[a],o=e[a],l.datasetIndex!==o.datasetIndex||l.index!==o.index)return!1;return!0}function Ud(s){if(Lt(s))return s.map(Ud);if(qe(s)){const e=Object.create(null),a=Object.keys(s),r=a.length;let l=0;for(;l<r;++l)e[a[l]]=Ud(s[a[l]]);return e}return s}function pj(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function o3(s,e,a,r){if(!pj(s))return;const l=e[s],o=a[s];qe(l)&&qe(o)?ho(l,o,r):e[s]=Ud(o)}function ho(s,e,a){const r=Lt(e)?e:[e],l=r.length;if(!qe(s))return s;a=a||{};const o=a.merger||o3;let d;for(let u=0;u<l;++u){if(d=r[u],!qe(d))continue;const m=Object.keys(d);for(let f=0,p=m.length;f<p;++f)o(m[f],s,d,a)}return s}function to(s,e){return ho(s,e,{merger:c3})}function c3(s,e,a){if(!pj(s))return;const r=e[s],l=a[s];qe(r)&&qe(l)?to(r,l):Object.prototype.hasOwnProperty.call(e,s)||(e[s]=Ud(l))}const Nb={"":s=>s,x:s=>s.x,y:s=>s.y};function d3(s){const e=s.split("."),a=[];let r="";for(const l of e)r+=l,r.endsWith("\\")?r=r.slice(0,-1)+".":(a.push(r),r="");return a}function u3(s){const e=d3(s);return a=>{for(const r of e){if(r==="")break;a=a&&a[r]}return a}}function Mr(s,e){return(Nb[e]||(Nb[e]=u3(e)))(s)}function jp(s){return s.charAt(0).toUpperCase()+s.slice(1)}const mo=s=>typeof s<"u",Gn=s=>typeof s=="function",Sb=(s,e)=>{if(s.size!==e.size)return!1;for(const a of s)if(!e.has(a))return!1;return!0};function h3(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const rt=Math.PI,yt=2*rt,m3=yt+rt,Bd=Number.POSITIVE_INFINITY,f3=rt/180,Vt=rt/2,br=rt/4,Cb=rt*2/3,gj=Math.log10,ka=Math.sign;function so(s,e,a){return Math.abs(s-e)<a}function kb(s){const e=Math.round(s);s=so(s,e,s/1e3)?e:s;const a=Math.pow(10,Math.floor(gj(s))),r=s/a;return(r<=1?1:r<=2?2:r<=5?5:10)*a}function p3(s){const e=[],a=Math.sqrt(s);let r;for(r=1;r<a;r++)s%r===0&&(e.push(r),e.push(s/r));return a===(a|0)&&e.push(a),e.sort((l,o)=>l-o).pop(),e}function g3(s){return typeof s=="symbol"||typeof s=="object"&&s!==null&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}function fo(s){return!g3(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function x3(s,e){const a=Math.round(s);return a-e<=s&&a+e>=s}function y3(s,e,a){let r,l,o;for(r=0,l=s.length;r<l;r++)o=s[r][a],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function tn(s){return s*(rt/180)}function b3(s){return s*(180/rt)}function _b(s){if(!ns(s))return;let e=1,a=0;for(;Math.round(s*e)/e!==s;)e*=10,a++;return a}function xj(s,e){const a=e.x-s.x,r=e.y-s.y,l=Math.sqrt(a*a+r*r);let o=Math.atan2(r,a);return o<-.5*rt&&(o+=yt),{angle:o,distance:l}}function zf(s,e){return Math.sqrt(Math.pow(e.x-s.x,2)+Math.pow(e.y-s.y,2))}function v3(s,e){return(s-e+m3)%yt-rt}function Rs(s){return(s%yt+yt)%yt}function po(s,e,a,r){const l=Rs(s),o=Rs(e),d=Rs(a),u=Rs(o-l),m=Rs(d-l),f=Rs(l-o),p=Rs(l-d);return l===o||l===d||r&&o===d||u>m&&f<p}function ss(s,e,a){return Math.max(e,Math.min(a,s))}function j3(s){return ss(s,-32768,32767)}function sn(s,e,a,r=1e-6){return s>=Math.min(e,a)-r&&s<=Math.max(e,a)+r}function wp(s,e,a){a=a||(d=>s[d]<e);let r=s.length-1,l=0,o;for(;r-l>1;)o=l+r>>1,a(o)?l=o:r=o;return{lo:l,hi:r}}const kr=(s,e,a,r)=>wp(s,a,r?l=>{const o=s[l][e];return o<a||o===a&&s[l+1][e]===a}:l=>s[l][e]<a),w3=(s,e,a)=>wp(s,a,r=>s[r][e]>=a);function N3(s,e,a){let r=0,l=s.length;for(;r<l&&s[r]<e;)r++;for(;l>r&&s[l-1]>a;)l--;return r>0||l<s.length?s.slice(r,l):s}const yj=["push","pop","shift","splice","unshift"];function S3(s,e){if(s._chartjs){s._chartjs.listeners.push(e);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),yj.forEach(a=>{const r="_onData"+jp(a),l=s[a];Object.defineProperty(s,a,{configurable:!0,enumerable:!1,value(...o){const d=l.apply(this,o);return s._chartjs.listeners.forEach(u=>{typeof u[r]=="function"&&u[r](...o)}),d}})})}function Ab(s,e){const a=s._chartjs;if(!a)return;const r=a.listeners,l=r.indexOf(e);l!==-1&&r.splice(l,1),!(r.length>0)&&(yj.forEach(o=>{delete s[o]}),delete s._chartjs)}function bj(s){const e=new Set(s);return e.size===s.length?s:Array.from(e)}const vj=(function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame})();function jj(s,e){let a=[],r=!1;return function(...l){a=l,r||(r=!0,vj.call(window,()=>{r=!1,s.apply(e,a)}))}}function C3(s,e){let a;return function(...r){return e?(clearTimeout(a),a=setTimeout(s,e,r)):s.apply(this,r),e}}const Np=s=>s==="start"?"left":s==="end"?"right":"center",es=(s,e,a)=>s==="start"?e:s==="end"?a:(e+a)/2,k3=(s,e,a,r)=>s===(r?"left":"right")?a:s==="center"?(e+a)/2:e;function _3(s,e,a){const r=e.length;let l=0,o=r;if(s._sorted){const{iScale:d,vScale:u,_parsed:m}=s,f=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null,p=d.axis,{min:y,max:v,minDefined:j,maxDefined:S}=d.getUserBounds();if(j){if(l=Math.min(kr(m,p,y).lo,a?r:kr(e,p,d.getPixelForValue(y)).lo),f){const C=m.slice(0,l+1).reverse().findIndex(N=>!et(N[u.axis]));l-=Math.max(0,C)}l=ss(l,0,r-1)}if(S){let C=Math.max(kr(m,d.axis,v,!0).hi+1,a?0:kr(e,p,d.getPixelForValue(v),!0).hi+1);if(f){const N=m.slice(C-1).findIndex(D=>!et(D[u.axis]));C+=Math.max(0,N)}o=ss(C,l,r)-l}else o=r-l}return{start:l,count:o}}function A3(s){const{xScale:e,yScale:a,_scaleRanges:r}=s,l={xmin:e.min,xmax:e.max,ymin:a.min,ymax:a.max};if(!r)return s._scaleRanges=l,!0;const o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==a.min||r.ymax!==a.max;return Object.assign(r,l),o}const dd=s=>s===0||s===1,Eb=(s,e,a)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-e)*yt/a)),Tb=(s,e,a)=>Math.pow(2,-10*s)*Math.sin((s-e)*yt/a)+1,ao={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*Vt)+1,easeOutSine:s=>Math.sin(s*Vt),easeInOutSine:s=>-.5*(Math.cos(rt*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>dd(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>dd(s)?s:Eb(s,.075,.3),easeOutElastic:s=>dd(s)?s:Tb(s,.075,.3),easeInOutElastic(s){return dd(s)?s:s<.5?.5*Eb(s*2,.1125,.45):.5+.5*Tb(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let e=1.70158;return(s/=.5)<1?.5*(s*s*(((e*=1.525)+1)*s-e)):.5*((s-=2)*s*(((e*=1.525)+1)*s+e)+2)},easeInBounce:s=>1-ao.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?ao.easeInBounce(s*2)*.5:ao.easeOutBounce(s*2-1)*.5+.5};function Sp(s){if(s&&typeof s=="object"){const e=s.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Rb(s){return Sp(s)?s:new uo(s)}function Wm(s){return Sp(s)?s:new uo(s).saturate(.5).darken(.1).hexString()}const E3=["x","y","borderWidth","radius","tension"],T3=["color","borderColor","backgroundColor"];function R3(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),s.set("animations",{colors:{type:"color",properties:T3},numbers:{type:"number",properties:E3}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function D3(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Db=new Map;function M3(s,e){e=e||{};const a=s+JSON.stringify(e);let r=Db.get(a);return r||(r=new Intl.NumberFormat(s,e),Db.set(a,r)),r}function Cp(s,e,a){return M3(e,a).format(s)}const L3={values(s){return Lt(s)?s:""+s},numeric(s,e,a){if(s===0)return"0";const r=this.chart.options.locale;let l,o=s;if(a.length>1){const f=Math.max(Math.abs(a[0].value),Math.abs(a[a.length-1].value));(f<1e-4||f>1e15)&&(l="scientific"),o=O3(s,a)}const d=gj(Math.abs(o)),u=isNaN(d)?1:Math.max(Math.min(-1*Math.floor(d),20),0),m={notation:l,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(m,this.options.ticks.format),Cp(s,r,m)}};function O3(s,e){let a=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(a)>=1&&s!==Math.floor(s)&&(a=s-Math.floor(s)),a}var wj={formatters:L3};function z3(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,a)=>a.lineWidth,tickColor:(e,a)=>a.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:wj.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Lr=Object.create(null),Pf=Object.create(null);function no(s,e){if(!e)return s;const a=e.split(".");for(let r=0,l=a.length;r<l;++r){const o=a[r];s=s[o]||(s[o]=Object.create(null))}return s}function Xm(s,e,a){return typeof e=="string"?ho(no(s,e),a):ho(no(s,""),e)}class P3{constructor(e,a){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,l)=>Wm(l.backgroundColor),this.hoverBorderColor=(r,l)=>Wm(l.borderColor),this.hoverColor=(r,l)=>Wm(l.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(a)}set(e,a){return Xm(this,e,a)}get(e){return no(this,e)}describe(e,a){return Xm(Pf,e,a)}override(e,a){return Xm(Lr,e,a)}route(e,a,r,l){const o=no(this,e),d=no(this,r),u="_"+a;Object.defineProperties(o,{[u]:{value:o[a],writable:!0},[a]:{enumerable:!0,get(){const m=this[u],f=d[l];return qe(m)?Object.assign({},f,m):Le(m,f)},set(m){this[u]=m}}})}apply(e){e.forEach(a=>a(this))}}var kt=new P3({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[R3,D3,z3]);function U3(s){return!s||et(s.size)||et(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function Mb(s,e,a,r,l){let o=e[l];return o||(o=e[l]=s.measureText(l).width,a.push(l)),o>r&&(r=o),r}function vr(s,e,a){const r=s.currentDevicePixelRatio,l=a!==0?Math.max(a/2,.5):0;return Math.round((e-l)*r)/r+l}function Lb(s,e){!e&&!s||(e=e||s.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,s.width,s.height),e.restore())}function Uf(s,e,a,r){Nj(s,e,a,r,null)}function Nj(s,e,a,r,l){let o,d,u,m,f,p,y,v;const j=e.pointStyle,S=e.rotation,C=e.radius;let N=(S||0)*f3;if(j&&typeof j=="object"&&(o=j.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){s.save(),s.translate(a,r),s.rotate(N),s.drawImage(j,-j.width/2,-j.height/2,j.width,j.height),s.restore();return}if(!(isNaN(C)||C<=0)){switch(s.beginPath(),j){default:l?s.ellipse(a,r,l/2,C,0,0,yt):s.arc(a,r,C,0,yt),s.closePath();break;case"triangle":p=l?l/2:C,s.moveTo(a+Math.sin(N)*p,r-Math.cos(N)*C),N+=Cb,s.lineTo(a+Math.sin(N)*p,r-Math.cos(N)*C),N+=Cb,s.lineTo(a+Math.sin(N)*p,r-Math.cos(N)*C),s.closePath();break;case"rectRounded":f=C*.516,m=C-f,d=Math.cos(N+br)*m,y=Math.cos(N+br)*(l?l/2-f:m),u=Math.sin(N+br)*m,v=Math.sin(N+br)*(l?l/2-f:m),s.arc(a-y,r-u,f,N-rt,N-Vt),s.arc(a+v,r-d,f,N-Vt,N),s.arc(a+y,r+u,f,N,N+Vt),s.arc(a-v,r+d,f,N+Vt,N+rt),s.closePath();break;case"rect":if(!S){m=Math.SQRT1_2*C,p=l?l/2:m,s.rect(a-p,r-m,2*p,2*m);break}N+=br;case"rectRot":y=Math.cos(N)*(l?l/2:C),d=Math.cos(N)*C,u=Math.sin(N)*C,v=Math.sin(N)*(l?l/2:C),s.moveTo(a-y,r-u),s.lineTo(a+v,r-d),s.lineTo(a+y,r+u),s.lineTo(a-v,r+d),s.closePath();break;case"crossRot":N+=br;case"cross":y=Math.cos(N)*(l?l/2:C),d=Math.cos(N)*C,u=Math.sin(N)*C,v=Math.sin(N)*(l?l/2:C),s.moveTo(a-y,r-u),s.lineTo(a+y,r+u),s.moveTo(a+v,r-d),s.lineTo(a-v,r+d);break;case"star":y=Math.cos(N)*(l?l/2:C),d=Math.cos(N)*C,u=Math.sin(N)*C,v=Math.sin(N)*(l?l/2:C),s.moveTo(a-y,r-u),s.lineTo(a+y,r+u),s.moveTo(a+v,r-d),s.lineTo(a-v,r+d),N+=br,y=Math.cos(N)*(l?l/2:C),d=Math.cos(N)*C,u=Math.sin(N)*C,v=Math.sin(N)*(l?l/2:C),s.moveTo(a-y,r-u),s.lineTo(a+y,r+u),s.moveTo(a+v,r-d),s.lineTo(a-v,r+d);break;case"line":d=l?l/2:Math.cos(N)*C,u=Math.sin(N)*C,s.moveTo(a-d,r-u),s.lineTo(a+d,r+u);break;case"dash":s.moveTo(a,r),s.lineTo(a+Math.cos(N)*(l?l/2:C),r+Math.sin(N)*C);break;case!1:s.closePath();break}s.fill(),e.borderWidth>0&&s.stroke()}}function go(s,e,a){return a=a||.5,!e||s&&s.x>e.left-a&&s.x<e.right+a&&s.y>e.top-a&&s.y<e.bottom+a}function iu(s,e){s.save(),s.beginPath(),s.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),s.clip()}function lu(s){s.restore()}function B3(s,e,a,r,l){if(!e)return s.lineTo(a.x,a.y);if(l==="middle"){const o=(e.x+a.x)/2;s.lineTo(o,e.y),s.lineTo(o,a.y)}else l==="after"!=!!r?s.lineTo(e.x,a.y):s.lineTo(a.x,e.y);s.lineTo(a.x,a.y)}function F3(s,e,a,r){if(!e)return s.lineTo(a.x,a.y);s.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?a.cp2x:a.cp1x,r?a.cp2y:a.cp1y,a.x,a.y)}function H3(s,e){e.translation&&s.translate(e.translation[0],e.translation[1]),et(e.rotation)||s.rotate(e.rotation),e.color&&(s.fillStyle=e.color),e.textAlign&&(s.textAlign=e.textAlign),e.textBaseline&&(s.textBaseline=e.textBaseline)}function q3(s,e,a,r,l){if(l.strikethrough||l.underline){const o=s.measureText(r),d=e-o.actualBoundingBoxLeft,u=e+o.actualBoundingBoxRight,m=a-o.actualBoundingBoxAscent,f=a+o.actualBoundingBoxDescent,p=l.strikethrough?(m+f)/2:f;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=l.decorationWidth||2,s.moveTo(d,p),s.lineTo(u,p),s.stroke()}}function V3(s,e){const a=s.fillStyle;s.fillStyle=e.color,s.fillRect(e.left,e.top,e.width,e.height),s.fillStyle=a}function xo(s,e,a,r,l,o={}){const d=Lt(e)?e:[e],u=o.strokeWidth>0&&o.strokeColor!=="";let m,f;for(s.save(),s.font=l.string,H3(s,o),m=0;m<d.length;++m)f=d[m],o.backdrop&&V3(s,o.backdrop),u&&(o.strokeColor&&(s.strokeStyle=o.strokeColor),et(o.strokeWidth)||(s.lineWidth=o.strokeWidth),s.strokeText(f,a,r,o.maxWidth)),s.fillText(f,a,r,o.maxWidth),q3(s,a,r,f,o),r+=Number(l.lineHeight);s.restore()}function Fd(s,e){const{x:a,y:r,w:l,h:o,radius:d}=e;s.arc(a+d.topLeft,r+d.topLeft,d.topLeft,1.5*rt,rt,!0),s.lineTo(a,r+o-d.bottomLeft),s.arc(a+d.bottomLeft,r+o-d.bottomLeft,d.bottomLeft,rt,Vt,!0),s.lineTo(a+l-d.bottomRight,r+o),s.arc(a+l-d.bottomRight,r+o-d.bottomRight,d.bottomRight,Vt,0,!0),s.lineTo(a+l,r+d.topRight),s.arc(a+l-d.topRight,r+d.topRight,d.topRight,0,-Vt,!0),s.lineTo(a+d.topLeft,r)}const $3=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,I3=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Q3(s,e){const a=(""+s).match($3);if(!a||a[1]==="normal")return e*1.2;switch(s=+a[2],a[3]){case"px":return s;case"%":s/=100;break}return e*s}const Y3=s=>+s||0;function kp(s,e){const a={},r=qe(e),l=r?Object.keys(e):e,o=qe(s)?r?d=>Le(s[d],s[e[d]]):d=>s[d]:()=>s;for(const d of l)a[d]=Y3(o(d));return a}function Sj(s){return kp(s,{top:"y",right:"x",bottom:"y",left:"x"})}function Ai(s){return kp(s,["topLeft","topRight","bottomLeft","bottomRight"])}function Ws(s){const e=Sj(s);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function as(s,e){s=s||{},e=e||kt.font;let a=Le(s.size,e.size);typeof a=="string"&&(a=parseInt(a,10));let r=Le(s.style,e.style);r&&!(""+r).match(I3)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const l={family:Le(s.family,e.family),lineHeight:Q3(Le(s.lineHeight,e.lineHeight),a),size:a,style:r,weight:Le(s.weight,e.weight),string:""};return l.string=U3(l),l}function ud(s,e,a,r){let l,o,d;for(l=0,o=s.length;l<o;++l)if(d=s[l],d!==void 0&&d!==void 0)return d}function G3(s,e,a){const{min:r,max:l}=s,o=fj(e,(l-r)/2),d=(u,m)=>a&&u===0?0:u+m;return{min:d(r,-Math.abs(o)),max:d(l,o)}}function zr(s,e){return Object.assign(Object.create(s),e)}function _p(s,e=[""],a,r,l=()=>s[0]){const o=a||s;typeof r>"u"&&(r=Aj("_fallback",s));const d={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:o,_fallback:r,_getTarget:l,override:u=>_p([u,...s],e,o,r)};return new Proxy(d,{deleteProperty(u,m){return delete u[m],delete u._keys,delete s[0][m],!0},get(u,m){return kj(u,m,()=>sk(m,e,s,u))},getOwnPropertyDescriptor(u,m){return Reflect.getOwnPropertyDescriptor(u._scopes[0],m)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(u,m){return zb(u).includes(m)},ownKeys(u){return zb(u)},set(u,m,f){const p=u._storage||(u._storage=l());return u[m]=p[m]=f,delete u._keys,!0}})}function Di(s,e,a,r){const l={_cacheable:!1,_proxy:s,_context:e,_subProxy:a,_stack:new Set,_descriptors:Cj(s,r),setContext:o=>Di(s,o,a,r),override:o=>Di(s.override(o),e,a,r)};return new Proxy(l,{deleteProperty(o,d){return delete o[d],delete s[d],!0},get(o,d,u){return kj(o,d,()=>X3(o,d,u))},getOwnPropertyDescriptor(o,d){return o._descriptors.allKeys?Reflect.has(s,d)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,d)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(o,d){return Reflect.has(s,d)},ownKeys(){return Reflect.ownKeys(s)},set(o,d,u){return s[d]=u,delete o[d],!0}})}function Cj(s,e={scriptable:!0,indexable:!0}){const{_scriptable:a=e.scriptable,_indexable:r=e.indexable,_allKeys:l=e.allKeys}=s;return{allKeys:l,scriptable:a,indexable:r,isScriptable:Gn(a)?a:()=>a,isIndexable:Gn(r)?r:()=>r}}const W3=(s,e)=>s?s+jp(e):e,Ap=(s,e)=>qe(e)&&s!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function kj(s,e,a){if(Object.prototype.hasOwnProperty.call(s,e)||e==="constructor")return s[e];const r=a();return s[e]=r,r}function X3(s,e,a){const{_proxy:r,_context:l,_subProxy:o,_descriptors:d}=s;let u=r[e];return Gn(u)&&d.isScriptable(e)&&(u=Z3(e,u,s,a)),Lt(u)&&u.length&&(u=K3(e,u,s,d.isIndexable)),Ap(e,u)&&(u=Di(u,l,o&&o[e],d)),u}function Z3(s,e,a,r){const{_proxy:l,_context:o,_subProxy:d,_stack:u}=a;if(u.has(s))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+s);u.add(s);let m=e(o,d||r);return u.delete(s),Ap(s,m)&&(m=Ep(l._scopes,l,s,m)),m}function K3(s,e,a,r){const{_proxy:l,_context:o,_subProxy:d,_descriptors:u}=a;if(typeof o.index<"u"&&r(s))return e[o.index%e.length];if(qe(e[0])){const m=e,f=l._scopes.filter(p=>p!==m);e=[];for(const p of m){const y=Ep(f,l,s,p);e.push(Di(y,o,d&&d[s],u))}}return e}function _j(s,e,a){return Gn(s)?s(e,a):s}const J3=(s,e)=>s===!0?e:typeof s=="string"?Mr(e,s):void 0;function ek(s,e,a,r,l){for(const o of e){const d=J3(a,o);if(d){s.add(d);const u=_j(d._fallback,a,l);if(typeof u<"u"&&u!==a&&u!==r)return u}else if(d===!1&&typeof r<"u"&&a!==r)return null}return!1}function Ep(s,e,a,r){const l=e._rootScopes,o=_j(e._fallback,a,r),d=[...s,...l],u=new Set;u.add(r);let m=Ob(u,d,a,o||a,r);return m===null||typeof o<"u"&&o!==a&&(m=Ob(u,d,o,m,r),m===null)?!1:_p(Array.from(u),[""],l,o,()=>tk(e,a,r))}function Ob(s,e,a,r,l){for(;a;)a=ek(s,e,a,r,l);return a}function tk(s,e,a){const r=s._getTarget();e in r||(r[e]={});const l=r[e];return Lt(l)&&qe(a)?a:l||{}}function sk(s,e,a,r){let l;for(const o of e)if(l=Aj(W3(o,s),a),typeof l<"u")return Ap(s,l)?Ep(a,r,s,l):l}function Aj(s,e){for(const a of e){if(!a)continue;const r=a[s];if(typeof r<"u")return r}}function zb(s){let e=s._keys;return e||(e=s._keys=ak(s._scopes)),e}function ak(s){const e=new Set;for(const a of s)for(const r of Object.keys(a).filter(l=>!l.startsWith("_")))e.add(r);return Array.from(e)}const nk=Number.EPSILON||1e-14,Mi=(s,e)=>e<s.length&&!s[e].skip&&s[e],Ej=s=>s==="x"?"y":"x";function rk(s,e,a,r){const l=s.skip?e:s,o=e,d=a.skip?e:a,u=zf(o,l),m=zf(d,o);let f=u/(u+m),p=m/(u+m);f=isNaN(f)?0:f,p=isNaN(p)?0:p;const y=r*f,v=r*p;return{previous:{x:o.x-y*(d.x-l.x),y:o.y-y*(d.y-l.y)},next:{x:o.x+v*(d.x-l.x),y:o.y+v*(d.y-l.y)}}}function ik(s,e,a){const r=s.length;let l,o,d,u,m,f=Mi(s,0);for(let p=0;p<r-1;++p)if(m=f,f=Mi(s,p+1),!(!m||!f)){if(so(e[p],0,nk)){a[p]=a[p+1]=0;continue}l=a[p]/e[p],o=a[p+1]/e[p],u=Math.pow(l,2)+Math.pow(o,2),!(u<=9)&&(d=3/Math.sqrt(u),a[p]=l*d*e[p],a[p+1]=o*d*e[p])}}function lk(s,e,a="x"){const r=Ej(a),l=s.length;let o,d,u,m=Mi(s,0);for(let f=0;f<l;++f){if(d=u,u=m,m=Mi(s,f+1),!u)continue;const p=u[a],y=u[r];d&&(o=(p-d[a])/3,u[`cp1${a}`]=p-o,u[`cp1${r}`]=y-o*e[f]),m&&(o=(m[a]-p)/3,u[`cp2${a}`]=p+o,u[`cp2${r}`]=y+o*e[f])}}function ok(s,e="x"){const a=Ej(e),r=s.length,l=Array(r).fill(0),o=Array(r);let d,u,m,f=Mi(s,0);for(d=0;d<r;++d)if(u=m,m=f,f=Mi(s,d+1),!!m){if(f){const p=f[e]-m[e];l[d]=p!==0?(f[a]-m[a])/p:0}o[d]=u?f?ka(l[d-1])!==ka(l[d])?0:(l[d-1]+l[d])/2:l[d-1]:l[d]}ik(s,l,o),lk(s,o,e)}function hd(s,e,a){return Math.max(Math.min(s,a),e)}function ck(s,e){let a,r,l,o,d,u=go(s[0],e);for(a=0,r=s.length;a<r;++a)d=o,o=u,u=a<r-1&&go(s[a+1],e),o&&(l=s[a],d&&(l.cp1x=hd(l.cp1x,e.left,e.right),l.cp1y=hd(l.cp1y,e.top,e.bottom)),u&&(l.cp2x=hd(l.cp2x,e.left,e.right),l.cp2y=hd(l.cp2y,e.top,e.bottom)))}function dk(s,e,a,r,l){let o,d,u,m;if(e.spanGaps&&(s=s.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")ok(s,l);else{let f=r?s[s.length-1]:s[0];for(o=0,d=s.length;o<d;++o)u=s[o],m=rk(f,u,s[Math.min(o+1,d-(r?0:1))%d],e.tension),u.cp1x=m.previous.x,u.cp1y=m.previous.y,u.cp2x=m.next.x,u.cp2y=m.next.y,f=u}e.capBezierPoints&&ck(s,a)}function Tp(){return typeof window<"u"&&typeof document<"u"}function Rp(s){let e=s.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Hd(s,e,a){let r;return typeof s=="string"?(r=parseInt(s,10),s.indexOf("%")!==-1&&(r=r/100*e.parentNode[a])):r=s,r}const ou=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function uk(s,e){return ou(s).getPropertyValue(e)}const hk=["top","right","bottom","left"];function Er(s,e,a){const r={};a=a?"-"+a:"";for(let l=0;l<4;l++){const o=hk[l];r[o]=parseFloat(s[e+"-"+o+a])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const mk=(s,e,a)=>(s>0||e>0)&&(!a||!a.shadowRoot);function fk(s,e){const a=s.touches,r=a&&a.length?a[0]:s,{offsetX:l,offsetY:o}=r;let d=!1,u,m;if(mk(l,o,s.target))u=l,m=o;else{const f=e.getBoundingClientRect();u=r.clientX-f.left,m=r.clientY-f.top,d=!0}return{x:u,y:m,box:d}}function wr(s,e){if("native"in s)return s;const{canvas:a,currentDevicePixelRatio:r}=e,l=ou(a),o=l.boxSizing==="border-box",d=Er(l,"padding"),u=Er(l,"border","width"),{x:m,y:f,box:p}=fk(s,a),y=d.left+(p&&u.left),v=d.top+(p&&u.top);let{width:j,height:S}=e;return o&&(j-=d.width+u.width,S-=d.height+u.height),{x:Math.round((m-y)/j*a.width/r),y:Math.round((f-v)/S*a.height/r)}}function pk(s,e,a){let r,l;if(e===void 0||a===void 0){const o=s&&Rp(s);if(!o)e=s.clientWidth,a=s.clientHeight;else{const d=o.getBoundingClientRect(),u=ou(o),m=Er(u,"border","width"),f=Er(u,"padding");e=d.width-f.width-m.width,a=d.height-f.height-m.height,r=Hd(u.maxWidth,o,"clientWidth"),l=Hd(u.maxHeight,o,"clientHeight")}}return{width:e,height:a,maxWidth:r||Bd,maxHeight:l||Bd}}const In=s=>Math.round(s*10)/10;function gk(s,e,a,r){const l=ou(s),o=Er(l,"margin"),d=Hd(l.maxWidth,s,"clientWidth")||Bd,u=Hd(l.maxHeight,s,"clientHeight")||Bd,m=pk(s,e,a);let{width:f,height:p}=m;if(l.boxSizing==="content-box"){const v=Er(l,"border","width"),j=Er(l,"padding");f-=j.width+v.width,p-=j.height+v.height}return f=Math.max(0,f-o.width),p=Math.max(0,r?f/r:p-o.height),f=In(Math.min(f,d,m.maxWidth)),p=In(Math.min(p,u,m.maxHeight)),f&&!p&&(p=In(f/2)),(e!==void 0||a!==void 0)&&r&&m.height&&p>m.height&&(p=m.height,f=In(Math.floor(p*r))),{width:f,height:p}}function Pb(s,e,a){const r=e||1,l=In(s.height*r),o=In(s.width*r);s.height=In(s.height),s.width=In(s.width);const d=s.canvas;return d.style&&(a||!d.style.height&&!d.style.width)&&(d.style.height=`${s.height}px`,d.style.width=`${s.width}px`),s.currentDevicePixelRatio!==r||d.height!==l||d.width!==o?(s.currentDevicePixelRatio=r,d.height=l,d.width=o,s.ctx.setTransform(r,0,0,r,0,0),!0):!1}const xk=(function(){let s=!1;try{const e={get passive(){return s=!0,!1}};Tp()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return s})();function Ub(s,e){const a=uk(s,e),r=a&&a.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Nr(s,e,a,r){return{x:s.x+a*(e.x-s.x),y:s.y+a*(e.y-s.y)}}function yk(s,e,a,r){return{x:s.x+a*(e.x-s.x),y:r==="middle"?a<.5?s.y:e.y:r==="after"?a<1?s.y:e.y:a>0?e.y:s.y}}function bk(s,e,a,r){const l={x:s.cp2x,y:s.cp2y},o={x:e.cp1x,y:e.cp1y},d=Nr(s,l,a),u=Nr(l,o,a),m=Nr(o,e,a),f=Nr(d,u,a),p=Nr(u,m,a);return Nr(f,p,a)}const vk=function(s,e){return{x(a){return s+s+e-a},setWidth(a){e=a},textAlign(a){return a==="center"?a:a==="right"?"left":"right"},xPlus(a,r){return a-r},leftForLtr(a,r){return a-r}}},jk=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,e){return s+e},leftForLtr(s,e){return s}}};function Ei(s,e,a){return s?vk(e,a):jk()}function Tj(s,e){let a,r;(e==="ltr"||e==="rtl")&&(a=s.canvas.style,r=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",e,"important"),s.prevTextDirection=r)}function Rj(s,e){e!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",e[0],e[1]))}function Dj(s){return s==="angle"?{between:po,compare:v3,normalize:Rs}:{between:sn,compare:(e,a)=>e-a,normalize:e=>e}}function Bb({start:s,end:e,count:a,loop:r,style:l}){return{start:s%a,end:e%a,loop:r&&(e-s+1)%a===0,style:l}}function wk(s,e,a){const{property:r,start:l,end:o}=a,{between:d,normalize:u}=Dj(r),m=e.length;let{start:f,end:p,loop:y}=s,v,j;if(y){for(f+=m,p+=m,v=0,j=m;v<j&&d(u(e[f%m][r]),l,o);++v)f--,p--;f%=m,p%=m}return p<f&&(p+=m),{start:f,end:p,loop:y,style:s.style}}function Mj(s,e,a){if(!a)return[s];const{property:r,start:l,end:o}=a,d=e.length,{compare:u,between:m,normalize:f}=Dj(r),{start:p,end:y,loop:v,style:j}=wk(s,e,a),S=[];let C=!1,N=null,D,E,A;const T=()=>m(l,A,D)&&u(l,A)!==0,w=()=>u(o,D)===0||m(o,A,D),_=()=>C||T(),R=()=>!C||w();for(let z=p,H=p;z<=y;++z)E=e[z%d],!E.skip&&(D=f(E[r]),D!==A&&(C=m(D,l,o),N===null&&_()&&(N=u(D,l)===0?z:H),N!==null&&R()&&(S.push(Bb({start:N,end:z,loop:v,count:d,style:j})),N=null),H=z,A=D));return N!==null&&S.push(Bb({start:N,end:y,loop:v,count:d,style:j})),S}function Lj(s,e){const a=[],r=s.segments;for(let l=0;l<r.length;l++){const o=Mj(r[l],s.points,e);o.length&&a.push(...o)}return a}function Nk(s,e,a,r){let l=0,o=e-1;if(a&&!r)for(;l<e&&!s[l].skip;)l++;for(;l<e&&s[l].skip;)l++;for(l%=e,a&&(o+=l);o>l&&s[o%e].skip;)o--;return o%=e,{start:l,end:o}}function Sk(s,e,a,r){const l=s.length,o=[];let d=e,u=s[e],m;for(m=e+1;m<=a;++m){const f=s[m%l];f.skip||f.stop?u.skip||(r=!1,o.push({start:e%l,end:(m-1)%l,loop:r}),e=d=f.stop?m:null):(d=m,u.skip&&(e=m)),u=f}return d!==null&&o.push({start:e%l,end:d%l,loop:r}),o}function Ck(s,e){const a=s.points,r=s.options.spanGaps,l=a.length;if(!l)return[];const o=!!s._loop,{start:d,end:u}=Nk(a,l,o,r);if(r===!0)return Fb(s,[{start:d,end:u,loop:o}],a,e);const m=u<d?u+l:u,f=!!s._fullLoop&&d===0&&u===l-1;return Fb(s,Sk(a,d,m,f),a,e)}function Fb(s,e,a,r){return!r||!r.setContext||!a?e:kk(s,e,a,r)}function kk(s,e,a,r){const l=s._chart.getContext(),o=Hb(s.options),{_datasetIndex:d,options:{spanGaps:u}}=s,m=a.length,f=[];let p=o,y=e[0].start,v=y;function j(S,C,N,D){const E=u?-1:1;if(S!==C){for(S+=m;a[S%m].skip;)S-=E;for(;a[C%m].skip;)C+=E;S%m!==C%m&&(f.push({start:S%m,end:C%m,loop:N,style:D}),p=D,y=C%m)}}for(const S of e){y=u?y:S.start;let C=a[y%m],N;for(v=y+1;v<=S.end;v++){const D=a[v%m];N=Hb(r.setContext(zr(l,{type:"segment",p0:C,p1:D,p0DataIndex:(v-1)%m,p1DataIndex:v%m,datasetIndex:d}))),_k(N,p)&&j(y,v-1,S.loop,p),C=D,p=N}y<v-1&&j(y,v-1,S.loop,p)}return f}function Hb(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function _k(s,e){if(!e)return!1;const a=[],r=function(l,o){return Sp(o)?(a.includes(o)||a.push(o),a.indexOf(o)):o};return JSON.stringify(s,r)!==JSON.stringify(e,r)}function md(s,e,a){return s.options.clip?s[a]:e[a]}function Ak(s,e){const{xScale:a,yScale:r}=s;return a&&r?{left:md(a,e,"left"),right:md(a,e,"right"),top:md(r,e,"top"),bottom:md(r,e,"bottom")}:e}function Oj(s,e){const a=e._clip;if(a.disabled)return!1;const r=Ak(e,s.chartArea);return{left:a.left===!1?0:r.left-(a.left===!0?0:a.left),right:a.right===!1?s.width:r.right+(a.right===!0?0:a.right),top:a.top===!1?0:r.top-(a.top===!0?0:a.top),bottom:a.bottom===!1?s.height:r.bottom+(a.bottom===!0?0:a.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Ek{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,a,r,l){const o=a.listeners[l],d=a.duration;o.forEach(u=>u({chart:e,initial:a.initial,numSteps:d,currentStep:Math.min(r-a.start,d)}))}_refresh(){this._request||(this._running=!0,this._request=vj.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let a=0;this._charts.forEach((r,l)=>{if(!r.running||!r.items.length)return;const o=r.items;let d=o.length-1,u=!1,m;for(;d>=0;--d)m=o[d],m._active?(m._total>r.duration&&(r.duration=m._total),m.tick(e),u=!0):(o[d]=o[o.length-1],o.pop());u&&(l.draw(),this._notify(l,r,e,"progress")),o.length||(r.running=!1,this._notify(l,r,e,"complete"),r.initial=!1),a+=o.length}),this._lastDate=e,a===0&&(this._running=!1)}_getAnims(e){const a=this._charts;let r=a.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},a.set(e,r)),r}listen(e,a,r){this._getAnims(e).listeners[a].push(r)}add(e,a){!a||!a.length||this._getAnims(e).items.push(...a)}has(e){return this._getAnims(e).items.length>0}start(e){const a=this._charts.get(e);a&&(a.running=!0,a.start=Date.now(),a.duration=a.items.reduce((r,l)=>Math.max(r,l._duration),0),this._refresh())}running(e){if(!this._running)return!1;const a=this._charts.get(e);return!(!a||!a.running||!a.items.length)}stop(e){const a=this._charts.get(e);if(!a||!a.items.length)return;const r=a.items;let l=r.length-1;for(;l>=0;--l)r[l].cancel();a.items=[],this._notify(e,a,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ka=new Ek;const qb="transparent",Tk={boolean(s,e,a){return a>.5?e:s},color(s,e,a){const r=Rb(s||qb),l=r.valid&&Rb(e||qb);return l&&l.valid?l.mix(r,a).hexString():e},number(s,e,a){return s+(e-s)*a}};class Rk{constructor(e,a,r,l){const o=a[r];l=ud([e.to,l,o,e.from]);const d=ud([e.from,o,l]);this._active=!0,this._fn=e.fn||Tk[e.type||typeof d],this._easing=ao[e.easing]||ao.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=a,this._prop=r,this._from=d,this._to=l,this._promises=void 0}active(){return this._active}update(e,a,r){if(this._active){this._notify(!1);const l=this._target[this._prop],o=r-this._start,d=this._duration-o;this._start=r,this._duration=Math.floor(Math.max(d,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=ud([e.to,a,l,e.from]),this._from=ud([e.from,l,a])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const a=e-this._start,r=this._duration,l=this._prop,o=this._from,d=this._loop,u=this._to;let m;if(this._active=o!==u&&(d||a<r),!this._active){this._target[l]=u,this._notify(!0);return}if(a<0){this._target[l]=o;return}m=a/r%2,m=d&&m>1?2-m:m,m=this._easing(Math.min(1,Math.max(0,m))),this._target[l]=this._fn(o,u,m)}wait(){const e=this._promises||(this._promises=[]);return new Promise((a,r)=>{e.push({res:a,rej:r})})}_notify(e){const a=e?"res":"rej",r=this._promises||[];for(let l=0;l<r.length;l++)r[l][a]()}}class zj{constructor(e,a){this._chart=e,this._properties=new Map,this.configure(a)}configure(e){if(!qe(e))return;const a=Object.keys(kt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(l=>{const o=e[l];if(!qe(o))return;const d={};for(const u of a)d[u]=o[u];(Lt(o.properties)&&o.properties||[l]).forEach(u=>{(u===l||!r.has(u))&&r.set(u,d)})})}_animateOptions(e,a){const r=a.options,l=Mk(e,r);if(!l)return[];const o=this._createAnimations(l,r);return r.$shared&&Dk(e.options.$animations,r).then(()=>{e.options=r},()=>{}),o}_createAnimations(e,a){const r=this._properties,l=[],o=e.$animations||(e.$animations={}),d=Object.keys(a),u=Date.now();let m;for(m=d.length-1;m>=0;--m){const f=d[m];if(f.charAt(0)==="$")continue;if(f==="options"){l.push(...this._animateOptions(e,a));continue}const p=a[f];let y=o[f];const v=r.get(f);if(y)if(v&&y.active()){y.update(v,p,u);continue}else y.cancel();if(!v||!v.duration){e[f]=p;continue}o[f]=y=new Rk(v,e,f,p),l.push(y)}return l}update(e,a){if(this._properties.size===0){Object.assign(e,a);return}const r=this._createAnimations(e,a);if(r.length)return Ka.add(this._chart,r),!0}}function Dk(s,e){const a=[],r=Object.keys(e);for(let l=0;l<r.length;l++){const o=s[r[l]];o&&o.active()&&a.push(o.wait())}return Promise.all(a)}function Mk(s,e){if(!e)return;let a=s.options;if(!a){s.options=e;return}return a.$shared&&(s.options=a=Object.assign({},a,{$shared:!1,$animations:{}})),a}function Vb(s,e){const a=s&&s.options||{},r=a.reverse,l=a.min===void 0?e:0,o=a.max===void 0?e:0;return{start:r?o:l,end:r?l:o}}function Lk(s,e,a){if(a===!1)return!1;const r=Vb(s,a),l=Vb(e,a);return{top:l.end,right:r.end,bottom:l.start,left:r.start}}function Ok(s){let e,a,r,l;return qe(s)?(e=s.top,a=s.right,r=s.bottom,l=s.left):e=a=r=l=s,{top:e,right:a,bottom:r,left:l,disabled:s===!1}}function Pj(s,e){const a=[],r=s._getSortedDatasetMetas(e);let l,o;for(l=0,o=r.length;l<o;++l)a.push(r[l].index);return a}function $b(s,e,a,r={}){const l=s.keys,o=r.mode==="single";let d,u,m,f;if(e===null)return;let p=!1;for(d=0,u=l.length;d<u;++d){if(m=+l[d],m===a){if(p=!0,r.all)continue;break}f=s.values[m],ns(f)&&(o||e===0||ka(e)===ka(f))&&(e+=f)}return!p&&!r.all?0:e}function zk(s,e){const{iScale:a,vScale:r}=e,l=a.axis==="x"?"x":"y",o=r.axis==="x"?"x":"y",d=Object.keys(s),u=new Array(d.length);let m,f,p;for(m=0,f=d.length;m<f;++m)p=d[m],u[m]={[l]:p,[o]:s[p]};return u}function Zm(s,e){const a=s&&s.options.stacked;return a||a===void 0&&e.stack!==void 0}function Pk(s,e,a){return`${s.id}.${e.id}.${a.stack||a.type}`}function Uk(s){const{min:e,max:a,minDefined:r,maxDefined:l}=s.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:l?a:Number.POSITIVE_INFINITY}}function Bk(s,e,a){const r=s[e]||(s[e]={});return r[a]||(r[a]={})}function Ib(s,e,a,r){for(const l of e.getMatchingVisibleMetas(r).reverse()){const o=s[l.index];if(a&&o>0||!a&&o<0)return l.index}return null}function Qb(s,e){const{chart:a,_cachedMeta:r}=s,l=a._stacks||(a._stacks={}),{iScale:o,vScale:d,index:u}=r,m=o.axis,f=d.axis,p=Pk(o,d,r),y=e.length;let v;for(let j=0;j<y;++j){const S=e[j],{[m]:C,[f]:N}=S,D=S._stacks||(S._stacks={});v=D[f]=Bk(l,p,C),v[u]=N,v._top=Ib(v,d,!0,r.type),v._bottom=Ib(v,d,!1,r.type);const E=v._visualValues||(v._visualValues={});E[u]=N}}function Km(s,e){const a=s.scales;return Object.keys(a).filter(r=>a[r].axis===e).shift()}function Fk(s,e){return zr(s,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Hk(s,e,a){return zr(s,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:a,index:e,mode:"default",type:"data"})}function ql(s,e){const a=s.controller.index,r=s.vScale&&s.vScale.axis;if(r){e=e||s._parsed;for(const l of e){const o=l._stacks;if(!o||o[r]===void 0||o[r][a]===void 0)return;delete o[r][a],o[r]._visualValues!==void 0&&o[r]._visualValues[a]!==void 0&&delete o[r]._visualValues[a]}}}const Jm=s=>s==="reset"||s==="none",Yb=(s,e)=>e?s:Object.assign({},s),qk=(s,e,a)=>s&&!e.hidden&&e._stacked&&{keys:Pj(a,!0),values:null};class cu{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,a){this.chart=e,this._ctx=e.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Zm(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ql(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,a=this._cachedMeta,r=this.getDataset(),l=(y,v,j,S)=>y==="x"?v:y==="r"?S:j,o=a.xAxisID=Le(r.xAxisID,Km(e,"x")),d=a.yAxisID=Le(r.yAxisID,Km(e,"y")),u=a.rAxisID=Le(r.rAxisID,Km(e,"r")),m=a.indexAxis,f=a.iAxisID=l(m,o,d,u),p=a.vAxisID=l(m,d,o,u);a.xScale=this.getScaleForId(o),a.yScale=this.getScaleForId(d),a.rScale=this.getScaleForId(u),a.iScale=this.getScaleForId(f),a.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const a=this._cachedMeta;return e===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Ab(this._data,this),e._stacked&&ql(e)}_dataCheck(){const e=this.getDataset(),a=e.data||(e.data=[]),r=this._data;if(qe(a)){const l=this._cachedMeta;this._data=zk(a,l)}else if(r!==a){if(r){Ab(r,this);const l=this._cachedMeta;ql(l),l._parsed=[]}a&&Object.isExtensible(a)&&S3(a,this),this._syncList=[],this._data=a}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const a=this._cachedMeta,r=this.getDataset();let l=!1;this._dataCheck();const o=a._stacked;a._stacked=Zm(a.vScale,a),a.stack!==r.stack&&(l=!0,ql(a),a.stack=r.stack),this._resyncElements(e),(l||o!==a._stacked)&&(Qb(this,a._parsed),a._stacked=Zm(a.vScale,a))}configure(){const e=this.chart.config,a=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),a,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,a){const{_cachedMeta:r,_data:l}=this,{iScale:o,_stacked:d}=r,u=o.axis;let m=e===0&&a===l.length?!0:r._sorted,f=e>0&&r._parsed[e-1],p,y,v;if(this._parsing===!1)r._parsed=l,r._sorted=!0,v=l;else{Lt(l[e])?v=this.parseArrayData(r,l,e,a):qe(l[e])?v=this.parseObjectData(r,l,e,a):v=this.parsePrimitiveData(r,l,e,a);const j=()=>y[u]===null||f&&y[u]<f[u];for(p=0;p<a;++p)r._parsed[p+e]=y=v[p],m&&(j()&&(m=!1),f=y);r._sorted=m}d&&Qb(this,v)}parsePrimitiveData(e,a,r,l){const{iScale:o,vScale:d}=e,u=o.axis,m=d.axis,f=o.getLabels(),p=o===d,y=new Array(l);let v,j,S;for(v=0,j=l;v<j;++v)S=v+r,y[v]={[u]:p||o.parse(f[S],S),[m]:d.parse(a[S],S)};return y}parseArrayData(e,a,r,l){const{xScale:o,yScale:d}=e,u=new Array(l);let m,f,p,y;for(m=0,f=l;m<f;++m)p=m+r,y=a[p],u[m]={x:o.parse(y[0],p),y:d.parse(y[1],p)};return u}parseObjectData(e,a,r,l){const{xScale:o,yScale:d}=e,{xAxisKey:u="x",yAxisKey:m="y"}=this._parsing,f=new Array(l);let p,y,v,j;for(p=0,y=l;p<y;++p)v=p+r,j=a[v],f[p]={x:o.parse(Mr(j,u),v),y:d.parse(Mr(j,m),v)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,a,r){const l=this.chart,o=this._cachedMeta,d=a[e.axis],u={keys:Pj(l,!0),values:a._stacks[e.axis]._visualValues};return $b(u,d,o.index,{mode:r})}updateRangeFromParsed(e,a,r,l){const o=r[a.axis];let d=o===null?NaN:o;const u=l&&r._stacks[a.axis];l&&u&&(l.values=u,d=$b(l,o,this._cachedMeta.index)),e.min=Math.min(e.min,d),e.max=Math.max(e.max,d)}getMinMax(e,a){const r=this._cachedMeta,l=r._parsed,o=r._sorted&&e===r.iScale,d=l.length,u=this._getOtherScale(e),m=qk(a,r,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:y}=Uk(u);let v,j;function S(){j=l[v];const C=j[u.axis];return!ns(j[e.axis])||p>C||y<C}for(v=0;v<d&&!(!S()&&(this.updateRangeFromParsed(f,e,j,m),o));++v);if(o){for(v=d-1;v>=0;--v)if(!S()){this.updateRangeFromParsed(f,e,j,m);break}}return f}getAllParsedValues(e){const a=this._cachedMeta._parsed,r=[];let l,o,d;for(l=0,o=a.length;l<o;++l)d=a[l][e.axis],ns(d)&&r.push(d);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const a=this._cachedMeta,r=a.iScale,l=a.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:l?""+l.getLabelForValue(o[l.axis]):""}}_update(e){const a=this._cachedMeta;this.update(e||"default"),a._clip=Ok(Le(this.options.clip,Lk(a.xScale,a.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,a=this.chart,r=this._cachedMeta,l=r.data||[],o=a.chartArea,d=[],u=this._drawStart||0,m=this._drawCount||l.length-u,f=this.options.drawActiveElementsOnTop;let p;for(r.dataset&&r.dataset.draw(e,o,u,m),p=u;p<u+m;++p){const y=l[p];y.hidden||(y.active&&f?d.push(y):y.draw(e,o))}for(p=0;p<d.length;++p)d[p].draw(e,o)}getStyle(e,a){const r=a?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,a,r){const l=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const d=this._cachedMeta.data[e];o=d.$context||(d.$context=Hk(this.getContext(),e,d)),o.parsed=this.getParsed(e),o.raw=l.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=Fk(this.chart.getContext(),this.index)),o.dataset=l,o.index=o.datasetIndex=this.index;return o.active=!!a,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,a){return this._resolveElementOptions(this.dataElementType.id,a,e)}_resolveElementOptions(e,a="default",r){const l=a==="active",o=this._cachedDataOpts,d=e+"-"+a,u=o[d],m=this.enableOptionSharing&&mo(r);if(u)return Yb(u,m);const f=this.chart.config,p=f.datasetElementScopeKeys(this._type,e),y=l?[`${e}Hover`,"hover",e,""]:[e,""],v=f.getOptionScopes(this.getDataset(),p),j=Object.keys(kt.elements[e]),S=()=>this.getContext(r,l,a),C=f.resolveNamedOptions(v,j,S,y);return C.$shared&&(C.$shared=m,o[d]=Object.freeze(Yb(C,m))),C}_resolveAnimations(e,a,r){const l=this.chart,o=this._cachedDataOpts,d=`animation-${a}`,u=o[d];if(u)return u;let m;if(l.options.animation!==!1){const p=this.chart.config,y=p.datasetAnimationScopeKeys(this._type,a),v=p.getOptionScopes(this.getDataset(),y);m=p.createResolver(v,this.getContext(e,r,a))}const f=new zj(l,m&&m.animations);return m&&m._cacheable&&(o[d]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,a){return!a||Jm(e)||this.chart._animationsDisabled}_getSharedOptions(e,a){const r=this.resolveDataElementOptions(e,a),l=this._sharedOptions,o=this.getSharedOptions(r),d=this.includeOptions(a,o)||o!==l;return this.updateSharedOptions(o,a,r),{sharedOptions:o,includeOptions:d}}updateElement(e,a,r,l){Jm(l)?Object.assign(e,r):this._resolveAnimations(a,l).update(e,r)}updateSharedOptions(e,a,r){e&&!Jm(a)&&this._resolveAnimations(void 0,a).update(e,r)}_setStyle(e,a,r,l){e.active=l;const o=this.getStyle(a,l);this._resolveAnimations(a,r,l).update(e,{options:!l&&this.getSharedOptions(o)||o})}removeHoverStyle(e,a,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,a,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const a=this._data,r=this._cachedMeta.data;for(const[u,m,f]of this._syncList)this[u](m,f);this._syncList=[];const l=r.length,o=a.length,d=Math.min(o,l);d&&this.parse(0,d),o>l?this._insertElements(l,o-l,e):o<l&&this._removeElements(o,l-o)}_insertElements(e,a,r=!0){const l=this._cachedMeta,o=l.data,d=e+a;let u;const m=f=>{for(f.length+=a,u=f.length-1;u>=d;u--)f[u]=f[u-a]};for(m(o),u=e;u<d;++u)o[u]=new this.dataElementType;this._parsing&&m(l._parsed),this.parse(e,a),r&&this.updateElements(o,e,a,"reset")}updateElements(e,a,r,l){}_removeElements(e,a){const r=this._cachedMeta;if(this._parsing){const l=r._parsed.splice(e,a);r._stacked&&ql(r,l)}r.data.splice(e,a)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[a,r,l]=e;this[a](r,l)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,a){a&&this._sync(["_removeElements",e,a]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Vk(s,e){if(!s._cache.$bar){const a=s.getMatchingVisibleMetas(e);let r=[];for(let l=0,o=a.length;l<o;l++)r=r.concat(a[l].controller.getAllParsedValues(s));s._cache.$bar=bj(r.sort((l,o)=>l-o))}return s._cache.$bar}function $k(s){const e=s.iScale,a=Vk(e,s.type);let r=e._length,l,o,d,u;const m=()=>{d===32767||d===-32768||(mo(u)&&(r=Math.min(r,Math.abs(d-u)||r)),u=d)};for(l=0,o=a.length;l<o;++l)d=e.getPixelForValue(a[l]),m();for(u=void 0,l=0,o=e.ticks.length;l<o;++l)d=e.getPixelForTick(l),m();return r}function Ik(s,e,a,r){const l=a.barThickness;let o,d;return et(l)?(o=e.min*a.categoryPercentage,d=a.barPercentage):(o=l*r,d=1),{chunk:o/r,ratio:d,start:e.pixels[s]-o/2}}function Qk(s,e,a,r){const l=e.pixels,o=l[s];let d=s>0?l[s-1]:null,u=s<l.length-1?l[s+1]:null;const m=a.categoryPercentage;d===null&&(d=o-(u===null?e.end-e.start:u-o)),u===null&&(u=o+o-d);const f=o-(o-Math.min(d,u))/2*m;return{chunk:Math.abs(u-d)/2*m/r,ratio:a.barPercentage,start:f}}function Yk(s,e,a,r){const l=a.parse(s[0],r),o=a.parse(s[1],r),d=Math.min(l,o),u=Math.max(l,o);let m=d,f=u;Math.abs(d)>Math.abs(u)&&(m=u,f=d),e[a.axis]=f,e._custom={barStart:m,barEnd:f,start:l,end:o,min:d,max:u}}function Uj(s,e,a,r){return Lt(s)?Yk(s,e,a,r):e[a.axis]=a.parse(s,r),e}function Gb(s,e,a,r){const l=s.iScale,o=s.vScale,d=l.getLabels(),u=l===o,m=[];let f,p,y,v;for(f=a,p=a+r;f<p;++f)v=e[f],y={},y[l.axis]=u||l.parse(d[f],f),m.push(Uj(v,y,o,f));return m}function ef(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function Gk(s,e,a){return s!==0?ka(s):(e.isHorizontal()?1:-1)*(e.min>=a?1:-1)}function Wk(s){let e,a,r,l,o;return s.horizontal?(e=s.base>s.x,a="left",r="right"):(e=s.base<s.y,a="bottom",r="top"),e?(l="end",o="start"):(l="start",o="end"),{start:a,end:r,reverse:e,top:l,bottom:o}}function Xk(s,e,a,r){let l=e.borderSkipped;const o={};if(!l){s.borderSkipped=o;return}if(l===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:d,end:u,reverse:m,top:f,bottom:p}=Wk(s);l==="middle"&&a&&(s.enableBorderRadius=!0,(a._top||0)===r?l=f:(a._bottom||0)===r?l=p:(o[Wb(p,d,u,m)]=!0,l=f)),o[Wb(l,d,u,m)]=!0,s.borderSkipped=o}function Wb(s,e,a,r){return r?(s=Zk(s,e,a),s=Xb(s,a,e)):s=Xb(s,e,a),s}function Zk(s,e,a){return s===e?a:s===a?e:s}function Xb(s,e,a){return s==="start"?e:s==="end"?a:s}function Kk(s,{inflateAmount:e},a){s.inflateAmount=e==="auto"?a===1?.33:0:e}class Jk extends cu{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,a,r,l){return Gb(e,a,r,l)}parseArrayData(e,a,r,l){return Gb(e,a,r,l)}parseObjectData(e,a,r,l){const{iScale:o,vScale:d}=e,{xAxisKey:u="x",yAxisKey:m="y"}=this._parsing,f=o.axis==="x"?u:m,p=d.axis==="x"?u:m,y=[];let v,j,S,C;for(v=r,j=r+l;v<j;++v)C=a[v],S={},S[o.axis]=o.parse(Mr(C,f),v),y.push(Uj(Mr(C,p),S,d,v));return y}updateRangeFromParsed(e,a,r,l){super.updateRangeFromParsed(e,a,r,l);const o=r._custom;o&&a===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const a=this._cachedMeta,{iScale:r,vScale:l}=a,o=this.getParsed(e),d=o._custom,u=ef(d)?"["+d.start+", "+d.end+"]":""+l.getLabelForValue(o[l.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,e)}updateElements(e,a,r,l){const o=l==="reset",{index:d,_cachedMeta:{vScale:u}}=this,m=u.getBasePixel(),f=u.isHorizontal(),p=this._getRuler(),{sharedOptions:y,includeOptions:v}=this._getSharedOptions(a,l);for(let j=a;j<a+r;j++){const S=this.getParsed(j),C=o||et(S[u.axis])?{base:m,head:m}:this._calculateBarValuePixels(j),N=this._calculateBarIndexPixels(j,p),D=(S._stacks||{})[u.axis],E={horizontal:f,base:C.base,enableBorderRadius:!D||ef(S._custom)||d===D._top||d===D._bottom,x:f?C.head:N.center,y:f?N.center:C.head,height:f?N.size:Math.abs(C.size),width:f?Math.abs(C.size):N.size};v&&(E.options=y||this.resolveDataElementOptions(j,e[j].active?"active":l));const A=E.options||e[j].options;Xk(E,A,D,d),Kk(E,A,p.ratio),this.updateElement(e[j],j,E,l)}}_getStacks(e,a){const{iScale:r}=this._cachedMeta,l=r.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),o=r.options.stacked,d=[],u=this._cachedMeta.controller.getParsed(a),m=u&&u[r.axis],f=p=>{const y=p._parsed.find(j=>j[r.axis]===m),v=y&&y[p.vScale.axis];if(et(v)||isNaN(v))return!0};for(const p of l)if(!(a!==void 0&&f(p))&&((o===!1||d.indexOf(p.stack)===-1||o===void 0&&p.stack===void 0)&&d.push(p.stack),p.index===e))break;return d.length||d.push(void 0),d}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,a=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===a).shift()}_getAxis(){const e={},a=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[Le(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,a)]=!0;return Object.keys(e)}_getStackIndex(e,a,r){const l=this._getStacks(e,r),o=a!==void 0?l.indexOf(a):-1;return o===-1?l.length-1:o}_getRuler(){const e=this.options,a=this._cachedMeta,r=a.iScale,l=[];let o,d;for(o=0,d=a.data.length;o<d;++o)l.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const u=e.barThickness;return{min:u||$k(a),pixels:l,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:a,_stacked:r,index:l},options:{base:o,minBarLength:d}}=this,u=o||0,m=this.getParsed(e),f=m._custom,p=ef(f);let y=m[a.axis],v=0,j=r?this.applyStack(a,m,r):y,S,C;j!==y&&(v=j-y,j=y),p&&(y=f.barStart,j=f.barEnd-f.barStart,y!==0&&ka(y)!==ka(f.barEnd)&&(v=0),v+=y);const N=!et(o)&&!p?o:v;let D=a.getPixelForValue(N);if(this.chart.getDataVisibility(e)?S=a.getPixelForValue(v+j):S=D,C=S-D,Math.abs(C)<d){C=Gk(C,a,u)*d,y===u&&(D-=C/2);const E=a.getPixelForDecimal(0),A=a.getPixelForDecimal(1),T=Math.min(E,A),w=Math.max(E,A);D=Math.max(Math.min(D,w),T),S=D+C,r&&!p&&(m._stacks[a.axis]._visualValues[l]=a.getValueForPixel(S)-a.getValueForPixel(D))}if(D===a.getPixelForValue(u)){const E=ka(C)*a.getLineWidthForValue(u)/2;D+=E,C-=E}return{size:C,base:D,head:S,center:S+C/2}}_calculateBarIndexPixels(e,a){const r=a.scale,l=this.options,o=l.skipNull,d=Le(l.maxBarThickness,1/0);let u,m;const f=this._getAxisCount();if(a.grouped){const p=o?this._getStackCount(e):a.stackCount,y=l.barThickness==="flex"?Qk(e,a,l,p*f):Ik(e,a,l,p*f),v=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,j=this._getAxis().indexOf(Le(v,this.getFirstScaleIdForIndexAxis())),S=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+j;u=y.start+y.chunk*S+y.chunk/2,m=Math.min(d,y.chunk*y.ratio)}else u=r.getPixelForValue(this.getParsed(e)[r.axis],e),m=Math.min(d,a.min*a.ratio);return{base:u-m/2,head:u+m/2,center:u,size:m}}draw(){const e=this._cachedMeta,a=e.vScale,r=e.data,l=r.length;let o=0;for(;o<l;++o)this.getParsed(o)[a.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}function e_(s,e,a){let r=1,l=1,o=0,d=0;if(e<yt){const u=s,m=u+e,f=Math.cos(u),p=Math.sin(u),y=Math.cos(m),v=Math.sin(m),j=(A,T,w)=>po(A,u,m,!0)?1:Math.max(T,T*a,w,w*a),S=(A,T,w)=>po(A,u,m,!0)?-1:Math.min(T,T*a,w,w*a),C=j(0,f,y),N=j(Vt,p,v),D=S(rt,f,y),E=S(rt+Vt,p,v);r=(C-D)/2,l=(N-E)/2,o=-(C+D)/2,d=-(N+E)/2}return{ratioX:r,ratioY:l,offsetX:o,offsetY:d}}class Bj extends cu{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const a=e.data,{labels:{pointStyle:r,textAlign:l,color:o,useBorderRadius:d,borderRadius:u}}=e.legend.options;return a.labels.length&&a.datasets.length?a.labels.map((m,f)=>{const y=e.getDatasetMeta(0).controller.getStyle(f);return{text:m,fillStyle:y.backgroundColor,fontColor:o,hidden:!e.getDataVisibility(f),lineDash:y.borderDash,lineDashOffset:y.borderDashOffset,lineJoin:y.borderJoinStyle,lineWidth:y.borderWidth,strokeStyle:y.borderColor,textAlign:l,pointStyle:r,borderRadius:d&&(u||y.borderRadius),index:f}}):[]}},onClick(e,a,r){r.chart.toggleDataVisibility(a.index),r.chart.update()}}}};constructor(e,a){super(e,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,a){const r=this.getDataset().data,l=this._cachedMeta;if(this._parsing===!1)l._parsed=r;else{let o=m=>+r[m];if(qe(r[e])){const{key:m="value"}=this._parsing;o=f=>+Mr(r[f],m)}let d,u;for(d=e,u=e+a;d<u;++d)l._parsed[d]=o(d)}}_getRotation(){return tn(this.options.rotation-90)}_getCircumference(){return tn(this.options.circumference)}_getRotationExtents(){let e=yt,a=-yt;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const l=this.chart.getDatasetMeta(r).controller,o=l._getRotation(),d=l._getCircumference();e=Math.min(e,o),a=Math.max(a,o+d)}return{rotation:e,circumference:a-e}}update(e){const a=this.chart,{chartArea:r}=a,l=this._cachedMeta,o=l.data,d=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(r.width,r.height)-d)/2,0),m=Math.min(l3(this.options.cutout,u),1),f=this._getRingWeight(this.index),{circumference:p,rotation:y}=this._getRotationExtents(),{ratioX:v,ratioY:j,offsetX:S,offsetY:C}=e_(y,p,m),N=(r.width-d)/v,D=(r.height-d)/j,E=Math.max(Math.min(N,D)/2,0),A=fj(this.options.radius,E),T=Math.max(A*m,0),w=(A-T)/this._getVisibleDatasetWeightTotal();this.offsetX=S*A,this.offsetY=C*A,l.total=this.calculateTotal(),this.outerRadius=A-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*f,0),this.updateElements(o,0,o.length,e)}_circumference(e,a){const r=this.options,l=this._cachedMeta,o=this._getCircumference();return a&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||l._parsed[e]===null||l.data[e].hidden?0:this.calculateCircumference(l._parsed[e]*o/yt)}updateElements(e,a,r,l){const o=l==="reset",d=this.chart,u=d.chartArea,f=d.options.animation,p=(u.left+u.right)/2,y=(u.top+u.bottom)/2,v=o&&f.animateScale,j=v?0:this.innerRadius,S=v?0:this.outerRadius,{sharedOptions:C,includeOptions:N}=this._getSharedOptions(a,l);let D=this._getRotation(),E;for(E=0;E<a;++E)D+=this._circumference(E,o);for(E=a;E<a+r;++E){const A=this._circumference(E,o),T=e[E],w={x:p+this.offsetX,y:y+this.offsetY,startAngle:D,endAngle:D+A,circumference:A,outerRadius:S,innerRadius:j};N&&(w.options=C||this.resolveDataElementOptions(E,T.active?"active":l)),D+=A,this.updateElement(T,E,w,l)}}calculateTotal(){const e=this._cachedMeta,a=e.data;let r=0,l;for(l=0;l<a.length;l++){const o=e._parsed[l];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(l)&&!a[l].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){const a=this._cachedMeta.total;return a>0&&!isNaN(e)?yt*(Math.abs(e)/a):0}getLabelAndValue(e){const a=this._cachedMeta,r=this.chart,l=r.data.labels||[],o=Cp(a._parsed[e],r.options.locale);return{label:l[e]||"",value:o}}getMaxBorderWidth(e){let a=0;const r=this.chart;let l,o,d,u,m;if(!e){for(l=0,o=r.data.datasets.length;l<o;++l)if(r.isDatasetVisible(l)){d=r.getDatasetMeta(l),e=d.data,u=d.controller;break}}if(!e)return 0;for(l=0,o=e.length;l<o;++l)m=u.resolveDataElementOptions(l),m.borderAlign!=="inner"&&(a=Math.max(a,m.borderWidth||0,m.hoverBorderWidth||0));return a}getMaxOffset(e){let a=0;for(let r=0,l=e.length;r<l;++r){const o=this.resolveDataElementOptions(r);a=Math.max(a,o.offset||0,o.hoverOffset||0)}return a}_getRingWeightOffset(e){let a=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(a+=this._getRingWeight(r));return a}_getRingWeight(e){return Math.max(Le(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class t_ extends cu{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const a=this._cachedMeta,{dataset:r,data:l=[],_dataset:o}=a,d=this.chart._animationsDisabled;let{start:u,count:m}=_3(a,l,d);this._drawStart=u,this._drawCount=m,A3(a)&&(u=0,m=l.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=l;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(r,void 0,{animated:!d,options:f},e),this.updateElements(l,u,m,e)}updateElements(e,a,r,l){const o=l==="reset",{iScale:d,vScale:u,_stacked:m,_dataset:f}=this._cachedMeta,{sharedOptions:p,includeOptions:y}=this._getSharedOptions(a,l),v=d.axis,j=u.axis,{spanGaps:S,segment:C}=this.options,N=fo(S)?S:Number.POSITIVE_INFINITY,D=this.chart._animationsDisabled||o||l==="none",E=a+r,A=e.length;let T=a>0&&this.getParsed(a-1);for(let w=0;w<A;++w){const _=e[w],R=D?_:{};if(w<a||w>=E){R.skip=!0;continue}const z=this.getParsed(w),H=et(z[j]),q=R[v]=d.getPixelForValue(z[v],w),ne=R[j]=o||H?u.getBasePixel():u.getPixelForValue(m?this.applyStack(u,z,m):z[j],w);R.skip=isNaN(q)||isNaN(ne)||H,R.stop=w>0&&Math.abs(z[v]-T[v])>N,C&&(R.parsed=z,R.raw=f.data[w]),y&&(R.options=p||this.resolveDataElementOptions(w,_.active?"active":l)),D||this.updateElement(_,w,R,l),T=z}}getMaxOverflow(){const e=this._cachedMeta,a=e.dataset,r=a.options&&a.options.borderWidth||0,l=e.data||[];if(!l.length)return r;const o=l[0].size(this.resolveDataElementOptions(0)),d=l[l.length-1].size(this.resolveDataElementOptions(l.length-1));return Math.max(r,o,d)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class s_ extends Bj{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function jr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Dp{static override(e){Object.assign(Dp.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return jr()}parse(){return jr()}format(){return jr()}add(){return jr()}diff(){return jr()}startOf(){return jr()}endOf(){return jr()}}var a_={_date:Dp};function n_(s,e,a,r){const{controller:l,data:o,_sorted:d}=s,u=l._cachedMeta.iScale,m=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&d&&o.length){const f=u._reversePixels?w3:kr;if(r){if(l._sharedOptions){const p=o[0],y=typeof p.getRange=="function"&&p.getRange(e);if(y){const v=f(o,e,a-y),j=f(o,e,a+y);return{lo:v.lo,hi:j.hi}}}}else{const p=f(o,e,a);if(m){const{vScale:y}=l._cachedMeta,{_parsed:v}=s,j=v.slice(0,p.lo+1).reverse().findIndex(C=>!et(C[y.axis]));p.lo-=Math.max(0,j);const S=v.slice(p.hi).findIndex(C=>!et(C[y.axis]));p.hi+=Math.max(0,S)}return p}}return{lo:0,hi:o.length-1}}function du(s,e,a,r,l){const o=s.getSortedVisibleDatasetMetas(),d=a[e];for(let u=0,m=o.length;u<m;++u){const{index:f,data:p}=o[u],{lo:y,hi:v}=n_(o[u],e,d,l);for(let j=y;j<=v;++j){const S=p[j];S.skip||r(S,f,j)}}}function r_(s){const e=s.indexOf("x")!==-1,a=s.indexOf("y")!==-1;return function(r,l){const o=e?Math.abs(r.x-l.x):0,d=a?Math.abs(r.y-l.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(d,2))}}function tf(s,e,a,r,l){const o=[];return!l&&!s.isPointInArea(e)||du(s,a,e,function(u,m,f){!l&&!go(u,s.chartArea,0)||u.inRange(e.x,e.y,r)&&o.push({element:u,datasetIndex:m,index:f})},!0),o}function i_(s,e,a,r){let l=[];function o(d,u,m){const{startAngle:f,endAngle:p}=d.getProps(["startAngle","endAngle"],r),{angle:y}=xj(d,{x:e.x,y:e.y});po(y,f,p)&&l.push({element:d,datasetIndex:u,index:m})}return du(s,a,e,o),l}function l_(s,e,a,r,l,o){let d=[];const u=r_(a);let m=Number.POSITIVE_INFINITY;function f(p,y,v){const j=p.inRange(e.x,e.y,l);if(r&&!j)return;const S=p.getCenterPoint(l);if(!(!!o||s.isPointInArea(S))&&!j)return;const N=u(e,S);N<m?(d=[{element:p,datasetIndex:y,index:v}],m=N):N===m&&d.push({element:p,datasetIndex:y,index:v})}return du(s,a,e,f),d}function sf(s,e,a,r,l,o){return!o&&!s.isPointInArea(e)?[]:a==="r"&&!r?i_(s,e,a,l):l_(s,e,a,r,l,o)}function Zb(s,e,a,r,l){const o=[],d=a==="x"?"inXRange":"inYRange";let u=!1;return du(s,a,e,(m,f,p)=>{m[d]&&m[d](e[a],l)&&(o.push({element:m,datasetIndex:f,index:p}),u=u||m.inRange(e.x,e.y,l))}),r&&!u?[]:o}var o_={modes:{index(s,e,a,r){const l=wr(e,s),o=a.axis||"x",d=a.includeInvisible||!1,u=a.intersect?tf(s,l,o,r,d):sf(s,l,o,!1,r,d),m=[];return u.length?(s.getSortedVisibleDatasetMetas().forEach(f=>{const p=u[0].index,y=f.data[p];y&&!y.skip&&m.push({element:y,datasetIndex:f.index,index:p})}),m):[]},dataset(s,e,a,r){const l=wr(e,s),o=a.axis||"xy",d=a.includeInvisible||!1;let u=a.intersect?tf(s,l,o,r,d):sf(s,l,o,!1,r,d);if(u.length>0){const m=u[0].datasetIndex,f=s.getDatasetMeta(m).data;u=[];for(let p=0;p<f.length;++p)u.push({element:f[p],datasetIndex:m,index:p})}return u},point(s,e,a,r){const l=wr(e,s),o=a.axis||"xy",d=a.includeInvisible||!1;return tf(s,l,o,r,d)},nearest(s,e,a,r){const l=wr(e,s),o=a.axis||"xy",d=a.includeInvisible||!1;return sf(s,l,o,a.intersect,r,d)},x(s,e,a,r){const l=wr(e,s);return Zb(s,l,"x",a.intersect,r)},y(s,e,a,r){const l=wr(e,s);return Zb(s,l,"y",a.intersect,r)}}};const Fj=["left","top","right","bottom"];function Vl(s,e){return s.filter(a=>a.pos===e)}function Kb(s,e){return s.filter(a=>Fj.indexOf(a.pos)===-1&&a.box.axis===e)}function $l(s,e){return s.sort((a,r)=>{const l=e?r:a,o=e?a:r;return l.weight===o.weight?l.index-o.index:l.weight-o.weight})}function c_(s){const e=[];let a,r,l,o,d,u;for(a=0,r=(s||[]).length;a<r;++a)l=s[a],{position:o,options:{stack:d,stackWeight:u=1}}=l,e.push({index:a,box:l,pos:o,horizontal:l.isHorizontal(),weight:l.weight,stack:d&&o+d,stackWeight:u});return e}function d_(s){const e={};for(const a of s){const{stack:r,pos:l,stackWeight:o}=a;if(!r||!Fj.includes(l))continue;const d=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});d.count++,d.weight+=o}return e}function u_(s,e){const a=d_(s),{vBoxMaxWidth:r,hBoxMaxHeight:l}=e;let o,d,u;for(o=0,d=s.length;o<d;++o){u=s[o];const{fullSize:m}=u.box,f=a[u.stack],p=f&&u.stackWeight/f.weight;u.horizontal?(u.width=p?p*r:m&&e.availableWidth,u.height=l):(u.width=r,u.height=p?p*l:m&&e.availableHeight)}return a}function h_(s){const e=c_(s),a=$l(e.filter(f=>f.box.fullSize),!0),r=$l(Vl(e,"left"),!0),l=$l(Vl(e,"right")),o=$l(Vl(e,"top"),!0),d=$l(Vl(e,"bottom")),u=Kb(e,"x"),m=Kb(e,"y");return{fullSize:a,leftAndTop:r.concat(o),rightAndBottom:l.concat(m).concat(d).concat(u),chartArea:Vl(e,"chartArea"),vertical:r.concat(l).concat(m),horizontal:o.concat(d).concat(u)}}function Jb(s,e,a,r){return Math.max(s[a],e[a])+Math.max(s[r],e[r])}function Hj(s,e){s.top=Math.max(s.top,e.top),s.left=Math.max(s.left,e.left),s.bottom=Math.max(s.bottom,e.bottom),s.right=Math.max(s.right,e.right)}function m_(s,e,a,r){const{pos:l,box:o}=a,d=s.maxPadding;if(!qe(l)){a.size&&(s[l]-=a.size);const y=r[a.stack]||{size:0,count:1};y.size=Math.max(y.size,a.horizontal?o.height:o.width),a.size=y.size/y.count,s[l]+=a.size}o.getPadding&&Hj(d,o.getPadding());const u=Math.max(0,e.outerWidth-Jb(d,s,"left","right")),m=Math.max(0,e.outerHeight-Jb(d,s,"top","bottom")),f=u!==s.w,p=m!==s.h;return s.w=u,s.h=m,a.horizontal?{same:f,other:p}:{same:p,other:f}}function f_(s){const e=s.maxPadding;function a(r){const l=Math.max(e[r]-s[r],0);return s[r]+=l,l}s.y+=a("top"),s.x+=a("left"),a("right"),a("bottom")}function p_(s,e){const a=e.maxPadding;function r(l){const o={left:0,top:0,right:0,bottom:0};return l.forEach(d=>{o[d]=Math.max(e[d],a[d])}),o}return r(s?["left","right"]:["top","bottom"])}function Xl(s,e,a,r){const l=[];let o,d,u,m,f,p;for(o=0,d=s.length,f=0;o<d;++o){u=s[o],m=u.box,m.update(u.width||e.w,u.height||e.h,p_(u.horizontal,e));const{same:y,other:v}=m_(e,a,u,r);f|=y&&l.length,p=p||v,m.fullSize||l.push(u)}return f&&Xl(l,e,a,r)||p}function fd(s,e,a,r,l){s.top=a,s.left=e,s.right=e+r,s.bottom=a+l,s.width=r,s.height=l}function ev(s,e,a,r){const l=a.padding;let{x:o,y:d}=e;for(const u of s){const m=u.box,f=r[u.stack]||{placed:0,weight:1},p=u.stackWeight/f.weight||1;if(u.horizontal){const y=e.w*p,v=f.size||m.height;mo(f.start)&&(d=f.start),m.fullSize?fd(m,l.left,d,a.outerWidth-l.right-l.left,v):fd(m,e.left+f.placed,d,y,v),f.start=d,f.placed+=y,d=m.bottom}else{const y=e.h*p,v=f.size||m.width;mo(f.start)&&(o=f.start),m.fullSize?fd(m,o,l.top,v,a.outerHeight-l.bottom-l.top):fd(m,o,e.top+f.placed,v,y),f.start=o,f.placed+=y,o=m.right}}e.x=o,e.y=d}var Ys={addBox(s,e){s.boxes||(s.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(a){e.draw(a)}}]},s.boxes.push(e)},removeBox(s,e){const a=s.boxes?s.boxes.indexOf(e):-1;a!==-1&&s.boxes.splice(a,1)},configure(s,e,a){e.fullSize=a.fullSize,e.position=a.position,e.weight=a.weight},update(s,e,a,r){if(!s)return;const l=Ws(s.options.layout.padding),o=Math.max(e-l.width,0),d=Math.max(a-l.height,0),u=h_(s.boxes),m=u.vertical,f=u.horizontal;nt(s.boxes,C=>{typeof C.beforeLayout=="function"&&C.beforeLayout()});const p=m.reduce((C,N)=>N.box.options&&N.box.options.display===!1?C:C+1,0)||1,y=Object.freeze({outerWidth:e,outerHeight:a,padding:l,availableWidth:o,availableHeight:d,vBoxMaxWidth:o/2/p,hBoxMaxHeight:d/2}),v=Object.assign({},l);Hj(v,Ws(r));const j=Object.assign({maxPadding:v,w:o,h:d,x:l.left,y:l.top},l),S=u_(m.concat(f),y);Xl(u.fullSize,j,y,S),Xl(m,j,y,S),Xl(f,j,y,S)&&Xl(m,j,y,S),f_(j),ev(u.leftAndTop,j,y,S),j.x+=j.w,j.y+=j.h,ev(u.rightAndBottom,j,y,S),s.chartArea={left:j.left,top:j.top,right:j.left+j.w,bottom:j.top+j.h,height:j.h,width:j.w},nt(u.chartArea,C=>{const N=C.box;Object.assign(N,s.chartArea),N.update(j.w,j.h,{left:0,top:0,right:0,bottom:0})})}};class qj{acquireContext(e,a){}releaseContext(e){return!1}addEventListener(e,a,r){}removeEventListener(e,a,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,a,r,l){return a=Math.max(0,a||e.width),r=r||e.height,{width:a,height:Math.max(0,l?Math.floor(a/l):r)}}isAttached(e){return!0}updateConfig(e){}}class g_ extends qj{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Td="$chartjs",x_={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},tv=s=>s===null||s==="";function y_(s,e){const a=s.style,r=s.getAttribute("height"),l=s.getAttribute("width");if(s[Td]={initial:{height:r,width:l,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",tv(l)){const o=Ub(s,"width");o!==void 0&&(s.width=o)}if(tv(r))if(s.style.height==="")s.height=s.width/(e||2);else{const o=Ub(s,"height");o!==void 0&&(s.height=o)}return s}const Vj=xk?{passive:!0}:!1;function b_(s,e,a){s&&s.addEventListener(e,a,Vj)}function v_(s,e,a){s&&s.canvas&&s.canvas.removeEventListener(e,a,Vj)}function j_(s,e){const a=x_[s.type]||s.type,{x:r,y:l}=wr(s,e);return{type:a,chart:e,native:s,x:r!==void 0?r:null,y:l!==void 0?l:null}}function qd(s,e){for(const a of s)if(a===e||a.contains(e))return!0}function w_(s,e,a){const r=s.canvas,l=new MutationObserver(o=>{let d=!1;for(const u of o)d=d||qd(u.addedNodes,r),d=d&&!qd(u.removedNodes,r);d&&a()});return l.observe(document,{childList:!0,subtree:!0}),l}function N_(s,e,a){const r=s.canvas,l=new MutationObserver(o=>{let d=!1;for(const u of o)d=d||qd(u.removedNodes,r),d=d&&!qd(u.addedNodes,r);d&&a()});return l.observe(document,{childList:!0,subtree:!0}),l}const yo=new Map;let sv=0;function $j(){const s=window.devicePixelRatio;s!==sv&&(sv=s,yo.forEach((e,a)=>{a.currentDevicePixelRatio!==s&&e()}))}function S_(s,e){yo.size||window.addEventListener("resize",$j),yo.set(s,e)}function C_(s){yo.delete(s),yo.size||window.removeEventListener("resize",$j)}function k_(s,e,a){const r=s.canvas,l=r&&Rp(r);if(!l)return;const o=jj((u,m)=>{const f=l.clientWidth;a(u,m),f<l.clientWidth&&a()},window),d=new ResizeObserver(u=>{const m=u[0],f=m.contentRect.width,p=m.contentRect.height;f===0&&p===0||o(f,p)});return d.observe(l),S_(s,o),d}function af(s,e,a){a&&a.disconnect(),e==="resize"&&C_(s)}function __(s,e,a){const r=s.canvas,l=jj(o=>{s.ctx!==null&&a(j_(o,s))},s);return b_(r,e,l),l}class A_ extends qj{acquireContext(e,a){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(y_(e,a),r):null}releaseContext(e){const a=e.canvas;if(!a[Td])return!1;const r=a[Td].initial;["height","width"].forEach(o=>{const d=r[o];et(d)?a.removeAttribute(o):a.setAttribute(o,d)});const l=r.style||{};return Object.keys(l).forEach(o=>{a.style[o]=l[o]}),a.width=a.width,delete a[Td],!0}addEventListener(e,a,r){this.removeEventListener(e,a);const l=e.$proxies||(e.$proxies={}),d={attach:w_,detach:N_,resize:k_}[a]||__;l[a]=d(e,a,r)}removeEventListener(e,a){const r=e.$proxies||(e.$proxies={}),l=r[a];if(!l)return;({attach:af,detach:af,resize:af}[a]||v_)(e,a,l),r[a]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,a,r,l){return gk(e,a,r,l)}isAttached(e){const a=e&&Rp(e);return!!(a&&a.isConnected)}}function E_(s){return!Tp()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?g_:A_}class dn{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:a,y:r}=this.getProps(["x","y"],e);return{x:a,y:r}}hasValue(){return fo(this.x)&&fo(this.y)}getProps(e,a){const r=this.$animations;if(!a||!r)return this;const l={};return e.forEach(o=>{l[o]=r[o]&&r[o].active()?r[o]._to:this[o]}),l}}function T_(s,e){const a=s.options.ticks,r=R_(s),l=Math.min(a.maxTicksLimit||r,r),o=a.major.enabled?M_(e):[],d=o.length,u=o[0],m=o[d-1],f=[];if(d>l)return L_(e,f,o,d/l),f;const p=D_(o,e,l);if(d>0){let y,v;const j=d>1?Math.round((m-u)/(d-1)):null;for(pd(e,f,p,et(j)?0:u-j,u),y=0,v=d-1;y<v;y++)pd(e,f,p,o[y],o[y+1]);return pd(e,f,p,m,et(j)?e.length:m+j),f}return pd(e,f,p),f}function R_(s){const e=s.options.offset,a=s._tickSize(),r=s._length/a+(e?0:1),l=s._maxLength/a;return Math.floor(Math.min(r,l))}function D_(s,e,a){const r=O_(s),l=e.length/a;if(!r)return Math.max(l,1);const o=p3(r);for(let d=0,u=o.length-1;d<u;d++){const m=o[d];if(m>l)return m}return Math.max(l,1)}function M_(s){const e=[];let a,r;for(a=0,r=s.length;a<r;a++)s[a].major&&e.push(a);return e}function L_(s,e,a,r){let l=0,o=a[0],d;for(r=Math.ceil(r),d=0;d<s.length;d++)d===o&&(e.push(s[d]),l++,o=a[l*r])}function pd(s,e,a,r,l){const o=Le(r,0),d=Math.min(Le(l,s.length),s.length);let u=0,m,f,p;for(a=Math.ceil(a),l&&(m=l-r,a=m/Math.floor(m/a)),p=o;p<0;)u++,p=Math.round(o+u*a);for(f=Math.max(o,0);f<d;f++)f===p&&(e.push(s[f]),u++,p=Math.round(o+u*a))}function O_(s){const e=s.length;let a,r;if(e<2)return!1;for(r=s[0],a=1;a<e;++a)if(s[a]-s[a-1]!==r)return!1;return r}const z_=s=>s==="left"?"right":s==="right"?"left":s,av=(s,e,a)=>e==="top"||e==="left"?s[e]+a:s[e]-a,nv=(s,e)=>Math.min(e||s,s);function rv(s,e){const a=[],r=s.length/e,l=s.length;let o=0;for(;o<l;o+=r)a.push(s[Math.floor(o)]);return a}function P_(s,e,a){const r=s.ticks.length,l=Math.min(e,r-1),o=s._startPixel,d=s._endPixel,u=1e-6;let m=s.getPixelForTick(l),f;if(!(a&&(r===1?f=Math.max(m-o,d-m):e===0?f=(s.getPixelForTick(1)-m)/2:f=(m-s.getPixelForTick(l-1))/2,m+=l<e?f:-f,m<o-u||m>d+u)))return m}function U_(s,e){nt(s,a=>{const r=a.gc,l=r.length/2;let o;if(l>e){for(o=0;o<l;++o)delete a.data[r[o]];r.splice(0,l)}})}function Il(s){return s.drawTicks?s.tickLength:0}function iv(s,e){if(!s.display)return 0;const a=as(s.font,e),r=Ws(s.padding);return(Lt(s.text)?s.text.length:1)*a.lineHeight+r.height}function B_(s,e){return zr(s,{scale:e,type:"scale"})}function F_(s,e,a){return zr(s,{tick:a,index:e,type:"tick"})}function H_(s,e,a){let r=Np(s);return(a&&e!=="right"||!a&&e==="right")&&(r=z_(r)),r}function q_(s,e,a,r){const{top:l,left:o,bottom:d,right:u,chart:m}=s,{chartArea:f,scales:p}=m;let y=0,v,j,S;const C=d-l,N=u-o;if(s.isHorizontal()){if(j=es(r,o,u),qe(a)){const D=Object.keys(a)[0],E=a[D];S=p[D].getPixelForValue(E)+C-e}else a==="center"?S=(f.bottom+f.top)/2+C-e:S=av(s,a,e);v=u-o}else{if(qe(a)){const D=Object.keys(a)[0],E=a[D];j=p[D].getPixelForValue(E)-N+e}else a==="center"?j=(f.left+f.right)/2-N+e:j=av(s,a,e);S=es(r,d,l),y=a==="left"?-Vt:Vt}return{titleX:j,titleY:S,maxWidth:v,rotation:y}}class Vi extends dn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,a){return e}getUserBounds(){let{_userMin:e,_userMax:a,_suggestedMin:r,_suggestedMax:l}=this;return e=ja(e,Number.POSITIVE_INFINITY),a=ja(a,Number.NEGATIVE_INFINITY),r=ja(r,Number.POSITIVE_INFINITY),l=ja(l,Number.NEGATIVE_INFINITY),{min:ja(e,r),max:ja(a,l),minDefined:ns(e),maxDefined:ns(a)}}getMinMax(e){let{min:a,max:r,minDefined:l,maxDefined:o}=this.getUserBounds(),d;if(l&&o)return{min:a,max:r};const u=this.getMatchingVisibleMetas();for(let m=0,f=u.length;m<f;++m)d=u[m].controller.getMinMax(this,e),l||(a=Math.min(a,d.min)),o||(r=Math.max(r,d.max));return a=o&&a>r?r:a,r=l&&a>r?a:r,{min:ja(a,ja(r,a)),max:ja(r,ja(a,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){mt(this.options.beforeUpdate,[this])}update(e,a,r){const{beginAtZero:l,grace:o,ticks:d}=this.options,u=d.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=a,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=G3(this,o,l),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const m=u<this.ticks.length;this._convertTicksToLabels(m?rv(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),d.display&&(d.autoSkip||d.source==="auto")&&(this.ticks=T_(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),m&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,a,r;this.isHorizontal()?(a=this.left,r=this.right):(a=this.top,r=this.bottom,e=!e),this._startPixel=a,this._endPixel=r,this._reversePixels=e,this._length=r-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){mt(this.options.afterUpdate,[this])}beforeSetDimensions(){mt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){mt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),mt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){mt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const a=this.options.ticks;let r,l,o;for(r=0,l=e.length;r<l;r++)o=e[r],o.label=mt(a.callback,[o.value,r,e],this)}afterTickToLabelConversion(){mt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){mt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,a=e.ticks,r=nv(this.ticks.length,e.ticks.maxTicksLimit),l=a.minRotation||0,o=a.maxRotation;let d=l,u,m,f;if(!this._isVisible()||!a.display||l>=o||r<=1||!this.isHorizontal()){this.labelRotation=l;return}const p=this._getLabelSizes(),y=p.widest.width,v=p.highest.height,j=ss(this.chart.width-y,0,this.maxWidth);u=e.offset?this.maxWidth/r:j/(r-1),y+6>u&&(u=j/(r-(e.offset?.5:1)),m=this.maxHeight-Il(e.grid)-a.padding-iv(e.title,this.chart.options.font),f=Math.sqrt(y*y+v*v),d=b3(Math.min(Math.asin(ss((p.highest.height+6)/u,-1,1)),Math.asin(ss(m/f,-1,1))-Math.asin(ss(v/f,-1,1)))),d=Math.max(l,Math.min(o,d))),this.labelRotation=d}afterCalculateLabelRotation(){mt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){mt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:a,options:{ticks:r,title:l,grid:o}}=this,d=this._isVisible(),u=this.isHorizontal();if(d){const m=iv(l,a.options.font);if(u?(e.width=this.maxWidth,e.height=Il(o)+m):(e.height=this.maxHeight,e.width=Il(o)+m),r.display&&this.ticks.length){const{first:f,last:p,widest:y,highest:v}=this._getLabelSizes(),j=r.padding*2,S=tn(this.labelRotation),C=Math.cos(S),N=Math.sin(S);if(u){const D=r.mirror?0:N*y.width+C*v.height;e.height=Math.min(this.maxHeight,e.height+D+j)}else{const D=r.mirror?0:C*y.width+N*v.height;e.width=Math.min(this.maxWidth,e.width+D+j)}this._calculatePadding(f,p,N,C)}}this._handleMargins(),u?(this.width=this._length=a.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=a.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,a,r,l){const{ticks:{align:o,padding:d},position:u}=this.options,m=this.labelRotation!==0,f=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,j=0;m?f?(v=l*e.width,j=r*a.height):(v=r*e.height,j=l*a.width):o==="start"?j=a.width:o==="end"?v=e.width:o!=="inner"&&(v=e.width/2,j=a.width/2),this.paddingLeft=Math.max((v-p+d)*this.width/(this.width-p),0),this.paddingRight=Math.max((j-y+d)*this.width/(this.width-y),0)}else{let p=a.height/2,y=e.height/2;o==="start"?(p=0,y=e.height):o==="end"&&(p=a.height,y=0),this.paddingTop=p+d,this.paddingBottom=y+d}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){mt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:a}=this.options;return a==="top"||a==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let a,r;for(a=0,r=e.length;a<r;a++)et(e[a].label)&&(e.splice(a,1),r--,a--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const a=this.options.ticks.sampleSize;let r=this.ticks;a<r.length&&(r=rv(r,a)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,a,r){const{ctx:l,_longestTextCache:o}=this,d=[],u=[],m=Math.floor(a/nv(a,r));let f=0,p=0,y,v,j,S,C,N,D,E,A,T,w;for(y=0;y<a;y+=m){if(S=e[y].label,C=this._resolveTickFontOptions(y),l.font=N=C.string,D=o[N]=o[N]||{data:{},gc:[]},E=C.lineHeight,A=T=0,!et(S)&&!Lt(S))A=Mb(l,D.data,D.gc,A,S),T=E;else if(Lt(S))for(v=0,j=S.length;v<j;++v)w=S[v],!et(w)&&!Lt(w)&&(A=Mb(l,D.data,D.gc,A,w),T+=E);d.push(A),u.push(T),f=Math.max(A,f),p=Math.max(T,p)}U_(o,a);const _=d.indexOf(f),R=u.indexOf(p),z=H=>({width:d[H]||0,height:u[H]||0});return{first:z(0),last:z(a-1),widest:z(_),highest:z(R),widths:d,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,a){return NaN}getValueForPixel(e){}getPixelForTick(e){const a=this.ticks;return e<0||e>a.length-1?null:this.getPixelForValue(a[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const a=this._startPixel+e*this._length;return j3(this._alignToPixels?vr(this.chart,a,0):a)}getDecimalForPixel(e){const a=(e-this._startPixel)/this._length;return this._reversePixels?1-a:a}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:a}=this;return e<0&&a<0?a:e>0&&a>0?e:0}getContext(e){const a=this.ticks||[];if(e>=0&&e<a.length){const r=a[e];return r.$context||(r.$context=F_(this.getContext(),e,r))}return this.$context||(this.$context=B_(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,a=tn(this.labelRotation),r=Math.abs(Math.cos(a)),l=Math.abs(Math.sin(a)),o=this._getLabelSizes(),d=e.autoSkipPadding||0,u=o?o.widest.width+d:0,m=o?o.highest.height+d:0;return this.isHorizontal()?m*r>u*l?u/r:m/l:m*l<u*r?m/r:u/l}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const a=this.axis,r=this.chart,l=this.options,{grid:o,position:d,border:u}=l,m=o.offset,f=this.isHorizontal(),y=this.ticks.length+(m?1:0),v=Il(o),j=[],S=u.setContext(this.getContext()),C=S.display?S.width:0,N=C/2,D=function(B){return vr(r,B,C)};let E,A,T,w,_,R,z,H,q,ne,U,re;if(d==="top")E=D(this.bottom),R=this.bottom-v,H=E-N,ne=D(e.top)+N,re=e.bottom;else if(d==="bottom")E=D(this.top),ne=e.top,re=D(e.bottom)-N,R=E+N,H=this.top+v;else if(d==="left")E=D(this.right),_=this.right-v,z=E-N,q=D(e.left)+N,U=e.right;else if(d==="right")E=D(this.left),q=e.left,U=D(e.right)-N,_=E+N,z=this.left+v;else if(a==="x"){if(d==="center")E=D((e.top+e.bottom)/2+.5);else if(qe(d)){const B=Object.keys(d)[0],L=d[B];E=D(this.chart.scales[B].getPixelForValue(L))}ne=e.top,re=e.bottom,R=E+N,H=R+v}else if(a==="y"){if(d==="center")E=D((e.left+e.right)/2);else if(qe(d)){const B=Object.keys(d)[0],L=d[B];E=D(this.chart.scales[B].getPixelForValue(L))}_=E-N,z=_-v,q=e.left,U=e.right}const fe=Le(l.ticks.maxTicksLimit,y),Z=Math.max(1,Math.ceil(y/fe));for(A=0;A<y;A+=Z){const B=this.getContext(A),L=o.setContext(B),Y=u.setContext(B),O=L.lineWidth,I=L.color,P=Y.dash||[],W=Y.dashOffset,de=L.tickWidth,he=L.tickColor,je=L.tickBorderDash||[],ke=L.tickBorderDashOffset;T=P_(this,A,m),T!==void 0&&(w=vr(r,T,O),f?_=z=q=U=w:R=H=ne=re=w,j.push({tx1:_,ty1:R,tx2:z,ty2:H,x1:q,y1:ne,x2:U,y2:re,width:O,color:I,borderDash:P,borderDashOffset:W,tickWidth:de,tickColor:he,tickBorderDash:je,tickBorderDashOffset:ke}))}return this._ticksLength=y,this._borderValue=E,j}_computeLabelItems(e){const a=this.axis,r=this.options,{position:l,ticks:o}=r,d=this.isHorizontal(),u=this.ticks,{align:m,crossAlign:f,padding:p,mirror:y}=o,v=Il(r.grid),j=v+p,S=y?-p:j,C=-tn(this.labelRotation),N=[];let D,E,A,T,w,_,R,z,H,q,ne,U,re="middle";if(l==="top")_=this.bottom-S,R=this._getXAxisLabelAlignment();else if(l==="bottom")_=this.top+S,R=this._getXAxisLabelAlignment();else if(l==="left"){const Z=this._getYAxisLabelAlignment(v);R=Z.textAlign,w=Z.x}else if(l==="right"){const Z=this._getYAxisLabelAlignment(v);R=Z.textAlign,w=Z.x}else if(a==="x"){if(l==="center")_=(e.top+e.bottom)/2+j;else if(qe(l)){const Z=Object.keys(l)[0],B=l[Z];_=this.chart.scales[Z].getPixelForValue(B)+j}R=this._getXAxisLabelAlignment()}else if(a==="y"){if(l==="center")w=(e.left+e.right)/2-j;else if(qe(l)){const Z=Object.keys(l)[0],B=l[Z];w=this.chart.scales[Z].getPixelForValue(B)}R=this._getYAxisLabelAlignment(v).textAlign}a==="y"&&(m==="start"?re="top":m==="end"&&(re="bottom"));const fe=this._getLabelSizes();for(D=0,E=u.length;D<E;++D){A=u[D],T=A.label;const Z=o.setContext(this.getContext(D));z=this.getPixelForTick(D)+o.labelOffset,H=this._resolveTickFontOptions(D),q=H.lineHeight,ne=Lt(T)?T.length:1;const B=ne/2,L=Z.color,Y=Z.textStrokeColor,O=Z.textStrokeWidth;let I=R;d?(w=z,R==="inner"&&(D===E-1?I=this.options.reverse?"left":"right":D===0?I=this.options.reverse?"right":"left":I="center"),l==="top"?f==="near"||C!==0?U=-ne*q+q/2:f==="center"?U=-fe.highest.height/2-B*q+q:U=-fe.highest.height+q/2:f==="near"||C!==0?U=q/2:f==="center"?U=fe.highest.height/2-B*q:U=fe.highest.height-ne*q,y&&(U*=-1),C!==0&&!Z.showLabelBackdrop&&(w+=q/2*Math.sin(C))):(_=z,U=(1-ne)*q/2);let P;if(Z.showLabelBackdrop){const W=Ws(Z.backdropPadding),de=fe.heights[D],he=fe.widths[D];let je=U-W.top,ke=0-W.left;switch(re){case"middle":je-=de/2;break;case"bottom":je-=de;break}switch(R){case"center":ke-=he/2;break;case"right":ke-=he;break;case"inner":D===E-1?ke-=he:D>0&&(ke-=he/2);break}P={left:ke,top:je,width:he+W.width,height:de+W.height,color:Z.backdropColor}}N.push({label:T,font:H,textOffset:U,options:{rotation:C,color:L,strokeColor:Y,strokeWidth:O,textAlign:I,textBaseline:re,translation:[w,_],backdrop:P}})}return N}_getXAxisLabelAlignment(){const{position:e,ticks:a}=this.options;if(-tn(this.labelRotation))return e==="top"?"left":"right";let l="center";return a.align==="start"?l="left":a.align==="end"?l="right":a.align==="inner"&&(l="inner"),l}_getYAxisLabelAlignment(e){const{position:a,ticks:{crossAlign:r,mirror:l,padding:o}}=this.options,d=this._getLabelSizes(),u=e+o,m=d.widest.width;let f,p;return a==="left"?l?(p=this.right+o,r==="near"?f="left":r==="center"?(f="center",p+=m/2):(f="right",p+=m)):(p=this.right-u,r==="near"?f="right":r==="center"?(f="center",p-=m/2):(f="left",p=this.left)):a==="right"?l?(p=this.left+o,r==="near"?f="right":r==="center"?(f="center",p-=m/2):(f="left",p-=m)):(p=this.left+u,r==="near"?f="left":r==="center"?(f="center",p+=m/2):(f="right",p=this.right)):f="right",{textAlign:f,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,a=this.options.position;if(a==="left"||a==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(a==="top"||a==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:a},left:r,top:l,width:o,height:d}=this;a&&(e.save(),e.fillStyle=a,e.fillRect(r,l,o,d),e.restore())}getLineWidthForValue(e){const a=this.options.grid;if(!this._isVisible()||!a.display)return 0;const l=this.ticks.findIndex(o=>o.value===e);return l>=0?a.setContext(this.getContext(l)).lineWidth:0}drawGrid(e){const a=this.options.grid,r=this.ctx,l=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,d;const u=(m,f,p)=>{!p.width||!p.color||(r.save(),r.lineWidth=p.width,r.strokeStyle=p.color,r.setLineDash(p.borderDash||[]),r.lineDashOffset=p.borderDashOffset,r.beginPath(),r.moveTo(m.x,m.y),r.lineTo(f.x,f.y),r.stroke(),r.restore())};if(a.display)for(o=0,d=l.length;o<d;++o){const m=l[o];a.drawOnChartArea&&u({x:m.x1,y:m.y1},{x:m.x2,y:m.y2},m),a.drawTicks&&u({x:m.tx1,y:m.ty1},{x:m.tx2,y:m.ty2},{color:m.tickColor,width:m.tickWidth,borderDash:m.tickBorderDash,borderDashOffset:m.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:a,options:{border:r,grid:l}}=this,o=r.setContext(this.getContext()),d=r.display?o.width:0;if(!d)return;const u=l.setContext(this.getContext(0)).lineWidth,m=this._borderValue;let f,p,y,v;this.isHorizontal()?(f=vr(e,this.left,d)-d/2,p=vr(e,this.right,u)+u/2,y=v=m):(y=vr(e,this.top,d)-d/2,v=vr(e,this.bottom,u)+u/2,f=p=m),a.save(),a.lineWidth=o.width,a.strokeStyle=o.color,a.beginPath(),a.moveTo(f,y),a.lineTo(p,v),a.stroke(),a.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,l=this._computeLabelArea();l&&iu(r,l);const o=this.getLabelItems(e);for(const d of o){const u=d.options,m=d.font,f=d.label,p=d.textOffset;xo(r,f,0,p,m,u)}l&&lu(r)}drawTitle(){const{ctx:e,options:{position:a,title:r,reverse:l}}=this;if(!r.display)return;const o=as(r.font),d=Ws(r.padding),u=r.align;let m=o.lineHeight/2;a==="bottom"||a==="center"||qe(a)?(m+=d.bottom,Lt(r.text)&&(m+=o.lineHeight*(r.text.length-1))):m+=d.top;const{titleX:f,titleY:p,maxWidth:y,rotation:v}=q_(this,m,a,u);xo(e,r.text,0,0,o,{color:r.color,maxWidth:y,rotation:v,textAlign:H_(u,a,l),textBaseline:"middle",translation:[f,p]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,a=e.ticks&&e.ticks.z||0,r=Le(e.grid&&e.grid.z,-1),l=Le(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Vi.prototype.draw?[{z:a,draw:o=>{this.draw(o)}}]:[{z:r,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:l,draw:()=>{this.drawBorder()}},{z:a,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const a=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",l=[];let o,d;for(o=0,d=a.length;o<d;++o){const u=a[o];u[r]===this.id&&(!e||u.type===e)&&l.push(u)}return l}_resolveTickFontOptions(e){const a=this.options.ticks.setContext(this.getContext(e));return as(a.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class gd{constructor(e,a,r){this.type=e,this.scope=a,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const a=Object.getPrototypeOf(e);let r;I_(a)&&(r=this.register(a));const l=this.items,o=e.id,d=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in l||(l[o]=e,V_(e,d,r),this.override&&kt.override(e.id,e.overrides)),d}get(e){return this.items[e]}unregister(e){const a=this.items,r=e.id,l=this.scope;r in a&&delete a[r],l&&r in kt[l]&&(delete kt[l][r],this.override&&delete Lr[r])}}function V_(s,e,a){const r=ho(Object.create(null),[a?kt.get(a):{},kt.get(e),s.defaults]);kt.set(e,r),s.defaultRoutes&&$_(e,s.defaultRoutes),s.descriptors&&kt.describe(e,s.descriptors)}function $_(s,e){Object.keys(e).forEach(a=>{const r=a.split("."),l=r.pop(),o=[s].concat(r).join("."),d=e[a].split("."),u=d.pop(),m=d.join(".");kt.route(o,l,m,u)})}function I_(s){return"id"in s&&"defaults"in s}class Q_{constructor(){this.controllers=new gd(cu,"datasets",!0),this.elements=new gd(dn,"elements"),this.plugins=new gd(Object,"plugins"),this.scales=new gd(Vi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,a,r){[...a].forEach(l=>{const o=r||this._getRegistryForType(l);r||o.isForType(l)||o===this.plugins&&l.id?this._exec(e,o,l):nt(l,d=>{const u=r||this._getRegistryForType(d);this._exec(e,u,d)})})}_exec(e,a,r){const l=jp(e);mt(r["before"+l],[],r),a[e](r),mt(r["after"+l],[],r)}_getRegistryForType(e){for(let a=0;a<this._typedRegistries.length;a++){const r=this._typedRegistries[a];if(r.isForType(e))return r}return this.plugins}_get(e,a,r){const l=a.get(e);if(l===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return l}}var Na=new Q_;class Y_{constructor(){this._init=void 0}notify(e,a,r,l){if(a==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const o=l?this._descriptors(e).filter(l):this._descriptors(e),d=this._notify(o,e,a,r);return a==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),d}_notify(e,a,r,l){l=l||{};for(const o of e){const d=o.plugin,u=d[r],m=[a,l,o.options];if(mt(u,m,d)===!1&&l.cancelable)return!1}return!0}invalidate(){et(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const a=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),a}_createDescriptors(e,a){const r=e&&e.config,l=Le(r.options&&r.options.plugins,{}),o=G_(r);return l===!1&&!a?[]:X_(e,o,l,a)}_notifyStateChanges(e){const a=this._oldCache||[],r=this._cache,l=(o,d)=>o.filter(u=>!d.some(m=>u.plugin.id===m.plugin.id));this._notify(l(a,r),e,"stop"),this._notify(l(r,a),e,"start")}}function G_(s){const e={},a=[],r=Object.keys(Na.plugins.items);for(let o=0;o<r.length;o++)a.push(Na.getPlugin(r[o]));const l=s.plugins||[];for(let o=0;o<l.length;o++){const d=l[o];a.indexOf(d)===-1&&(a.push(d),e[d.id]=!0)}return{plugins:a,localIds:e}}function W_(s,e){return!e&&s===!1?null:s===!0?{}:s}function X_(s,{plugins:e,localIds:a},r,l){const o=[],d=s.getContext();for(const u of e){const m=u.id,f=W_(r[m],l);f!==null&&o.push({plugin:u,options:Z_(s.config,{plugin:u,local:a[m]},f,d)})}return o}function Z_(s,{plugin:e,local:a},r,l){const o=s.pluginScopeKeys(e),d=s.getOptionScopes(r,o);return a&&e.defaults&&d.push(e.defaults),s.createResolver(d,l,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Bf(s,e){const a=kt.datasets[s]||{};return((e.datasets||{})[s]||{}).indexAxis||e.indexAxis||a.indexAxis||"x"}function K_(s,e){let a=s;return s==="_index_"?a=e:s==="_value_"&&(a=e==="x"?"y":"x"),a}function J_(s,e){return s===e?"_index_":"_value_"}function lv(s){if(s==="x"||s==="y"||s==="r")return s}function eA(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function Ff(s,...e){if(lv(s))return s;for(const a of e){const r=a.axis||eA(a.position)||s.length>1&&lv(s[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function ov(s,e,a){if(a[e+"AxisID"]===s)return{axis:e}}function tA(s,e){if(e.data&&e.data.datasets){const a=e.data.datasets.filter(r=>r.xAxisID===s||r.yAxisID===s);if(a.length)return ov(s,"x",a[0])||ov(s,"y",a[0])}return{}}function sA(s,e){const a=Lr[s.type]||{scales:{}},r=e.scales||{},l=Bf(s.type,e),o=Object.create(null);return Object.keys(r).forEach(d=>{const u=r[d];if(!qe(u))return console.error(`Invalid scale configuration for scale: ${d}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${d}`);const m=Ff(d,u,tA(d,s),kt.scales[u.type]),f=J_(m,l),p=a.scales||{};o[d]=to(Object.create(null),[{axis:m},u,p[m],p[f]])}),s.data.datasets.forEach(d=>{const u=d.type||s.type,m=d.indexAxis||Bf(u,e),p=(Lr[u]||{}).scales||{};Object.keys(p).forEach(y=>{const v=K_(y,m),j=d[v+"AxisID"]||v;o[j]=o[j]||Object.create(null),to(o[j],[{axis:v},r[j],p[y]])})}),Object.keys(o).forEach(d=>{const u=o[d];to(u,[kt.scales[u.type],kt.scale])}),o}function Ij(s){const e=s.options||(s.options={});e.plugins=Le(e.plugins,{}),e.scales=sA(s,e)}function Qj(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function aA(s){return s=s||{},s.data=Qj(s.data),Ij(s),s}const cv=new Map,Yj=new Set;function xd(s,e){let a=cv.get(s);return a||(a=e(),cv.set(s,a),Yj.add(a)),a}const Ql=(s,e,a)=>{const r=Mr(e,a);r!==void 0&&s.add(r)};class nA{constructor(e){this._config=aA(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Qj(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Ij(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return xd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,a){return xd(`${e}.transition.${a}`,()=>[[`datasets.${e}.transitions.${a}`,`transitions.${a}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,a){return xd(`${e}-${a}`,()=>[[`datasets.${e}.elements.${a}`,`datasets.${e}`,`elements.${a}`,""]])}pluginScopeKeys(e){const a=e.id,r=this.type;return xd(`${r}-plugin-${a}`,()=>[[`plugins.${a}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,a){const r=this._scopeCache;let l=r.get(e);return(!l||a)&&(l=new Map,r.set(e,l)),l}getOptionScopes(e,a,r){const{options:l,type:o}=this,d=this._cachedScopes(e,r),u=d.get(a);if(u)return u;const m=new Set;a.forEach(p=>{e&&(m.add(e),p.forEach(y=>Ql(m,e,y))),p.forEach(y=>Ql(m,l,y)),p.forEach(y=>Ql(m,Lr[o]||{},y)),p.forEach(y=>Ql(m,kt,y)),p.forEach(y=>Ql(m,Pf,y))});const f=Array.from(m);return f.length===0&&f.push(Object.create(null)),Yj.has(a)&&d.set(a,f),f}chartOptionScopes(){const{options:e,type:a}=this;return[e,Lr[a]||{},kt.datasets[a]||{},{type:a},kt,Pf]}resolveNamedOptions(e,a,r,l=[""]){const o={$shared:!0},{resolver:d,subPrefixes:u}=dv(this._resolverCache,e,l);let m=d;if(iA(d,a)){o.$shared=!1,r=Gn(r)?r():r;const f=this.createResolver(e,r,u);m=Di(d,r,f)}for(const f of a)o[f]=m[f];return o}createResolver(e,a,r=[""],l){const{resolver:o}=dv(this._resolverCache,e,r);return qe(a)?Di(o,a,void 0,l):o}}function dv(s,e,a){let r=s.get(e);r||(r=new Map,s.set(e,r));const l=a.join();let o=r.get(l);return o||(o={resolver:_p(e,a),subPrefixes:a.filter(u=>!u.toLowerCase().includes("hover"))},r.set(l,o)),o}const rA=s=>qe(s)&&Object.getOwnPropertyNames(s).some(e=>Gn(s[e]));function iA(s,e){const{isScriptable:a,isIndexable:r}=Cj(s);for(const l of e){const o=a(l),d=r(l),u=(d||o)&&s[l];if(o&&(Gn(u)||rA(u))||d&&Lt(u))return!0}return!1}var lA="4.5.1";const oA=["top","bottom","left","right","chartArea"];function uv(s,e){return s==="top"||s==="bottom"||oA.indexOf(s)===-1&&e==="x"}function hv(s,e){return function(a,r){return a[s]===r[s]?a[e]-r[e]:a[s]-r[s]}}function mv(s){const e=s.chart,a=e.options.animation;e.notifyPlugins("afterRender"),mt(a&&a.onComplete,[s],e)}function cA(s){const e=s.chart,a=e.options.animation;mt(a&&a.onProgress,[s],e)}function Gj(s){return Tp()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const Rd={},fv=s=>{const e=Gj(s);return Object.values(Rd).filter(a=>a.canvas===e).pop()};function dA(s,e,a){const r=Object.keys(s);for(const l of r){const o=+l;if(o>=e){const d=s[l];delete s[l],(a>0||o>e)&&(s[o+a]=d)}}}function uA(s,e,a,r){return!a||s.type==="mouseout"?null:r?e:s}let uu=class{static defaults=kt;static instances=Rd;static overrides=Lr;static registry=Na;static version=lA;static getChart=fv;static register(...e){Na.add(...e),pv()}static unregister(...e){Na.remove(...e),pv()}constructor(e,a){const r=this.config=new nA(a),l=Gj(e),o=fv(l);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const d=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||E_(l)),this.platform.updateConfig(r);const u=this.platform.acquireContext(l,d.aspectRatio),m=u&&u.canvas,f=m&&m.height,p=m&&m.width;if(this.id=i3(),this.ctx=u,this.canvas=m,this.width=p,this.height=f,this._options=d,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Y_,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=C3(y=>this.update(y),d.resizeDelay||0),this._dataChanges=[],Rd[this.id]=this,!u||!m){console.error("Failed to create chart: can't acquire context from the given item");return}Ka.listen(this,"complete",mv),Ka.listen(this,"progress",cA),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:a},width:r,height:l,_aspectRatio:o}=this;return et(e)?a&&o?o:l?r/l:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Na}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Pb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Lb(this.canvas,this.ctx),this}stop(){return Ka.stop(this),this}resize(e,a){Ka.running(this)?this._resizeBeforeDraw={width:e,height:a}:this._resize(e,a)}_resize(e,a){const r=this.options,l=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,d=this.platform.getMaximumSize(l,e,a,o),u=r.devicePixelRatio||this.platform.getDevicePixelRatio(),m=this.width?"resize":"attach";this.width=d.width,this.height=d.height,this._aspectRatio=this.aspectRatio,Pb(this,u,!0)&&(this.notifyPlugins("resize",{size:d}),mt(r.onResize,[this,d],this),this.attached&&this._doResize(m)&&this.render())}ensureScalesHaveIDs(){const a=this.options.scales||{};nt(a,(r,l)=>{r.id=l})}buildOrUpdateScales(){const e=this.options,a=e.scales,r=this.scales,l=Object.keys(r).reduce((d,u)=>(d[u]=!1,d),{});let o=[];a&&(o=o.concat(Object.keys(a).map(d=>{const u=a[d],m=Ff(d,u),f=m==="r",p=m==="x";return{options:u,dposition:f?"chartArea":p?"bottom":"left",dtype:f?"radialLinear":p?"category":"linear"}}))),nt(o,d=>{const u=d.options,m=u.id,f=Ff(m,u),p=Le(u.type,d.dtype);(u.position===void 0||uv(u.position,f)!==uv(d.dposition))&&(u.position=d.dposition),l[m]=!0;let y=null;if(m in r&&r[m].type===p)y=r[m];else{const v=Na.getScale(p);y=new v({id:m,type:p,ctx:this.ctx,chart:this}),r[y.id]=y}y.init(u,e)}),nt(l,(d,u)=>{d||delete r[u]}),nt(r,d=>{Ys.configure(this,d,d.options),Ys.addBox(this,d)})}_updateMetasets(){const e=this._metasets,a=this.data.datasets.length,r=e.length;if(e.sort((l,o)=>l.index-o.index),r>a){for(let l=a;l<r;++l)this._destroyDatasetMeta(l);e.splice(a,r-a)}this._sortedMetasets=e.slice(0).sort(hv("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:a}}=this;e.length>a.length&&delete this._stacks,e.forEach((r,l)=>{a.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(l)})}buildOrUpdateControllers(){const e=[],a=this.data.datasets;let r,l;for(this._removeUnreferencedMetasets(),r=0,l=a.length;r<l;r++){const o=a[r];let d=this.getDatasetMeta(r);const u=o.type||this.config.type;if(d.type&&d.type!==u&&(this._destroyDatasetMeta(r),d=this.getDatasetMeta(r)),d.type=u,d.indexAxis=o.indexAxis||Bf(u,this.options),d.order=o.order||0,d.index=r,d.label=""+o.label,d.visible=this.isDatasetVisible(r),d.controller)d.controller.updateIndex(r),d.controller.linkScales();else{const m=Na.getController(u),{datasetElementType:f,dataElementType:p}=kt.datasets[u];Object.assign(m,{dataElementType:Na.getElement(p),datasetElementType:f&&Na.getElement(f)}),d.controller=new m(this,r),e.push(d.controller)}}return this._updateMetasets(),e}_resetElements(){nt(this.data.datasets,(e,a)=>{this.getDatasetMeta(a).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const a=this.config;a.update();const r=this._options=a.createResolver(a.chartOptionScopes(),this.getContext()),l=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let d=0;for(let f=0,p=this.data.datasets.length;f<p;f++){const{controller:y}=this.getDatasetMeta(f),v=!l&&o.indexOf(y)===-1;y.buildOrUpdateElements(v),d=Math.max(+y.getMaxOverflow(),d)}d=this._minPadding=r.layout.autoPadding?d:0,this._updateLayout(d),l||nt(o,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(hv("z","_idx"));const{_active:u,_lastEvent:m}=this;m?this._eventHandler(m,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){nt(this.scales,e=>{Ys.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,a=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Sb(a,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,a=this._getUniformDataChanges()||[];for(const{method:r,start:l,count:o}of a){const d=r==="_removeElements"?-o:o;dA(e,l,d)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const a=this.data.datasets.length,r=o=>new Set(e.filter(d=>d[0]===o).map((d,u)=>u+","+d.splice(1).join(","))),l=r(0);for(let o=1;o<a;o++)if(!Sb(l,r(o)))return;return Array.from(l).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ys.update(this,this.width,this.height,e);const a=this.chartArea,r=a.width<=0||a.height<=0;this._layers=[],nt(this.boxes,l=>{r&&l.position==="chartArea"||(l.configure&&l.configure(),this._layers.push(...l._layers()))},this),this._layers.forEach((l,o)=>{l._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let a=0,r=this.data.datasets.length;a<r;++a)this.getDatasetMeta(a).controller.configure();for(let a=0,r=this.data.datasets.length;a<r;++a)this._updateDataset(a,Gn(e)?e({datasetIndex:a}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,a){const r=this.getDatasetMeta(e),l={meta:r,index:e,mode:a,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",l)!==!1&&(r.controller._update(a),l.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",l))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ka.has(this)?this.attached&&!Ka.running(this)&&Ka.start(this):(this.draw(),mv({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:l}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,l)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const a=this._layers;for(e=0;e<a.length&&a[e].z<=0;++e)a[e].draw(this.chartArea);for(this._drawDatasets();e<a.length;++e)a[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const a=this._sortedMetasets,r=[];let l,o;for(l=0,o=a.length;l<o;++l){const d=a[l];(!e||d.visible)&&r.push(d)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let a=e.length-1;a>=0;--a)this._drawDataset(e[a]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const a=this.ctx,r={meta:e,index:e.index,cancelable:!0},l=Oj(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(l&&iu(a,l),e.controller.draw(),l&&lu(a),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return go(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,a,r,l){const o=o_.modes[a];return typeof o=="function"?o(this,e,r,l):[]}getDatasetMeta(e){const a=this.data.datasets[e],r=this._metasets;let l=r.filter(o=>o&&o._dataset===a).pop();return l||(l={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a&&a.order||0,index:e,_dataset:a,_parsed:[],_sorted:!1},r.push(l)),l}getContext(){return this.$context||(this.$context=zr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const a=this.data.datasets[e];if(!a)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!a.hidden}setDatasetVisibility(e,a){const r=this.getDatasetMeta(e);r.hidden=!a}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,a,r){const l=r?"show":"hide",o=this.getDatasetMeta(e),d=o.controller._resolveAnimations(void 0,l);mo(a)?(o.data[a].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),d.update(o,{visible:r}),this.update(u=>u.datasetIndex===e?l:void 0))}hide(e,a){this._updateVisibility(e,a,!1)}show(e,a){this._updateVisibility(e,a,!0)}_destroyDatasetMeta(e){const a=this._metasets[e];a&&a.controller&&a.controller._destroy(),delete this._metasets[e]}_stop(){let e,a;for(this.stop(),Ka.remove(this),e=0,a=this.data.datasets.length;e<a;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:a}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Lb(e,a),this.platform.releaseContext(a),this.canvas=null,this.ctx=null),delete Rd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,a=this.platform,r=(o,d)=>{a.addEventListener(this,o,d),e[o]=d},l=(o,d,u)=>{o.offsetX=d,o.offsetY=u,this._eventHandler(o)};nt(this.options.events,o=>r(o,l))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,a=this.platform,r=(m,f)=>{a.addEventListener(this,m,f),e[m]=f},l=(m,f)=>{e[m]&&(a.removeEventListener(this,m,f),delete e[m])},o=(m,f)=>{this.canvas&&this.resize(m,f)};let d;const u=()=>{l("attach",u),this.attached=!0,this.resize(),r("resize",o),r("detach",d)};d=()=>{this.attached=!1,l("resize",o),this._stop(),this._resize(0,0),r("attach",u)},a.isAttached(this.canvas)?u():d()}unbindEvents(){nt(this._listeners,(e,a)=>{this.platform.removeEventListener(this,a,e)}),this._listeners={},nt(this._responsiveListeners,(e,a)=>{this.platform.removeEventListener(this,a,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,a,r){const l=r?"set":"remove";let o,d,u,m;for(a==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+l+"DatasetHoverStyle"]()),u=0,m=e.length;u<m;++u){d=e[u];const f=d&&this.getDatasetMeta(d.datasetIndex).controller;f&&f[l+"HoverStyle"](d.element,d.datasetIndex,d.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const a=this._active||[],r=e.map(({datasetIndex:o,index:d})=>{const u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[d],index:d}});!Pd(r,a)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,a))}notifyPlugins(e,a,r){return this._plugins.notify(this,e,a,r)}isPluginEnabled(e){return this._plugins._cache.filter(a=>a.plugin.id===e).length===1}_updateHoverStyles(e,a,r){const l=this.options.hover,o=(m,f)=>m.filter(p=>!f.some(y=>p.datasetIndex===y.datasetIndex&&p.index===y.index)),d=o(a,e),u=r?e:o(e,a);d.length&&this.updateHoverStyle(d,l.mode,!1),u.length&&l.mode&&this.updateHoverStyle(u,l.mode,!0)}_eventHandler(e,a){const r={event:e,replay:a,cancelable:!0,inChartArea:this.isPointInArea(e)},l=d=>(d.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,l)===!1)return;const o=this._handleEvent(e,a,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,l),(o||r.changed)&&this.render(),this}_handleEvent(e,a,r){const{_active:l=[],options:o}=this,d=a,u=this._getActiveElements(e,l,r,d),m=h3(e),f=uA(e,this._lastEvent,r,m);r&&(this._lastEvent=null,mt(o.onHover,[e,u,this],this),m&&mt(o.onClick,[e,u,this],this));const p=!Pd(u,l);return(p||a)&&(this._active=u,this._updateHoverStyles(u,l,a)),this._lastEvent=f,p}_getActiveElements(e,a,r,l){if(e.type==="mouseout")return[];if(!r)return a;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,l)}};function pv(){return nt(uu.instances,s=>s._plugins.invalidate())}function hA(s,e,a){const{startAngle:r,x:l,y:o,outerRadius:d,innerRadius:u,options:m}=e,{borderWidth:f,borderJoinStyle:p}=m,y=Math.min(f/d,Rs(r-a));if(s.beginPath(),s.arc(l,o,d-f/2,r+y/2,a-y/2),u>0){const v=Math.min(f/u,Rs(r-a));s.arc(l,o,u+f/2,a-v/2,r+v/2,!0)}else{const v=Math.min(f/2,d*Rs(r-a));if(p==="round")s.arc(l,o,v,a-rt/2,r+rt/2,!0);else if(p==="bevel"){const j=2*v*v,S=-j*Math.cos(a+rt/2)+l,C=-j*Math.sin(a+rt/2)+o,N=j*Math.cos(r+rt/2)+l,D=j*Math.sin(r+rt/2)+o;s.lineTo(S,C),s.lineTo(N,D)}}s.closePath(),s.moveTo(0,0),s.rect(0,0,s.canvas.width,s.canvas.height),s.clip("evenodd")}function mA(s,e,a){const{startAngle:r,pixelMargin:l,x:o,y:d,outerRadius:u,innerRadius:m}=e;let f=l/u;s.beginPath(),s.arc(o,d,u,r-f,a+f),m>l?(f=l/m,s.arc(o,d,m,a+f,r-f,!0)):s.arc(o,d,l,a+Vt,r-Vt),s.closePath(),s.clip()}function fA(s){return kp(s,["outerStart","outerEnd","innerStart","innerEnd"])}function pA(s,e,a,r){const l=fA(s.options.borderRadius),o=(a-e)/2,d=Math.min(o,r*e/2),u=m=>{const f=(a-Math.min(o,m))*r/2;return ss(m,0,Math.min(o,f))};return{outerStart:u(l.outerStart),outerEnd:u(l.outerEnd),innerStart:ss(l.innerStart,0,d),innerEnd:ss(l.innerEnd,0,d)}}function ki(s,e,a,r){return{x:a+s*Math.cos(e),y:r+s*Math.sin(e)}}function Vd(s,e,a,r,l,o){const{x:d,y:u,startAngle:m,pixelMargin:f,innerRadius:p}=e,y=Math.max(e.outerRadius+r+a-f,0),v=p>0?p+r+a+f:0;let j=0;const S=l-m;if(r){const Z=p>0?p-r:0,B=y>0?y-r:0,L=(Z+B)/2,Y=L!==0?S*L/(L+r):S;j=(S-Y)/2}const C=Math.max(.001,S*y-a/rt)/y,N=(S-C)/2,D=m+N+j,E=l-N-j,{outerStart:A,outerEnd:T,innerStart:w,innerEnd:_}=pA(e,v,y,E-D),R=y-A,z=y-T,H=D+A/R,q=E-T/z,ne=v+w,U=v+_,re=D+w/ne,fe=E-_/U;if(s.beginPath(),o){const Z=(H+q)/2;if(s.arc(d,u,y,H,Z),s.arc(d,u,y,Z,q),T>0){const O=ki(z,q,d,u);s.arc(O.x,O.y,T,q,E+Vt)}const B=ki(U,E,d,u);if(s.lineTo(B.x,B.y),_>0){const O=ki(U,fe,d,u);s.arc(O.x,O.y,_,E+Vt,fe+Math.PI)}const L=(E-_/v+(D+w/v))/2;if(s.arc(d,u,v,E-_/v,L,!0),s.arc(d,u,v,L,D+w/v,!0),w>0){const O=ki(ne,re,d,u);s.arc(O.x,O.y,w,re+Math.PI,D-Vt)}const Y=ki(R,D,d,u);if(s.lineTo(Y.x,Y.y),A>0){const O=ki(R,H,d,u);s.arc(O.x,O.y,A,D-Vt,H)}}else{s.moveTo(d,u);const Z=Math.cos(H)*y+d,B=Math.sin(H)*y+u;s.lineTo(Z,B);const L=Math.cos(q)*y+d,Y=Math.sin(q)*y+u;s.lineTo(L,Y)}s.closePath()}function gA(s,e,a,r,l){const{fullCircles:o,startAngle:d,circumference:u}=e;let m=e.endAngle;if(o){Vd(s,e,a,r,m,l);for(let f=0;f<o;++f)s.fill();isNaN(u)||(m=d+(u%yt||yt))}return Vd(s,e,a,r,m,l),s.fill(),m}function xA(s,e,a,r,l){const{fullCircles:o,startAngle:d,circumference:u,options:m}=e,{borderWidth:f,borderJoinStyle:p,borderDash:y,borderDashOffset:v,borderRadius:j}=m,S=m.borderAlign==="inner";if(!f)return;s.setLineDash(y||[]),s.lineDashOffset=v,S?(s.lineWidth=f*2,s.lineJoin=p||"round"):(s.lineWidth=f,s.lineJoin=p||"bevel");let C=e.endAngle;if(o){Vd(s,e,a,r,C,l);for(let N=0;N<o;++N)s.stroke();isNaN(u)||(C=d+(u%yt||yt))}S&&mA(s,e,C),m.selfJoin&&C-d>=rt&&j===0&&p!=="miter"&&hA(s,e,C),o||(Vd(s,e,a,r,C,l),s.stroke())}class yA extends dn{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,a,r){const l=this.getProps(["x","y"],r),{angle:o,distance:d}=xj(l,{x:e,y:a}),{startAngle:u,endAngle:m,innerRadius:f,outerRadius:p,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),v=(this.options.spacing+this.options.borderWidth)/2,j=Le(y,m-u),S=po(o,u,m)&&u!==m,C=j>=yt||S,N=sn(d,f+v,p+v);return C&&N}getCenterPoint(e){const{x:a,y:r,startAngle:l,endAngle:o,innerRadius:d,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:m,spacing:f}=this.options,p=(l+o)/2,y=(d+u+f+m)/2;return{x:a+Math.cos(p)*y,y:r+Math.sin(p)*y}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:a,circumference:r}=this,l=(a.offset||0)/4,o=(a.spacing||0)/2,d=a.circular;if(this.pixelMargin=a.borderAlign==="inner"?.33:0,this.fullCircles=r>yt?Math.floor(r/yt):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const u=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(u)*l,Math.sin(u)*l);const m=1-Math.sin(Math.min(rt,r||0)),f=l*m;e.fillStyle=a.backgroundColor,e.strokeStyle=a.borderColor,gA(e,this,f,o,d),xA(e,this,f,o,d),e.restore()}}function Wj(s,e,a=e){s.lineCap=Le(a.borderCapStyle,e.borderCapStyle),s.setLineDash(Le(a.borderDash,e.borderDash)),s.lineDashOffset=Le(a.borderDashOffset,e.borderDashOffset),s.lineJoin=Le(a.borderJoinStyle,e.borderJoinStyle),s.lineWidth=Le(a.borderWidth,e.borderWidth),s.strokeStyle=Le(a.borderColor,e.borderColor)}function bA(s,e,a){s.lineTo(a.x,a.y)}function vA(s){return s.stepped?B3:s.tension||s.cubicInterpolationMode==="monotone"?F3:bA}function Xj(s,e,a={}){const r=s.length,{start:l=0,end:o=r-1}=a,{start:d,end:u}=e,m=Math.max(l,d),f=Math.min(o,u),p=l<d&&o<d||l>u&&o>u;return{count:r,start:m,loop:e.loop,ilen:f<m&&!p?r+f-m:f-m}}function jA(s,e,a,r){const{points:l,options:o}=e,{count:d,start:u,loop:m,ilen:f}=Xj(l,a,r),p=vA(o);let{move:y=!0,reverse:v}=r||{},j,S,C;for(j=0;j<=f;++j)S=l[(u+(v?f-j:j))%d],!S.skip&&(y?(s.moveTo(S.x,S.y),y=!1):p(s,C,S,v,o.stepped),C=S);return m&&(S=l[(u+(v?f:0))%d],p(s,C,S,v,o.stepped)),!!m}function wA(s,e,a,r){const l=e.points,{count:o,start:d,ilen:u}=Xj(l,a,r),{move:m=!0,reverse:f}=r||{};let p=0,y=0,v,j,S,C,N,D;const E=T=>(d+(f?u-T:T))%o,A=()=>{C!==N&&(s.lineTo(p,N),s.lineTo(p,C),s.lineTo(p,D))};for(m&&(j=l[E(0)],s.moveTo(j.x,j.y)),v=0;v<=u;++v){if(j=l[E(v)],j.skip)continue;const T=j.x,w=j.y,_=T|0;_===S?(w<C?C=w:w>N&&(N=w),p=(y*p+T)/++y):(A(),s.lineTo(T,w),S=_,y=0,C=N=w),D=w}A()}function Hf(s){const e=s.options,a=e.borderDash&&e.borderDash.length;return!s._decimated&&!s._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!a?wA:jA}function NA(s){return s.stepped?yk:s.tension||s.cubicInterpolationMode==="monotone"?bk:Nr}function SA(s,e,a,r){let l=e._path;l||(l=e._path=new Path2D,e.path(l,a,r)&&l.closePath()),Wj(s,e.options),s.stroke(l)}function CA(s,e,a,r){const{segments:l,options:o}=e,d=Hf(e);for(const u of l)Wj(s,o,u.style),s.beginPath(),d(s,e,u,{start:a,end:a+r-1})&&s.closePath(),s.stroke()}const kA=typeof Path2D=="function";function _A(s,e,a,r){kA&&!e.options.segment?SA(s,e,a,r):CA(s,e,a,r)}class hu extends dn{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,a){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const l=r.spanGaps?this._loop:this._fullLoop;dk(this._points,r,e,l,a),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Ck(this,this.options.segment))}first(){const e=this.segments,a=this.points;return e.length&&a[e[0].start]}last(){const e=this.segments,a=this.points,r=e.length;return r&&a[e[r-1].end]}interpolate(e,a){const r=this.options,l=e[a],o=this.points,d=Lj(this,{property:a,start:l,end:l});if(!d.length)return;const u=[],m=NA(r);let f,p;for(f=0,p=d.length;f<p;++f){const{start:y,end:v}=d[f],j=o[y],S=o[v];if(j===S){u.push(j);continue}const C=Math.abs((l-j[a])/(S[a]-j[a])),N=m(j,S,C,r.stepped);N[a]=e[a],u.push(N)}return u.length===1?u[0]:u}pathSegment(e,a,r){return Hf(this)(e,this,a,r)}path(e,a,r){const l=this.segments,o=Hf(this);let d=this._loop;a=a||0,r=r||this.points.length-a;for(const u of l)d&=o(e,this,u,{start:a,end:a+r-1});return!!d}draw(e,a,r,l){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),_A(e,this,r,l),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function gv(s,e,a,r){const l=s.options,{[a]:o}=s.getProps([a],r);return Math.abs(e-o)<l.radius+l.hitRadius}class AA extends dn{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,a,r){const l=this.options,{x:o,y:d}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(a-d,2)<Math.pow(l.hitRadius+l.radius,2)}inXRange(e,a){return gv(this,e,"x",a)}inYRange(e,a){return gv(this,e,"y",a)}getCenterPoint(e){const{x:a,y:r}=this.getProps(["x","y"],e);return{x:a,y:r}}size(e){e=e||this.options||{};let a=e.radius||0;a=Math.max(a,a&&e.hoverRadius||0);const r=a&&e.borderWidth||0;return(a+r)*2}draw(e,a){const r=this.options;this.skip||r.radius<.1||!go(this,a,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,Uf(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Zj(s,e){const{x:a,y:r,base:l,width:o,height:d}=s.getProps(["x","y","base","width","height"],e);let u,m,f,p,y;return s.horizontal?(y=d/2,u=Math.min(a,l),m=Math.max(a,l),f=r-y,p=r+y):(y=o/2,u=a-y,m=a+y,f=Math.min(r,l),p=Math.max(r,l)),{left:u,top:f,right:m,bottom:p}}function Qn(s,e,a,r){return s?0:ss(e,a,r)}function EA(s,e,a){const r=s.options.borderWidth,l=s.borderSkipped,o=Sj(r);return{t:Qn(l.top,o.top,0,a),r:Qn(l.right,o.right,0,e),b:Qn(l.bottom,o.bottom,0,a),l:Qn(l.left,o.left,0,e)}}function TA(s,e,a){const{enableBorderRadius:r}=s.getProps(["enableBorderRadius"]),l=s.options.borderRadius,o=Ai(l),d=Math.min(e,a),u=s.borderSkipped,m=r||qe(l);return{topLeft:Qn(!m||u.top||u.left,o.topLeft,0,d),topRight:Qn(!m||u.top||u.right,o.topRight,0,d),bottomLeft:Qn(!m||u.bottom||u.left,o.bottomLeft,0,d),bottomRight:Qn(!m||u.bottom||u.right,o.bottomRight,0,d)}}function RA(s){const e=Zj(s),a=e.right-e.left,r=e.bottom-e.top,l=EA(s,a/2,r/2),o=TA(s,a/2,r/2);return{outer:{x:e.left,y:e.top,w:a,h:r,radius:o},inner:{x:e.left+l.l,y:e.top+l.t,w:a-l.l-l.r,h:r-l.t-l.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(l.t,l.l)),topRight:Math.max(0,o.topRight-Math.max(l.t,l.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(l.b,l.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(l.b,l.r))}}}}function nf(s,e,a,r){const l=e===null,o=a===null,u=s&&!(l&&o)&&Zj(s,r);return u&&(l||sn(e,u.left,u.right))&&(o||sn(a,u.top,u.bottom))}function DA(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function MA(s,e){s.rect(e.x,e.y,e.w,e.h)}function rf(s,e,a={}){const r=s.x!==a.x?-e:0,l=s.y!==a.y?-e:0,o=(s.x+s.w!==a.x+a.w?e:0)-r,d=(s.y+s.h!==a.y+a.h?e:0)-l;return{x:s.x+r,y:s.y+l,w:s.w+o,h:s.h+d,radius:s.radius}}class LA extends dn{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:a,options:{borderColor:r,backgroundColor:l}}=this,{inner:o,outer:d}=RA(this),u=DA(d.radius)?Fd:MA;e.save(),(d.w!==o.w||d.h!==o.h)&&(e.beginPath(),u(e,rf(d,a,o)),e.clip(),u(e,rf(o,-a,d)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),u(e,rf(o,a)),e.fillStyle=l,e.fill(),e.restore()}inRange(e,a,r){return nf(this,e,a,r)}inXRange(e,a){return nf(this,e,null,a)}inYRange(e,a){return nf(this,null,e,a)}getCenterPoint(e){const{x:a,y:r,base:l,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(a+l)/2:a,y:o?r:(r+l)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}function OA(s,e,a){const r=s.segments,l=s.points,o=e.points,d=[];for(const u of r){let{start:m,end:f}=u;f=mu(m,f,l);const p=qf(a,l[m],l[f],u.loop);if(!e.segments){d.push({source:u,target:p,start:l[m],end:l[f]});continue}const y=Lj(e,p);for(const v of y){const j=qf(a,o[v.start],o[v.end],v.loop),S=Mj(u,l,j);for(const C of S)d.push({source:C,target:v,start:{[a]:xv(p,j,"start",Math.max)},end:{[a]:xv(p,j,"end",Math.min)}})}}return d}function qf(s,e,a,r){if(r)return;let l=e[s],o=a[s];return s==="angle"&&(l=Rs(l),o=Rs(o)),{property:s,start:l,end:o}}function zA(s,e){const{x:a=null,y:r=null}=s||{},l=e.points,o=[];return e.segments.forEach(({start:d,end:u})=>{u=mu(d,u,l);const m=l[d],f=l[u];r!==null?(o.push({x:m.x,y:r}),o.push({x:f.x,y:r})):a!==null&&(o.push({x:a,y:m.y}),o.push({x:a,y:f.y}))}),o}function mu(s,e,a){for(;e>s;e--){const r=a[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function xv(s,e,a,r){return s&&e?r(s[a],e[a]):s?s[a]:e?e[a]:0}function Kj(s,e){let a=[],r=!1;return Lt(s)?(r=!0,a=s):a=zA(s,e),a.length?new hu({points:a,options:{tension:0},_loop:r,_fullLoop:r}):null}function yv(s){return s&&s.fill!==!1}function PA(s,e,a){let l=s[e].fill;const o=[e];let d;if(!a)return l;for(;l!==!1&&o.indexOf(l)===-1;){if(!ns(l))return l;if(d=s[l],!d)return!1;if(d.visible)return l;o.push(l),l=d.fill}return!1}function UA(s,e,a){const r=qA(s);if(qe(r))return isNaN(r.value)?!1:r;let l=parseFloat(r);return ns(l)&&Math.floor(l)===l?BA(r[0],e,l,a):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function BA(s,e,a,r){return(s==="-"||s==="+")&&(a=e+a),a===e||a<0||a>=r?!1:a}function FA(s,e){let a=null;return s==="start"?a=e.bottom:s==="end"?a=e.top:qe(s)?a=e.getPixelForValue(s.value):e.getBasePixel&&(a=e.getBasePixel()),a}function HA(s,e,a){let r;return s==="start"?r=a:s==="end"?r=e.options.reverse?e.min:e.max:qe(s)?r=s.value:r=e.getBaseValue(),r}function qA(s){const e=s.options,a=e.fill;let r=Le(a&&a.target,a);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function VA(s){const{scale:e,index:a,line:r}=s,l=[],o=r.segments,d=r.points,u=$A(e,a);u.push(Kj({x:null,y:e.bottom},r));for(let m=0;m<o.length;m++){const f=o[m];for(let p=f.start;p<=f.end;p++)IA(l,d[p],u)}return new hu({points:l,options:{}})}function $A(s,e){const a=[],r=s.getMatchingVisibleMetas("line");for(let l=0;l<r.length;l++){const o=r[l];if(o.index===e)break;o.hidden||a.unshift(o.dataset)}return a}function IA(s,e,a){const r=[];for(let l=0;l<a.length;l++){const o=a[l],{first:d,last:u,point:m}=QA(o,e,"x");if(!(!m||d&&u)){if(d)r.unshift(m);else if(s.push(m),!u)break}}s.push(...r)}function QA(s,e,a){const r=s.interpolate(e,a);if(!r)return{};const l=r[a],o=s.segments,d=s.points;let u=!1,m=!1;for(let f=0;f<o.length;f++){const p=o[f],y=d[p.start][a],v=d[p.end][a];if(sn(l,y,v)){u=l===y,m=l===v;break}}return{first:u,last:m,point:r}}class Jj{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,a,r){const{x:l,y:o,radius:d}=this;return a=a||{start:0,end:yt},e.arc(l,o,d,a.end,a.start,!0),!r.bounds}interpolate(e){const{x:a,y:r,radius:l}=this,o=e.angle;return{x:a+Math.cos(o)*l,y:r+Math.sin(o)*l,angle:o}}}function YA(s){const{chart:e,fill:a,line:r}=s;if(ns(a))return GA(e,a);if(a==="stack")return VA(s);if(a==="shape")return!0;const l=WA(s);return l instanceof Jj?l:Kj(l,r)}function GA(s,e){const a=s.getDatasetMeta(e);return a&&s.isDatasetVisible(e)?a.dataset:null}function WA(s){return(s.scale||{}).getPointPositionForValue?ZA(s):XA(s)}function XA(s){const{scale:e={},fill:a}=s,r=FA(a,e);if(ns(r)){const l=e.isHorizontal();return{x:l?r:null,y:l?null:r}}return null}function ZA(s){const{scale:e,fill:a}=s,r=e.options,l=e.getLabels().length,o=r.reverse?e.max:e.min,d=HA(a,e,o),u=[];if(r.grid.circular){const m=e.getPointPositionForValue(0,o);return new Jj({x:m.x,y:m.y,radius:e.getDistanceFromCenterForValue(d)})}for(let m=0;m<l;++m)u.push(e.getPointPositionForValue(m,d));return u}function lf(s,e,a){const r=YA(e),{chart:l,index:o,line:d,scale:u,axis:m}=e,f=d.options,p=f.fill,y=f.backgroundColor,{above:v=y,below:j=y}=p||{},S=l.getDatasetMeta(o),C=Oj(l,S);r&&d.points.length&&(iu(s,a),KA(s,{line:d,target:r,above:v,below:j,area:a,scale:u,axis:m,clip:C}),lu(s))}function KA(s,e){const{line:a,target:r,above:l,below:o,area:d,scale:u,clip:m}=e,f=a._loop?"angle":e.axis;s.save();let p=o;o!==l&&(f==="x"?(bv(s,r,d.top),of(s,{line:a,target:r,color:l,scale:u,property:f,clip:m}),s.restore(),s.save(),bv(s,r,d.bottom)):f==="y"&&(vv(s,r,d.left),of(s,{line:a,target:r,color:o,scale:u,property:f,clip:m}),s.restore(),s.save(),vv(s,r,d.right),p=l)),of(s,{line:a,target:r,color:p,scale:u,property:f,clip:m}),s.restore()}function bv(s,e,a){const{segments:r,points:l}=e;let o=!0,d=!1;s.beginPath();for(const u of r){const{start:m,end:f}=u,p=l[m],y=l[mu(m,f,l)];o?(s.moveTo(p.x,p.y),o=!1):(s.lineTo(p.x,a),s.lineTo(p.x,p.y)),d=!!e.pathSegment(s,u,{move:d}),d?s.closePath():s.lineTo(y.x,a)}s.lineTo(e.first().x,a),s.closePath(),s.clip()}function vv(s,e,a){const{segments:r,points:l}=e;let o=!0,d=!1;s.beginPath();for(const u of r){const{start:m,end:f}=u,p=l[m],y=l[mu(m,f,l)];o?(s.moveTo(p.x,p.y),o=!1):(s.lineTo(a,p.y),s.lineTo(p.x,p.y)),d=!!e.pathSegment(s,u,{move:d}),d?s.closePath():s.lineTo(a,y.y)}s.lineTo(a,e.first().y),s.closePath(),s.clip()}function of(s,e){const{line:a,target:r,property:l,color:o,scale:d,clip:u}=e,m=OA(a,r,l);for(const{source:f,target:p,start:y,end:v}of m){const{style:{backgroundColor:j=o}={}}=f,S=r!==!0;s.save(),s.fillStyle=j,JA(s,d,u,S&&qf(l,y,v)),s.beginPath();const C=!!a.pathSegment(s,f);let N;if(S){C?s.closePath():jv(s,r,v,l);const D=!!r.pathSegment(s,p,{move:C,reverse:!0});N=C&&D,N||jv(s,r,y,l)}s.closePath(),s.fill(N?"evenodd":"nonzero"),s.restore()}}function JA(s,e,a,r){const l=e.chart.chartArea,{property:o,start:d,end:u}=r||{};if(o==="x"||o==="y"){let m,f,p,y;o==="x"?(m=d,f=l.top,p=u,y=l.bottom):(m=l.left,f=d,p=l.right,y=u),s.beginPath(),a&&(m=Math.max(m,a.left),p=Math.min(p,a.right),f=Math.max(f,a.top),y=Math.min(y,a.bottom)),s.rect(m,f,p-m,y-f),s.clip()}}function jv(s,e,a,r){const l=e.interpolate(a,r);l&&s.lineTo(l.x,l.y)}var eE={id:"filler",afterDatasetsUpdate(s,e,a){const r=(s.data.datasets||[]).length,l=[];let o,d,u,m;for(d=0;d<r;++d)o=s.getDatasetMeta(d),u=o.dataset,m=null,u&&u.options&&u instanceof hu&&(m={visible:s.isDatasetVisible(d),index:d,fill:UA(u,d,r),chart:s,axis:o.controller.options.indexAxis,scale:o.vScale,line:u}),o.$filler=m,l.push(m);for(d=0;d<r;++d)m=l[d],!(!m||m.fill===!1)&&(m.fill=PA(l,d,a.propagate))},beforeDraw(s,e,a){const r=a.drawTime==="beforeDraw",l=s.getSortedVisibleDatasetMetas(),o=s.chartArea;for(let d=l.length-1;d>=0;--d){const u=l[d].$filler;u&&(u.line.updateControlPoints(o,u.axis),r&&u.fill&&lf(s.ctx,u,o))}},beforeDatasetsDraw(s,e,a){if(a.drawTime!=="beforeDatasetsDraw")return;const r=s.getSortedVisibleDatasetMetas();for(let l=r.length-1;l>=0;--l){const o=r[l].$filler;yv(o)&&lf(s.ctx,o,s.chartArea)}},beforeDatasetDraw(s,e,a){const r=e.meta.$filler;!yv(r)||a.drawTime!=="beforeDatasetDraw"||lf(s.ctx,r,s.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const wv=(s,e)=>{let{boxHeight:a=e,boxWidth:r=e}=s;return s.usePointStyle&&(a=Math.min(a,e),r=s.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:a,itemHeight:Math.max(e,a)}},tE=(s,e)=>s!==null&&e!==null&&s.datasetIndex===e.datasetIndex&&s.index===e.index;class Nv extends dn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,a,r){this.maxWidth=e,this.maxHeight=a,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let a=mt(e.generateLabels,[this.chart],this)||[];e.filter&&(a=a.filter(r=>e.filter(r,this.chart.data))),e.sort&&(a=a.sort((r,l)=>e.sort(r,l,this.chart.data))),this.options.reverse&&a.reverse(),this.legendItems=a}fit(){const{options:e,ctx:a}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,l=as(r.font),o=l.size,d=this._computeTitleHeight(),{boxWidth:u,itemHeight:m}=wv(r,o);let f,p;a.font=l.string,this.isHorizontal()?(f=this.maxWidth,p=this._fitRows(d,o,u,m)+10):(p=this.maxHeight,f=this._fitCols(d,l,u,m)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(p,e.maxHeight||this.maxHeight)}_fitRows(e,a,r,l){const{ctx:o,maxWidth:d,options:{labels:{padding:u}}}=this,m=this.legendHitBoxes=[],f=this.lineWidths=[0],p=l+u;let y=e;o.textAlign="left",o.textBaseline="middle";let v=-1,j=-p;return this.legendItems.forEach((S,C)=>{const N=r+a/2+o.measureText(S.text).width;(C===0||f[f.length-1]+N+2*u>d)&&(y+=p,f[f.length-(C>0?0:1)]=0,j+=p,v++),m[C]={left:0,top:j,row:v,width:N,height:l},f[f.length-1]+=N+u}),y}_fitCols(e,a,r,l){const{ctx:o,maxHeight:d,options:{labels:{padding:u}}}=this,m=this.legendHitBoxes=[],f=this.columnSizes=[],p=d-e;let y=u,v=0,j=0,S=0,C=0;return this.legendItems.forEach((N,D)=>{const{itemWidth:E,itemHeight:A}=sE(r,a,o,N,l);D>0&&j+A+2*u>p&&(y+=v+u,f.push({width:v,height:j}),S+=v+u,C++,v=j=0),m[D]={left:S,top:j,col:C,width:E,height:A},v=Math.max(v,E),j+=A+u}),y+=v,f.push({width:v,height:j}),y}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:a,options:{align:r,labels:{padding:l},rtl:o}}=this,d=Ei(o,this.left,this.width);if(this.isHorizontal()){let u=0,m=es(r,this.left+l,this.right-this.lineWidths[u]);for(const f of a)u!==f.row&&(u=f.row,m=es(r,this.left+l,this.right-this.lineWidths[u])),f.top+=this.top+e+l,f.left=d.leftForLtr(d.x(m),f.width),m+=f.width+l}else{let u=0,m=es(r,this.top+e+l,this.bottom-this.columnSizes[u].height);for(const f of a)f.col!==u&&(u=f.col,m=es(r,this.top+e+l,this.bottom-this.columnSizes[u].height)),f.top=m,f.left+=this.left+l,f.left=d.leftForLtr(d.x(f.left),f.width),m+=f.height+l}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;iu(e,this),this._draw(),lu(e)}}_draw(){const{options:e,columnSizes:a,lineWidths:r,ctx:l}=this,{align:o,labels:d}=e,u=kt.color,m=Ei(e.rtl,this.left,this.width),f=as(d.font),{padding:p}=d,y=f.size,v=y/2;let j;this.drawTitle(),l.textAlign=m.textAlign("left"),l.textBaseline="middle",l.lineWidth=.5,l.font=f.string;const{boxWidth:S,boxHeight:C,itemHeight:N}=wv(d,y),D=function(_,R,z){if(isNaN(S)||S<=0||isNaN(C)||C<0)return;l.save();const H=Le(z.lineWidth,1);if(l.fillStyle=Le(z.fillStyle,u),l.lineCap=Le(z.lineCap,"butt"),l.lineDashOffset=Le(z.lineDashOffset,0),l.lineJoin=Le(z.lineJoin,"miter"),l.lineWidth=H,l.strokeStyle=Le(z.strokeStyle,u),l.setLineDash(Le(z.lineDash,[])),d.usePointStyle){const q={radius:C*Math.SQRT2/2,pointStyle:z.pointStyle,rotation:z.rotation,borderWidth:H},ne=m.xPlus(_,S/2),U=R+v;Nj(l,q,ne,U,d.pointStyleWidth&&S)}else{const q=R+Math.max((y-C)/2,0),ne=m.leftForLtr(_,S),U=Ai(z.borderRadius);l.beginPath(),Object.values(U).some(re=>re!==0)?Fd(l,{x:ne,y:q,w:S,h:C,radius:U}):l.rect(ne,q,S,C),l.fill(),H!==0&&l.stroke()}l.restore()},E=function(_,R,z){xo(l,z.text,_,R+N/2,f,{strikethrough:z.hidden,textAlign:m.textAlign(z.textAlign)})},A=this.isHorizontal(),T=this._computeTitleHeight();A?j={x:es(o,this.left+p,this.right-r[0]),y:this.top+p+T,line:0}:j={x:this.left+p,y:es(o,this.top+T+p,this.bottom-a[0].height),line:0},Tj(this.ctx,e.textDirection);const w=N+p;this.legendItems.forEach((_,R)=>{l.strokeStyle=_.fontColor,l.fillStyle=_.fontColor;const z=l.measureText(_.text).width,H=m.textAlign(_.textAlign||(_.textAlign=d.textAlign)),q=S+v+z;let ne=j.x,U=j.y;m.setWidth(this.width),A?R>0&&ne+q+p>this.right&&(U=j.y+=w,j.line++,ne=j.x=es(o,this.left+p,this.right-r[j.line])):R>0&&U+w>this.bottom&&(ne=j.x=ne+a[j.line].width+p,j.line++,U=j.y=es(o,this.top+T+p,this.bottom-a[j.line].height));const re=m.x(ne);if(D(re,U,_),ne=k3(H,ne+S+v,A?ne+q:this.right,e.rtl),E(m.x(ne),U,_),A)j.x+=q+p;else if(typeof _.text!="string"){const fe=f.lineHeight;j.y+=e2(_,fe)+p}else j.y+=w}),Rj(this.ctx,e.textDirection)}drawTitle(){const e=this.options,a=e.title,r=as(a.font),l=Ws(a.padding);if(!a.display)return;const o=Ei(e.rtl,this.left,this.width),d=this.ctx,u=a.position,m=r.size/2,f=l.top+m;let p,y=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),p=this.top+f,y=es(e.align,y,this.right-v);else{const S=this.columnSizes.reduce((C,N)=>Math.max(C,N.height),0);p=f+es(e.align,this.top,this.bottom-S-e.labels.padding-this._computeTitleHeight())}const j=es(u,y,y+v);d.textAlign=o.textAlign(Np(u)),d.textBaseline="middle",d.strokeStyle=a.color,d.fillStyle=a.color,d.font=r.string,xo(d,a.text,j,p,r)}_computeTitleHeight(){const e=this.options.title,a=as(e.font),r=Ws(e.padding);return e.display?a.lineHeight+r.height:0}_getLegendItemAt(e,a){let r,l,o;if(sn(e,this.left,this.right)&&sn(a,this.top,this.bottom)){for(o=this.legendHitBoxes,r=0;r<o.length;++r)if(l=o[r],sn(e,l.left,l.left+l.width)&&sn(a,l.top,l.top+l.height))return this.legendItems[r]}return null}handleEvent(e){const a=this.options;if(!rE(e.type,a))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const l=this._hoveredItem,o=tE(l,r);l&&!o&&mt(a.onLeave,[e,l,this],this),this._hoveredItem=r,r&&!o&&mt(a.onHover,[e,r,this],this)}else r&&mt(a.onClick,[e,r,this],this)}}function sE(s,e,a,r,l){const o=aE(r,s,e,a),d=nE(l,r,e.lineHeight);return{itemWidth:o,itemHeight:d}}function aE(s,e,a,r){let l=s.text;return l&&typeof l!="string"&&(l=l.reduce((o,d)=>o.length>d.length?o:d)),e+a.size/2+r.measureText(l).width}function nE(s,e,a){let r=s;return typeof e.text!="string"&&(r=e2(e,a)),r}function e2(s,e){const a=s.text?s.text.length:0;return e*a}function rE(s,e){return!!((s==="mousemove"||s==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(s==="click"||s==="mouseup"))}var iE={id:"legend",_element:Nv,start(s,e,a){const r=s.legend=new Nv({ctx:s.ctx,options:a,chart:s});Ys.configure(s,r,a),Ys.addBox(s,r)},stop(s){Ys.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,e,a){const r=s.legend;Ys.configure(s,r,a),r.options=a},afterUpdate(s){const e=s.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(s,e){e.replay||s.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,e,a){const r=e.datasetIndex,l=a.chart;l.isDatasetVisible(r)?(l.hide(r),e.hidden=!0):(l.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const e=s.data.datasets,{labels:{usePointStyle:a,pointStyle:r,textAlign:l,color:o,useBorderRadius:d,borderRadius:u}}=s.legend.options;return s._getSortedDatasetMetas().map(m=>{const f=m.controller.getStyle(a?0:void 0),p=Ws(f.borderWidth);return{text:e[m.index].label,fillStyle:f.backgroundColor,fontColor:o,hidden:!m.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:f.borderColor,pointStyle:r||f.pointStyle,rotation:f.rotation,textAlign:l||f.textAlign,borderRadius:d&&(u||f.borderRadius),datasetIndex:m.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class t2 extends dn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,a){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=a;const l=Lt(r.text)?r.text.length:1;this._padding=Ws(r.padding);const o=l*as(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:a,left:r,bottom:l,right:o,options:d}=this,u=d.align;let m=0,f,p,y;return this.isHorizontal()?(p=es(u,r,o),y=a+e,f=o-r):(d.position==="left"?(p=r+e,y=es(u,l,a),m=rt*-.5):(p=o-e,y=es(u,a,l),m=rt*.5),f=l-a),{titleX:p,titleY:y,maxWidth:f,rotation:m}}draw(){const e=this.ctx,a=this.options;if(!a.display)return;const r=as(a.font),o=r.lineHeight/2+this._padding.top,{titleX:d,titleY:u,maxWidth:m,rotation:f}=this._drawArgs(o);xo(e,a.text,0,0,r,{color:a.color,maxWidth:m,rotation:f,textAlign:Np(a.align),textBaseline:"middle",translation:[d,u]})}}function lE(s,e){const a=new t2({ctx:s.ctx,options:e,chart:s});Ys.configure(s,a,e),Ys.addBox(s,a),s.titleBlock=a}var oE={id:"title",_element:t2,start(s,e,a){lE(s,a)},stop(s){const e=s.titleBlock;Ys.removeBox(s,e),delete s.titleBlock},beforeUpdate(s,e,a){const r=s.titleBlock;Ys.configure(s,r,a),r.options=a},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Zl={average(s){if(!s.length)return!1;let e,a,r=new Set,l=0,o=0;for(e=0,a=s.length;e<a;++e){const u=s[e].element;if(u&&u.hasValue()){const m=u.tooltipPosition();r.add(m.x),l+=m.y,++o}}return o===0||r.size===0?!1:{x:[...r].reduce((u,m)=>u+m)/r.size,y:l/o}},nearest(s,e){if(!s.length)return!1;let a=e.x,r=e.y,l=Number.POSITIVE_INFINITY,o,d,u;for(o=0,d=s.length;o<d;++o){const m=s[o].element;if(m&&m.hasValue()){const f=m.getCenterPoint(),p=zf(e,f);p<l&&(l=p,u=m)}}if(u){const m=u.tooltipPosition();a=m.x,r=m.y}return{x:a,y:r}}};function wa(s,e){return e&&(Lt(e)?Array.prototype.push.apply(s,e):s.push(e)),s}function Ja(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function cE(s,e){const{element:a,datasetIndex:r,index:l}=e,o=s.getDatasetMeta(r).controller,{label:d,value:u}=o.getLabelAndValue(l);return{chart:s,label:d,parsed:o.getParsed(l),raw:s.data.datasets[r].data[l],formattedValue:u,dataset:o.getDataset(),dataIndex:l,datasetIndex:r,element:a}}function Sv(s,e){const a=s.chart.ctx,{body:r,footer:l,title:o}=s,{boxWidth:d,boxHeight:u}=e,m=as(e.bodyFont),f=as(e.titleFont),p=as(e.footerFont),y=o.length,v=l.length,j=r.length,S=Ws(e.padding);let C=S.height,N=0,D=r.reduce((T,w)=>T+w.before.length+w.lines.length+w.after.length,0);if(D+=s.beforeBody.length+s.afterBody.length,y&&(C+=y*f.lineHeight+(y-1)*e.titleSpacing+e.titleMarginBottom),D){const T=e.displayColors?Math.max(u,m.lineHeight):m.lineHeight;C+=j*T+(D-j)*m.lineHeight+(D-1)*e.bodySpacing}v&&(C+=e.footerMarginTop+v*p.lineHeight+(v-1)*e.footerSpacing);let E=0;const A=function(T){N=Math.max(N,a.measureText(T).width+E)};return a.save(),a.font=f.string,nt(s.title,A),a.font=m.string,nt(s.beforeBody.concat(s.afterBody),A),E=e.displayColors?d+2+e.boxPadding:0,nt(r,T=>{nt(T.before,A),nt(T.lines,A),nt(T.after,A)}),E=0,a.font=p.string,nt(s.footer,A),a.restore(),N+=S.width,{width:N,height:C}}function dE(s,e){const{y:a,height:r}=e;return a<r/2?"top":a>s.height-r/2?"bottom":"center"}function uE(s,e,a,r){const{x:l,width:o}=r,d=a.caretSize+a.caretPadding;if(s==="left"&&l+o+d>e.width||s==="right"&&l-o-d<0)return!0}function hE(s,e,a,r){const{x:l,width:o}=a,{width:d,chartArea:{left:u,right:m}}=s;let f="center";return r==="center"?f=l<=(u+m)/2?"left":"right":l<=o/2?f="left":l>=d-o/2&&(f="right"),uE(f,s,e,a)&&(f="center"),f}function Cv(s,e,a){const r=a.yAlign||e.yAlign||dE(s,a);return{xAlign:a.xAlign||e.xAlign||hE(s,e,a,r),yAlign:r}}function mE(s,e){let{x:a,width:r}=s;return e==="right"?a-=r:e==="center"&&(a-=r/2),a}function fE(s,e,a){let{y:r,height:l}=s;return e==="top"?r+=a:e==="bottom"?r-=l+a:r-=l/2,r}function kv(s,e,a,r){const{caretSize:l,caretPadding:o,cornerRadius:d}=s,{xAlign:u,yAlign:m}=a,f=l+o,{topLeft:p,topRight:y,bottomLeft:v,bottomRight:j}=Ai(d);let S=mE(e,u);const C=fE(e,m,f);return m==="center"?u==="left"?S+=f:u==="right"&&(S-=f):u==="left"?S-=Math.max(p,v)+l:u==="right"&&(S+=Math.max(y,j)+l),{x:ss(S,0,r.width-e.width),y:ss(C,0,r.height-e.height)}}function yd(s,e,a){const r=Ws(a.padding);return e==="center"?s.x+s.width/2:e==="right"?s.x+s.width-r.right:s.x+r.left}function _v(s){return wa([],Ja(s))}function pE(s,e,a){return zr(s,{tooltip:e,tooltipItems:a,type:"tooltip"})}function Av(s,e){const a=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return a?s.override(a):s}const s2={beforeTitle:Za,title(s){if(s.length>0){const e=s[0],a=e.chart.data.labels,r=a?a.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return a[e.dataIndex]}return""},afterTitle:Za,beforeBody:Za,beforeLabel:Za,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let e=s.dataset.label||"";e&&(e+=": ");const a=s.formattedValue;return et(a)||(e+=a),e},labelColor(s){const a=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:a.borderColor,backgroundColor:a.backgroundColor,borderWidth:a.borderWidth,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const a=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:a.pointStyle,rotation:a.rotation}},afterLabel:Za,afterBody:Za,beforeFooter:Za,footer:Za,afterFooter:Za};function fs(s,e,a,r){const l=s[e].call(a,r);return typeof l>"u"?s2[e].call(a,r):l}class Ev extends dn{static positioners=Zl;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const a=this.chart,r=this.options.setContext(this.getContext()),l=r.enabled&&a.options.animation&&r.animations,o=new zj(this.chart,l);return l._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=pE(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,a){const{callbacks:r}=a,l=fs(r,"beforeTitle",this,e),o=fs(r,"title",this,e),d=fs(r,"afterTitle",this,e);let u=[];return u=wa(u,Ja(l)),u=wa(u,Ja(o)),u=wa(u,Ja(d)),u}getBeforeBody(e,a){return _v(fs(a.callbacks,"beforeBody",this,e))}getBody(e,a){const{callbacks:r}=a,l=[];return nt(e,o=>{const d={before:[],lines:[],after:[]},u=Av(r,o);wa(d.before,Ja(fs(u,"beforeLabel",this,o))),wa(d.lines,fs(u,"label",this,o)),wa(d.after,Ja(fs(u,"afterLabel",this,o))),l.push(d)}),l}getAfterBody(e,a){return _v(fs(a.callbacks,"afterBody",this,e))}getFooter(e,a){const{callbacks:r}=a,l=fs(r,"beforeFooter",this,e),o=fs(r,"footer",this,e),d=fs(r,"afterFooter",this,e);let u=[];return u=wa(u,Ja(l)),u=wa(u,Ja(o)),u=wa(u,Ja(d)),u}_createItems(e){const a=this._active,r=this.chart.data,l=[],o=[],d=[];let u=[],m,f;for(m=0,f=a.length;m<f;++m)u.push(cE(this.chart,a[m]));return e.filter&&(u=u.filter((p,y,v)=>e.filter(p,y,v,r))),e.itemSort&&(u=u.sort((p,y)=>e.itemSort(p,y,r))),nt(u,p=>{const y=Av(e.callbacks,p);l.push(fs(y,"labelColor",this,p)),o.push(fs(y,"labelPointStyle",this,p)),d.push(fs(y,"labelTextColor",this,p))}),this.labelColors=l,this.labelPointStyles=o,this.labelTextColors=d,this.dataPoints=u,u}update(e,a){const r=this.options.setContext(this.getContext()),l=this._active;let o,d=[];if(!l.length)this.opacity!==0&&(o={opacity:0});else{const u=Zl[r.position].call(this,l,this._eventPosition);d=this._createItems(r),this.title=this.getTitle(d,r),this.beforeBody=this.getBeforeBody(d,r),this.body=this.getBody(d,r),this.afterBody=this.getAfterBody(d,r),this.footer=this.getFooter(d,r);const m=this._size=Sv(this,r),f=Object.assign({},u,m),p=Cv(this.chart,r,f),y=kv(r,f,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,o={opacity:1,x:y.x,y:y.y,width:m.width,height:m.height,caretX:u.x,caretY:u.y}}this._tooltipItems=d,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(e,a,r,l){const o=this.getCaretPosition(e,r,l);a.lineTo(o.x1,o.y1),a.lineTo(o.x2,o.y2),a.lineTo(o.x3,o.y3)}getCaretPosition(e,a,r){const{xAlign:l,yAlign:o}=this,{caretSize:d,cornerRadius:u}=r,{topLeft:m,topRight:f,bottomLeft:p,bottomRight:y}=Ai(u),{x:v,y:j}=e,{width:S,height:C}=a;let N,D,E,A,T,w;return o==="center"?(T=j+C/2,l==="left"?(N=v,D=N-d,A=T+d,w=T-d):(N=v+S,D=N+d,A=T-d,w=T+d),E=N):(l==="left"?D=v+Math.max(m,p)+d:l==="right"?D=v+S-Math.max(f,y)-d:D=this.caretX,o==="top"?(A=j,T=A-d,N=D-d,E=D+d):(A=j+C,T=A+d,N=D+d,E=D-d),w=A),{x1:N,x2:D,x3:E,y1:A,y2:T,y3:w}}drawTitle(e,a,r){const l=this.title,o=l.length;let d,u,m;if(o){const f=Ei(r.rtl,this.x,this.width);for(e.x=yd(this,r.titleAlign,r),a.textAlign=f.textAlign(r.titleAlign),a.textBaseline="middle",d=as(r.titleFont),u=r.titleSpacing,a.fillStyle=r.titleColor,a.font=d.string,m=0;m<o;++m)a.fillText(l[m],f.x(e.x),e.y+d.lineHeight/2),e.y+=d.lineHeight+u,m+1===o&&(e.y+=r.titleMarginBottom-u)}}_drawColorBox(e,a,r,l,o){const d=this.labelColors[r],u=this.labelPointStyles[r],{boxHeight:m,boxWidth:f}=o,p=as(o.bodyFont),y=yd(this,"left",o),v=l.x(y),j=m<p.lineHeight?(p.lineHeight-m)/2:0,S=a.y+j;if(o.usePointStyle){const C={radius:Math.min(f,m)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},N=l.leftForLtr(v,f)+f/2,D=S+m/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Uf(e,C,N,D),e.strokeStyle=d.borderColor,e.fillStyle=d.backgroundColor,Uf(e,C,N,D)}else{e.lineWidth=qe(d.borderWidth)?Math.max(...Object.values(d.borderWidth)):d.borderWidth||1,e.strokeStyle=d.borderColor,e.setLineDash(d.borderDash||[]),e.lineDashOffset=d.borderDashOffset||0;const C=l.leftForLtr(v,f),N=l.leftForLtr(l.xPlus(v,1),f-2),D=Ai(d.borderRadius);Object.values(D).some(E=>E!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Fd(e,{x:C,y:S,w:f,h:m,radius:D}),e.fill(),e.stroke(),e.fillStyle=d.backgroundColor,e.beginPath(),Fd(e,{x:N,y:S+1,w:f-2,h:m-2,radius:D}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(C,S,f,m),e.strokeRect(C,S,f,m),e.fillStyle=d.backgroundColor,e.fillRect(N,S+1,f-2,m-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,a,r){const{body:l}=this,{bodySpacing:o,bodyAlign:d,displayColors:u,boxHeight:m,boxWidth:f,boxPadding:p}=r,y=as(r.bodyFont);let v=y.lineHeight,j=0;const S=Ei(r.rtl,this.x,this.width),C=function(z){a.fillText(z,S.x(e.x+j),e.y+v/2),e.y+=v+o},N=S.textAlign(d);let D,E,A,T,w,_,R;for(a.textAlign=d,a.textBaseline="middle",a.font=y.string,e.x=yd(this,N,r),a.fillStyle=r.bodyColor,nt(this.beforeBody,C),j=u&&N!=="right"?d==="center"?f/2+p:f+2+p:0,T=0,_=l.length;T<_;++T){for(D=l[T],E=this.labelTextColors[T],a.fillStyle=E,nt(D.before,C),A=D.lines,u&&A.length&&(this._drawColorBox(a,e,T,S,r),v=Math.max(y.lineHeight,m)),w=0,R=A.length;w<R;++w)C(A[w]),v=y.lineHeight;nt(D.after,C)}j=0,v=y.lineHeight,nt(this.afterBody,C),e.y-=o}drawFooter(e,a,r){const l=this.footer,o=l.length;let d,u;if(o){const m=Ei(r.rtl,this.x,this.width);for(e.x=yd(this,r.footerAlign,r),e.y+=r.footerMarginTop,a.textAlign=m.textAlign(r.footerAlign),a.textBaseline="middle",d=as(r.footerFont),a.fillStyle=r.footerColor,a.font=d.string,u=0;u<o;++u)a.fillText(l[u],m.x(e.x),e.y+d.lineHeight/2),e.y+=d.lineHeight+r.footerSpacing}}drawBackground(e,a,r,l){const{xAlign:o,yAlign:d}=this,{x:u,y:m}=e,{width:f,height:p}=r,{topLeft:y,topRight:v,bottomLeft:j,bottomRight:S}=Ai(l.cornerRadius);a.fillStyle=l.backgroundColor,a.strokeStyle=l.borderColor,a.lineWidth=l.borderWidth,a.beginPath(),a.moveTo(u+y,m),d==="top"&&this.drawCaret(e,a,r,l),a.lineTo(u+f-v,m),a.quadraticCurveTo(u+f,m,u+f,m+v),d==="center"&&o==="right"&&this.drawCaret(e,a,r,l),a.lineTo(u+f,m+p-S),a.quadraticCurveTo(u+f,m+p,u+f-S,m+p),d==="bottom"&&this.drawCaret(e,a,r,l),a.lineTo(u+j,m+p),a.quadraticCurveTo(u,m+p,u,m+p-j),d==="center"&&o==="left"&&this.drawCaret(e,a,r,l),a.lineTo(u,m+y),a.quadraticCurveTo(u,m,u+y,m),a.closePath(),a.fill(),l.borderWidth>0&&a.stroke()}_updateAnimationTarget(e){const a=this.chart,r=this.$animations,l=r&&r.x,o=r&&r.y;if(l||o){const d=Zl[e.position].call(this,this._active,this._eventPosition);if(!d)return;const u=this._size=Sv(this,e),m=Object.assign({},d,this._size),f=Cv(a,e,m),p=kv(e,m,f,a);(l._to!==p.x||o._to!==p.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=u.width,this.height=u.height,this.caretX=d.x,this.caretY=d.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(e){const a=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(a);const l={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const d=Ws(a.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;a.enabled&&u&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,l,a),Tj(e,a.textDirection),o.y+=d.top,this.drawTitle(o,e,a),this.drawBody(o,e,a),this.drawFooter(o,e,a),Rj(e,a.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,a){const r=this._active,l=e.map(({datasetIndex:u,index:m})=>{const f=this.chart.getDatasetMeta(u);if(!f)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:f.data[m],index:m}}),o=!Pd(r,l),d=this._positionChanged(l,a);(o||d)&&(this._active=l,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,a,r=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const l=this.options,o=this._active||[],d=this._getActiveElements(e,o,a,r),u=this._positionChanged(d,e),m=a||!Pd(d,o)||u;return m&&(this._active=d,(l.enabled||l.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,a))),m}_getActiveElements(e,a,r,l){const o=this.options;if(e.type==="mouseout")return[];if(!l)return a.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const d=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&d.reverse(),d}_positionChanged(e,a){const{caretX:r,caretY:l,options:o}=this,d=Zl[o.position].call(this,e,a);return d!==!1&&(r!==d.x||l!==d.y)}}var gE={id:"tooltip",_element:Ev,positioners:Zl,afterInit(s,e,a){a&&(s.tooltip=new Ev({chart:s,options:a}))},beforeUpdate(s,e,a){s.tooltip&&s.tooltip.initialize(a)},reset(s,e,a){s.tooltip&&s.tooltip.initialize(a)},afterDraw(s){const e=s.tooltip;if(e&&e._willRender()){const a={tooltip:e};if(s.notifyPlugins("beforeTooltipDraw",{...a,cancelable:!0})===!1)return;e.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",a)}},afterEvent(s,e){if(s.tooltip){const a=e.replay;s.tooltip.handleEvent(e.event,a,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,e)=>e.bodyFont.size,boxWidth:(s,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:s2},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const xE=(s,e,a,r)=>(typeof e=="string"?(a=s.push(e)-1,r.unshift({index:a,label:e})):isNaN(e)&&(a=null),a);function yE(s,e,a,r){const l=s.indexOf(e);if(l===-1)return xE(s,e,a,r);const o=s.lastIndexOf(e);return l!==o?a:l}const bE=(s,e)=>s===null?null:ss(Math.round(s),0,e);function Tv(s){const e=this.getLabels();return s>=0&&s<e.length?e[s]:s}class vE extends Vi{static id="category";static defaults={ticks:{callback:Tv}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const a=this._addedLabels;if(a.length){const r=this.getLabels();for(const{index:l,label:o}of a)r[l]===o&&r.splice(l,1);this._addedLabels=[]}super.init(e)}parse(e,a){if(et(e))return null;const r=this.getLabels();return a=isFinite(a)&&r[a]===e?a:yE(r,e,Le(a,e),this._addedLabels),bE(a,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:a}=this.getUserBounds();let{min:r,max:l}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),a||(l=this.getLabels().length-1)),this.min=r,this.max=l}buildTicks(){const e=this.min,a=this.max,r=this.options.offset,l=[];let o=this.getLabels();o=e===0&&a===o.length-1?o:o.slice(e,a+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let d=e;d<=a;d++)l.push({value:d});return l}getLabelForValue(e){return Tv.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const a=this.ticks;return e<0||e>a.length-1?null:this.getPixelForValue(a[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function jE(s,e){const a=[],{bounds:l,step:o,min:d,max:u,precision:m,count:f,maxTicks:p,maxDigits:y,includeBounds:v}=s,j=o||1,S=p-1,{min:C,max:N}=e,D=!et(d),E=!et(u),A=!et(f),T=(N-C)/(y+1);let w=kb((N-C)/S/j)*j,_,R,z,H;if(w<1e-14&&!D&&!E)return[{value:C},{value:N}];H=Math.ceil(N/w)-Math.floor(C/w),H>S&&(w=kb(H*w/S/j)*j),et(m)||(_=Math.pow(10,m),w=Math.ceil(w*_)/_),l==="ticks"?(R=Math.floor(C/w)*w,z=Math.ceil(N/w)*w):(R=C,z=N),D&&E&&o&&x3((u-d)/o,w/1e3)?(H=Math.round(Math.min((u-d)/w,p)),w=(u-d)/H,R=d,z=u):A?(R=D?d:R,z=E?u:z,H=f-1,w=(z-R)/H):(H=(z-R)/w,so(H,Math.round(H),w/1e3)?H=Math.round(H):H=Math.ceil(H));const q=Math.max(_b(w),_b(R));_=Math.pow(10,et(m)?q:m),R=Math.round(R*_)/_,z=Math.round(z*_)/_;let ne=0;for(D&&(v&&R!==d?(a.push({value:d}),R<d&&ne++,so(Math.round((R+ne*w)*_)/_,d,Rv(d,T,s))&&ne++):R<d&&ne++);ne<H;++ne){const U=Math.round((R+ne*w)*_)/_;if(E&&U>u)break;a.push({value:U})}return E&&v&&z!==u?a.length&&so(a[a.length-1].value,u,Rv(u,T,s))?a[a.length-1].value=u:a.push({value:u}):(!E||z===u)&&a.push({value:z}),a}function Rv(s,e,{horizontal:a,minRotation:r}){const l=tn(r),o=(a?Math.sin(l):Math.cos(l))||.001,d=.75*e*(""+s).length;return Math.min(e/o,d)}class wE extends Vi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,a){return et(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:a,maxDefined:r}=this.getUserBounds();let{min:l,max:o}=this;const d=m=>l=a?l:m,u=m=>o=r?o:m;if(e){const m=ka(l),f=ka(o);m<0&&f<0?u(0):m>0&&f>0&&d(0)}if(l===o){let m=o===0?1:Math.abs(o*.05);u(o+m),e||d(l-m)}this.min=l,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:a,stepSize:r}=e,l;return r?(l=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,l>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${l} ticks. Limiting to 1000.`),l=1e3)):(l=this.computeTickLimit(),a=a||11),a&&(l=Math.min(a,l)),l}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,a=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const l={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:a.precision,step:a.stepSize,count:a.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:a.minRotation||0,includeBounds:a.includeBounds!==!1},o=this._range||this,d=jE(l,o);return e.bounds==="ticks"&&y3(d,this,"value"),e.reverse?(d.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),d}configure(){const e=this.ticks;let a=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const l=(r-a)/Math.max(e.length-1,1)/2;a-=l,r+=l}this._startValue=a,this._endValue=r,this._valueRange=r-a}getLabelForValue(e){return Cp(e,this.chart.options.locale,this.options.ticks.format)}}class NE extends wE{static id="linear";static defaults={ticks:{callback:wj.formatters.numeric}};determineDataLimits(){const{min:e,max:a}=this.getMinMax(!0);this.min=ns(e)?e:0,this.max=ns(a)?a:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),a=e?this.width:this.height,r=tn(this.options.ticks.minRotation),l=(e?Math.sin(r):Math.cos(r))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(a/Math.min(40,o.lineHeight/l))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const fu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ys=Object.keys(fu);function Dv(s,e){return s-e}function Mv(s,e){if(et(e))return null;const a=s._adapter,{parser:r,round:l,isoWeekday:o}=s._parseOpts;let d=e;return typeof r=="function"&&(d=r(d)),ns(d)||(d=typeof r=="string"?a.parse(d,r):a.parse(d)),d===null?null:(l&&(d=l==="week"&&(fo(o)||o===!0)?a.startOf(d,"isoWeek",o):a.startOf(d,l)),+d)}function Lv(s,e,a,r){const l=ys.length;for(let o=ys.indexOf(s);o<l-1;++o){const d=fu[ys[o]],u=d.steps?d.steps:Number.MAX_SAFE_INTEGER;if(d.common&&Math.ceil((a-e)/(u*d.size))<=r)return ys[o]}return ys[l-1]}function SE(s,e,a,r,l){for(let o=ys.length-1;o>=ys.indexOf(a);o--){const d=ys[o];if(fu[d].common&&s._adapter.diff(l,r,d)>=e-1)return d}return ys[a?ys.indexOf(a):0]}function CE(s){for(let e=ys.indexOf(s)+1,a=ys.length;e<a;++e)if(fu[ys[e]].common)return ys[e]}function Ov(s,e,a){if(!a)s[e]=!0;else if(a.length){const{lo:r,hi:l}=wp(a,e),o=a[r]>=e?a[r]:a[l];s[o]=!0}}function kE(s,e,a,r){const l=s._adapter,o=+l.startOf(e[0].value,r),d=e[e.length-1].value;let u,m;for(u=o;u<=d;u=+l.add(u,1,r))m=a[u],m>=0&&(e[m].major=!0);return e}function zv(s,e,a){const r=[],l={},o=e.length;let d,u;for(d=0;d<o;++d)u=e[d],l[u]=d,r.push({value:u,major:!1});return o===0||!a?r:kE(s,r,l,a)}class Pv extends Vi{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,a={}){const r=e.time||(e.time={}),l=this._adapter=new a_._date(e.adapters.date);l.init(a),to(r.displayFormats,l.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=a.normalized}parse(e,a){return e===void 0?null:Mv(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,a=this._adapter,r=e.time.unit||"day";let{min:l,max:o,minDefined:d,maxDefined:u}=this.getUserBounds();function m(f){!d&&!isNaN(f.min)&&(l=Math.min(l,f.min)),!u&&!isNaN(f.max)&&(o=Math.max(o,f.max))}(!d||!u)&&(m(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&m(this.getMinMax(!1))),l=ns(l)&&!isNaN(l)?l:+a.startOf(Date.now(),r),o=ns(o)&&!isNaN(o)?o:+a.endOf(Date.now(),r)+1,this.min=Math.min(l,o-1),this.max=Math.max(l+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(a=e[0],r=e[e.length-1]),{min:a,max:r}}buildTicks(){const e=this.options,a=e.time,r=e.ticks,l=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&l.length&&(this.min=this._userMin||l[0],this.max=this._userMax||l[l.length-1]);const o=this.min,d=this.max,u=N3(l,o,d);return this._unit=a.unit||(r.autoSkip?Lv(a.minUnit,this.min,this.max,this._getLabelCapacity(o)):SE(this,u.length,a.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:CE(this._unit),this.initOffsets(l),e.reverse&&u.reverse(),zv(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let a=0,r=0,l,o;this.options.offset&&e.length&&(l=this.getDecimalForValue(e[0]),e.length===1?a=1-l:a=(this.getDecimalForValue(e[1])-l)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?r=o:r=(o-this.getDecimalForValue(e[e.length-2]))/2);const d=e.length<3?.5:.25;a=ss(a,0,d),r=ss(r,0,d),this._offsets={start:a,end:r,factor:1/(a+1+r)}}_generate(){const e=this._adapter,a=this.min,r=this.max,l=this.options,o=l.time,d=o.unit||Lv(o.minUnit,a,r,this._getLabelCapacity(a)),u=Le(l.ticks.stepSize,1),m=d==="week"?o.isoWeekday:!1,f=fo(m)||m===!0,p={};let y=a,v,j;if(f&&(y=+e.startOf(y,"isoWeek",m)),y=+e.startOf(y,f?"day":d),e.diff(r,a,d)>1e5*u)throw new Error(a+" and "+r+" are too far apart with stepSize of "+u+" "+d);const S=l.ticks.source==="data"&&this.getDataTimestamps();for(v=y,j=0;v<r;v=+e.add(v,u,d),j++)Ov(p,v,S);return(v===r||l.bounds==="ticks"||j===1)&&Ov(p,v,S),Object.keys(p).sort(Dv).map(C=>+C)}getLabelForValue(e){const a=this._adapter,r=this.options.time;return r.tooltipFormat?a.format(e,r.tooltipFormat):a.format(e,r.displayFormats.datetime)}format(e,a){const l=this.options.time.displayFormats,o=this._unit,d=a||l[o];return this._adapter.format(e,d)}_tickFormatFunction(e,a,r,l){const o=this.options,d=o.ticks.callback;if(d)return mt(d,[e,a,r],this);const u=o.time.displayFormats,m=this._unit,f=this._majorUnit,p=m&&u[m],y=f&&u[f],v=r[a],j=f&&y&&v&&v.major;return this._adapter.format(e,l||(j?y:p))}generateTickLabels(e){let a,r,l;for(a=0,r=e.length;a<r;++a)l=e[a],l.label=this._tickFormatFunction(l.value,a,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const a=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((a.start+r)*a.factor)}getValueForPixel(e){const a=this._offsets,r=this.getDecimalForPixel(e)/a.factor-a.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const a=this.options.ticks,r=this.ctx.measureText(e).width,l=tn(this.isHorizontal()?a.maxRotation:a.minRotation),o=Math.cos(l),d=Math.sin(l),u=this._resolveTickFontOptions(0).size;return{w:r*o+u*d,h:r*d+u*o}}_getLabelCapacity(e){const a=this.options.time,r=a.displayFormats,l=r[a.unit]||r.millisecond,o=this._tickFormatFunction(e,0,zv(this,[e],this._majorUnit),l),d=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/d.w:this.height/d.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],a,r;if(e.length)return e;const l=this.getMatchingVisibleMetas();if(this._normalized&&l.length)return this._cache.data=l[0].controller.getAllParsedValues(this);for(a=0,r=l.length;a<r;++a)e=e.concat(l[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let a,r;if(e.length)return e;const l=this.getLabels();for(a=0,r=l.length;a<r;++a)e.push(Mv(this,l[a]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return bj(e.sort(Dv))}}function bd(s,e,a){let r=0,l=s.length-1,o,d,u,m;a?(e>=s[r].pos&&e<=s[l].pos&&({lo:r,hi:l}=kr(s,"pos",e)),{pos:o,time:u}=s[r],{pos:d,time:m}=s[l]):(e>=s[r].time&&e<=s[l].time&&({lo:r,hi:l}=kr(s,"time",e)),{time:o,pos:u}=s[r],{time:d,pos:m}=s[l]);const f=d-o;return f?u+(m-u)*(e-o)/f:u}class rM extends Pv{static id="timeseries";static defaults=Pv.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),a=this._table=this.buildLookupTable(e);this._minPos=bd(a,this.min),this._tableRange=bd(a,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:a,max:r}=this,l=[],o=[];let d,u,m,f,p;for(d=0,u=e.length;d<u;++d)f=e[d],f>=a&&f<=r&&l.push(f);if(l.length<2)return[{time:a,pos:0},{time:r,pos:1}];for(d=0,u=l.length;d<u;++d)p=l[d+1],m=l[d-1],f=l[d],Math.round((p+m)/2)!==f&&o.push({time:f,pos:d/(u-1)});return o}_generate(){const e=this.min,a=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(a)||r.length===1)&&r.push(a),r.sort((l,o)=>l-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const a=this.getDataTimestamps(),r=this.getLabelTimestamps();return a.length&&r.length?e=this.normalize(a.concat(r)):e=a.length?a:r,e=this._cache.all=e,e}getDecimalForValue(e){return(bd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const a=this._offsets,r=this.getDecimalForPixel(e)/a.factor-a.end;return bd(this._table,r*this._tableRange+this._minPos,!0)}}const a2="label";function Uv(s,e){typeof s=="function"?s(e):s&&(s.current=e)}function _E(s,e){const a=s.options;a&&e&&Object.assign(a,e)}function n2(s,e){s.labels=e}function r2(s,e,a=a2){const r=[];s.datasets=e.map(l=>{const o=s.datasets.find(d=>d[a]===l[a]);return!o||!l.data||r.includes(o)?{...l}:(r.push(o),Object.assign(o,l),o)})}function AE(s,e=a2){const a={labels:[],datasets:[]};return n2(a,s.labels),r2(a,s.datasets,e),a}function EE(s,e){const{height:a=150,width:r=300,redraw:l=!1,datasetIdKey:o,type:d,data:u,options:m,plugins:f=[],fallbackContent:p,updateMode:y,...v}=s,j=b.useRef(null),S=b.useRef(null),C=()=>{j.current&&(S.current=new uu(j.current,{type:d,data:AE(u,o),options:m&&{...m},plugins:f}),Uv(e,S.current))},N=()=>{Uv(e,null),S.current&&(S.current.destroy(),S.current=null)};return b.useEffect(()=>{!l&&S.current&&m&&_E(S.current,m)},[l,m]),b.useEffect(()=>{!l&&S.current&&n2(S.current.config.data,u.labels)},[l,u.labels]),b.useEffect(()=>{!l&&S.current&&u.datasets&&r2(S.current.config.data,u.datasets,o)},[l,u.datasets]),b.useEffect(()=>{S.current&&(l?(N(),setTimeout(C)):S.current.update(y))},[l,m,u.labels,u.datasets,y]),b.useEffect(()=>{S.current&&(N(),setTimeout(C))},[d]),b.useEffect(()=>(C(),()=>N()),[]),t.jsx("canvas",{ref:j,role:"img",height:a,width:r,...v,children:p})}const TE=b.forwardRef(EE);function pu(s,e){return uu.register(e),b.forwardRef((a,r)=>t.jsx(TE,{...a,ref:r,type:s}))}const Mo=pu("line",t_),js=pu("bar",Jk),ws=pu("doughnut",Bj),RE=pu("pie",s_);uu.register(vE,NE,AA,hu,LA,yA,oE,gE,iE,eE);function DE(){tt("Admin Dashboard");const[s,e]=b.useState(null),[a,r]=b.useState(!0),[l,o]=b.useState(null);b.useEffect(()=>{r(!0),PC().then(y=>{e(y),o(null)}).catch(y=>{console.error("Dashboard stats error:",y),o("Failed to load dashboard stats"),e(null)}).finally(()=>r(!1))},[]);const d=s?.completionHistory?{labels:s.completionHistory.map(y=>y.date),datasets:[{label:"Course Completions",data:s.completionHistory.map(y=>y.count),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4}]}:null,u=s?.registrationHistory?{labels:s.registrationHistory.map(y=>y.date),datasets:[{label:"New Users",data:s.registrationHistory.map(y=>y.count),backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgb(34, 197, 94)",borderWidth:1}]}:null,m=s?{labels:["Active","Inactive","Suspended"],datasets:[{data:[s.activeUsers||0,s.inactiveUsers||0,s.suspendedUsers||0],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(156, 163, 175, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["rgb(34, 197, 94)","rgb(156, 163, 175)","rgb(239, 68, 68)"],borderWidth:1}]}:null,f=s?{labels:["Active","Archived"],datasets:[{data:[s.activeCourses||0,s.archivedCourses||0],backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(156, 163, 175, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(156, 163, 175)"],borderWidth:1}]}:null,p={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"}}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Admin Dashboard"}),l&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:l}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"shrink-0",children:t.jsx("svg",{className:"h-12 w-12 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a?t.jsx("span",{className:"animate-pulse text-gray-300",children:"..."}):s?.totalUsers??"--"})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"shrink-0",children:t.jsx("svg",{className:"h-12 w-12 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Courses"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a?t.jsx("span",{className:"animate-pulse text-gray-300",children:"..."}):s?.totalCourses??"--"})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"shrink-0",children:t.jsx("svg",{className:"h-12 w-12 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Learning Pathways"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a?t.jsx("span",{className:"animate-pulse text-gray-300",children:"..."}):s?.totalPathways??"--"})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"shrink-0",children:t.jsx("svg",{className:"h-12 w-12 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Lessons"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a?t.jsx("span",{className:"animate-pulse text-gray-300",children:"..."}):s?.totalEnrollments??"--"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s?.completedEnrollments??"--"," completed, ",s?.inProgressEnrollments??"--"," in progress"]})]})]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Course Completions (Last 12 Months)"}),t.jsx("div",{style:{height:"250px"},children:a?t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx("span",{className:"text-gray-400 animate-pulse",children:"Loading chart..."})}):d?t.jsx(Mo,{data:d,options:p}):t.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No data available"})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"User Registrations (Last 12 Months)"}),t.jsx("div",{style:{height:"250px"},children:a?t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx("span",{className:"text-gray-400 animate-pulse",children:"Loading chart..."})}):u?t.jsx(js,{data:u,options:p}):t.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No data available"})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"User Status Distribution"}),t.jsx("div",{style:{height:"250px"},children:a?t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx("span",{className:"text-gray-400 animate-pulse",children:"Loading chart..."})}):m?t.jsx(ws,{data:m,options:p}):t.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No data available"})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Course Status Distribution"}),t.jsx("div",{style:{height:"250px"},children:a?t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx("span",{className:"text-gray-400 animate-pulse",children:"Loading chart..."})}):f?t.jsx(ws,{data:f,options:p}):t.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No data available"})})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"})}),t.jsx("div",{className:"p-6",children:t.jsx("ul",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:a?t.jsx("li",{className:"py-2 text-gray-300 text-center animate-pulse",children:"Loading..."}):!s||!s.recentActivities||s.recentActivities.length===0?t.jsx("li",{className:"py-2 text-gray-400 text-center",children:"No recent activities."}):s.recentActivities.map((y,v)=>t.jsxs("li",{className:"py-2 flex items-center gap-2",children:[t.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-blue-500 mr-2"}),t.jsx("span",{className:"text-sm text-gray-700",children:y.text}),t.jsx("span",{className:"ml-auto text-xs text-gray-400",children:y.date})]},v))})})]})]})]})}function gu({currentPage:s=1,totalPages:e=1,pageSize:a=10,totalCount:r=0,onPageChange:l,onPageSizeChange:o}){const d=r===0?0:(s-1)*a+1,u=Math.min(s*a,r),f=(()=>{const p=[];if(e<=5)for(let v=1;v<=e;v++)p.push(v);else{p.push(1),s>3&&p.push("...");const v=Math.max(2,s-1),j=Math.min(e-1,s+1);for(let S=v;S<=j;S++)p.includes(S)||p.push(S);s<e-2&&p.push("..."),p.includes(e)||p.push(e)}return p})();return t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t bg-white",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("span",{className:"text-sm text-gray-700",children:["Showing ",d," to ",u," of ",r," entries"]}),o&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{htmlFor:"pageSize",className:"text-sm text-gray-700",children:"Display"}),t.jsxs("select",{id:"pageSize",value:a,onChange:p=>o(Number(p.target.value)),className:"border border-gray-300 rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:10,children:"10"}),t.jsx("option",{value:20,children:"20"}),t.jsx("option",{value:50,children:"50"}),t.jsx("option",{value:100,children:"100"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>l(s-1),disabled:s===1,className:`px-3 py-1.5 rounded text-sm font-medium ${s===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"<"}),f.map((p,y)=>p==="..."?t.jsx("span",{className:"px-3 py-1.5 text-gray-500",children:"..."},`ellipsis-${y}`):t.jsx("button",{onClick:()=>l(p),className:`px-3 py-1.5 rounded text-sm font-medium min-w-10 ${s===p?"bg-blue-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:p},p)),t.jsx("button",{onClick:()=>l(s+1),disabled:s===e,className:`px-3 py-1.5 rounded text-sm font-medium ${s===e?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:">"})]})]})}async function ME(s={}){const{page:e=1,pageSize:a=20,search:r="",status:l,sortBy:o,sortOrder:d}=s,u=new URLSearchParams({page:e.toString(),pageSize:a.toString()});r?.trim()&&u.append("search",r.trim()),l&&u.append("status",l),o&&u.append("sortBy",o),d&&u.append("sortOrder",d);const m=`/api/admin/users?${u.toString()}`;try{const p=(await ge.get(m)).data;return{items:Array.isArray(p?.items)?p.items:[],pagination:p?.pagination||{currentPage:e,totalPages:1,pageSize:a,totalCount:0,hasNextPage:!1,hasPreviousPage:!1}}}catch(f){if(console.error("Failed to fetch users:",f),f.response){const y=f.response.data?.message||"Failed to fetch users",v=new Error(y);throw v.response=f.response,v}else throw f.request?new Error("Network error. Please check your connection and try again."):new Error(f.message||"Failed to fetch users")}}async function LE(s){try{return(await ge.get(`/api/admin/users/${encodeURIComponent(s)}`)).data}catch(e){if(console.error("Failed to fetch user:",e),e.response){const r=e.response.data?.message||"Failed to fetch user",l=new Error(r);throw l.response=e.response,l}else throw e.request?new Error("Network error. Please check your connection and try again."):new Error(e.message||"Failed to fetch user")}}async function OE(s,e=!1){try{const a={firstName:s.firstName,lastName:s.lastName,email:s.email,role:s.role||(e?void 0:"Learner"),groupIds:s.groupIds};if(console.log(` ${e?"Updating":"Creating"} user:`,a),e){const r=await ge.put(`/api/admin/users/${s.id}`,a);return console.log(" User updated successfully:",r.data),r.data}else{const r=await ge.post("/api/admin/users",a);return console.log(" User created successfully:",r.data),r.data}}catch(a){throw console.error(" Failed to save user:",a),console.error(" Error response:",a.response?.data),console.error(" Error status:",a.response?.status),a}}async function zE(s){try{return(await ge.delete(`/api/admin/users/${encodeURIComponent(s)}`)).data}catch(e){if(console.error("Failed to delete user:",e),e.response){const r=e.response.data?.message||"Failed to delete user",l=new Error(r);throw l.response=e.response,l}else throw e.request?new Error("Network error. Please check your connection and try again."):new Error(e.message||"Failed to delete user")}}async function PE({emailsText:s,emails:e,groupIds:a}){const r={EmailsText:s,Emails:e,GroupIds:a};return(await ge.post("/api/admin/users/bulk",r)).data}function UE(){const s=ze(),[e,a]=b.useState([]),[r,l]=b.useState(!1),[o,d]=b.useState(""),[u,m]=b.useState("all"),[f,p]=b.useState(1),[y,v]=b.useState(20),[j,S]=b.useState("joinedDate"),[C,N]=b.useState("desc"),[D,E]=b.useState({currentPage:1,totalPages:1,pageSize:20,totalCount:0,hasNextPage:!1,hasPreviousPage:!1});tt("Manage Users"),b.useEffect(()=>{A()},[f,y,u,j,C]);const A=async()=>{l(!0);try{const Z=await ME({page:f,pageSize:y,search:o,status:u==="all"?void 0:u,sortBy:j,sortOrder:C});a(Z.items||[]),E(Z.pagination||{currentPage:1,totalPages:1,pageSize:20,totalCount:0,hasNextPage:!1,hasPreviousPage:!1})}catch(Z){console.error(Z);let B="Failed to load users";Z.response?.data?.message?B=Z.response.data.message:Z.message&&(B=Z.message),Z.response?.status===403?B="You do not have permission to view users.":Z.response?.status===500?B="Server error occurred while loading users. Please try again.":Z.response||(B="Network error. Please check your connection and try again."),G.error(B)}finally{l(!1)}},T=b.useMemo(()=>e.filter(Z=>Z.role!=="SuperAdmin"),[e]),w=up(),_=()=>{p(1),A()},R=Z=>{p(Z)},z=Z=>{v(Z),p(1)},H=()=>{d(""),m("all"),p(1),S("joinedDate"),N("desc")},q=Z=>{j===Z?N(C==="asc"?"desc":"asc"):(S(Z),N("asc")),p(1)},ne=({column:Z})=>j!==Z?t.jsx("span",{className:"ml-1 text-gray-400",children:""}):C==="asc"?t.jsx("span",{className:"ml-1 text-blue-600",children:""}):t.jsx("span",{className:"ml-1 text-blue-600",children:""}),U=()=>s("/admin/users/new"),re=Z=>s(`/admin/users/${Z}/edit`),fe=async Z=>{if(window.confirm("Delete this user? This action cannot be undone."))try{const B=await zE(Z);a(Y=>Y.filter(O=>O.id!==Z));const L=B?.message||"User deleted successfully";G.success(L)}catch(B){console.error(B);let L="Failed to delete user";B.response?.data?.message?L=B.response.data.message:B.message&&(L=B.message),B.response?.status===404?L="User not found. It may have already been deleted.":B.response?.status===403?L="You do not have permission to delete this user.":B.response?.status===409?L="Cannot delete user. The user may have associated data that prevents deletion.":B.response?.status===500?L="Server error occurred while deleting user. Please try again.":B.response||(L="Network error. Please check your connection and try again."),G.error(L)}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"User Management"}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b flex flex-wrap gap-3 items-center justify-end",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:U,className:"px-4 py-2 bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded hover:brightness-90 cursor-pointer",children:"Add New User"}),t.jsx("button",{onClick:()=>s("/admin/users/bulk-new"),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Bulk Add Users"})]})}),t.jsx("div",{className:"px-6 py-4 border-b",children:t.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[t.jsxs("div",{className:"relative flex-1 min-w-[220px]",children:[t.jsx("input",{value:o,onChange:Z=>d(Z.target.value),onKeyDown:Z=>{Z.key==="Enter"&&_()},placeholder:"Search users by name or email",className:"w-full border border-gray-300 rounded px-4 py-2"}),t.jsx("span",{className:"absolute right-3 top-2.5 text-gray-400",children:""})]}),t.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Search"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm text-gray-600",children:"Status"}),t.jsxs("select",{value:u,onChange:Z=>m(Z.target.value),className:"border rounded px-3 py-2",children:[t.jsx("option",{value:"all",children:"All"}),t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"}),t.jsx("option",{value:"suspended",children:"Suspended"})]})]}),t.jsx("button",{onClick:H,className:"text-sm text-gray-700 underline ml-auto",children:"Reset"})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{onClick:()=>q("firstName"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",children:t.jsxs("div",{className:"flex items-center",children:["Name",t.jsx(ne,{column:"firstName"})]})}),t.jsx("th",{onClick:()=>q("email"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",children:t.jsxs("div",{className:"flex items-center",children:["Email",t.jsx(ne,{column:"email"})]})}),t.jsx("th",{onClick:()=>q("role"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",children:t.jsxs("div",{className:"flex items-center",children:["User Role",t.jsx(ne,{column:"role"})]})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Learning Pathways"}),t.jsx("th",{onClick:()=>q("status"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",children:t.jsxs("div",{className:"flex items-center",children:["Status",t.jsx(ne,{column:"status"})]})}),t.jsx("th",{onClick:()=>q("joinedDate"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",children:t.jsxs("div",{className:"flex items-center",children:["Joined On",t.jsx(ne,{column:"joinedDate"})]})}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?Array.from({length:3}).map((Z,B)=>t.jsx("tr",{className:"animate-pulse",children:Array.from({length:7}).map((L,Y)=>t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"})},Y))},B)):T.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"No users found."})}):T.map(Z=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"font-medium text-gray-900",children:[Z.firstName," ",Z.lastName]})}),t.jsx("td",{className:"px-6 py-4 text-gray-700",children:Z.email}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Z.role==="Admin"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:Z.role})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"text-sm text-gray-700",children:Z.learningPathways&&Z.learningPathways.length>0?t.jsx("div",{className:"flex flex-wrap gap-1",children:Z.learningPathways.map((B,L)=>t.jsx("span",{className:"inline-block bg-blue-100 text-blue-700 px-2 py-0.5 rounded text-xs",children:B},L))}):t.jsx("span",{className:"text-gray-400 italic",children:"No pathways"})})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Z.status==="Active"?"bg-green-100 text-green-800":Z.status==="Inactive"?"bg-gray-100 text-gray-800":Z.status==="Suspended"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:Z.status})}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:Z.joinedDate?new Date(Z.joinedDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>re(Z.id),className:"px-3 py-1.5 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100",children:"Edit"}),t.jsx("button",{onClick:()=>fe(Z.id),disabled:Z.id===w,className:`px-3 py-1.5 text-sm rounded ${Z.id===w?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-red-50 text-red-700 hover:bg-red-100"}`,title:Z.id===w?"Cannot delete your own account":"Delete user",children:"Delete"})]})})]},Z.id))})]})}),t.jsx(gu,{currentPage:D.currentPage,totalPages:D.totalPages,pageSize:D.pageSize,totalCount:D.totalCount,onPageChange:R,onPageSizeChange:z})]})]})]})}async function bo(s={}){const{page:e=1,pageSize:a=10,search:r="",sortBy:l="name",sortOrder:o="asc"}=s,d=new URLSearchParams;d.append("page",e),d.append("pageSize",a),r?.trim()&&d.append("search",r.trim()),l&&d.append("sortBy",l),o&&d.append("sortOrder",o);try{const m=(await ge.get(`/api/AdminLearningPathways?${d.toString()}`)).data,f=Array.isArray(m?.items)?m.items:Array.isArray(m)?m:[];return{items:f.map(p=>({id:p.id,name:p.name,description:p.description,courseCount:p.courseCount||0,userCount:p.memberCount||0,createdAt:p.createdAt,createdBy:p.createdBy})),pagination:m.pagination||{currentPage:e,pageSize:a,totalPages:1,totalCount:f.length,hasNextPage:!1,hasPreviousPage:!1}}}catch(u){console.error("Error fetching user groups:",u);const m=[{id:"ug-1",name:"Marketing Team",description:"All marketing department staff",courseCount:3,userCount:12},{id:"ug-2",name:"Sales Team",description:"Sales representatives",courseCount:2,userCount:8},{id:"ug-3",name:"Engineering",description:"Development and QA",courseCount:5,userCount:25},{id:"ug-4",name:"New Hires 2025",description:"Onboarding group",courseCount:4,userCount:15}],f=r?.trim(),p=f?m.filter(y=>y.name.toLowerCase().includes(f.toLowerCase())||(y.description||"").toLowerCase().includes(f.toLowerCase())):m;return{items:p,pagination:{currentPage:1,pageSize:p.length,totalPages:1,totalCount:p.length,hasNextPage:!1,hasPreviousPage:!1}}}}async function BE(s){try{const a=(await ge.get(`/api/AdminLearningPathways/${encodeURIComponent(s)}`)).data;return console.log(" getUserGroup raw response:",a),{id:a.id,name:a.name,description:a.description,courses:a.courses||[],members:a.members||[],courseIds:(a.courses||[]).map(r=>r.id),userIds:(a.members||[]).map(r=>r.userId)}}catch(e){return console.error(" getUserGroup error:",e),{id:s,name:"Sample Group",description:"Mock group for editing",courses:[{id:"c1",title:"Cyber Security Essentials",description:"Learn security basics"},{id:"c2",title:"GDPR Compliance",description:"Data protection"}],members:[{userId:"u1",userName:"Alice Johnson",email:"alice@example.com"},{userId:"u2",userName:"Bob Smith",email:"bob@example.com"}],courseIds:["c1","c2"],userIds:["u1","u2"]}}}async function FE(s,e=!1){try{const a={name:s.name,description:s.description,courseIds:s.courseIds||[],userIds:s.userIds||[]};let r;return e?(r=await ge.put(`/api/AdminLearningPathways/${s.id}`,a),{success:!0}):(r=await ge.post("/api/AdminLearningPathways",a),r.data)}catch{return await new Promise(r=>setTimeout(r,500)),{id:s.id||"ug-"+Math.random().toString(36).slice(2,8)}}}async function HE(s){try{return await ge.delete(`/api/AdminLearningPathways/${encodeURIComponent(s)}`),{success:!0}}catch{return await new Promise(a=>setTimeout(a,300)),{success:!0}}}async function Bv(s="",e=1,a=50){const r=new URLSearchParams;r.append("page",e),r.append("pageSize",a),s?.trim()&&r.append("search",s.trim());try{const o=(await ge.get(`/api/admin/users?${r.toString()}`)).data;return Array.isArray(o?.items)?o.items:Array.isArray(o)?o:[]}catch{const l=[{id:"u1",firstName:"Alice",lastName:"Johnson",email:"alice@example.com"},{id:"u2",firstName:"Bob",lastName:"Smith",email:"bob@example.com"},{id:"u3",firstName:"Carol",lastName:"Davis",email:"carol@example.com"}],o=s?.trim();if(!o)return l;const d=o.toLowerCase();return l.filter(u=>u.firstName&&u.firstName.toLowerCase().includes(d)||u.lastName&&u.lastName.toLowerCase().includes(d)||u.email.toLowerCase().includes(d))}}async function Fv(s=""){const e=new URLSearchParams;s?.trim()&&e.append("search",s.trim()),e.append("status","published"),e.append("pageSize","100"),console.log(" Fetching courses with params:",e.toString());try{const r=(await ge.get(`/api/admin/courses?${e.toString()}`)).data;console.log(" API Response:",r);const l=Array.isArray(r?.items)?r.items:Array.isArray(r?.courses)?r.courses:Array.isArray(r)?r:[];return console.log(" Parsed courses:",l),l}catch(a){return console.error(" Error fetching courses:",a),[]}}function qE(){const s=ze();tt("Bulk Add Users");const[e,a]=b.useState(""),[r,l]=b.useState(!1),[o,d]=b.useState(""),[u,m]=b.useState([]),[f,p]=b.useState(!1),[y,v]=b.useState([]),[j,S]=b.useState(!1),C=async()=>{l(!0),p(!0);try{const A=await bo({search:""}),T=y.map(_=>String(_.id)),w=(A.items||[]).filter(_=>!T.includes(String(_.id)));m(w)}catch(A){console.error(A),m([])}finally{p(!1)}},N=async A=>{d(A),p(!0);try{const T=await bo({search:A}),w=y.map(R=>String(R.id)),_=(T.items||[]).filter(R=>!w.includes(String(R.id)));m(_)}catch(T){console.error(T),m([])}finally{p(!1)}},D=(A,T)=>{v(w=>w.some(R=>R.id===A)?w.filter(R=>R.id!==A):[...w,{id:A,name:T}])},E=async()=>{if(e.split(/[\n,;\s]+/).map(T=>T.trim()).filter(T=>T.length>0).length===0){G.error("Please enter at least one email");return}S(!0);try{const T=y.map(R=>String(R.id)),w=await PE({emailsText:e,emails:null,groupIds:T}),{summary:_}=w||{};G.success(`Created: ${_?.created||0}, Skipped: ${_?.skipped||0}, Failed: ${_?.failed||0}`),s("/admin/users")}catch(T){console.error(T),G.error(T.response?.data?.message||"Bulk create failed")}finally{S(!1)}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("button",{onClick:()=>s(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Bulk Add Users"}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Add Multiple Users"})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emails (comma, semicolon, or newline separated)"}),t.jsx("textarea",{value:e,onChange:A=>a(A.target.value),className:"w-full min-h-40 border border-gray-300 rounded px-4 py-2",placeholder:"user1@example.com, user2@example.com\\nuser3@example.com"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Users will be created with role Learner and Active status. First and last name will be requested on first login."})]}),t.jsxs("div",{className:"border-t pt-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assign to Learning Pathways (optional)"}),t.jsx("button",{type:"button",onClick:C,className:"px-3 py-1.5 text-sm bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded hover:brightness-90 cursor-pointer",children:"Select Pathways"})]}),y.length===0?t.jsx("div",{className:"text-center text-gray-500 py-4 text-sm",children:"No pathways selected."}):t.jsx("ul",{className:"divide-y border rounded",children:y.map(A=>t.jsxs("li",{className:"px-4 py-3 flex items-center justify-between hover:bg-gray-50",children:[t.jsx("span",{className:"text-sm text-gray-900",children:A.name}),t.jsx("button",{type:"button",onClick:()=>D(A.id,A.name),className:"text-sm text-red-600 hover:text-red-700",children:"Remove"})]},A.id))}),r&&t.jsxs("div",{className:"mt-3 border rounded p-3 bg-white",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("input",{value:o,onChange:A=>N(A.target.value),className:"flex-1 border rounded px-3 py-2",placeholder:"Search pathways"}),t.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-3 py-2 text-sm bg-gray-100 text-gray-800 rounded hover:bg-gray-200",children:"Close"})]}),f?t.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."}):u.length===0?t.jsx("div",{className:"text-sm text-gray-500",children:"No pathways found."}):t.jsx("ul",{className:"divide-y max-h-60 overflow-y-auto",children:u.map(A=>t.jsxs("li",{className:"py-2 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-900",children:A.name}),t.jsx("div",{className:"text-xs text-gray-500",children:A.description})]}),t.jsx("button",{type:"button",onClick:()=>D(A.id,A.name),className:`px-3 py-1.5 text-sm rounded ${y.some(T=>T.id===A.id)?"bg-red-50 text-red-700 hover:bg-red-100":"bg-blue-50 text-blue-700 hover:bg-blue-100"}`,children:y.some(T=>T.id===A.id)?"Remove":"Add"})]},A.id))})]})]})]}),t.jsxs("div",{className:"px-6 py-4 border-t flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>s(-1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"}),t.jsx("button",{disabled:j,onClick:E,className:"px-4 py-2 bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded hover:brightness-90 disabled:opacity-50",children:"Create Users"})]})]})]})]})}const Vn={async listCourses(s={}){const{page:e=1,pageSize:a=20,search:r,status:l,category:o,sortBy:d="updatedAt",sortOrder:u="desc"}=s,m=new URLSearchParams;return m.append("page",e),m.append("pageSize",a),r&&m.append("search",r),l&&l!=="all"&&m.append("status",l),o&&o!=="all"&&m.append("category",o),d&&m.append("sortBy",d),u&&m.append("sortOrder",u),(await ge.get(`/api/admin/courses?${m.toString()}`)).data},async getCourse(s){return(await ge.get(`/api/admin/courses/${s}`)).data},async createCourse(s){return(await ge.post("/api/admin/courses",s)).data},async updateCourse(s,e){return(await ge.put(`/api/admin/courses/${s}`,e)).data},async deleteCourse(s){return(await ge.delete(`/api/admin/courses/${s}`)).data},async updateCourseStatus(s,e){return(await ge.put(`/api/admin/courses/${s}/status`,{Status:e})).data},async duplicateCourse(s){return(await ge.post(`/api/admin/courses/${s}/duplicate`)).data}},ro={transformCourseFormToRequest(s){return{title:s.title,description:s.longDescription||s.description,shortDescription:s.shortDescription,category:s.category,tags:s.tags||[],certificateEnabled:s.certificateEnabled,bannerUrl:s.bannerPreview||null,status:s.status||"Draft",preCourseSurveyId:s.preCourseSurveyId||null,postCourseSurveyId:s.postCourseSurveyId||null,isPreSurveyMandatory:s.isPreSurveyMandatory||!1,isPostSurveyMandatory:s.isPostSurveyMandatory||!1}},transformCourseResponseToForm(s){return{title:s.title||"",shortDescription:s.shortDescription||"",longDescription:s.description||"",category:s.category||"",tags:s.tags||[],certificateEnabled:s.certificateEnabled??!0,bannerFile:null,bannerPreview:s.bannerUrl||"",status:s.status||"Draft",preCourseSurveyId:s.preCourseSurveyId||null,postCourseSurveyId:s.postCourseSurveyId||null,isPreSurveyMandatory:s.isPreSurveyMandatory||!1,isPostSurveyMandatory:s.isPostSurveyMandatory||!1}},getStatusOptions(){return[{value:"Draft",label:"Draft"},{value:"Active",label:"Active"},{value:"Archived",label:"Archived"}]},getCategoryOptions(){return[{value:"Security",label:"Security"},{value:"Soft Skills",label:"Soft Skills"},{value:"HR",label:"HR"},{value:"Compliance",label:"Compliance"},{value:"Technical",label:"Technical"},{value:"Management",label:"Management"},{value:"Other",label:"Other"}]},formatCourseForDisplay(s){return{...s,updatedAt:s.updatedAt?new Date(s.updatedAt).toLocaleDateString():new Date(s.createdAt).toLocaleDateString(),createdAt:new Date(s.createdAt).toLocaleDateString(),tagsDisplay:s.tags?.join(", ")||"",statusDisplay:s.status||"Draft",learners:0}}};function VE(){const s=ze(),[e,a]=b.useState([]),[r,l]=b.useState(!1),[o,d]=b.useState(""),[u,m]=b.useState("updated_desc"),[f,p]=b.useState("all"),[y,v]=b.useState("all"),[j,S]=b.useState({open:!1,course:null}),[C,N]=b.useState(1),[D,E]=b.useState(20),[A,T]=b.useState({currentPage:1,pageSize:20,totalPages:1,totalCount:0,hasNextPage:!1,hasPreviousPage:!1});tt("Manage Courses"),b.useEffect(()=>{w()},[o,u,f,y,C,D]);const w=async()=>{try{l(!0);const O=await Vn.listCourses({page:C,pageSize:D,search:o.trim()||void 0,status:f!=="all"?f:void 0,category:y!=="all"?y:void 0,sortBy:u.split("_")[0],sortOrder:u.split("_")[1]||"desc"}),I=O.courses.map(ro.formatCourseForDisplay);a(I),T(O.pagination||A)}catch(O){console.error("Error loading courses:",O),G.error("Failed to load courses"),a([])}finally{l(!1)}},_=O=>{N(O)},R=O=>{E(O),N(1)},z=b.useMemo(()=>["all",...ro.getCategoryOptions().map(I=>I.value)],[]),H=async O=>{try{await Vn.deleteCourse(O.id),G.success("Course deleted successfully"),w(),S({open:!1,course:null})}catch(I){console.error("Error deleting course:",I);const P=I.response?.data?.message||"Failed to delete course";G.error(P)}},q=async O=>{if(window.confirm(`Are you sure you want to duplicate "${O.title}"?

A copy will be created as a draft course with all lessons and quizzes.`))try{const I=G.loading("Duplicating course...");await Vn.duplicateCourse(O.id),G.dismiss(I),G.success(`Course "${O.title}" duplicated successfully!`),w()}catch(I){console.error("Error duplicating course:",I);const P=I.response?.data?.message||"Failed to duplicate course";G.error(P)}},ne=e,U=()=>{d(""),m("updated_desc"),p("all"),v("all")},re=O=>s(`/admin/courses/${O}/edit`),fe=async O=>{const I=e.find(W=>W.id===O);if(!I)return;const P=I.status==="Draft"?"Published":"Draft";try{await Vn.updateCourseStatus(O,P),G.success(`Course ${P.toLowerCase()} successfully`),w()}catch(W){if(console.error("Error updating course status:",W),console.error("Error response:",W.response),W.response?.data?.errors&&Array.isArray(W.response.data.errors)){const de=W.response.data.errors.join(`
`);G.error(`${W.response.data.message}
${de}`,{duration:6e3})}else{const de=W.response?.data?.message||"Failed to update course status";G.error(de)}}},Z=async O=>{const I=e.find(W=>W.id===O);if(!I)return;const P=I.status==="Archived"?"Published":"Archived";try{await Vn.updateCourseStatus(O,P),G.success(`Course ${P==="Archived"?"archived":"unarchived"} successfully`),w()}catch(W){console.error("Error updating course status:",W),G.error("Failed to update course status")}},B=O=>{S({open:!0,course:O})},L=()=>s("/admin/courses/new"),Y=O=>{const I={Published:"bg-green-100 text-green-800",Active:"bg-green-100 text-green-800",Draft:"bg-gray-100 text-gray-800",Archived:"bg-yellow-100 text-yellow-800"};return t.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${I[O]||"bg-gray-100 text-gray-800"}`,children:O})};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Course Management"}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b flex flex-wrap gap-3 items-center justify-end",children:t.jsx("button",{onClick:L,className:"px-4 py-2 bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded hover:brightness-90 cursor-pointer",children:"Add New Course"})}),t.jsx("div",{className:"px-6 py-4 border-b",children:t.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[t.jsxs("div",{className:"relative flex-1 min-w-[220px]",children:[t.jsx("input",{value:o,onChange:O=>d(O.target.value),placeholder:"Search courses",className:"w-full border border-gray-300 rounded px-4 py-2"}),t.jsx("span",{className:"absolute right-3 top-2.5 text-gray-400",children:""})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm text-gray-600",children:"Sort by"}),t.jsxs("select",{value:u,onChange:O=>m(O.target.value),className:"border rounded px-3 py-2",children:[t.jsx("option",{value:"updated_desc",children:"Recently Updated"}),t.jsx("option",{value:"updated_asc",children:"Oldest Updated"}),t.jsx("option",{value:"title_az",children:"Title: A to Z"}),t.jsx("option",{value:"title_za",children:"Title: Z to A"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm text-gray-600",children:"Status"}),t.jsxs("select",{value:f,onChange:O=>p(O.target.value),className:"border rounded px-3 py-2",children:[t.jsx("option",{value:"all",children:"All"}),t.jsx("option",{value:"published",children:"Published"}),t.jsx("option",{value:"draft",children:"Draft"}),t.jsx("option",{value:"archived",children:"Archived"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm text-gray-600",children:"Category"}),t.jsx("select",{value:y,onChange:O=>v(O.target.value),className:"border rounded px-3 py-2",children:z.map(O=>t.jsx("option",{value:O,children:O==="all"?"All":O},O))})]}),t.jsx("button",{onClick:U,className:"text-sm text-gray-700 underline ml-auto",children:"Reset"})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lessons"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Updated"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?Array.from({length:3}).map((O,I)=>t.jsx("tr",{className:"animate-pulse",children:Array.from({length:6}).map((P,W)=>t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"})},W))},I)):ne.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:"No courses found."})}):ne.map(O=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("div",{className:"font-medium text-gray-900",children:O.title}),t.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",O.id]})]}),t.jsx("td",{className:"px-6 py-4 text-gray-700",children:O.category||"Uncategorized"}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("button",{onClick:()=>s(`/admin/courses/${O.id}/edit?tab=lessons`),className:"text-blue-600 hover:text-blue-800 hover:underline font-medium",title:"View lessons",children:O.lessonCount||0})}),t.jsx("td",{className:"px-6 py-4",children:Y(O.statusDisplay)}),t.jsx("td",{className:"px-6 py-4 text-gray-700",children:O.updatedAt}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>re(O.id),className:"px-3 py-1.5 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100",children:"Edit"}),t.jsx("button",{onClick:()=>q(O),className:"px-3 py-1.5 text-sm bg-purple-50 text-purple-700 rounded hover:bg-purple-100",title:"Duplicate course with all lessons and quizzes",children:"Duplicate"}),O.status==="Draft"&&t.jsx("button",{onClick:()=>fe(O.id),className:"px-3 py-1.5 text-sm bg-green-50 text-green-700 rounded hover:bg-green-100",children:"Publish"}),O.status!=="Archived"&&t.jsx("button",{onClick:()=>Z(O.id),className:"px-3 py-1.5 text-sm bg-yellow-50 text-yellow-800 rounded hover:bg-yellow-100",children:"Archive"}),O.status==="Archived"&&t.jsx("button",{onClick:()=>Z(O.id),className:"px-3 py-1.5 text-sm bg-yellow-50 text-yellow-800 rounded hover:bg-yellow-100",children:"Unarchive"}),t.jsx("button",{onClick:()=>B(O),className:"px-3 py-1.5 text-sm bg-red-50 text-red-700 rounded hover:bg-red-100",children:"Delete"})]})})]},O.id))})]})}),t.jsx(gu,{currentPage:A.currentPage,totalPages:A.totalPages,pageSize:A.pageSize,totalCount:A.totalCount,onPageChange:_,onPageSizeChange:R})]})]}),t.jsx(qi,{isOpen:j.open,title:"Delete Course",message:`Are you sure you want to delete "${j.course?.title}"? This action cannot be undone.`,onConfirm:()=>H(j.course),onCancel:()=>S({open:!1,course:null}),confirmText:"Delete",cancelText:"Cancel",variant:"danger"})]})}function $E(){const s=ze(),[e,a]=b.useState([]),[r,l]=b.useState(!1),[o,d]=b.useState(""),[u,m]=b.useState("updated_desc"),[f,p]=b.useState("all"),[y,v]=b.useState({open:!1,survey:null}),[j,S]=b.useState(1),[C,N]=b.useState(20);tt("Manage Surveys"),b.useEffect(()=>{D()},[]);const D=async()=>{try{l(!0);const O=await aa.listSurveys();a(O)}catch(O){console.error("Error loading surveys:",O),G.error("Failed to load surveys"),a([])}finally{l(!1)}},E=async O=>{try{await aa.deleteSurvey(O.id),G.success("Survey deleted successfully"),D(),v({open:!1,survey:null})}catch(I){console.error("Error deleting survey:",I);const P=I.response?.data?.message||I.response?.data||"Failed to delete survey";G.error(P)}},A=async O=>{if(window.confirm(`Are you sure you want to duplicate "${O.title}"?

A copy will be created as a draft survey with all questions.`))try{const I=G.loading("Duplicating survey...");await aa.duplicateSurvey(O.id),G.dismiss(I),G.success(`Survey "${O.title}" duplicated successfully!`),D()}catch(I){console.error("Error duplicating survey:",I);const P=I.response?.data?.message||I.response?.data||"Failed to duplicate survey";G.error(P)}},T=async O=>{const I=e.find(W=>W.id===O);if(!I)return;const P=I.status==="Draft"?"Published":"Draft";try{await aa.updateSurveyStatus(O,P),G.success(`Survey ${P.toLowerCase()} successfully`),D()}catch(W){console.error("Error updating survey status:",W);const de=W.response?.data?.message||W.response?.data||"Failed to update survey status";G.error(de)}},_=[...e.filter(O=>{const I=!o||O.title?.toLowerCase().includes(o.toLowerCase())||O.description?.toLowerCase().includes(o.toLowerCase()),P=f==="all"||O.status?.toLowerCase()===f.toLowerCase();return I&&P})].sort((O,I)=>{switch(u){case"updated_desc":return new Date(I.updatedAt||I.createdAt)-new Date(O.updatedAt||O.createdAt);case"updated_asc":return new Date(O.updatedAt||O.createdAt)-new Date(I.updatedAt||I.createdAt);case"title_az":return(O.title||"").localeCompare(I.title||"");case"title_za":return(I.title||"").localeCompare(O.title||"");default:return 0}}),R=_.length,z=Math.ceil(R/C),H=(j-1)*C,q=H+C,ne=_.slice(H,q),U=O=>{S(O)},re=O=>{N(O),S(1)},fe=()=>{d(""),m("updated_desc"),p("all"),S(1)},Z=O=>{e.find(P=>P.id===O)?.status==="Published"?s(`/admin/surveys/edit/${O}?preview=true`):s(`/admin/surveys/edit/${O}`)},B=()=>s("/admin/surveys/create"),L=O=>{const I={Published:"bg-green-100 text-green-800",Draft:"bg-gray-100 text-gray-800"};return t.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${I[O]||"bg-gray-100 text-gray-800"}`,children:O})},Y=O=>O?new Date(O).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Survey Management"}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b flex flex-wrap gap-3 items-center justify-end",children:t.jsx("button",{onClick:B,className:"px-4 py-2 bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded hover:brightness-90 cursor-pointer",children:"Add New Survey"})}),t.jsx("div",{className:"px-6 py-4 border-b",children:t.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[t.jsxs("div",{className:"relative flex-1 min-w-[220px]",children:[t.jsx("input",{value:o,onChange:O=>d(O.target.value),placeholder:"Search surveys",className:"w-full border border-gray-300 rounded px-4 py-2"}),t.jsx("span",{className:"absolute right-3 top-2.5 text-gray-400",children:""})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm text-gray-600",children:"Sort by"}),t.jsxs("select",{value:u,onChange:O=>m(O.target.value),className:"border rounded px-3 py-2",children:[t.jsx("option",{value:"updated_desc",children:"Recently Updated"}),t.jsx("option",{value:"updated_asc",children:"Oldest Updated"}),t.jsx("option",{value:"title_az",children:"Title: A to Z"}),t.jsx("option",{value:"title_za",children:"Title: Z to A"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm text-gray-600",children:"Status"}),t.jsxs("select",{value:f,onChange:O=>p(O.target.value),className:"border rounded px-3 py-2",children:[t.jsx("option",{value:"all",children:"All"}),t.jsx("option",{value:"published",children:"Published"}),t.jsx("option",{value:"draft",children:"Draft"})]})]}),t.jsx("button",{onClick:fe,className:"text-sm text-gray-700 underline ml-auto",children:"Reset"})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Questions"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Updated"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?Array.from({length:3}).map((O,I)=>t.jsx("tr",{className:"animate-pulse",children:Array.from({length:6}).map((P,W)=>t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"})},W))},I)):ne.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:"No surveys found."})}):ne.map(O=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("div",{className:"font-medium text-gray-900",children:O.title}),O.description&&t.jsx("div",{className:"text-xs text-gray-500 truncate max-w-xs",children:O.description})]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"text-sm font-medium text-gray-900",children:O.questionCount||0})}),t.jsx("td",{className:"px-6 py-4",children:L(O.status)}),t.jsx("td",{className:"px-6 py-4 text-gray-700",children:Y(O.updatedAt||O.createdAt)}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>Z(O.id),className:`px-3 py-1.5 text-sm rounded ${O.status==="Published"?"bg-gray-50 text-gray-700 hover:bg-gray-100":"bg-blue-50 text-blue-700 hover:bg-blue-100"}`,children:O.status==="Published"?"Preview":"Edit"}),t.jsx("button",{onClick:()=>A(O),className:"px-3 py-1.5 text-sm bg-purple-50 text-purple-700 rounded hover:bg-purple-100",title:"Duplicate survey with all questions",children:"Duplicate"}),O.status==="Draft"&&t.jsx("button",{onClick:()=>T(O.id),className:"px-3 py-1.5 text-sm bg-green-50 text-green-700 rounded hover:bg-green-100",disabled:!O.questionCount||O.questionCount===0,title:!O.questionCount||O.questionCount===0?"Add at least one question before publishing":"Publish survey",children:"Publish"}),O.status==="Published"&&t.jsx("button",{onClick:()=>T(O.id),className:"px-3 py-1.5 text-sm bg-yellow-50 text-yellow-800 rounded hover:bg-yellow-100",children:"Unpublish"}),t.jsx("button",{onClick:()=>v({open:!0,survey:O}),className:"px-3 py-1.5 text-sm bg-red-50 text-red-700 rounded hover:bg-red-100",children:"Delete"})]})})]},O.id))})]})}),t.jsx(gu,{currentPage:j,totalPages:z,pageSize:C,totalCount:R,onPageChange:U,onPageSizeChange:re})]})]}),t.jsx(qi,{isOpen:y.open,title:"Delete Survey",message:`Are you sure you want to delete "${y.survey?.title}"? This action cannot be undone.`,onConfirm:()=>E(y.survey),onCancel:()=>v({open:!1,survey:null}),confirmText:"Delete",cancelText:"Cancel",variant:"danger"})]})}function IE({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const ln=b.forwardRef(IE);function QE({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const YE=b.forwardRef(QE);function GE({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const Hv=b.forwardRef(GE);function WE({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const Li=b.forwardRef(WE);function XE({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const Ms=b.forwardRef(XE);function ZE({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"}))}const KE=b.forwardRef(ZE);function JE({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const Vf=b.forwardRef(JE);function eT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"}))}const i2=b.forwardRef(eT);function tT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const $f=b.forwardRef(tT);function sT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const la=b.forwardRef(sT);function aT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const zt=b.forwardRef(aT);function nT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const rT=b.forwardRef(nT);function iT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const lT=b.forwardRef(iT);function oT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const oa=b.forwardRef(oT);function cT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"}))}const Or=b.forwardRef(cT);function dT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const cf=b.forwardRef(dT);function uT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 0 1 9 9v.375M10.125 2.25A3.375 3.375 0 0 1 13.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 0 1 3.375 3.375M9 15l2.25 2.25L15 12"}))}const df=b.forwardRef(uT);function hT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Kl=b.forwardRef(hT);function mT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const io=b.forwardRef(mT);function fT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const If=b.forwardRef(fT);function pT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const $i=b.forwardRef(pT);function gT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const xu=b.forwardRef(gT);function xT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const qv=b.forwardRef(xT);function yT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"}))}const Qf=b.forwardRef(yT);function bT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const $d=b.forwardRef(bT);function vT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const yu=b.forwardRef(vT);function jT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const wT=b.forwardRef(jT);function NT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607ZM13.5 10.5h-6"}))}const ST=b.forwardRef(NT);function CT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607ZM10.5 7.5v6m3-3h-6"}))}const kT=b.forwardRef(CT);function _T({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Id=b.forwardRef(_T);function AT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"}))}const vo=b.forwardRef(AT);function ET({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const TT=b.forwardRef(ET);function RT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const DT=b.forwardRef(RT);function MT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const LT=b.forwardRef(MT);function OT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const zT=b.forwardRef(OT);function PT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const Yf=b.forwardRef(PT);function UT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Tr=b.forwardRef(UT);function BT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}))}const FT=b.forwardRef(BT);function HT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"}))}const Vv=b.forwardRef(HT);function qT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"}))}const VT=b.forwardRef(qT);function $T({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const IT=b.forwardRef($T);function QT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const YT=b.forwardRef(QT);function GT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const WT=b.forwardRef(GT);function XT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const Wn=b.forwardRef(XT);function ZT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))}const jo=b.forwardRef(ZT);function KT({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const JT=b.forwardRef(KT);function eR({title:s,titleId:e,...a},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},a),s?b.createElement("title",{id:e},s):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Pr=b.forwardRef(eR);function tR(){tt("Reports & Analytics");const[s,e]=b.useState("all"),a=[{id:"all",name:"All Reports",icon:cf},{id:"users",name:"Users & Engagement",icon:Wn},{id:"courses",name:"Course Analytics",icon:ln},{id:"pathways",name:"Learning Pathways",icon:vo},{id:"admin",name:"Administrative",icon:la}],r=[{id:"user-activity",name:"User Activity Report",description:"Track user login frequency, last active date, and identify idle users",category:"users",icon:oa,path:"/admin/reports/user-activity",color:"bg-blue-500"},{id:"user-progress",name:"User Progress Report",description:"View individual user progress across all courses and learning pathways",category:"users",icon:Vf,path:"/admin/reports/user-progress",color:"bg-indigo-500"},{id:"course-enrollment",name:"Course Enrollment Report",description:"Analyze enrollment trends over time across all courses",category:"courses",icon:ln,path:"/admin/reports/course-enrollment",color:"bg-purple-500"},{id:"course-completion",name:"Course Completion Report",description:"Track course completion rates and average completion time",category:"courses",icon:la,path:"/admin/reports/course-completion",color:"bg-green-500"},{id:"lesson-analytics",name:"Lesson Analytics Report",description:"Per-lesson analytics including views, completions, and quiz performance",category:"courses",icon:i2,path:"/admin/reports/lesson-analytics",color:"bg-yellow-500"},{id:"time-tracking",name:"Time Tracking & Engagement",description:"Detailed time spent analytics by users, courses, and lessons with engagement metrics",category:"users",icon:oa,path:"/admin/reports/time-tracking",color:"bg-rose-500"},{id:"pathway-progress",name:"Pathway Progress Report",description:"Track completion rates and time spent on learning pathways",category:"pathways",icon:vo,path:"/admin/reports/pathway-progress",color:"bg-teal-500"},{id:"pathway-assignments",name:"Pathway Assignment Report",description:"View which pathways are assigned to which users and their progress",category:"pathways",icon:Wn,path:"/admin/reports/pathway-assignments",color:"bg-cyan-500"},{id:"user-course-progress",name:"User-Course Progress Report",description:"Comprehensive view of all users and their course progress with detailed filtering",category:"admin",icon:cf,path:"/admin/reports/user-course-progress",color:"bg-purple-500"},{id:"content-usage",name:"Content Usage Report",description:"Track overall platform usage including courses, pathways, and groups",category:"admin",icon:cf,path:"/admin/reports/content-usage",color:"bg-orange-500"}],l=s==="all"?r:r.filter(o=>o.category===s);return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reports & Analytics"}),t.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Generate comprehensive reports and insights about your LMS"})]}),t.jsx("div",{className:"border-b border-gray-200 bg-white rounded-t-lg px-4",children:t.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:a.map(o=>{const d=o.icon,u=s===o.id;return t.jsxs("button",{onClick:()=>e(o.id),className:`
                      group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm
                      ${u?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                    `,children:[t.jsx(d,{className:`
                        -ml-0.5 mr-2 h-5 w-5
                        ${u?"text-indigo-500":"text-gray-400 group-hover:text-gray-500"}
                      `,"aria-hidden":"true"}),t.jsx("span",{children:o.name})]},o.id)})})}),t.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:l.map(o=>{const d=o.icon;return t.jsxs(ls,{to:o.path,className:"relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-500 rounded-lg border border-gray-200 hover:border-gray-300 hover:shadow-md transition-all",children:[t.jsx("div",{children:t.jsx("span",{className:`rounded-lg inline-flex p-3 ${o.color} text-white ring-4 ring-white`,children:t.jsx(d,{className:"h-6 w-6","aria-hidden":"true"})})}),t.jsxs("div",{className:"mt-8",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:o.name}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:o.description})]}),t.jsx("span",{className:"pointer-events-none absolute top-6 right-6 text-gray-300 group-hover:text-gray-400","aria-hidden":"true",children:t.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M20 4h1a1 1 0 00-1-1v1zm-1 12a1 1 0 102 0h-2zM8 3a1 1 0 000 2V3zM3.293 19.293a1 1 0 101.414 1.414l-1.414-1.414zM19 4v12h2V4h-2zm1-1H8v2h12V3zm-.707.293l-16 16 1.414 1.414 16-16-1.414-1.414z"})})})]},o.id)})})]})})]})}/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aR=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,r)=>r?r.toUpperCase():a.toLowerCase()),$v=s=>{const e=aR(s);return e.charAt(0).toUpperCase()+e.slice(1)},l2=(...s)=>s.filter((e,a,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===a).join(" ").trim(),nR=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=b.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:l="",children:o,iconNode:d,...u},m)=>b.createElement("svg",{ref:m,...rR,width:e,height:e,stroke:s,strokeWidth:r?Number(a)*24/Number(e):a,className:l2("lucide",l),...!o&&!nR(u)&&{"aria-hidden":"true"},...u},[...d.map(([f,p])=>b.createElement(f,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=(s,e)=>{const a=b.forwardRef(({className:r,...l},o)=>b.createElement(iR,{ref:o,iconNode:e,className:l2(`lucide-${sR($v(s))}`,`lucide-${s}`,r),...l}));return a.displayName=$v(s),a};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Iv=Ii("circle-question-mark",lR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],uf=Ii("file-text",oR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],vd=Ii("message-square",cR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],sa=Ii("sparkles",dR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],hf=Ii("wand-sparkles",uR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Qv=Ii("x",hR),Yl="/api/aiassistant",jd={generateCourseOutline:async(s,e=null,a=null)=>(await ge.post(`${Yl}/generate-course-outline`,{topic:s,level:e,duration:a})).data,generateLessonContent:async(s,e=null)=>(await ge.post(`${Yl}/generate-lesson-content`,{lessonTitle:s,context:e})).data,generateQuizQuestions:async(s,e=5,a=null)=>(await ge.post(`${Yl}/generate-quiz-questions`,{topic:s,questionCount:e,difficulty:a})).data,improveContent:async(s,e="general")=>(await ge.post(`${Yl}/improve-content`,{content:s,improvementType:e})).data,chat:async(s,e=null)=>(await ge.post(`${Yl}/chat`,{message:s,context:e})).data},o2=({context:s="",onApplyContent:e=null,mode:a="floating",isOpen:r=!1,onClose:l=null,defaultTab:o="chat"})=>{const[d,u]=b.useState(!1),m=a==="slideIn"?r:d,f=()=>{a==="slideIn"&&l?l():u(!1)},[p,y]=b.useState(o),[v,j]=b.useState(!1),[S,C]=b.useState(""),[N,D]=b.useState([]),[E,A]=b.useState(""),[T,w]=b.useState(""),[_,R]=b.useState(""),[z,H]=b.useState(""),[q,ne]=b.useState(""),[U,re]=b.useState(""),[fe,Z]=b.useState(""),[B,L]=b.useState(""),[Y,O]=b.useState(""),[I,P]=b.useState(5),[W,de]=b.useState("Medium"),[he,je]=b.useState(""),ke=async xe=>{if(xe.preventDefault(),!E.trim())return;const Ae={role:"user",content:E};D([...N,Ae]),A(""),j(!0),C("");try{const wt={role:"assistant",content:(await jd.chat(E,s)).response};D([...N,Ae,wt])}catch(jt){C("Failed to get AI response. Please try again."),console.error(jt)}finally{j(!1)}},Oe=async xe=>{if(xe.preventDefault(),!!T.trim()){j(!0),C("");try{const Ae=await jd.generateCourseOutline(T,_||null,z||null);ne(Ae.content)}catch(Ae){C("Failed to generate course outline. Please try again."),console.error(Ae)}finally{j(!1)}}},ft=async xe=>{if(xe.preventDefault(),!!U.trim()){j(!0),C("");try{const Ae=await jd.generateLessonContent(U,fe||s||null);L(Ae.content)}catch(Ae){C("Failed to generate lesson content. Please try again."),console.error(Ae)}finally{j(!1)}}},Xe=async xe=>{if(xe.preventDefault(),!!Y.trim()){j(!0),C("");try{const Ae=await jd.generateQuizQuestions(Y,I,W);je(Ae.content)}catch(Ae){C("Failed to generate quiz questions. Please try again."),console.error(Ae)}finally{j(!1)}}},Ut=(xe,Ae=!0)=>{e&&(e(xe),Ae&&f())};return t.jsxs(t.Fragment,{children:[a==="floating"&&t.jsxs("button",{onClick:()=>u(!0),className:"fixed bottom-6 right-6 bg-gradient-to-r from-purple-600 to-blue-600 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 z-50 flex items-center gap-2 group",title:"AI Assistant",children:[t.jsx(sa,{className:"w-6 h-6"}),t.jsx("span",{className:"max-w-0 overflow-hidden group-hover:max-w-xs transition-all duration-300 whitespace-nowrap",children:"AI Assistant"})]}),m&&t.jsx(t.Fragment,{children:a==="floating"?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-t-lg",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(sa,{className:"w-5 h-5"}),t.jsx("h2",{className:"text-xl font-semibold",children:"AI Assistant"})]}),t.jsx("button",{onClick:f,className:"hover:bg-white/20 p-2 rounded-lg transition-colors",children:t.jsx(Qv,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"flex border-b bg-gray-50",children:[t.jsxs("button",{onClick:()=>y("chat"),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors ${p==="chat"?"border-b-2 border-purple-600 text-purple-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(vd,{className:"w-4 h-4"}),"Chat"]}),t.jsxs("button",{onClick:()=>y("course"),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors ${p==="course"?"border-b-2 border-purple-600 text-purple-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(uf,{className:"w-4 h-4"}),"Course Outline"]}),t.jsxs("button",{onClick:()=>y("lesson"),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors ${p==="lesson"?"border-b-2 border-purple-600 text-purple-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(hf,{className:"w-4 h-4"}),"Lesson Content"]}),t.jsxs("button",{onClick:()=>y("quiz"),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors ${p==="quiz"?"border-b-2 border-purple-600 text-purple-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(Iv,{className:"w-4 h-4"}),"Quiz Questions"]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[S&&t.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:S}),p==="chat"&&t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"flex-1 overflow-y-auto mb-4 space-y-4",children:[N.length===0?t.jsxs("div",{className:"text-center text-gray-500 py-8",children:[t.jsx(vd,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),t.jsx("p",{children:"Ask me anything about creating courses, lessons, or quizzes!"})]}):N.map((xe,Ae)=>t.jsx("div",{className:`flex ${xe.role==="user"?"justify-end":"justify-start"}`,children:t.jsx("div",{className:`max-w-[80%] p-3 rounded-lg ${xe.role==="user"?"bg-purple-600 text-white":"bg-gray-100 text-gray-900"}`,children:xe.content})},Ae)),v&&t.jsx("div",{className:"flex justify-start",children:t.jsx("div",{className:"bg-gray-100 p-3 rounded-lg",children:t.jsxs("div",{className:"flex gap-1",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-100"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-200"})]})})})]}),t.jsxs("form",{onSubmit:ke,className:"flex gap-2",children:[t.jsx("input",{type:"text",value:E,onChange:xe=>A(xe.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v}),t.jsx("button",{type:"submit",disabled:v||!E.trim(),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Send"})]})]}),p==="course"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("form",{onSubmit:Oe,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course Topic *"}),t.jsx("input",{type:"text",value:T,onChange:xe=>w(xe.target.value),placeholder:"e.g., Fire Safety Training",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level (optional)"}),t.jsxs("select",{value:_,onChange:xe=>R(xe.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v,children:[t.jsx("option",{value:"",children:"Select level"}),t.jsx("option",{value:"Beginner",children:"Beginner"}),t.jsx("option",{value:"Intermediate",children:"Intermediate"}),t.jsx("option",{value:"Advanced",children:"Advanced"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (optional)"}),t.jsx("input",{type:"text",value:z,onChange:xe=>H(xe.target.value),placeholder:"e.g., 4 weeks",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v})]})]}),t.jsx("button",{type:"submit",disabled:v||!T.trim(),className:"w-full px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(sa,{className:"w-4 h-4"}),"Generate Course Outline"]})})]}),q&&t.jsxs("div",{className:"mt-4 p-4 bg-gray-50 border rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:"Generated Outline"}),e&&t.jsx("button",{onClick:()=>Ut(q),className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700",children:"Apply to Course"})]}),t.jsx("div",{className:"max-h-96 overflow-y-auto",children:(()=>{try{let xe=q.trim();xe.startsWith("```")&&(xe=xe.replace(/^```json\n/,"").replace(/^```\n/,"").replace(/\n```$/,""));const Ae=JSON.parse(xe);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-lg text-gray-900",children:Ae.title}),Ae.shortDescription&&t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Ae.shortDescription}),Ae.longDescription&&t.jsx("p",{className:"text-sm text-gray-700 mt-2 whitespace-pre-wrap",children:Ae.longDescription})]}),Ae.lessons&&Ae.lessons.length>0&&t.jsxs("div",{children:[t.jsxs("h5",{className:"font-semibold text-gray-900 mb-2",children:["Lessons (",Ae.lessons.length,")"]}),t.jsx("div",{className:"space-y-2",children:Ae.lessons.map((jt,wt)=>t.jsx("div",{className:"bg-white p-3 rounded border",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{className:"font-medium text-gray-900",children:[wt+1,". ",jt.title]}),jt.description&&t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:jt.description})]}),jt.duration&&t.jsx("span",{className:"text-xs text-gray-500 ml-2 whitespace-nowrap",children:jt.duration})]})},wt))})]})]})}catch{return t.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700",children:q})}})()})]})]}),p==="lesson"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("form",{onSubmit:ft,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lesson Title *"}),t.jsx("input",{type:"text",value:U,onChange:xe=>re(xe.target.value),placeholder:"e.g., Variables and Data Types",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Context (optional)"}),t.jsx("textarea",{value:fe,onChange:xe=>Z(xe.target.value),placeholder:"Provide any additional context or requirements...",rows:3,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v})]}),t.jsx("button",{type:"submit",disabled:v||!U.trim(),className:"w-full px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(sa,{className:"w-4 h-4"}),"Generate Lesson Content"]})})]}),B&&t.jsxs("div",{className:"mt-4 p-4 bg-gray-50 border rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:"Generated Content"}),t.jsxs("div",{className:"flex gap-2",children:[e&&t.jsx("button",{onClick:()=>Ut(B,!1),className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700",children:"Apply"}),t.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("createHtmlLesson",{detail:{title:U,htmlContent:B}})),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Create HTML Lesson"})]})]}),t.jsx("div",{className:"prose max-w-none text-sm text-gray-700 max-h-96 overflow-y-auto p-4 bg-white rounded border",dangerouslySetInnerHTML:{__html:B}})]})]}),p==="quiz"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("form",{onSubmit:Xe,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quiz Topic *"}),t.jsx("input",{type:"text",value:Y,onChange:xe=>O(xe.target.value),placeholder:"e.g., Fire safety basics, GDPR compliance",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Questions"}),t.jsx("input",{type:"number",value:I,onChange:xe=>P(parseInt(xe.target.value)||5),min:"1",max:"20",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Difficulty"}),t.jsxs("select",{value:W,onChange:xe=>de(xe.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v,children:[t.jsx("option",{value:"Easy",children:"Easy"}),t.jsx("option",{value:"Medium",children:"Medium"}),t.jsx("option",{value:"Hard",children:"Hard"})]})]})]}),t.jsx("button",{type:"submit",disabled:v||!Y.trim(),className:"w-full px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(sa,{className:"w-4 h-4"}),"Generate Quiz Questions"]})})]}),he&&t.jsxs("div",{className:"mt-4 p-4 bg-gray-50 border rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:"Generated Questions"}),e&&t.jsx("button",{onClick:()=>Ut(he),className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700",children:"Apply"})]}),t.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 max-h-96 overflow-y-auto",children:he})]})]})]})]})}):t.jsxs("div",{className:"fixed inset-y-0 right-0 w-full md:w-2/5 bg-white shadow-2xl z-50 flex flex-col transform transition-transform duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gradient-to-r from-purple-600 to-blue-600 text-white",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(sa,{className:"w-5 h-5"}),t.jsx("h2",{className:"text-xl font-semibold",children:"AI Assistant"})]}),t.jsx("button",{onClick:f,className:"hover:bg-white/20 p-2 rounded-lg transition-colors",children:t.jsx(Qv,{className:"w-5 h-5"})})]}),o!=="quiz"&&o!=="course"&&t.jsxs("div",{className:"flex border-b bg-gray-50",children:[t.jsxs("button",{onClick:()=>y("chat"),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors ${p==="chat"?"border-b-2 border-purple-600 text-purple-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(vd,{className:"w-4 h-4"}),"Chat"]}),t.jsxs("button",{onClick:()=>y("course"),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors ${p==="course"?"border-b-2 border-purple-600 text-purple-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(uf,{className:"w-4 h-4"}),"Course Outline"]}),t.jsxs("button",{onClick:()=>y("lesson"),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors ${p==="lesson"?"border-b-2 border-purple-600 text-purple-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(hf,{className:"w-4 h-4"}),"Lesson Content"]}),t.jsxs("button",{onClick:()=>y("quiz"),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors ${p==="quiz"?"border-b-2 border-purple-600 text-purple-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(Iv,{className:"w-4 h-4"}),"Quiz Questions"]})]}),o==="course"&&t.jsxs("div",{className:"flex border-b bg-gray-50",children:[t.jsxs("button",{onClick:()=>y("course"),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors ${p==="course"?"border-b-2 border-purple-600 text-purple-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(uf,{className:"w-4 h-4"}),"Course Outline"]}),t.jsxs("button",{onClick:()=>y("lesson"),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors ${p==="lesson"?"border-b-2 border-purple-600 text-purple-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(hf,{className:"w-4 h-4"}),"Lesson Content"]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[S&&t.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:S}),p==="chat"&&t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"flex-1 overflow-y-auto mb-4 space-y-4",children:[N.length===0?t.jsxs("div",{className:"text-center text-gray-500 py-8",children:[t.jsx(vd,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),t.jsx("p",{children:"Ask me anything about creating courses, lessons, or quizzes!"})]}):N.map((xe,Ae)=>t.jsx("div",{className:`flex ${xe.role==="user"?"justify-end":"justify-start"}`,children:t.jsx("div",{className:`max-w-[80%] p-3 rounded-lg ${xe.role==="user"?"bg-purple-600 text-white":"bg-gray-100 text-gray-900"}`,children:xe.content})},Ae)),v&&t.jsx("div",{className:"flex justify-start",children:t.jsx("div",{className:"bg-gray-100 p-3 rounded-lg",children:t.jsxs("div",{className:"flex gap-1",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-100"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-200"})]})})})]}),t.jsxs("form",{onSubmit:ke,className:"flex gap-2",children:[t.jsx("input",{type:"text",value:E,onChange:xe=>A(xe.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v}),t.jsx("button",{type:"submit",disabled:v||!E.trim(),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Send"})]})]}),p==="course"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("form",{onSubmit:Oe,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course Topic *"}),t.jsx("input",{type:"text",value:T,onChange:xe=>w(xe.target.value),placeholder:"e.g., Fire Safety Training",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level (optional)"}),t.jsxs("select",{value:_,onChange:xe=>R(xe.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v,children:[t.jsx("option",{value:"",children:"Select level"}),t.jsx("option",{value:"Beginner",children:"Beginner"}),t.jsx("option",{value:"Intermediate",children:"Intermediate"}),t.jsx("option",{value:"Advanced",children:"Advanced"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (optional)"}),t.jsx("input",{type:"text",value:z,onChange:xe=>H(xe.target.value),placeholder:"e.g., 4 weeks",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v})]})]}),t.jsx("button",{type:"submit",disabled:v||!T.trim(),className:"w-full px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(sa,{className:"w-4 h-4"}),"Generate Course Outline"]})})]}),q&&t.jsxs("div",{className:"mt-4 p-4 bg-gray-50 border rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:"Generated Outline"}),e&&t.jsx("button",{onClick:()=>Ut(q),className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700",children:"Apply to Course"})]}),t.jsx("div",{className:"max-h-96 overflow-y-auto",children:(()=>{try{let xe=q.trim();xe.startsWith("```")&&(xe=xe.replace(/^```json\n/,"").replace(/^```\n/,"").replace(/\n```$/,""));const Ae=JSON.parse(xe);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-lg text-gray-900",children:Ae.title}),Ae.shortDescription&&t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Ae.shortDescription}),Ae.longDescription&&t.jsx("p",{className:"text-sm text-gray-700 mt-2 whitespace-pre-wrap",children:Ae.longDescription})]}),Ae.lessons&&Ae.lessons.length>0&&t.jsxs("div",{children:[t.jsxs("h5",{className:"font-semibold text-gray-900 mb-2",children:["Lessons (",Ae.lessons.length,")"]}),t.jsx("div",{className:"space-y-2",children:Ae.lessons.map((jt,wt)=>t.jsx("div",{className:"bg-white p-3 rounded border",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{className:"font-medium text-gray-900",children:[wt+1,". ",jt.title]}),jt.description&&t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:jt.description})]}),jt.duration&&t.jsx("span",{className:"text-xs text-gray-500 ml-2 whitespace-nowrap",children:jt.duration})]})},wt))})]})]})}catch{return t.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700",children:q})}})()})]})]}),p==="lesson"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("form",{onSubmit:ft,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lesson Title *"}),t.jsx("input",{type:"text",value:U,onChange:xe=>re(xe.target.value),placeholder:"e.g., Variables and Data Types",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Context (optional)"}),t.jsx("textarea",{value:fe,onChange:xe=>Z(xe.target.value),placeholder:"Provide any additional context or requirements...",rows:3,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v})]}),t.jsx("button",{type:"submit",disabled:v||!U.trim(),className:"w-full px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(sa,{className:"w-4 h-4"}),"Generate Lesson Content"]})})]}),B&&t.jsxs("div",{className:"mt-4 p-4 bg-gray-50 border rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:"Generated Content"}),e&&t.jsx("button",{onClick:()=>Ut(B,!1),className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700",children:"Copy to Clipboard"})]}),t.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 max-h-96 overflow-y-auto font-sans",children:B})]})]}),p==="quiz"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("form",{onSubmit:Xe,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quiz Topic *"}),t.jsx("input",{type:"text",value:Y,onChange:xe=>O(xe.target.value),placeholder:"e.g., Fire safety basics, GDPR compliance",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Questions"}),t.jsx("input",{type:"number",value:I,onChange:xe=>P(parseInt(xe.target.value)||5),min:"1",max:"20",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Difficulty"}),t.jsxs("select",{value:W,onChange:xe=>de(xe.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",disabled:v,children:[t.jsx("option",{value:"Easy",children:"Easy"}),t.jsx("option",{value:"Medium",children:"Medium"}),t.jsx("option",{value:"Hard",children:"Hard"})]})]})]}),t.jsx("button",{type:"submit",disabled:v||!Y.trim(),className:"w-full px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(sa,{className:"w-4 h-4"}),"Generate Quiz Questions"]})})]}),he&&t.jsxs("div",{className:"mt-4 p-4 bg-gray-50 border rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:"Generated Questions"}),e&&t.jsx("button",{onClick:()=>Ut(he),className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700",children:"Apply"})]}),t.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 max-h-96 overflow-y-auto",children:he})]})]})]})]})})]})},Ot={getLessons:async s=>(await ge.get(`/api/admin/courses/${s}/lessons`)).data,getLesson:async(s,e)=>(await ge.get(`/api/admin/courses/${s}/lessons/${e}`)).data,createLesson:async(s,e)=>(await ge.post(`/api/admin/courses/${s}/lessons`,e)).data,updateLesson:async(s,e,a)=>(await ge.put(`/api/admin/courses/${s}/lessons/${e}`,a)).data,deleteLesson:async(s,e)=>(await ge.delete(`/api/admin/courses/${s}/lessons/${e}`)).data,uploadVideo:async(s,e,a)=>{const r=new FormData;return r.append("video",e),(await ge.post(`/api/admin/courses/${s}/lessons/upload-video`,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:o=>{if(a){const d=Math.round(o.loaded*100/o.total);a(d)}}})).data},listLibraryVideos:async s=>(await ge.get(`/api/admin/courses/${s}/lessons/library/videos`)).data,listSharedLibraryVideos:async s=>(await ge.get(`/api/admin/courses/${s}/lessons/shared-library/videos`)).data,uploadPdf:async(s,e,a)=>{const r=new FormData;return r.append("pdf",e),(await ge.post(`/api/admin/courses/${s}/lessons/upload-pdf`,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:o=>{if(a){const d=Math.round(o.loaded*100/o.total);a(d)}}})).data},listSharedLibraryPdfs:async s=>(await ge.get(`/api/admin/courses/${s}/lessons/shared-library/pdfs`)).data,uploadScorm:async(s,e,a)=>{const r=new FormData;return r.append("file",e),(await ge.post(`/api/admin/courses/${s}/lessons/upload-scorm`,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:o=>{if(a&&o.total){const d=Math.round(o.loaded*100/o.total);a(d)}}})).data},uploadHtmlContent:async(s,e,a)=>(await ge.post(`/api/admin/lessons/${s}/html`,{title:e,htmlContent:a})).data,reorderLessons:async(s,e)=>(await ge.put(`/api/admin/courses/${s}/lessons/reorder`,{lessonOrders:e})).data};function mR({isOpen:s,onClose:e,courseId:a,lesson:r,onSave:l}){const[o,d]=b.useState({title:"",content:"",ordinal:1,type:"video",videoUrl:"",videoDurationSeconds:null,isOptional:!1}),[u,m]=b.useState("upload"),[f,p]=b.useState(0),[y,v]=b.useState(!1),[j,S]=b.useState(null),[C,N]=b.useState([]),[D,E]=b.useState(null),[A,T]=b.useState(!1),[w,_]=b.useState(!1),[R,z]=b.useState(""),[H,q]=b.useState(!1);b.useEffect(()=>{(async()=>{if(r&&r.id&&a)try{const I=await Ot.getLesson(a,r.id);z(I.videoUrl||"")}catch(I){console.error("Error fetching lesson with token:",I),z(r.videoUrl||"")}})()},[r,a]),b.useEffect(()=>{r?(d({title:r.title||"",content:r.content||"",ordinal:r.ordinal||1,type:"video",videoUrl:r.videoUrl||"",videoDurationSeconds:r.videoDurationSeconds||null,isOptional:r.isOptional||!1}),q(!r.videoUrl)):q(!0)},[r]),b.useEffect(()=>{s&&u==="library"&&ne()},[s,u,a]);const ne=async()=>{T(!0);try{const O=await Ot.listSharedLibraryVideos(a);N(O)}catch(O){console.error("Error loading library videos:",O)}finally{T(!1)}},U=O=>{const{name:I,value:P,type:W,checked:de}=O.target;d(he=>({...he,[I]:W==="checkbox"?de:P}))},re=O=>{m(O),S(null),p(0),E(null)},fe=async O=>{const I=O.target.files?.[0];if(!I)return;if(!["video/mp4","video/avi","video/mov","video/wmv","video/x-flv","video/x-matroska","video/webm"].includes(I.type)){S("Invalid video format. Please upload MP4, AVI, MOV, WMV, FLV, MKV, or WebM files.");return}const W=500*1024*1024;if(I.size>W){S("File size exceeds 500MB limit.");return}v(!0),S(null),p(0);try{const de=await Ot.uploadVideo(a,I,je=>p(je));d(je=>({...je,videoUrl:de.videoUrl}));const he=document.createElement("video");he.src=URL.createObjectURL(I),he.onloadedmetadata=()=>{d(je=>({...je,videoDurationSeconds:Math.round(he.duration)})),URL.revokeObjectURL(he.src)}}catch(de){console.error("Upload error:",de),S(de.response?.data?.message||"Failed to upload video. Please try again.")}finally{v(!1)}},Z=O=>{E(O),d(I=>({...I,videoUrl:O.url}))},B=async O=>{if(O.preventDefault(),!o.title.trim()){alert("Please enter a lesson title");return}if(!o.videoUrl){alert("Please provide a video source");return}_(!0);try{r?await Ot.updateLesson(a,r.id,o):await Ot.createLesson(a,o),l?.(),L()}catch(I){console.error("Error saving lesson:",I),alert(I.response?.data?.message||"Failed to save lesson")}finally{_(!1)}},L=()=>{d({title:"",content:"",ordinal:1,type:"video",videoUrl:"",videoDurationSeconds:null,isOptional:!1}),m("url"),p(0),v(!1),S(null),N([]),E(null),e()},Y=O=>{if(O===0)return"0 Bytes";const I=1024,P=["Bytes","KB","MB","GB"],W=Math.floor(Math.log(O)/Math.log(I));return Math.round(O/Math.pow(I,W)*100)/100+" "+P[W]};return s?t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[t.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:L,"aria-hidden":"true"}),t.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),t.jsxs("div",{className:"relative inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[t.jsxs("div",{className:"bg-indigo-600 px-6 py-4 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(jo,{className:"h-6 w-6 text-white mr-2"}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:r?"Edit Video Lesson":"Create Video Lesson"})]}),t.jsx("button",{onClick:L,className:"text-white hover:text-gray-200 transition",children:t.jsx(Pr,{className:"h-6 w-6"})})]}),t.jsxs("form",{onSubmit:B,children:[t.jsxs("div",{className:"bg-white px-6 py-4 max-h-[70vh] overflow-y-auto",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lesson Title *"}),t.jsx("input",{type:"text",name:"title",value:o.title,onChange:U,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter lesson title",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),t.jsx("textarea",{name:"content",value:o.content,onChange:U,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Add a description or instructions for this video lesson"})]}),t.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (seconds)"}),t.jsx("input",{type:"number",name:"videoDurationSeconds",value:o.videoDurationSeconds||"",onChange:U,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Auto-detected or manual"})]})}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",name:"isOptional",checked:o.isOptional,onChange:U,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),t.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"This lesson is optional"})]})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video Source *"}),o.videoUrl&&!H&&t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-center text-green-600 mb-3",children:[t.jsx(zt,{className:"h-6 w-6 mr-2"}),t.jsx("span",{className:"text-sm font-medium",children:"Video added to lesson"})]}),t.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Current Video:"}),t.jsx("p",{className:"text-xs text-gray-600 mt-1 break-all",children:o.videoUrl.split("?")[0].split("/").pop()})]}),t.jsxs("a",{href:R||o.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"ml-3 inline-flex items-center px-3 py-1.5 text-sm font-medium text-indigo-600 bg-white border border-indigo-300 rounded-md hover:bg-indigo-50 transition shrink-0",children:[t.jsx(Yf,{className:"h-4 w-4 mr-1"}),"Preview"]})]})}),t.jsx("button",{type:"button",onClick:()=>q(!0),className:"mt-3 text-sm text-indigo-600 hover:text-indigo-800 font-medium",children:"Change video"})]}),H&&t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Select how you want to add the video to this lesson"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsx("button",{type:"button",onClick:()=>re("upload"),className:`p-4 rounded-lg border-2 text-left transition ${u==="upload"?"border-indigo-600 bg-indigo-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Or,{className:`h-6 w-6 mr-3 shrink-0 ${u==="upload"?"text-indigo-600":"text-gray-400"}`}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:`font-medium ${u==="upload"?"text-indigo-900":"text-gray-900"}`,children:"Upload New File"}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Upload a video from your computer"})]}),u==="upload"&&t.jsx(zt,{className:"h-5 w-5 text-indigo-600 ml-2 shrink-0"})]})}),t.jsx("button",{type:"button",onClick:()=>re("library"),className:`p-4 rounded-lg border-2 text-left transition ${u==="library"?"border-indigo-600 bg-indigo-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:t.jsxs("div",{className:"flex items-start",children:[t.jsx($d,{className:`h-6 w-6 mr-3 shrink-0 ${u==="library"?"text-indigo-600":"text-gray-400"}`}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:`font-medium ${u==="library"?"text-indigo-900":"text-gray-900"}`,children:"LMS Library"}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Choose from previously uploaded videos"})]}),u==="library"&&t.jsx(zt,{className:"h-5 w-5 text-indigo-600 ml-2 shrink-0"})]})})]}),u==="upload"&&t.jsx("div",{children:t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[t.jsx(Or,{className:"h-12 w-12 mx-auto text-gray-400 mb-3"}),!o.videoUrl&&!y&&t.jsx(t.Fragment,{children:t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:"Click to upload or drag and drop"}),t.jsx("span",{className:"mt-1 block text-xs text-gray-500",children:"MP4, AVI, MOV, WMV, FLV, MKV, WebM (Max 500MB)"}),t.jsx("input",{type:"file",accept:"video/*",onChange:fe,className:"hidden"})]})}),y&&t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all",style:{width:`${f}%`}})}),t.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Uploading... ",f,"%"]})]}),o.videoUrl&&!y&&t.jsxs("div",{className:"flex items-center justify-center text-green-600 mt-4",children:[t.jsx(zt,{className:"h-6 w-6 mr-2"}),t.jsx("span",{className:"text-sm font-medium",children:"Video uploaded successfully"})]}),j&&t.jsxs("div",{className:"flex items-center justify-center text-red-600 mt-4",children:[t.jsx($i,{className:"h-6 w-6 mr-2"}),t.jsx("span",{className:"text-sm",children:j})]})]})}),u==="library"&&t.jsx("div",{children:A?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),t.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading library..."})]}):C.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx($d,{className:"h-12 w-12 mx-auto text-gray-300 mb-2"}),t.jsx("p",{className:"text-sm",children:"No videos in the LMS shared library yet."}),t.jsx("p",{className:"text-xs mt-1",children:"Contact your administrator to add videos to the shared library."})]}):t.jsx("div",{className:"grid grid-cols-2 gap-3 max-h-64 overflow-y-auto",children:C.map((O,I)=>t.jsx("div",{onClick:()=>Z(O),className:`border rounded-lg p-3 cursor-pointer transition ${D?.url===O.url?"border-indigo-600 bg-indigo-50":"border-gray-200 hover:border-indigo-300"}`,children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Yf,{className:"h-5 w-5 text-gray-400 mr-2 shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:O.name}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Y(O.size)}),O.lastModified&&t.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:new Date(O.lastModified).toLocaleDateString()})]})]})},I))})})]})]})]}),t.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[t.jsx("button",{type:"button",onClick:L,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:w||y,children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",disabled:w||y||!o.videoUrl,children:w?"Saving...":r?"Update Lesson":"Create Lesson"})]})]})]})]})}):null}function fR({isOpen:s,onClose:e,courseId:a,lesson:r,onSave:l}){const[o,d]=b.useState({title:"",content:"",ordinal:1,type:"document",documentUrl:"",isOptional:!1}),[u,m]=b.useState("upload"),[f,p]=b.useState(0),[y,v]=b.useState(!1),[j,S]=b.useState(null),[C,N]=b.useState([]),[D,E]=b.useState(null),[A,T]=b.useState(!1),[w,_]=b.useState(!1),[R,z]=b.useState(""),[H,q]=b.useState(!1);b.useEffect(()=>{(async()=>{if(r&&r.id&&a)try{const I=await Ot.getLesson(a,r.id);z(I.documentUrl||"")}catch(I){console.error("Error fetching lesson with token:",I),z(r.documentUrl||"")}})()},[r,a]),b.useEffect(()=>{r?(d({title:r.title||"",content:r.content||"",ordinal:r.ordinal||1,type:"document",documentUrl:r.documentUrl||"",isOptional:r.isOptional||!1}),q(!r.documentUrl)):q(!0)},[r]),b.useEffect(()=>{s&&u==="library"&&ne()},[s,u,a]);const ne=async()=>{T(!0);try{const O=await Ot.listSharedLibraryPdfs(a);N(O)}catch(O){console.error("Error loading library PDFs:",O)}finally{T(!1)}},U=O=>{const{name:I,value:P,type:W,checked:de}=O.target;d(he=>({...he,[I]:W==="checkbox"?de:P}))},re=O=>{m(O),S(null),p(0),E(null)},fe=async O=>{const I=O.target.files?.[0];if(!I)return;if(I.type!=="application/pdf"){S("Invalid file format. Please upload PDF files only.");return}const P=100*1024*1024;if(I.size>P){S("File size exceeds 100MB limit.");return}v(!0),S(null),p(0);try{const W=await Ot.uploadPdf(a,I,de=>p(de));d(de=>({...de,documentUrl:W.documentUrl}))}catch(W){console.error("Upload error:",W),S(W.response?.data?.message||"Failed to upload PDF. Please try again.")}finally{v(!1)}},Z=O=>{E(O),d(I=>({...I,documentUrl:O.url}))},B=async O=>{if(O.preventDefault(),!o.title.trim()){alert("Please enter a lesson title");return}if(!o.documentUrl){alert("Please provide a PDF document");return}_(!0);try{r?await Ot.updateLesson(a,r.id,o):await Ot.createLesson(a,o),l?.(),L()}catch(I){console.error("Error saving lesson:",I),alert(I.response?.data?.message||"Failed to save lesson")}finally{_(!1)}},L=()=>{d({title:"",content:"",ordinal:1,type:"document",documentUrl:"",isOptional:!1}),m("upload"),p(0),v(!1),S(null),N([]),E(null),e()},Y=O=>{if(O===0)return"0 Bytes";const I=1024,P=["Bytes","KB","MB","GB"],W=Math.floor(Math.log(O)/Math.log(I));return Math.round(O/Math.pow(I,W)*100)/100+" "+P[W]};return s?t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[t.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:L,"aria-hidden":"true"}),t.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),t.jsxs("div",{className:"relative inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[t.jsxs("div",{className:"bg-purple-600 px-6 py-4 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Kl,{className:"h-6 w-6 text-white mr-2"}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:r?"Edit PDF Lesson":"Create PDF Lesson"})]}),t.jsx("button",{onClick:L,className:"text-white hover:text-gray-200 transition",children:t.jsx(Pr,{className:"h-6 w-6"})})]}),t.jsxs("form",{onSubmit:B,children:[t.jsxs("div",{className:"bg-white px-6 py-4 max-h-[70vh] overflow-y-auto",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lesson Title *"}),t.jsx("input",{type:"text",name:"title",value:o.title,onChange:U,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter lesson title",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),t.jsx("textarea",{name:"content",value:o.content,onChange:U,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Add a description or instructions for this PDF lesson"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",name:"isOptional",checked:o.isOptional,onChange:U,className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),t.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"This lesson is optional"})]})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PDF Source *"}),o.documentUrl&&!H&&t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-center text-green-600 mb-3",children:[t.jsx(zt,{className:"h-6 w-6 mr-2"}),t.jsx("span",{className:"text-sm font-medium",children:"PDF added to lesson"})]}),t.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Current PDF:"}),t.jsx("p",{className:"text-xs text-gray-600 mt-1 break-all",children:o.documentUrl.split("?")[0].split("/").pop()})]}),t.jsxs("a",{href:R||o.documentUrl,target:"_blank",rel:"noopener noreferrer",className:"ml-3 inline-flex items-center px-3 py-1.5 text-sm font-medium text-purple-600 bg-white border border-purple-300 rounded-md hover:bg-purple-50 transition shrink-0",children:[t.jsx(Kl,{className:"h-4 w-4 mr-1"}),"Preview"]})]})}),t.jsx("button",{type:"button",onClick:()=>q(!0),className:"mt-3 text-sm text-purple-600 hover:text-purple-800 font-medium",children:"Change PDF"})]}),H&&t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Select how you want to add the PDF to this lesson"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsx("button",{type:"button",onClick:()=>re("upload"),className:`p-4 rounded-lg border-2 text-left transition ${u==="upload"?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Or,{className:`h-6 w-6 mr-3 shrink-0 ${u==="upload"?"text-purple-600":"text-gray-400"}`}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:`font-medium ${u==="upload"?"text-purple-900":"text-gray-900"}`,children:"Upload New File"}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Upload a PDF from your computer"})]}),u==="upload"&&t.jsx(zt,{className:"h-5 w-5 text-purple-600 ml-2 shrink-0"})]})}),t.jsx("button",{type:"button",onClick:()=>re("library"),className:`p-4 rounded-lg border-2 text-left transition ${u==="library"?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:t.jsxs("div",{className:"flex items-start",children:[t.jsx($d,{className:`h-6 w-6 mr-3 shrink-0 ${u==="library"?"text-purple-600":"text-gray-400"}`}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:`font-medium ${u==="library"?"text-purple-900":"text-gray-900"}`,children:"LMS Library"}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Choose from previously uploaded PDFs"})]}),u==="library"&&t.jsx(zt,{className:"h-5 w-5 text-purple-600 ml-2 shrink-0"})]})})]}),u==="upload"&&t.jsx("div",{children:t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[t.jsx(Kl,{className:"h-12 w-12 mx-auto text-gray-400 mb-3"}),!o.documentUrl&&!y&&t.jsx(t.Fragment,{children:t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:"Click to upload or drag and drop"}),t.jsx("span",{className:"mt-1 block text-xs text-gray-500",children:"PDF files only (Max 100MB)"}),t.jsx("input",{type:"file",accept:"application/pdf",onChange:fe,className:"hidden"})]})}),y&&t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all",style:{width:`${f}%`}})}),t.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Uploading... ",f,"%"]})]}),o.documentUrl&&!y&&t.jsxs("div",{className:"flex items-center justify-center text-green-600 mt-4",children:[t.jsx(zt,{className:"h-6 w-6 mr-2"}),t.jsx("span",{className:"text-sm font-medium",children:"PDF uploaded successfully"})]}),j&&t.jsxs("div",{className:"flex items-center justify-center text-red-600 mt-4",children:[t.jsx($i,{className:"h-6 w-6 mr-2"}),t.jsx("span",{className:"text-sm",children:j})]})]})}),u==="library"&&t.jsx("div",{children:A?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),t.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading library..."})]}):C.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx($d,{className:"h-12 w-12 mx-auto text-gray-300 mb-2"}),t.jsx("p",{className:"text-sm",children:"No PDFs in the LMS shared library yet."}),t.jsx("p",{className:"text-xs mt-1",children:"Contact your administrator to add PDFs to the shared library."})]}):t.jsx("div",{className:"grid grid-cols-2 gap-3 max-h-64 overflow-y-auto",children:C.map((O,I)=>t.jsx("div",{onClick:()=>Z(O),className:`border rounded-lg p-3 cursor-pointer transition ${D?.url===O.url?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-purple-300"}`,children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Kl,{className:"h-5 w-5 text-gray-400 mr-2 shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:O.name}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Y(O.size)}),O.lastModified&&t.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:new Date(O.lastModified).toLocaleDateString()})]})]})},I))})})]})]})]}),t.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[t.jsx("button",{type:"button",onClick:L,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",disabled:w||y,children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50",disabled:w||y||!o.documentUrl,children:w?"Saving...":r?"Update Lesson":"Create Lesson"})]})]})]})]})}):null}function pR({isOpen:s,onClose:e,courseId:a,lesson:r,onSave:l}){const[o,d]=b.useState({title:"",content:"",ordinal:1,type:"scorm",scormUrl:"",isOptional:!1}),[u,m]=b.useState(0),[f,p]=b.useState(!1),[y,v]=b.useState(null),[j,S]=b.useState(null),[C,N]=b.useState(!1);b.useEffect(()=>{r&&(d({title:r.title||"",content:r.content||"",ordinal:r.ordinal||1,type:"scorm",scormUrl:r.scormUrl||"",isOptional:r.isOptional||!1}),r.scormUrl&&S({packageName:"Existing Package",launchUrl:r.scormUrl}))},[r]);const D=_=>{const{name:R,value:z,type:H,checked:q}=_.target;d(ne=>({...ne,[R]:H==="checkbox"?q:z}))},E=async _=>{const R=_.target.files?.[0];if(!R)return;if(!R.name.toLowerCase().endsWith(".zip")){v("Invalid file format. Please upload a ZIP file containing a SCORM package.");return}const z=500*1024*1024;if(R.size>z){v("File size exceeds 500MB limit.");return}p(!0),v(null),m(0),S(null);try{const H=await Ot.uploadScorm(a,R,q=>m(q));d(q=>({...q,scormUrl:H.launchUrl})),S({packageName:H.packageName,launchUrl:H.launchUrl,fileCount:H.fileCount,totalSize:H.totalSize})}catch(H){console.error("Upload error:",H);const q=H.response?.data?.message||"Failed to upload SCORM package. Please ensure the ZIP file contains a valid imsmanifest.xml file.";v(q)}finally{p(!1)}},A=async _=>{if(_.preventDefault(),!o.title.trim()){alert("Please enter a lesson title");return}if(!o.scormUrl){alert("Please upload a SCORM package");return}N(!0);try{r?await Ot.updateLesson(a,r.id,o):await Ot.createLesson(a,o),l?.(),T()}catch(R){console.error("Error saving lesson:",R),alert(R.response?.data?.message||"Failed to save lesson")}finally{N(!1)}},T=()=>{d({title:"",content:"",ordinal:1,type:"scorm",scormUrl:"",isOptional:!1}),m(0),p(!1),v(null),S(null),e()},w=_=>{if(_===0)return"0 Bytes";const R=1024,z=["Bytes","KB","MB","GB"],H=Math.floor(Math.log(_)/Math.log(R));return Math.round(_/Math.pow(R,H)*100)/100+" "+z[H]};return s?t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[t.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:T,"aria-hidden":"true"}),t.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),t.jsxs("div",{className:"relative inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[t.jsxs("div",{className:"bg-green-600 px-6 py-4 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Hv,{className:"h-6 w-6 text-white mr-2"}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:r?"Edit SCORM Lesson":"Create SCORM Lesson"})]}),t.jsx("button",{onClick:T,className:"text-white hover:text-gray-200 transition",children:t.jsx(Pr,{className:"h-6 w-6"})})]}),t.jsxs("form",{onSubmit:A,children:[t.jsxs("div",{className:"bg-white px-6 py-4 max-h-[70vh] overflow-y-auto",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lesson Title *"}),t.jsx("input",{type:"text",name:"title",value:o.title,onChange:D,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Enter lesson title",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),t.jsx("textarea",{name:"content",value:o.content,onChange:D,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Add a description or instructions for this SCORM lesson"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",name:"isOptional",checked:o.isOptional,onChange:D,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),t.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"This lesson is optional"})]})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"SCORM Package *"}),t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[t.jsx(Hv,{className:"h-12 w-12 mx-auto text-gray-400 mb-3"}),!o.scormUrl&&!f&&t.jsx(t.Fragment,{children:t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:"Click to upload SCORM package"}),t.jsx("span",{className:"mt-1 block text-xs text-gray-500",children:"ZIP file only (Max 500MB)"}),t.jsx("span",{className:"mt-1 block text-xs text-gray-400",children:"Must contain imsmanifest.xml"}),t.jsx("input",{type:"file",accept:".zip",onChange:E,className:"hidden"})]})}),f&&t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all",style:{width:`${u}%`}})}),t.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Uploading and extracting SCORM package... ",u,"%"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This may take a few moments"})]}),j&&!f&&t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"flex items-center justify-center text-green-600 mb-3",children:[t.jsx(zt,{className:"h-6 w-6 mr-2"}),t.jsx("span",{className:"text-sm font-medium",children:"SCORM package uploaded successfully"})]}),t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-left",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Package Details:"}),t.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Package:"})," ",j.packageName]}),j.fileCount&&t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Files:"})," ",j.fileCount]}),j.totalSize&&t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Size:"})," ",w(j.totalSize)]})]})]}),t.jsx("button",{type:"button",onClick:()=>{d(_=>({..._,scormUrl:""})),S(null)},className:"mt-3 text-sm text-gray-600 hover:text-gray-800",children:"Upload different package"})]}),y&&t.jsxs("div",{className:"flex items-start justify-center text-red-600 mt-4 bg-red-50 border border-red-200 rounded p-3",children:[t.jsx($i,{className:"h-6 w-6 mr-2 shrink-0"}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"text-sm font-medium",children:"Upload Failed"}),t.jsx("p",{className:"text-xs mt-1",children:y})]})]})]}),t.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-3",children:t.jsxs("p",{className:"text-xs text-blue-800",children:[t.jsx("strong",{children:"About SCORM:"})," SCORM (Sharable Content Object Reference Model) is a standard for e-learning content. Your ZIP file must contain an imsmanifest.xml file at the root or in a subfolder. The system will automatically extract the package, validate it, and determine the launch URL."]})})]})]}),t.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[t.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",disabled:C||f,children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",disabled:C||f||!o.scormUrl,children:C?"Saving...":r?"Update Lesson":"Create Lesson"})]})]})]})]})}):null}async function lo(s=""){const e=(s||"").trim(),a=`/api/admin/quizzes${e?`?search=${encodeURIComponent(e)}`:""}`;return(await ge.get(a)).data.items||[]}async function gR(s){const e=await ge.get(`/api/admin/quizzes/${encodeURIComponent(s)}`);return yR(e.data)}async function xR(s,e=!1){const a={title:s.title,description:s.description,passingScore:s.passingScore,isTimed:s.isTimed,timeLimit:s.timeLimit,shuffleQuestions:s.shuffleQuestions,shuffleAnswers:s.shuffleAnswers,showResults:s.showResults,allowRetake:s.allowRetake,maxAttempts:s.maxAttempts,courseId:s.courseId,questions:s.questions.map((r,l)=>({question:r.question,type:r.type,points:r.points,explanation:r.explanation,options:r.options.map(o=>({text:o.text,isCorrect:o.isCorrect}))}))};return e?(await ge.put(`/api/admin/quizzes/${encodeURIComponent(s.id)}`,a)).data:(await ge.post("/api/admin/quizzes",a)).data}function yR(s){if(s?.questions&&Array.isArray(s.questions)&&s.questions[0]?.options&&typeof s.questions[0].options[0]=="object")return s;const e=a=>{const r=a.type==="multiple-choice-single"?"mc_single":a.type==="multiple-choice-multi"?"mc_multi":a.type||"mc_single",l=Array.isArray(a.options)?a.options.map(o=>typeof o=="string"?{text:o,isCorrect:!1}:o):[];return{type:r,question:a.question||"",points:a.points??1,options:l,explanation:a.explanation||""}};return{id:s.id,title:s.title||"",description:s.description||"",passingScore:s.passingScore??70,timeLimit:s.timeLimit??30,shuffleQuestions:!!s.shuffleQuestions,shuffleAnswers:!!s.shuffleAnswers,showResults:s.showResults??!0,allowRetake:s.allowRetake??!0,maxAttempts:s.maxAttempts??3,questions:Array.isArray(s.questions)?s.questions.map(e):[]}}function bR({isOpen:s,onClose:e,courseId:a,lesson:r,onSave:l}){const o=ze(),[d,u]=b.useState({title:"",content:"",ordinal:1,type:"quiz",quizId:"",isOptional:!1}),[m,f]=b.useState("existing"),[p,y]=b.useState([]),[v,j]=b.useState([]),[S,C]=b.useState(""),[N,D]=b.useState(null),[E,A]=b.useState(!1),[T,w]=b.useState(!1),[_,R]=b.useState(!1);b.useEffect(()=>{r?(u({title:r.title||"",content:r.content||"",ordinal:r.ordinal||1,type:"quiz",quizId:r.quizId||"",isOptional:r.isOptional||!1}),r.quizId?(f("existing"),H(r.quizId),R(!1)):R(!0)):R(!0)},[r]),b.useEffect(()=>{s&&m==="existing"&&z()},[s,m,a]),b.useEffect(()=>{if(S.trim()==="")j(p);else{const B=S.toLowerCase(),L=p.filter(Y=>Y.title?.toLowerCase().includes(B)||Y.description?.toLowerCase().includes(B));j(L)}},[S,p]);const z=async()=>{A(!0);try{const L=(await lo("")).filter(Y=>Y.courseId===a);y(L),j(L)}catch(B){console.error("Error loading quizzes:",B)}finally{A(!1)}},H=async B=>{try{const Y=(await lo("")).find(O=>O.id===B);Y&&D(Y)}catch(L){console.error("Error loading quiz details:",L)}},q=B=>{const{name:L,value:Y,type:O,checked:I}=B.target;u(P=>({...P,[L]:O==="checkbox"?I:Y}))},ne=B=>{f(B),D(null),u(L=>({...L,quizId:""}))},U=B=>{D(B),u(L=>({...L,quizId:B.id,title:L.title||B.title}))},re=()=>{o(`/admin/quiz/create/${a}`),Z()},fe=async B=>{if(B.preventDefault(),!d.title.trim()){alert("Please enter a lesson title");return}if(!d.quizId){alert("Please select a quiz");return}w(!0);try{r?await Ot.updateLesson(a,r.id,d):await Ot.createLesson(a,d),l?.(),Z()}catch(L){console.error("Error saving lesson:",L),alert(L.response?.data?.message||"Failed to save lesson")}finally{w(!1)}},Z=()=>{u({title:"",content:"",ordinal:1,type:"quiz",quizId:"",isOptional:!1}),f("existing"),D(null),C(""),y([]),j([]),e()};return s?t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[t.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:Z,"aria-hidden":"true"}),t.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),t.jsxs("div",{className:"relative inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[t.jsxs("div",{className:"bg-orange-600 px-6 py-4 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(df,{className:"h-6 w-6 text-white mr-2"}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:r?"Edit Quiz Lesson":"Create Quiz Lesson"})]}),t.jsx("button",{onClick:Z,className:"text-white hover:text-gray-200 transition",children:t.jsx(Pr,{className:"h-6 w-6"})})]}),t.jsxs("form",{onSubmit:fe,children:[t.jsxs("div",{className:"bg-white px-6 py-4 max-h-[70vh] overflow-y-auto",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lesson Title *"}),t.jsx("input",{type:"text",name:"title",value:d.title,onChange:q,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter lesson title",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),t.jsx("textarea",{name:"content",value:d.content,onChange:q,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Add a description or instructions for this quiz lesson"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",name:"isOptional",checked:d.isOptional,onChange:q,className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),t.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"This lesson is optional"})]})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quiz Selection *"}),d.quizId&&N&&!_&&t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-center text-green-600 mb-3",children:[t.jsx(zt,{className:"h-6 w-6 mr-2"}),t.jsx("span",{className:"text-sm font-medium",children:"Quiz added to lesson"})]}),t.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Current Quiz:"}),t.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:N.title}),t.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-600",children:[t.jsxs("span",{children:[" ",N.questionCount||0," questions"]}),N.passingScore&&t.jsxs("span",{children:[" ",N.passingScore,"% to pass"]}),N.isTimed&&N.timeLimit&&t.jsxs("span",{children:[" ",N.timeLimit," min"]})]})]}),t.jsxs("button",{type:"button",onClick:()=>o(`/admin/quiz/edit/${N.id}`),className:"ml-3 inline-flex items-center px-3 py-1.5 text-sm font-medium text-orange-600 bg-white border border-orange-300 rounded-md hover:bg-orange-50 transition shrink-0",children:[t.jsx(TT,{className:"h-4 w-4 mr-1"}),"Edit Quiz"]})]})}),t.jsx("button",{type:"button",onClick:()=>R(!0),className:"mt-3 text-sm text-orange-600 hover:text-orange-800 font-medium",children:"Change quiz"})]}),_&&t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Choose how to add a quiz to this lesson"}),t.jsxs("div",{className:"flex border-b border-gray-200 mb-4",children:[t.jsxs("button",{type:"button",onClick:()=>ne("existing"),className:`px-4 py-2 text-sm font-medium border-b-2 transition ${m==="existing"?"border-orange-600 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[t.jsx(df,{className:"h-5 w-5 inline mr-1"}),"Select Existing Quiz"]}),t.jsxs("button",{type:"button",onClick:()=>ne("new"),className:`px-4 py-2 text-sm font-medium border-b-2 transition ${m==="new"?"border-orange-600 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[t.jsx(Tr,{className:"h-5 w-5 inline mr-1"}),"Create New Quiz"]})]}),m==="existing"&&t.jsxs("div",{children:[t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"relative",children:[t.jsx(Id,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{type:"text",value:S,onChange:B=>C(B.target.value),placeholder:"Search quizzes...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]})}),E?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"}),t.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading quizzes..."})]}):v.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[t.jsx(df,{className:"h-12 w-12 mx-auto text-gray-300 mb-2"}),t.jsx("p",{className:"text-sm",children:S?"No quizzes found matching your search.":"No quizzes available for this course."}),t.jsx("p",{className:"text-xs mt-1",children:"Create a new quiz first."})]}):t.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:v.map(B=>t.jsx("div",{onClick:()=>U(B),className:`border rounded-lg p-4 cursor-pointer transition ${N?.id===B.id?"border-orange-600 bg-orange-50":"border-gray-200 hover:border-orange-300 hover:bg-gray-50"}`,children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:B.title}),N?.id===B.id&&t.jsx(zt,{className:"h-5 w-5 text-orange-600 ml-2"})]}),B.description&&t.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:B.description}),t.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-400",children:[t.jsxs("span",{children:[" ",B.questionCount||0," questions"]}),B.passingScore&&t.jsxs("span",{children:[" ",B.passingScore,"% to pass"]}),B.isTimed&&B.timeLimit&&t.jsxs("span",{children:[" ",B.timeLimit," min"]})]})]})})},B.id))})]}),m==="new"&&t.jsxs("div",{className:"text-center py-8 bg-orange-50 border-2 border-dashed border-orange-300 rounded-lg",children:[t.jsx(Tr,{className:"h-12 w-12 mx-auto text-orange-600 mb-3"}),t.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Create a new quiz for this course"}),t.jsxs("p",{className:"text-xs text-gray-600 mb-4",children:["You'll be redirected to the quiz builder. After creating the quiz,",t.jsx("br",{}),"return here to add it as a lesson."]}),t.jsxs("button",{type:"button",onClick:re,className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition inline-flex items-center gap-2",children:[t.jsx(Tr,{className:"h-5 w-5"}),"Go to Quiz Builder"]})]})]})]})]}),t.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[t.jsx("button",{type:"button",onClick:Z,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",disabled:T,children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50",disabled:T||!d.quizId||m==="new",children:T?"Saving...":r?"Update Lesson":"Create Lesson"})]})]})]})]})}):null}function Yv(s,e){return new Promise((a,r)=>{const l=new XMLHttpRequest;l.open("POST","/api/admin/uploads/media"),l.responseType="json",l.upload.onprogress=d=>{if(d.lengthComputable&&typeof e=="function"){const u=Math.round(d.loaded/d.total*100);e(u)}},l.onload=()=>{if(l.status>=200&&l.status<300){const d=l.response||{};d.url?a(d):r(new Error("Upload completed but no URL returned"))}else r(new Error(`Upload failed with status ${l.status}`))},l.onerror=()=>r(new Error("Network error during upload"));const o=new FormData;o.append("file",s),l.send(o)})}function vR(s,e){return new Promise((a,r)=>{const l=new XMLHttpRequest;l.open("POST","/api/admin/uploads/scorm"),l.responseType="json",l.upload.onprogress=d=>{if(d.lengthComputable&&typeof e=="function"){const u=Math.round(d.loaded/d.total*100);e(u)}},l.onload=()=>{if(l.status>=200&&l.status<300){const d=l.response||{};d.entryUrl?a(d):r(new Error("Upload completed but no entryUrl returned"))}else r(new Error(`Upload failed with status ${l.status}`))},l.onerror=()=>r(new Error("Network error during upload"));const o=new FormData;o.append("file",s),l.send(o)})}function Gv(){const s=ze(),{courseId:e}=Xn(),[a]=ap(),r=!e;tt(r?"Add Course":"Edit Course");const[l,o]=b.useState(!r),[d,u]=b.useState(!1),[m,f]=b.useState(!1),[p,y]=b.useState({title:"",shortDescription:"",longDescription:"",category:"",tags:[],certificateEnabled:!0,bannerFile:null,bannerPreview:"",status:"Draft",preCourseSurveyId:null,postCourseSurveyId:null,isPreSurveyMandatory:!1,isPostSurveyMandatory:!1}),[v,j]=b.useState(""),[S,C]=b.useState(!1),[N,D]=b.useState("details"),[E,A]=b.useState([]),[T,w]=b.useState(!1);b.useEffect(()=>{const $=a.get("tab");$&&["details","lessons","quizzes"].includes($)&&D($)},[a]),b.useEffect(()=>{!r&&e&&(_(),z())},[e,r]),b.useEffect(()=>{N==="quizzes"&&e&&!r&&R()},[N,e,r]),b.useEffect(()=>{const $=async ue=>{const{title:be,htmlContent:Qe}=ue.detail;if(!e){G.error("Please save the course first before creating lessons");return}try{G.loading("Creating HTML lesson...",{id:"html-lesson"});const Ze=await Ot.uploadHtmlContent(e,be,Qe),xn=await Ot.createLesson(e,{title:be,type:"html",documentUrl:Ze.htmlUrl,ordinal:H.length+1,isOptional:!1});q([...H,xn]),G.success("HTML lesson created successfully!",{id:"html-lesson"}),D("lessons"),f(!1)}catch(Ze){console.error("Error creating HTML lesson:",Ze),G.error("Failed to create HTML lesson",{id:"html-lesson"})}};return window.addEventListener("createHtmlLesson",$),()=>window.removeEventListener("createHtmlLesson",$)},[e,H,r]);const _=async()=>{try{o(!0);const $=await Vn.getCourse(e),ue=ro.transformCourseResponseToForm($);y(ue),q($.lessons||[]),await R()}catch($){console.error("Error loading course:",$),G.error("Failed to load course data"),s("/admin/courses")}finally{o(!1)}},R=async()=>{if(e)try{Br(!0);const ue=(await lo("")).filter(be=>be.courseId===e);Ea(ue)}catch($){console.error("Error loading course quizzes:",$),G.error("Failed to load quizzes")}finally{Br(!1)}},z=async()=>{try{w(!0);const ue=(await aa.listSurveys()||[]).filter(be=>be.status==="Published");A(ue)}catch($){console.error("Error loading surveys:",$),G.error("Failed to load surveys")}finally{w(!1)}},[H,q]=b.useState([]),[ne,U]=b.useState(!1),[re,fe]=b.useState(null),[Z,B]=b.useState({id:"",order:1,type:"video",title:"",description:"",isOptional:!1,src:"",entryUrl:"",quizId:""}),[L,Y]=b.useState(!1),[O,I]=b.useState(0),[P,W]=b.useState(!1),[de,he]=b.useState(null),[je,ke]=b.useState(!1),[Oe,ft]=b.useState(null),[Xe,Ut]=b.useState(!1),[xe,Ae]=b.useState(null),[jt,wt]=b.useState(!1),[un,hn]=b.useState(null),[Aa,mn]=b.useState(null),[fn,V]=b.useState(null),[ee,ie]=b.useState(!1),[ye,me]=b.useState(""),[pe,we]=b.useState(!1),[$e,Be]=b.useState([]),[Yt,Ea]=b.useState([]),[Ls,Br]=b.useState(!1),Zs=async()=>{ie(!0),we(!0);try{const $=await lo("");Be($)}catch($){console.error($),Be([])}finally{we(!1)}},Bt=async $=>{me($),we(!0);try{const ue=await lo($);Be(ue)}catch(ue){console.error(ue),Be([])}finally{we(!1)}},Os=$=>{B(ue=>({...ue,quizId:$.id,title:ue.title||$.title})),ie(!1),G.success("Quiz selected")},At=b.useMemo(()=>p.title.trim().length>0&&p.shortDescription.trim().length>0,[p.title,p.shortDescription]),Ns=($,ue)=>{y(be=>({...be,[$]:ue}))},Kn=$=>{const ue=$.target.files?.[0];if(!ue)return;if(!ue.type.startsWith("image/")){G.error("Please select an image file");return}const be=URL.createObjectURL(ue);y(Qe=>({...Qe,bannerFile:ue,bannerPreview:be}))},vu=()=>{p.bannerPreview&&URL.revokeObjectURL(p.bannerPreview),y($=>({...$,bannerFile:null,bannerPreview:""}))},Fr=$=>{const ue=$.trim();ue&&(p.tags.includes(ue)||(y(be=>({...be,tags:[...be.tags,ue]})),j("")))},Hr=$=>{($.key==="Enter"||$.key===",")&&($.preventDefault(),Fr(v.replace(",",""))),$.key==="Backspace"&&!v&&p.tags.length&&y(ue=>({...ue,tags:ue.tags.slice(0,-1)}))},qr=$=>y(ue=>({...ue,tags:ue.tags.filter(be=>be!==$)})),rs=async()=>{if(e)try{const $=await Ot.getLessons(e);q($)}catch($){console.error("Error loading lessons:",$),G.error("Failed to load lessons")}};b.useEffect(()=>{N==="lessons"&&e&&!r&&rs()},[N,e,r]);const Jn=($=null)=>{he($),W(!0)},er=()=>{rs(),G.success("Video lesson saved successfully")},Lo=($=null)=>{ft($),ke(!0)},Oo=()=>{rs(),G.success("PDF lesson saved successfully")},Vr=($=null)=>{Ae($),Ut(!0)},tr=()=>{rs(),G.success("SCORM lesson saved successfully")},zo=($=null)=>{hn($),wt(!0)},Po=()=>{rs(),G.success("Quiz lesson saved successfully")},sr=async $=>{if(window.confirm("Are you sure you want to delete this lesson?"))try{await Ot.deleteLesson(e,$),G.success("Lesson deleted"),rs()}catch(ue){console.error("Error deleting lesson:",ue),G.error("Failed to delete lesson")}},Uo=($,ue,be)=>{if(p.status==="Published"){$.preventDefault();return}mn({lesson:ue,index:be}),$.dataTransfer.effectAllowed="move",$.dataTransfer.setData("text/html",$.currentTarget)},Qi=($,ue)=>{$.preventDefault(),$.dataTransfer.dropEffect="move",V(ue)},Yi=()=>{V(null)},Bo=async($,ue)=>{if($.preventDefault(),V(null),!Aa||Aa.index===ue){mn(null);return}const be=Aa.index,Qe=[...H],[Ze]=Qe.splice(be,1);Qe.splice(ue,0,Ze),q(Qe),mn(null);try{const xn=Qe.map((Vo,Ta)=>({lessonId:Vo.id,ordinal:Ta+1}));await Ot.reorderLessons(e,xn),G.success("Lesson order updated")}catch(xn){console.error("Error reordering lessons:",xn),G.error("Failed to save lesson order"),rs()}},Fo=()=>{mn(null),V(null)},pa=()=>"l"+Math.random().toString(36).slice(2,8)+Date.now().toString(36).slice(-3),Ft=$=>({id:"",order:H.length+1,type:$,title:"",description:"",isOptional:!1,src:"",entryUrl:"",quizId:""}),Kt=$=>{fe(null),B(Ft($)),U(!0)},pn=$=>{const ue=H[$];fe($),B({...ue}),U(!0)},Gi=$=>{window.confirm("Delete this lesson?")&&(q(ue=>ue.filter((be,Qe)=>Qe!==$)),G.success("Lesson deleted"))},Ho=($,ue)=>{const be=ue==="up"?$-1:$+1;be<0||be>=H.length||q(Qe=>{const Ze=Qe.slice();return[Ze[$],Ze[be]]=[Ze[be],Ze[$]],Ze})},ju=()=>{U(!1),fe(null)},qo=()=>{const $=Z;if(!$.title.trim()){G.error("Lesson title is required");return}if(($.type==="video"||$.type==="pdf")&&!$.src.trim()){G.error("Please provide a valid URL");return}if($.type==="scorm"&&!$.entryUrl.trim()){G.error("SCORM entry URL is required");return}if($.type==="quiz"&&!$.quizId.trim()){G.error("Quiz ID is required");return}if(re===null){const ue={...$,id:pa()};q(be=>[...be,ue]),G.success("Lesson added")}else q(ue=>ue.map((be,Qe)=>Qe===re?{...$}:be)),G.success("Lesson updated");U(!1),fe(null)},gn=async()=>{if(C(!0),!At){p.title.trim()?p.shortDescription.trim()||G.error("Please enter a short description"):G.error("Please enter a course title");return}try{u(!0);const $=ro.transformCourseFormToRequest(p);let ue;r?(ue=await Vn.createCourse($),G.success("Course created successfully! Now add lessons in the Lessons tab."),D("lessons"),s(`/admin/courses/${ue.id}/edit?tab=lessons`,{replace:!0})):(ue=await Vn.updateCourse(e,$),G.success("Course updated successfully!"))}catch($){console.error("Error saving course:",$);const ue=$.response?.data?.message||"Failed to save course";G.error(ue)}finally{u(!1)}},Wi=$=>{try{let ue=$.trim();ue.startsWith("```")&&(ue=ue.replace(/^```json\n/,"").replace(/^```\n/,"").replace(/\n```$/,""));const be=JSON.parse(ue);be.title?(y(Qe=>({...Qe,title:be.title||Qe.title,shortDescription:be.shortDescription||be.summary||Qe.shortDescription,longDescription:be.longDescription||be.description||Qe.longDescription,tags:be.tags&&Array.isArray(be.tags)?be.tags:Qe.tags})),G.success("Course details applied! You can now add lessons manually."),f(!1)):Array.isArray(be)&&be.length>0&&be[0].question?G("Quiz questions detected. Please use this on the Quiz Creator page.",{icon:""}):G("Content copied. You can manually apply the changes.",{icon:""})}catch{navigator.clipboard?(navigator.clipboard.writeText($),G.success("Lesson content copied to clipboard! Paste it into your lesson editor.")):G("Content generated. Please copy it manually.",{icon:""})}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsx(o2,{mode:"slideIn",isOpen:m,onClose:()=>f(!1),context:p.title?`Creating course: ${p.title}`:"Creating a new course",onApplyContent:Wi,defaultTab:"course"}),t.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("button",{onClick:()=>s(-1),className:"flex items-center text-gray-600 hover:text-gray-900",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),t.jsxs("button",{onClick:()=>f(!0),className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all duration-200 flex items-center gap-2",children:[t.jsx(sa,{className:"w-5 h-5"}),"AI Assistant"]})]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:r?"Create New Course":"Edit Course"}),l?t.jsx("div",{className:"bg-white rounded-lg shadow p-8",children:t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:"text-gray-500",children:"Loading course data..."})})}):t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 pt-4 border-b",children:t.jsxs("div",{className:"flex gap-6",children:[t.jsx("button",{className:`pb-3 text-sm font-medium border-b-2 ${N==="details"?"border-(--tenant-primary) text-(--tenant-primary)":"border-transparent text-gray-600 hover:text-gray-900"}`,onClick:()=>D("details"),children:"Details"}),t.jsx("button",{className:`pb-3 text-sm font-medium border-b-2 ${N==="lessons"?"border-(--tenant-primary) text-(--tenant-primary)":"border-transparent text-gray-600 hover:text-gray-900"}`,onClick:()=>D("lessons"),children:"Lessons"}),t.jsx("button",{className:`pb-3 text-sm font-medium border-b-2 ${N==="quizzes"?"border-(--tenant-primary) text-(--tenant-primary)":"border-transparent text-gray-600 hover:text-gray-900"}`,onClick:()=>D("quizzes"),children:"Quizzes"})]})}),N==="details"&&t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"md:col-span-2 space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Course Title ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{value:p.title,onChange:$=>Ns("title",$.target.value),className:`w-full border rounded px-4 py-2 ${S&&!At?"border-red-500":"border-gray-300"}`,placeholder:"Enter course title"}),S&&!At&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Title is required."})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Short Description ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:p.shortDescription,onChange:$=>Ns("shortDescription",$.target.value),className:`w-full border rounded px-4 py-2 ${S&&!p.shortDescription.trim()?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`,rows:2,placeholder:"One-liner shown on cards/search results (required)"}),S&&!p.shortDescription.trim()&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:"Short description is required"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Long Description"}),t.jsx("textarea",{value:p.longDescription,onChange:$=>Ns("longDescription",$.target.value),className:"w-full border border-gray-300 rounded px-4 py-2",rows:6,placeholder:"Full description shown on course page"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course Banner / Thumbnail"}),p.bannerPreview?t.jsxs("div",{className:"border rounded p-2",children:[t.jsx("img",{src:p.bannerPreview,alt:"Banner preview",className:"w-full h-36 object-cover rounded"}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[t.jsx("button",{onClick:vu,className:"px-3 py-1.5 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Remove"}),t.jsxs("label",{className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 cursor-pointer",children:["Change",t.jsx("input",{type:"file",accept:"image/*",onChange:Kn,className:"hidden"})]})]})]}):t.jsxs("label",{className:"w-full border border-dashed border-gray-300 rounded p-4 flex items-center justify-center cursor-pointer hover:bg-gray-50",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-gray-500",children:"Click to upload image"}),t.jsx("div",{className:"text-xs text-gray-400",children:"PNG, JPG, GIF up to ~5MB"})]}),t.jsx("input",{type:"file",accept:"image/*",onChange:Kn,className:"hidden"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Enable Certificate"}),t.jsxs("label",{className:"inline-flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:p.certificateEnabled,onChange:$=>Ns("certificateEnabled",$.target.checked),className:"rounded text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Issue certificate on completion"})]})]}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Survey Settings"}),t.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Configure pre and post-course surveys. Create and publish surveys from the Surveys menu to assign them here."}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Pre-Course Survey (Optional)"}),t.jsxs("select",{value:p.preCourseSurveyId||"",onChange:$=>Ns("preCourseSurveyId",$.target.value?parseInt($.target.value):null),className:"w-full border border-gray-300 rounded px-3 py-1.5 text-sm",disabled:p.status==="Published",children:[t.jsx("option",{value:"",children:"No pre-course survey"}),E.map($=>t.jsx("option",{value:$.id,children:$.title},$.id))]}),p.preCourseSurveyId&&t.jsxs("label",{className:"inline-flex items-center gap-2 mt-2",children:[t.jsx("input",{type:"checkbox",checked:p.isPreSurveyMandatory,onChange:$=>Ns("isPreSurveyMandatory",$.target.checked),className:"rounded text-blue-600 focus:ring-blue-500",disabled:p.status==="Published"}),t.jsx("span",{className:"text-xs text-gray-700",children:"Mandatory (must complete before accessing lessons)"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Post-Course Survey (Optional)"}),t.jsxs("select",{value:p.postCourseSurveyId||"",onChange:$=>Ns("postCourseSurveyId",$.target.value?parseInt($.target.value):null),className:"w-full border border-gray-300 rounded px-3 py-1.5 text-sm",disabled:p.status==="Published",children:[t.jsx("option",{value:"",children:"No post-course survey"}),E.map($=>t.jsx("option",{value:$.id,children:$.title},$.id))]}),p.postCourseSurveyId&&t.jsxs("label",{className:"inline-flex items-center gap-2 mt-2",children:[t.jsx("input",{type:"checkbox",checked:p.isPostSurveyMandatory,onChange:$=>Ns("isPostSurveyMandatory",$.target.checked),className:"rounded text-blue-600 focus:ring-blue-500",disabled:p.status==="Published"}),t.jsx("span",{className:"text-xs text-gray-700",children:"Mandatory (must complete for course completion & certificate)"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),t.jsxs("select",{value:p.category,onChange:$=>Ns("category",$.target.value),className:"w-full border border-gray-300 rounded px-4 py-2",children:[t.jsx("option",{value:"",children:"Select a category"}),ro.getCategoryOptions().map($=>t.jsx("option",{value:$.value,children:$.label},$.value))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 border border-gray-300 rounded px-2 py-2",children:[p.tags.map($=>t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded-full",children:[$,t.jsx("button",{onClick:()=>qr($),className:"text-gray-500 hover:text-gray-700",children:""})]},$)),t.jsx("input",{value:v,onChange:$=>j($.target.value),onKeyDown:Hr,placeholder:"Type and press Enter",className:"flex-1 min-w-[120px] outline-none px-2 py-1 text-sm"})]})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[t.jsx("button",{onClick:()=>s(-1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"}),t.jsx("button",{onClick:gn,className:"px-4 py-2 bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded hover:brightness-90 cursor-pointer",children:"Save"})]})]}),N==="lessons"&&t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Lessons"}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(wR,{disabled:r||p.status==="Published",onAdd:$=>{$==="video"?Jn():$==="pdf"||$==="document"?Lo():$==="scorm"?Vr():$==="quiz"?zo():Kt($)}})})]}),r&&t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-sm text-yellow-800",children:[t.jsx("strong",{children:"Note:"})," Please save the course first before adding lessons."]}),p.status==="Published"&&!r&&t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-800",children:[t.jsx("strong",{children:"Note:"})," This course is published. Lessons cannot be modified while the course is published. Published courses cannot be unpublished, but they can be archived or deleted."]}),t.jsx("div",{className:"overflow-x-auto border rounded",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-12",children:"Drag"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Optional"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:H.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:'No lessons yet. Click "Add Lesson" to get started.'})}):H.map(($,ue)=>t.jsxs("tr",{draggable:p.status!=="Published",onDragStart:be=>Uo(be,$,ue),onDragOver:be=>Qi(be,ue),onDragLeave:Yi,onDrop:be=>Bo(be,ue),onDragEnd:Fo,className:`hover:bg-gray-50 transition-colors ${p.status!=="Published"?"cursor-move":""} ${fn===ue&&Aa?.index!==ue?"bg-blue-50 border-t-2 border-blue-400":""} ${Aa?.index===ue?"opacity-50":""}`,children:[t.jsx("td",{className:"px-4 py-3 text-gray-400",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("div",{className:"font-medium text-gray-900",children:$.title||t.jsx("span",{className:"text-gray-400",children:"Untitled"})}),$.content&&t.jsx("div",{className:"text-xs text-gray-500 truncate max-w-[420px]",children:$.content}),$.type==="quiz"&&$.quizId&&t.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Quiz ID: ",$.quizId]})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(jR,{type:$.type})}),t.jsx("td",{className:"px-4 py-3",children:$.isOptional?"Yes":"No"}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("div",{className:"flex justify-end gap-2",children:$.type==="video"?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>Jn($),disabled:p.status==="Published",className:"px-3 py-1.5 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Edit"}),t.jsx("button",{onClick:()=>sr($.id),disabled:p.status==="Published",className:"px-3 py-1.5 text-sm bg-red-50 text-red-700 rounded hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"})]}):$.type==="document"?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>Lo($),disabled:p.status==="Published",className:"px-3 py-1.5 text-sm bg-purple-50 text-purple-700 rounded hover:bg-purple-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Edit"}),t.jsx("button",{onClick:()=>sr($.id),disabled:p.status==="Published",className:"px-3 py-1.5 text-sm bg-red-50 text-red-700 rounded hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"})]}):$.type==="scorm"?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>Vr($),disabled:p.status==="Published",className:"px-3 py-1.5 text-sm bg-green-50 text-green-700 rounded hover:bg-green-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Edit"}),t.jsx("button",{onClick:()=>sr($.id),disabled:p.status==="Published",className:"px-3 py-1.5 text-sm bg-red-50 text-red-700 rounded hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"})]}):$.type==="quiz"?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>zo($),disabled:p.status==="Published",className:"px-3 py-1.5 text-sm bg-orange-50 text-orange-700 rounded hover:bg-orange-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Edit"}),t.jsx("button",{onClick:()=>sr($.id),disabled:p.status==="Published",className:"px-3 py-1.5 text-sm bg-red-50 text-red-700 rounded hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>Ho(ue,"up"),disabled:ue===0||p.status==="Published",className:"px-2 py-1 text-sm bg-gray-100 text-gray-700 rounded disabled:opacity-40 disabled:cursor-not-allowed",children:""}),t.jsx("button",{onClick:()=>Ho(ue,"down"),disabled:ue===H.length-1||p.status==="Published",className:"px-2 py-1 text-sm bg-gray-100 text-gray-700 rounded disabled:opacity-40 disabled:cursor-not-allowed",children:""}),t.jsx("button",{onClick:()=>pn(ue),disabled:p.status==="Published",className:"px-3 py-1.5 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Edit"}),t.jsx("button",{onClick:()=>Gi(ue),disabled:p.status==="Published",className:"px-3 py-1.5 text-sm bg-red-50 text-red-700 rounded hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"})]})})})]},$.id))})]})}),ne&&t.jsxs("div",{className:"border rounded p-4 bg-gray-50",children:[t.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-4",children:re===null?"Add Lesson":"Edit Lesson"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),t.jsxs("select",{value:Z.type,onChange:$=>B(ue=>({...ue,type:$.target.value})),className:"w-full border rounded px-3 py-2",children:[t.jsx("option",{value:"video",children:"Video"}),t.jsx("option",{value:"pdf",children:"PDF"}),t.jsx("option",{value:"scorm",children:"SCORM"}),t.jsx("option",{value:"quiz",children:"Quiz"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),t.jsx("input",{value:Z.title,onChange:$=>B(ue=>({...ue,title:$.target.value})),className:"w-full border rounded px-3 py-2",placeholder:"Lesson title"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{value:Z.description,onChange:$=>B(ue=>({...ue,description:$.target.value})),className:"w-full border rounded px-3 py-2",rows:3,placeholder:"Lesson description (optional)"})]}),t.jsxs("div",{className:"md:col-span-2",children:[Z.type==="video"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Video URL"}),t.jsx("input",{value:Z.src,onChange:$=>B(ue=>({...ue,src:$.target.value})),className:"w-full border rounded px-3 py-2",placeholder:"https://... (mp4 or HLS)"}),t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsxs("label",{className:"px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded cursor-pointer hover:bg-gray-200",children:["Upload file",t.jsx("input",{type:"file",accept:"video/*",className:"hidden",onChange:async $=>{const ue=$.target.files?.[0];if(ue){Y(!0),I(0);try{const be=await Yv(ue,I);B(Qe=>({...Qe,src:be.url})),G.success("Video uploaded")}catch(be){console.error(be),G.error("Video upload failed")}finally{Y(!1),setTimeout(()=>I(0),600)}}}})]}),L&&t.jsxs("span",{className:"text-xs text-gray-600",children:["Uploading ",O,"%"]})]})]}),Z.type==="pdf"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PDF URL"}),t.jsx("input",{value:Z.src,onChange:$=>B(ue=>({...ue,src:$.target.value})),className:"w-full border rounded px-3 py-2",placeholder:"https://... .pdf"}),t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsxs("label",{className:"px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded cursor-pointer hover:bg-gray-200",children:["Upload PDF",t.jsx("input",{type:"file",accept:"application/pdf",className:"hidden",onChange:async $=>{const ue=$.target.files?.[0];if(ue){if(ue.type!=="application/pdf"){G.error("Please select a PDF file");return}Y(!0),I(0);try{const be=await Yv(ue,I);B(Qe=>({...Qe,src:be.url})),G.success("PDF uploaded")}catch(be){console.error(be),G.error("PDF upload failed")}finally{Y(!1),setTimeout(()=>I(0),600)}}}})]}),L&&t.jsxs("span",{className:"text-xs text-gray-600",children:["Uploading ",O,"%"]})]})]}),Z.type==="scorm"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SCORM Entry URL"}),t.jsx("input",{value:Z.entryUrl,onChange:$=>B(ue=>({...ue,entryUrl:$.target.value})),className:"w-full border rounded px-3 py-2",placeholder:"/content/scorm/pkg-123/shared/launchpage.html"}),t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsxs("label",{className:"px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded cursor-pointer hover:bg-gray-200",children:["Upload SCORM .zip",t.jsx("input",{type:"file",accept:".zip,application/zip",className:"hidden",onChange:async $=>{const ue=$.target.files?.[0];if(ue){Y(!0),I(0);try{const be=await vR(ue,I);B(Qe=>({...Qe,entryUrl:be.entryUrl})),G.success("SCORM uploaded")}catch(be){console.error(be),G.error("SCORM upload failed")}finally{Y(!1),setTimeout(()=>I(0),600)}}}})]}),L&&t.jsxs("span",{className:"text-xs text-gray-600",children:["Uploading ",O,"%"]})]})]}),Z.type==="quiz"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quiz"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("input",{value:Z.quizId,onChange:$=>B(ue=>({...ue,quizId:$.target.value})),className:"flex-1 border rounded px-3 py-2",placeholder:"Paste an existing quiz ID"}),t.jsx("button",{type:"button",onClick:Zs,className:"px-3 py-2 text-sm bg-gray-100 text-gray-800 rounded hover:bg-gray-200",children:"Select Existing"}),t.jsx("button",{type:"button",onClick:()=>{const $=e?`/admin/quiz/create/${e}`:"/admin/quiz/create",ue=encodeURIComponent(window.location.pathname+window.location.search);window.location.href=`${$}?returnTo=${ue}`},className:"px-3 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Create New Quiz"}),Z.quizId&&t.jsx("a",{href:`/admin/quiz/edit/${encodeURIComponent(Z.quizId)}?returnTo=${encodeURIComponent(window.location.pathname+window.location.search)}`,className:"px-3 py-2 text-sm bg-orange-100 text-orange-800 rounded hover:bg-orange-200",children:"Edit This Quiz"})]}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Create a new quiz, paste an ID, or select from existing quizzes."}),ee&&t.jsxs("div",{className:"mt-3 border rounded p-3 bg-white",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("input",{value:ye,onChange:$=>Bt($.target.value),className:"flex-1 border rounded px-3 py-2",placeholder:"Search quizzes by title or ID"}),t.jsx("button",{type:"button",onClick:()=>ie(!1),className:"px-3 py-2 text-sm bg-gray-100 text-gray-800 rounded hover:bg-gray-200",children:"Close"})]}),pe?t.jsx("div",{className:"text-sm text-gray-500",children:"Loading"}):$e.length===0?t.jsx("div",{className:"text-sm text-gray-500",children:"No quizzes found."}):t.jsx("ul",{className:"divide-y",children:$e.map($=>t.jsxs("li",{className:"py-2 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-900",children:$.title}),t.jsx("div",{className:"text-xs text-gray-500",children:$.id})]}),t.jsx("button",{type:"button",onClick:()=>Os($),className:"px-3 py-1.5 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100",children:"Select"})]},$.id))})]})]})]}),t.jsx("div",{className:"md:col-span-2",children:t.jsxs("label",{className:"inline-flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:Z.isOptional,onChange:$=>B(ue=>({...ue,isOptional:$.target.checked})),className:"rounded text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Mark as optional"})]})})]}),t.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[t.jsx("button",{onClick:ju,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"}),t.jsx("button",{onClick:qo,className:"px-4 py-2 bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded hover:brightness-90 cursor-pointer",children:"Save Lesson"})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[t.jsx("button",{onClick:()=>s(-1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"}),t.jsx("button",{onClick:gn,disabled:d,className:"px-4 py-2 bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded hover:brightness-90 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Saving...":"Save Course"})]})]}),N==="quizzes"&&t.jsxs("div",{className:"p-6",children:[r&&t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-sm text-yellow-800 mb-6",children:[t.jsx("strong",{children:"Note:"})," Please save the course first before adding quizzes."]}),p.status==="Published"&&!r&&t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-800 mb-6",children:[t.jsx("strong",{children:"Note:"})," This course is published. Quizzes cannot be modified while the course is published. Published courses cannot be unpublished, but they can be archived or deleted."]}),t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Course Quizzes"}),t.jsx("button",{onClick:()=>s(`/admin/quiz/create/${e}`),disabled:r||p.status==="Published",className:`px-4 py-2 rounded ${r||p.status==="Published"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-boxlms-primary-btn text-boxlms-primary-btn-txt hover:brightness-90 cursor-pointer"}`,children:"Create New Quiz"})]}),Ls?t.jsx("div",{className:"text-center py-8",children:t.jsx("div",{className:"text-gray-500",children:"Loading quizzes..."})}):Yt.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-gray-500 mb-4",children:"No quizzes created for this course yet."}),t.jsx("button",{onClick:()=>s(`/admin/quiz/create/${e}`),disabled:r||p.status==="Published",className:`px-4 py-2 rounded ${r||p.status==="Published"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-boxlms-primary-btn text-boxlms-primary-btn-txt hover:brightness-90 cursor-pointer"}`,children:"Create First Quiz"})]}):t.jsx("div",{className:"space-y-4",children:Yt.map($=>t.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:$.title}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:$.description}),t.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500",children:[t.jsxs("span",{children:["Passing Score: ",$.passingScore,"%"]}),t.jsxs("span",{children:["Questions: ",$.questionCount||0]}),$.isTimed&&t.jsxs("span",{children:["Time Limit: ",$.timeLimit," min"]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>s(`/admin/quiz/edit/${$.id}`),disabled:p.status==="Published",className:"px-3 py-1.5 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Edit"}),t.jsx("button",{onClick:()=>{window.confirm("Delete this quiz? This action cannot be undone.")&&G.info("Delete functionality coming soon")},disabled:p.status==="Published",className:"px-3 py-1.5 text-sm bg-red-50 text-red-700 rounded hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"})]})]})},$.id))})]})]})]}),!r&&e&&t.jsx(mR,{isOpen:P,onClose:()=>{W(!1),he(null)},courseId:e,lesson:de,onSave:er}),!r&&e&&t.jsx(fR,{isOpen:je,onClose:()=>{ke(!1),ft(null)},courseId:e,lesson:Oe,onSave:Oo}),!r&&e&&t.jsx(pR,{isOpen:Xe,onClose:()=>{Ut(!1),Ae(null)},courseId:e,lesson:xe,onSave:tr}),!r&&e&&t.jsx(bR,{isOpen:jt,onClose:()=>{wt(!1),hn(null)},courseId:e,lesson:un,onSave:Po})]})}function jR({type:s}){const e={video:"bg-blue-100 text-blue-800",document:"bg-purple-100 text-purple-800",pdf:"bg-purple-100 text-purple-800",scorm:"bg-green-100 text-green-800",quiz:"bg-orange-100 text-orange-800"},r={document:"PDF",pdf:"PDF",scorm:"SCORM"}[s]||s.charAt(0).toUpperCase()+s.slice(1);return t.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${e[s]||"bg-gray-100 text-gray-800"}`,children:r})}function wR({onAdd:s,disabled:e=!1}){const[a,r]=b.useState(!1),l=[{value:"video",label:"Video Lesson",icon:""},{value:"pdf",label:"PDF Lesson",icon:""},{value:"scorm",label:"SCORM Package",icon:""},{value:"quiz",label:"Quiz",icon:""}];return t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>!e&&r(o=>!o),disabled:e,className:`px-4 py-2 rounded inline-flex items-center gap-2 ${e?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-boxlms-primary-btn text-boxlms-primary-btn-txt hover:brightness-90 cursor-pointer"}`,children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Lesson"]}),a&&t.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border rounded shadow-lg z-10",children:l.map(o=>t.jsxs("button",{onClick:()=>{s(o.value),r(!1)},className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-3 border-b last:border-b-0",children:[t.jsx("span",{className:"text-lg",children:o.icon}),t.jsx("span",{children:o.label})]},o.value))})]})}function NR(){const s=ze(),[e,a]=b.useState([]),[r,l]=b.useState(!1),[o,d]=b.useState(""),[u,m]=b.useState(1),[f,p]=b.useState(10),[y,v]=b.useState({currentPage:1,pageSize:10,totalPages:1,totalCount:0,hasNextPage:!1,hasPreviousPage:!1});tt("Learning Pathways"),ct.useEffect(()=>{j()},[u,f]);const j=async(T=o)=>{l(!0);try{const w=await bo({search:T,page:u,pageSize:f});a(w.items||[]),v(w.pagination||y)}catch(w){console.error(w),G.error("Failed to load learning pathways")}finally{l(!1)}},S=T=>{d(T),m(1),j(T)},C=T=>{m(T)},N=T=>{p(T),m(1)},D=T=>s(`/admin/learning-pathways/${T}/edit`),E=()=>s("/admin/learning-pathways/new"),A=async T=>{if(window.confirm("Delete this learning pathway? Users will lose access to mapped courses."))try{await HE(T),a(w=>w.filter(_=>_.id!==T)),G.success("Learning pathway deleted")}catch(w){console.error(w),G.error("Failed to delete pathway")}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Learning Pathways"}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b flex flex-wrap gap-3 items-center justify-end",children:t.jsx("button",{onClick:E,className:"px-4 py-2 bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded hover:brightness-90 cursor-pointer",children:"Create Learning Pathway"})}),t.jsx("div",{className:"px-6 py-4 border-b",children:t.jsxs("div",{className:"relative",children:[t.jsx("input",{value:o,onChange:T=>S(T.target.value),placeholder:"Search learning pathways",className:"w-full border border-gray-300 rounded px-4 py-2"}),t.jsx("span",{className:"absolute right-3 top-2.5 text-gray-400",children:""})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pathway Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Courses"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Users"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?Array.from({length:3}).map((T,w)=>t.jsx("tr",{className:"animate-pulse",children:Array.from({length:5}).map((_,R)=>t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"})},R))},w)):e.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"No learning pathways found."})}):e.map(T=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("div",{className:"font-medium text-gray-900",children:T.name}),t.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",T.id]})]}),t.jsx("td",{className:"px-6 py-4 text-gray-700",children:T.description||""}),t.jsx("td",{className:"px-6 py-4 text-right text-gray-700",children:T.courseCount||0}),t.jsx("td",{className:"px-6 py-4 text-right text-gray-700",children:T.userCount||0}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>D(T.id),className:"px-3 py-1.5 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100",children:"Edit"}),t.jsx("button",{onClick:()=>A(T.id),className:"px-3 py-1.5 text-sm bg-red-50 text-red-700 rounded hover:bg-red-100",children:"Delete"})]})})]},T.id))})]})}),t.jsx(gu,{currentPage:y.currentPage,totalPages:y.totalPages,pageSize:y.pageSize,totalCount:y.totalCount,onPageChange:C,onPageSizeChange:N})]})]})]})}function Wv(){const s=ze(),{groupId:e}=Xn(),a=!e;tt(a?"Add Learning Pathway":"Edit Learning Pathway");const[r,l]=b.useState({name:"",description:"",courseIds:[],userIds:[],courses:[],members:[]}),[o,d]=b.useState(!1),[u,m]=b.useState("details"),[f,p]=b.useState(!1),[y,v]=b.useState(""),[j,S]=b.useState([]),[C,N]=b.useState(!1),[D,E]=b.useState(!1),[A,T]=b.useState(""),[w,_]=b.useState([]),[R,z]=b.useState(!1);b.useEffect(()=>{a||(async()=>{try{const L=await BE(e);console.log(" Loaded pathway data:",L);const Y=L.courses||[],O=L.members||[];console.log(" Courses:",Y),console.log(" Members:",O),l({name:L.name||"",description:L.description||"",courseIds:Y.map(I=>I.id),userIds:O.map(I=>I.userId),courses:Y,members:O})}catch(L){console.error(" Failed to load pathway:",L),G.error("Failed to load pathway")}})()},[a,e]);const H=(L,Y)=>l(O=>({...O,[L]:Y})),q=async()=>{p(!0),N(!0);try{const L=await Fv("");console.log(" Loaded courses for mapping:",L),console.log(" Total courses returned:",L.length);const Y=(r.courseIds||[]).map(I=>String(I)),O=L.filter(I=>!Y.includes(String(I.id)));console.log(" Available courses after filtering:",O.length),S(O)}catch(L){console.error(L),S([])}finally{N(!1)}},ne=async L=>{v(L),N(!0);try{const Y=await Fv(L),O=(r.courseIds||[]).map(P=>String(P)),I=Y.filter(P=>!O.includes(String(P.id)));S(I)}catch(Y){console.error(Y),S([])}finally{N(!1)}},U=L=>{l(Y=>{if(Y.courseIds.includes(L))return{...Y,courseIds:Y.courseIds.filter(I=>I!==L),courses:Y.courses.filter(I=>I.id!==L)};{const I=j.find(P=>P.id===L);return{...Y,courseIds:[...Y.courseIds,L],courses:I?[...Y.courses,I]:Y.courses}}})},re=async()=>{E(!0),z(!0);try{const L=await Bv(""),Y=(r.userIds||[]).map(I=>String(I)),O=L.filter(I=>!Y.includes(String(I.id)));_(O)}catch(L){console.error(L),_([])}finally{z(!1)}},fe=async L=>{T(L),z(!0);try{const Y=await Bv(L),O=(r.userIds||[]).map(P=>String(P)),I=Y.filter(P=>!O.includes(String(P.id)));_(I)}catch(Y){console.error(Y),_([])}finally{z(!1)}},Z=L=>{l(Y=>{if(Y.userIds.includes(L))return{...Y,userIds:Y.userIds.filter(I=>I!==L),members:Y.members.filter(I=>I.userId!==L)};{const I=w.find(P=>P.id===L);if(I){const P=[I.firstName,I.lastName].filter(Boolean).join(" ")||I.email;return{...Y,userIds:[...Y.userIds,L],members:[...Y.members,{userId:I.id,userName:P,email:I.email}]}}return Y}})},B=async()=>{if(d(!0),!r.name.trim()){G.error("Pathway name is required");return}try{const L={id:e,...r};await FE(L,!a),G.success(a?"Learning pathway created":"Learning pathway updated"),s("/admin/learning-pathways")}catch(L){console.error(L),G.error("Failed to save pathway")}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("button",{onClick:()=>s(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:a?"Create Learning Pathway":"Edit Learning Pathway"}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 pt-4 border-b",children:t.jsxs("div",{className:"flex gap-6",children:[t.jsx("button",{className:`pb-3 text-sm font-medium border-b-2 ${u==="details"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,onClick:()=>m("details"),children:"Details"}),t.jsxs("button",{className:`pb-3 text-sm font-medium border-b-2 ${u==="courses"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,onClick:()=>m("courses"),children:["Courses (",r.courseIds.length,")"]}),t.jsxs("button",{className:`pb-3 text-sm font-medium border-b-2 ${u==="users"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,onClick:()=>m("users"),children:["Users (",r.userIds.length,")"]})]})}),u==="details"&&t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Pathway Name ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{value:r.name,onChange:L=>H("name",L.target.value),className:`w-full border rounded px-4 py-2 ${o&&!r.name.trim()?"border-red-500":"border-gray-300"}`,placeholder:"Enter pathway name"}),o&&!r.name.trim()&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Name is required."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{value:r.description,onChange:L=>H("description",L.target.value),className:"w-full border border-gray-300 rounded px-4 py-2",rows:4,placeholder:"Describe this pathway"})]})]}),u==="courses"&&t.jsxs("div",{className:"p-6 space-y-4",children:[a&&t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-sm text-yellow-800 mb-4",children:[t.jsx("strong",{children:"Note:"})," Please save the learning pathway first before adding courses."]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Assign courses that all users in this pathway can access. Only published courses are available."}),t.jsx("button",{onClick:q,disabled:a,className:`px-4 py-2 rounded ${a?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-boxlms-primary-btn text-boxlms-primary-btn-txt hover:brightness-90 cursor-pointer"}`,children:"Add Courses"})]}),r.courseIds.length===0?t.jsx("div",{className:"text-center text-gray-500 py-8",children:"No courses assigned yet."}):t.jsx("ul",{className:"divide-y border rounded",children:r.courses.map(L=>t.jsxs("li",{className:"px-4 py-3 flex items-center justify-between hover:bg-gray-50",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.title}),t.jsx("div",{className:"text-xs text-gray-500",children:L.id})]}),t.jsx("button",{onClick:()=>U(L.id),className:"text-sm text-red-600 hover:text-red-700",children:"Remove"})]},L.id))}),f&&t.jsxs("div",{className:"mt-3 border rounded p-3 bg-white",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("input",{value:y,onChange:L=>ne(L.target.value),className:"flex-1 border rounded px-3 py-2",placeholder:"Search courses"}),t.jsx("button",{onClick:()=>p(!1),className:"px-3 py-2 text-sm bg-gray-100 text-gray-800 rounded hover:bg-gray-200",children:"Close"})]}),C?t.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."}):j.length===0?t.jsx("div",{className:"text-sm text-gray-500",children:"No published courses found."}):t.jsx("ul",{className:"divide-y max-h-60 overflow-y-auto",children:j.map(L=>t.jsxs("li",{className:"py-2 flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"text-sm text-gray-900",children:L.title}),t.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Published"})]}),t.jsx("div",{className:"text-xs text-gray-500",children:L.category||"Uncategorized"})]}),t.jsx("button",{onClick:()=>U(L.id),className:`px-3 py-1.5 text-sm rounded ${r.courseIds.includes(L.id)?"bg-red-50 text-red-700 hover:bg-red-100":"bg-blue-50 text-blue-700 hover:bg-blue-100"}`,children:r.courseIds.includes(L.id)?"Remove":"Add"})]},L.id))})]})]}),u==="users"&&t.jsxs("div",{className:"p-6 space-y-4",children:[a&&t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-sm text-yellow-800 mb-4",children:[t.jsx("strong",{children:"Note:"})," Please save the learning pathway first before adding users."]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Assign users to this pathway."}),t.jsx("button",{onClick:re,disabled:a,className:`px-4 py-2 rounded ${a?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-boxlms-primary-btn text-boxlms-primary-btn-txt hover:brightness-90 cursor-pointer"}`,children:"Add Users"})]}),r.userIds.length===0?t.jsx("div",{className:"text-center text-gray-500 py-8",children:"No users assigned yet."}):t.jsx("ul",{className:"divide-y border rounded",children:r.members.map(L=>t.jsxs("li",{className:"px-4 py-3 flex items-center justify-between hover:bg-gray-50",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.userName||L.email}),t.jsx("div",{className:"text-xs text-gray-500",children:L.email})]}),t.jsx("button",{onClick:()=>Z(L.userId),className:"text-sm text-red-600 hover:text-red-700",children:"Remove"})]},L.userId))}),D&&t.jsxs("div",{className:"mt-3 border rounded p-3 bg-white",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("input",{value:A,onChange:L=>fe(L.target.value),className:"flex-1 border rounded px-3 py-2",placeholder:"Search users"}),t.jsx("button",{onClick:()=>E(!1),className:"px-3 py-2 text-sm bg-gray-100 text-gray-800 rounded hover:bg-gray-200",children:"Close"})]}),R?t.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."}):w.length===0?t.jsx("div",{className:"text-sm text-gray-500",children:"No users found."}):t.jsx("ul",{className:"divide-y max-h-60 overflow-y-auto",children:w.map(L=>{const Y=[L.firstName,L.lastName].filter(Boolean).join(" ")||L.email;return t.jsxs("li",{className:"py-2 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-900",children:Y}),t.jsx("div",{className:"text-xs text-gray-500",children:L.email})]}),t.jsx("button",{onClick:()=>Z(L.id),className:`px-3 py-1.5 text-sm rounded ${r.userIds.includes(L.id)?"bg-red-50 text-red-700 hover:bg-red-100":"bg-blue-50 text-blue-700 hover:bg-blue-100"}`,children:r.userIds.includes(L.id)?"Remove":"Add"})]},L.id)})})]})]}),t.jsxs("div",{className:"px-6 py-4 border-t flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>s(-1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"}),t.jsx("button",{onClick:B,className:"px-4 py-2 bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded hover:brightness-90 cursor-pointer",children:"Save Learning Pathway"})]})]})]})]})}function Xv(){const s=ze(),{userId:e}=Xn(),a=!e,r=up(),l=!a&&e===r;tt(a?"Add User":"Edit User");const[o,d]=b.useState({firstName:"",lastName:"",email:"",learningPathways:[],role:"Learner",status:"Active"}),[u,m]=b.useState(!1),[f,p]=b.useState(!1),[y,v]=b.useState(""),[j,S]=b.useState([]),[C,N]=b.useState(!1);b.useEffect(()=>{a||(async()=>{try{const R=await LE(e);d({firstName:R.firstName||"",lastName:R.lastName||"",email:R.email||"",learningPathways:R.learningPathways||[],role:R.role||"Learner",status:R.status||"Active"})}catch(R){console.error(R);let z="Failed to load user";R.response?.data?.message?z=R.response.data.message:R.message&&(z=R.message),R.response?.status===404?(z="User not found. It may have been deleted.",setTimeout(()=>s("/admin/users"),2e3)):R.response?.status===403?z="You do not have permission to view this user.":R.response?.status===500?z="Server error occurred while loading user. Please try again.":R.response||(z="Network error. Please check your connection and try again."),G.error(z)}})()},[a,e,s]);const D=(R,z)=>d(H=>({...H,[R]:z})),E=async()=>{p(!0),N(!0);try{const R=await bo({search:""}),z=o.learningPathways.map(q=>String(q.id));console.log(" Assigned pathway IDs:",z),console.log(" All pathways from API:",R.items);const H=(R.items||[]).filter(q=>!z.includes(String(q.id)));console.log(" Available pathways after filtering:",H),S(H)}catch(R){console.error(R),S([])}finally{N(!1)}},A=async R=>{v(R),N(!0);try{const z=await bo({search:R}),H=o.learningPathways.map(ne=>String(ne.id)),q=(z.items||[]).filter(ne=>!H.includes(String(ne.id)));S(q)}catch(z){console.error(z),S([])}finally{N(!1)}},T=(R,z=null)=>{d(H=>{if(H.learningPathways.some(ne=>ne.id===R))return{...H,learningPathways:H.learningPathways.filter(ne=>ne.id!==R)};{const ne=z||j.find(U=>U.id===R)?.name||"Unknown";return{...H,learningPathways:[...H.learningPathways,{id:R,name:ne}]}}})},w=()=>o.firstName.trim()&&o.lastName.trim()&&o.email.trim(),_=async()=>{if(m(!0),!w()){G.error("Please fill in all required fields");return}try{const R={id:e,firstName:o.firstName,lastName:o.lastName,email:o.email,role:o.role,groupIds:o.learningPathways.map(H=>String(H.id))};console.log(" Saving user with payload:",R);const z=await OE(R,!a);if(a){const H=z?.message||"User created successfully";z?.emailStatus==="failed"?(G.success(`${H}`,{duration:6e3}),setTimeout(()=>{G.error("Registration email failed to send. You may need to manually notify the user.",{duration:8e3})},1e3)):G.success(`${H}${z?.id?` (ID: ${z.id})`:""}`)}else{const H=z?.message||"User updated successfully";G.success(H)}s("/admin/users")}catch(R){console.error("Error saving user:",R);let z="Failed to save user";R.response?.data?.message?z=R.response.data.message:R.message&&R.message!=="Request failed with status code 400"?z=R.message:R.response?.data&&(typeof R.response.data=="string"?z=R.response.data:R.response.data.error&&(z=R.response.data.error)),(z.toLowerCase().includes("email already exists")||z.toLowerCase().includes("user with this email"))&&(z="A user with this email address already exists. Please use a different email."),G.error(z,{duration:5e3})}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("button",{onClick:()=>s(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:a?"Add New User":"Edit User"}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:a?"New User":`User: ${e}`})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["First Name ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{value:o.firstName,onChange:R=>D("firstName",R.target.value),className:`w-full border rounded px-4 py-2 ${u&&!o.firstName.trim()?"border-red-500":"border-gray-300"}`,placeholder:"First name"}),u&&!o.firstName.trim()&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Required"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Last Name ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{value:o.lastName,onChange:R=>D("lastName",R.target.value),className:`w-full border rounded px-4 py-2 ${u&&!o.lastName.trim()?"border-red-500":"border-gray-300"}`,placeholder:"Last name"}),u&&!o.lastName.trim()&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Required"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"email",value:o.email,onChange:R=>D("email",R.target.value),className:`w-full border rounded px-4 py-2 ${u&&!o.email.trim()?"border-red-500":"border-gray-300"}`,placeholder:"user@example.com"}),u&&!o.email.trim()&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Required"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),t.jsxs("select",{value:o.role,onChange:R=>D("role",R.target.value),className:"w-full border rounded px-4 py-2",children:[t.jsx("option",{value:"Learner",children:"Learner"}),t.jsx("option",{value:"OrgAdmin",children:"Admin"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsxs("select",{value:o.status,onChange:R=>D("status",R.target.value),disabled:l,className:`w-full border rounded px-4 py-2 ${l?"bg-gray-100 cursor-not-allowed":""}`,title:l?"Cannot change status of your own account":"",children:[t.jsx("option",{value:"Active",children:"Active"}),t.jsx("option",{value:"Inactive",children:"Inactive"}),t.jsx("option",{value:"Suspended",children:"Suspended"})]}),l&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"You cannot change the status of your own account"})]})]}),t.jsxs("div",{className:"border-t pt-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Learning Pathways"}),t.jsx("button",{type:"button",onClick:E,className:"px-3 py-1.5 text-sm bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded hover:brightness-90 cursor-pointer",children:"Add to Pathways"})]}),o.learningPathways.length===0?t.jsx("div",{className:"text-center text-gray-500 py-4 text-sm",children:"No pathways assigned yet."}):t.jsx("ul",{className:"divide-y border rounded",children:o.learningPathways.map(R=>t.jsxs("li",{className:"px-4 py-3 flex items-center justify-between hover:bg-gray-50",children:[t.jsx("span",{className:"text-sm text-gray-900",children:R.name}),t.jsx("button",{type:"button",onClick:()=>T(R.id),className:"text-sm text-red-600 hover:text-red-700",children:"Remove"})]},R.id))}),f&&t.jsxs("div",{className:"mt-3 border rounded p-3 bg-white",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("input",{value:y,onChange:R=>A(R.target.value),className:"flex-1 border rounded px-3 py-2",placeholder:"Search groups"}),t.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-3 py-2 text-sm bg-gray-100 text-gray-800 rounded hover:bg-gray-200",children:"Close"})]}),C?t.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."}):j.length===0?t.jsx("div",{className:"text-sm text-gray-500",children:"No pathways found."}):t.jsx("ul",{className:"divide-y max-h-60 overflow-y-auto",children:j.map(R=>t.jsxs("li",{className:"py-2 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-900",children:R.name}),t.jsx("div",{className:"text-xs text-gray-500",children:R.description})]}),t.jsx("button",{type:"button",onClick:()=>T(R.id,R.name),className:`px-3 py-1.5 text-sm rounded ${o.learningPathways.some(z=>z.id===R.id)?"bg-red-50 text-red-700 hover:bg-red-100":"bg-blue-50 text-blue-700 hover:bg-blue-100"}`,children:o.learningPathways.some(z=>z.id===R.id)?"Remove":"Add"})]},R.id))})]})]})]}),t.jsxs("div",{className:"px-6 py-4 border-t flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>s(-1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"}),t.jsx("button",{onClick:_,className:"px-4 py-2 bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded hover:brightness-90 cursor-pointer",children:a?"Create User":"Update User"})]})]})]})]})}function Zv(){const s=ze(),{courseId:e,quizId:a}=Xn(),r=Xs(),o=new URLSearchParams(r.search).get("returnTo"),d=!!a;tt(d?"Edit Quiz":"Create Quiz");const[u,m]=b.useState(!1);tt(d?"Edit Quiz":"Create Quiz");const[f,p]=b.useState({title:"",description:"",passingScore:70,isTimed:!1,timeLimit:30,shuffleQuestions:!1,shuffleAnswers:!1,showResults:!0,allowRetake:!0,maxAttempts:3,courseId:e||""}),[y,v]=b.useState([]),[j,S]=b.useState({type:"mc_single",question:"",points:1,options:[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}],explanation:""}),[C,N]=b.useState(!1),[D,E]=b.useState(null),A=[{value:"mc_single",label:"Multiple Choice (Single Answer)"},{value:"mc_multi",label:"Multiple Choice (Multiple Answers)"}],T=(L,Y)=>{p(O=>({...O,[L]:Y}))},w=(L,Y)=>{S(O=>({...O,[L]:Y}))},_=(L,Y)=>{const O=[...j.options];O[L]={...O[L],text:Y},S(I=>({...I,options:O}))},R=()=>{S(L=>({...L,options:[...L.options,{text:"",isCorrect:!1}]}))},z=L=>{if(j.options.length<=2){G.error("At least 2 options are required");return}const Y=j.options.filter((O,I)=>I!==L);S(O=>({...O,options:Y}))},H=(L,Y=!0)=>{S(O=>{const I=O.options.map((P,W)=>O.type==="mc_single"?{...P,isCorrect:W===L}:W===L?{...P,isCorrect:!!Y}:P);return{...O,options:I}})},q=()=>{if(!j.question.trim()){G.error("Question text is required");return}if(j.type==="mc_single"||j.type==="mc_multi"){if(j.options.filter(O=>O.text.trim()).length<2){G.error("At least 2 options are required");return}const Y=j.options.filter(O=>O.isCorrect&&O.text.trim()).length;if(Y===0){G.error("Select at least one correct answer");return}if(j.type==="mc_single"&&Y!==1){G.error("Exactly one correct answer is required");return}}if(D!==null){const L=[...y];L[D]={...j},v(L),G.success("Question updated")}else v(L=>[...L,{...j}]),G.success("Question added");ne()},ne=()=>{S({type:"mc_single",question:"",points:1,options:[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}],explanation:""}),N(!1),E(null)},U=L=>{S({...y[L]}),E(L),N(!0)},re=L=>{window.confirm("Are you sure you want to delete this question?")&&(v(Y=>Y.filter((O,I)=>I!==L)),G.success("Question deleted"))},fe=(L,Y)=>{const O=Y==="up"?L-1:L+1;if(O<0||O>=y.length)return;const I=[...y];[I[L],I[O]]=[I[O],I[L]],v(I)};b.useEffect(()=>{d&&(async()=>{try{const L=await gR(a);p({title:L.title,description:L.description,passingScore:L.passingScore,timeLimit:L.timeLimit,shuffleQuestions:L.shuffleQuestions,shuffleAnswers:L.shuffleAnswers,showResults:L.showResults,allowRetake:L.allowRetake,maxAttempts:L.maxAttempts,courseId:L.courseId}),v(L.questions||[])}catch(L){console.error("Failed to load quiz",L),G.error("Failed to load quiz")}})()},[d,a]);const Z=async()=>{if(!f.title.trim()){G.error("Quiz title is required");return}if(!f.courseId.trim()){G.error("Course ID is required");return}if(y.length===0){G.error("Add at least one question");return}try{const L={id:a,...f,questions:y,totalPoints:y.reduce((Y,O)=>Y+O.points,0)};if(console.log(d?"Updating quiz:":"Creating quiz:",L),await xR(L,d),G.success(d?"Quiz updated successfully":"Quiz created successfully"),o)try{const Y=decodeURIComponent(o);s(Y);return}catch{}f.courseId?s(`/admin/courses/${f.courseId}/edit`):s("/admin/courses")}catch(L){console.error("Error saving quiz:",L),G.error("Failed to save quiz")}},B=L=>{try{let Y=L.trim();Y.startsWith("```")&&(Y=Y.replace(/^```json\n/,"").replace(/^```\n/,"").replace(/\n```$/,""));const O=JSON.parse(Y);if(Array.isArray(O)&&O.length>0){const I=O.map((P,W)=>({type:(P.options&&P.options.length>0,"mc_single"),question:P.question||"",points:1,options:P.options&&Array.isArray(P.options)?P.options.map(de=>({text:de.text||de,isCorrect:de.isCorrect||!1})):[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}],explanation:P.explanation||""}));v(P=>[...P,...I]),G.success(`${I.length} questions added from AI!`)}else G.error("Invalid question format from AI")}catch(Y){console.error("Failed to parse AI content:",Y),navigator.clipboard?(navigator.clipboard.writeText(L),G("Content copied to clipboard for manual use",{icon:""})):G.error("Could not parse AI-generated questions")}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsx(o2,{mode:"slideIn",isOpen:u,onClose:()=>m(!1),context:f.title?`Creating quiz: ${f.title}`:"Creating a new quiz",onApplyContent:B,defaultTab:"quiz"}),t.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("button",{onClick:()=>s(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:d?"Edit Quiz":"Create Quiz"}),t.jsx("p",{className:"text-gray-600 mt-2",children:d?"Update questions and settings of this quiz":"Build an interactive quiz for your course"})]}),t.jsxs("button",{onClick:()=>m(!0),className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all duration-200 flex items-center gap-2",children:[t.jsx(sa,{className:"w-5 h-5"}),"AI Assistant"]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[t.jsx("div",{className:"px-6 py-4 border-b",children:t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Quiz Information"})}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quiz Title *"}),t.jsx("input",{type:"text",value:f.title,onChange:L=>T("title",L.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter quiz title"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:f.description,onChange:L=>T("description",L.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Enter quiz description"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course ID *"}),t.jsx("input",{type:"text",value:f.courseId,onChange:L=>T("courseId",L.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter course ID",disabled:d})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Passing Score (%)"}),t.jsx("input",{type:"number",min:"0",max:"100",value:f.passingScore,onChange:L=>T("passingScore",parseInt(L.target.value)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[t.jsx("input",{type:"checkbox",checked:f.isTimed,onChange:L=>T("isTimed",L.target.checked),className:"rounded"}),"Timed Quiz"]}),f.isTimed&&t.jsx("input",{type:"number",min:"1",value:f.timeLimit,onChange:L=>T("timeLimit",parseInt(L.target.value)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Time limit in minutes"}),!f.isTimed&&t.jsx("div",{className:"w-full px-4 py-2 border rounded-lg bg-gray-50 text-gray-400 text-sm",children:"No time limit"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Attempts"}),t.jsx("input",{type:"number",min:"1",value:f.maxAttempts,onChange:L=>T("maxAttempts",parseInt(L.target.value)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:f.shuffleQuestions,onChange:L=>T("shuffleQuestions",L.target.checked),className:"rounded text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Shuffle Questions"})]}),t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:f.shuffleAnswers,onChange:L=>T("shuffleAnswers",L.target.checked),className:"rounded text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Shuffle Answers"})]}),t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:f.showResults,onChange:L=>T("showResults",L.target.checked),className:"rounded text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Show Results After Submission"})]}),t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:f.allowRetake,onChange:L=>T("allowRetake",L.target.checked),className:"rounded text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Allow Retake"})]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[t.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Questions (",y.length,")"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Total Points: ",y.reduce((L,Y)=>L+Y.points,0)]})]}),!C&&t.jsx("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add Question"})]}),C&&t.jsxs("div",{className:"p-6 border-b bg-gray-50",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:D!==null?"Edit Question":"Add New Question"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Type"}),t.jsx("select",{value:j.type,onChange:L=>w("type",L.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:A.map(L=>t.jsx("option",{value:L.value,children:L.label},L.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points"}),t.jsx("input",{type:"number",min:"1",value:j.points,onChange:L=>w("points",parseInt(L.target.value)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question *"}),t.jsx("textarea",{value:j.question,onChange:L=>w("question",L.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Enter your question"})]}),(j.type==="mc_single"||j.type==="mc_multi")&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer Options"}),t.jsxs("div",{className:"space-y-2",children:[j.options.map((L,Y)=>t.jsxs("div",{className:"flex items-center space-x-2",children:[j.type==="mc_single"?t.jsx("input",{type:"radio",name:"correctAnswer",checked:!!L.isCorrect,onChange:()=>H(Y,!0),className:"text-green-600 focus:ring-green-500"}):t.jsx("input",{type:"checkbox",checked:!!L.isCorrect,onChange:O=>H(Y,O.target.checked),className:"rounded text-green-600 focus:ring-green-500"}),t.jsx("input",{type:"text",value:L.text,onChange:O=>_(Y,O.target.value),className:"flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Option ${Y+1}`}),j.options.length>2&&t.jsx("button",{onClick:()=>z(Y),className:"p-2 text-red-600 hover:bg-red-50 rounded",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},Y)),t.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Add Option"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Explanation (Optional)"}),t.jsx("textarea",{value:j.explanation,onChange:L=>w("explanation",L.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"2",placeholder:"Provide an explanation for the answer"})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:q,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:D!==null?"Update Question":"Save Question"}),t.jsx("button",{onClick:ne,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"})]})]})]}),t.jsx("div",{className:"divide-y",children:y.length===0?t.jsx("div",{className:"p-8 text-center text-gray-500",children:'No questions added yet. Click "Add Question" to get started.'}):y.map((L,Y)=>t.jsx("div",{className:"p-6 hover:bg-gray-50",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:["Q",Y+1]}),t.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs font-medium rounded",children:A.find(O=>O.value===L.type)?.label}),t.jsxs("span",{className:"text-sm text-gray-600",children:[L.points," point",L.points!==1?"s":""]})]}),t.jsx("p",{className:"text-gray-900 font-medium mb-2",children:L.question}),(L.type==="mc_single"||L.type==="mc_multi")&&t.jsx("div",{className:"ml-4 space-y-1",children:L.options.map((O,I)=>t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("span",{className:`text-sm ${O.isCorrect?"text-green-600 font-medium":"text-gray-600"}`,children:[O.isCorrect&&" ",O.text]})},I))})]}),t.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[t.jsx("button",{onClick:()=>fe(Y,"up"),disabled:Y===0,className:"p-1 text-gray-600 hover:text-gray-900 disabled:opacity-30",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),t.jsx("button",{onClick:()=>fe(Y,"down"),disabled:Y===y.length-1,className:"p-1 text-gray-600 hover:text-gray-900 disabled:opacity-30",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),t.jsx("button",{onClick:()=>U(Y),className:"p-1 text-blue-600 hover:text-blue-700",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),t.jsx("button",{onClick:()=>re(Y),className:"p-1 text-red-600 hover:text-red-700",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},Y))})]}),t.jsxs("div",{className:"flex justify-end space-x-4",children:[t.jsx("button",{onClick:()=>s(-1),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"}),t.jsx("button",{onClick:Z,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:d?"Update Quiz":"Save Quiz"})]})]})]})}function Kv(){const s=ze(),{surveyId:e}=Xn(),[a]=ap(),r=!e,l=a.get("preview")==="true";tt(r?"Create Survey":l?"Preview Survey":"Edit Survey");const[o,d]=b.useState(!r),[u,m]=b.useState(!1),[f,p]=b.useState("Draft"),[y,v]=b.useState({title:"",description:"",isActive:!0}),[j,S]=b.useState([]),[C,N]=b.useState(null),[D,E]=b.useState({questionText:"",questionType:"Text",options:[],isRequired:!0,minRating:1,maxRating:5});b.useEffect(()=>{!r&&e&&A()},[e,r]);const A=async()=>{try{d(!0);const U=await aa.getSurvey(e);p(U.status||"Draft"),v({title:U.title,description:U.description||"",isActive:U.isActive}),S(U.questions||[])}catch(U){console.error("Error loading survey:",U),G.error("Failed to load survey"),s("/admin/surveys")}finally{d(!1)}},T=(U,re)=>{v(fe=>({...fe,[U]:re}))},w=async()=>{if(!y.title.trim()){G.error("Survey title is required");return}try{if(m(!0),r){const U=await aa.createSurvey(y);G.success("Survey created successfully"),s(`/admin/surveys/edit/${U.id}`)}else await aa.updateSurvey(e,y),G.success("Survey updated successfully")}catch(U){console.error("Error saving survey:",U),G.error(U.response?.data?.message||"Failed to save survey")}finally{m(!1)}},_=async()=>{if(!D.questionText.trim()){G.error("Question text is required");return}try{C?(await aa.updateQuestion(e,C.id,D),G.success("Question updated successfully")):(await aa.addQuestion(e,D),G.success("Question added successfully")),E({questionText:"",questionType:"Text",options:[],isRequired:!0,minRating:1,maxRating:5}),N(null),A()}catch(U){console.error("Error saving question:",U),G.error("Failed to save question")}},R=U=>{N(U),E({questionText:U.questionText,questionType:U.questionType,options:U.options||[],isRequired:U.isRequired,minRating:U.minRating||1,maxRating:U.maxRating||5})},z=async U=>{if(window.confirm("Delete this question?"))try{await aa.deleteQuestion(e,U),G.success("Question deleted successfully"),A()}catch(re){console.error("Error deleting question:",re),G.error("Failed to delete question")}},H=()=>{E(U=>({...U,options:[...U.options,""]}))},q=(U,re)=>{E(fe=>({...fe,options:fe.options.map((Z,B)=>B===U?re:Z)}))},ne=U=>{E(re=>({...re,options:re.options.filter((fe,Z)=>Z!==U)}))};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("button",{onClick:()=>s(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),t.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:[r?"Create Survey":l?"Preview Survey":"Edit Survey",f==="Published"&&!r&&t.jsx("span",{className:"ml-3 inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"Published"})]}),f==="Published"&&!l&&t.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-yellow-700",children:"This survey is published and cannot be edited. Unpublish it first to make changes."})})]})}),o?t.jsx("div",{className:"bg-white rounded-lg shadow p-8",children:t.jsx("div",{className:"text-center text-gray-500",children:"Loading..."})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Survey Details"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Survey Title ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"text",value:y.title,onChange:U=>T("title",U.target.value),className:"w-full border border-gray-300 rounded px-4 py-2",placeholder:"Enter survey title",disabled:f==="Published"||l})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{value:y.description,onChange:U=>T("description",U.target.value),className:"w-full border border-gray-300 rounded px-4 py-2",rows:3,placeholder:"Brief description of the survey",disabled:f==="Published"||l})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsxs("label",{className:"inline-flex items-center gap-2 mt-2",children:[t.jsx("input",{type:"checkbox",checked:y.isActive,onChange:U=>T("isActive",U.target.checked),className:"rounded text-blue-600 focus:ring-blue-500",disabled:f==="Published"||l}),t.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]})]}),f!=="Published"&&!l&&t.jsxs("div",{className:"flex justify-end gap-3 pt-2 border-t",children:[t.jsx("button",{onClick:()=>s("/admin/surveys"),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"}),t.jsx("button",{onClick:w,disabled:u,className:"px-4 py-2 bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded hover:brightness-90 disabled:opacity-50",children:u?"Saving...":"Save Survey"})]}),(f==="Published"||l)&&t.jsx("div",{className:"flex justify-end pt-2 border-t",children:t.jsx("button",{onClick:()=>s("/admin/surveys"),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Back to Surveys"})})]})]}),!r&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Survey Questions"}),j.length>0&&t.jsx("div",{className:"space-y-3 mb-6",children:j.map((U,re)=>t.jsx("div",{className:"border rounded p-4 bg-gray-50",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["Q",re+1]}),t.jsx("span",{className:"text-sm text-gray-900",children:U.questionText}),U.isRequired&&t.jsx("span",{className:"text-red-600 text-xs",children:"*"})]}),t.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[t.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:U.questionType}),(U.questionType==="MultipleChoice"||U.questionType==="SingleChoice")&&U.options&&t.jsxs("span",{className:"text-xs text-gray-500",children:[U.options.length," options"]}),U.questionType==="Rating"&&t.jsxs("span",{className:"text-xs text-gray-500",children:["Range: ",U.minRating,"-",U.maxRating]})]})]}),f!=="Published"&&!l&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>R(U),className:"px-3 py-1 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100",children:"Edit"}),t.jsx("button",{onClick:()=>z(U.id),className:"px-3 py-1 text-sm bg-red-50 text-red-700 rounded hover:bg-red-100",children:"Delete"})]})]})},U.id))}),f!=="Published"&&!l&&t.jsxs("div",{className:"border rounded p-4 bg-blue-50",children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:C?"Edit Question":"Add New Question"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Question Text ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"text",value:D.questionText,onChange:U=>E(re=>({...re,questionText:U.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Enter your question"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Type"}),t.jsxs("select",{value:D.questionType,onChange:U=>E(re=>({...re,questionType:U.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2",children:[t.jsx("option",{value:"Text",children:"Text"}),t.jsx("option",{value:"SingleChoice",children:"Single Choice"}),t.jsx("option",{value:"MultipleChoice",children:"Multiple Choice"}),t.jsx("option",{value:"Rating",children:"Rating"}),t.jsx("option",{value:"YesNo",children:"Yes/No"})]})]}),t.jsx("div",{children:t.jsxs("label",{className:"inline-flex items-center gap-2 mt-6",children:[t.jsx("input",{type:"checkbox",checked:D.isRequired,onChange:U=>E(re=>({...re,isRequired:U.target.checked})),className:"rounded text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Required"})]})})]}),(D.questionType==="MultipleChoice"||D.questionType==="SingleChoice")&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Options"}),t.jsxs("div",{className:"space-y-2",children:[D.options.map((U,re)=>t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:U,onChange:fe=>q(re,fe.target.value),className:"flex-1 border border-gray-300 rounded px-3 py-2",placeholder:`Option ${re+1}`}),t.jsx("button",{onClick:()=>ne(re),className:"px-3 py-2 bg-red-50 text-red-700 rounded hover:bg-red-100",children:"Remove"})]},re)),t.jsx("button",{onClick:H,className:"px-3 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-sm",children:"+ Add Option"})]})]}),D.questionType==="Rating"&&t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Rating"}),t.jsx("input",{type:"number",value:D.minRating,onChange:U=>E(re=>({...re,minRating:parseInt(U.target.value)})),className:"w-full border border-gray-300 rounded px-3 py-2",min:"1"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Rating"}),t.jsx("input",{type:"number",value:D.maxRating,onChange:U=>E(re=>({...re,maxRating:parseInt(U.target.value)})),className:"w-full border border-gray-300 rounded px-3 py-2",min:"2"})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[C&&t.jsx("button",{onClick:()=>{N(null),E({questionText:"",questionType:"Text",options:[],isRequired:!0,minRating:1,maxRating:5})},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"}),t.jsx("button",{onClick:_,className:"px-4 py-2 bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded hover:brightness-90",children:C?"Update Question":"Add Question"})]})]})]})]}),r&&t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-sm text-yellow-800",children:[t.jsx("strong",{children:"Note:"})," Please save the survey first before adding questions."]})]})]})]})}async function SR(s={}){const{startDate:e,endDate:a,minDaysDormant:r=30}=s,l=new URLSearchParams;return e&&l.append("startDate",e),a&&l.append("endDate",a),l.append("minDaysDormant",r.toString()),(await ge.get(`/api/admin/reports/user-activity?${l}`)).data}async function CR(s={}){const{startDate:e,endDate:a}=s,r=new URLSearchParams;return e&&r.append("startDate",e),a&&r.append("endDate",a),(await ge.get(`/api/admin/reports/user-progress?${r}`)).data}async function kR(s={}){const{startDate:e,endDate:a}=s,r=new URLSearchParams;return e&&r.append("startDate",e),a&&r.append("endDate",a),(await ge.get(`/api/admin/reports/course-enrollment?${r}`)).data}async function _R(s={}){const{startDate:e,endDate:a}=s,r=new URLSearchParams;return e&&r.append("startDate",e),a&&r.append("endDate",a),(await ge.get(`/api/admin/reports/course-completion?${r}`)).data}async function AR(s={}){const{courseId:e,lessonType:a,startDate:r,endDate:l}=s,o=new URLSearchParams;return e&&o.append("courseId",e),a&&o.append("lessonType",a),r&&o.append("startDate",r),l&&o.append("endDate",l),(await ge.get(`/api/admin/reports/lesson-analytics?${o}`)).data}async function ER(s={}){const{userId:e,courseId:a,startDate:r,endDate:l}=s,o=new URLSearchParams;return e&&o.append("userId",e),a&&o.append("courseId",a),r&&o.append("startDate",r),l&&o.append("endDate",l),(await ge.get(`/api/admin/reports/time-tracking?${o}`)).data}async function TR(s,e,a){const r=new URLSearchParams;return s&&r.append("startDate",s),e&&r.append("endDate",e),a!==void 0&&r.append("activeOnly",a),(await ge.get(`/api/admin/reports/pathway-progress?${r}`)).data}async function RR(s,e){const a=new URLSearchParams;return s&&a.append("pathwayId",s),e!==void 0&&a.append("activeOnly",e),(await ge.get(`/api/admin/reports/pathway-assignments?${a}`)).data}async function DR(s,e,a,r,l){const o=new URLSearchParams;return s&&o.append("search",s),e&&o.append("courseId",e),a&&o.append("status",a),r&&o.append("startDate",r),l&&o.append("endDate",l),(await ge.get(`/api/admin/reports/user-course-progress?${o}`)).data}async function MR(s={}){const{category:e,startDate:a,endDate:r}=s,l=new URLSearchParams;return e&&l.append("category",e),a&&l.append("startDate",a),r&&l.append("endDate",r),(await ge.get(`/api/admin/reports/content-usage?${l}`)).data}async function LR(s){return(await ge.post("/api/admin/reports/custom-report",s)).data}function ma(s,e){if(!s||s.length===0)return;const a=Object.keys(s[0]),r=[a.join(","),...s.map(d=>a.map(u=>{const m=d[u];return typeof m=="string"&&m.includes(",")?`"${m}"`:m}).join(","))].join(`
`),l=new Blob([r],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");o.href=URL.createObjectURL(l),o.download=`${e}_${new Date().toISOString().split("T")[0]}.csv`,o.click()}function fa(s,e){const a=JSON.stringify(s,null,2),r=new Blob([a],{type:"application/json"}),l=document.createElement("a");l.href=URL.createObjectURL(r),l.download=`${e}_${new Date().toISOString().split("T")[0]}.json`,l.click()}function OR(){tt("User Activity Report");const s=ze(),[e,a]=b.useState(null),[r,l]=b.useState(!0),[o,d]=b.useState(null),[u,m]=b.useState({startDate:"",endDate:"",minDaysDormant:30}),[f,p]=b.useState(!1),y=async()=>{l(!0),d(null);try{const w=await SR({startDate:u.startDate||void 0,endDate:u.endDate||void 0,minDaysDormant:u.minDaysDormant});a(w)}catch(w){console.error("Error fetching user activity report:",w),d(w.response?.data?.error||"Failed to load report")}finally{l(!1)}};b.useEffect(()=>{y()},[]);const v=()=>{y(),p(!1)},j=()=>{m({startDate:"",endDate:"",minDaysDormant:30})},S=()=>{if(e?.users){const w=e.users.map(_=>({Name:_.name,Email:_.email,Status:_.status,"Created On":new Date(_.createdOn).toLocaleDateString(),"Last Activity":new Date(_.lastActivityDate).toLocaleDateString(),"Days Since Last Activity":_.daysSinceLastActivity,"Engagement Score":_.engagementScore,"Is Dormant":_.isDormant?"Yes":"No",Enrollments:_.enrollments,Completions:_.completions,"In Progress":_.inProgress,"Average Progress":_.averageProgress+"%"}));ma(w,"user_activity_report")}},C=()=>{e&&fa(e,"user_activity_report")},N=e?.summary?{labels:["High (70)","Moderate (40-69)","Low (<40)"],datasets:[{data:[e.summary.highlyEngagedUsers,e.summary.moderatelyEngagedUsers,e.summary.lowEngagementUsers],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(251, 191, 36, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["rgb(34, 197, 94)","rgb(251, 191, 36)","rgb(239, 68, 68)"],borderWidth:1}]}:null,D=e?.summary?{labels:["Active","Inactive","Suspended","Idle"],datasets:[{data:[e.summary.activeUsers,e.summary.inactiveUsers,e.summary.suspendedUsers,e.summary.dormantUsers],backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(156, 163, 175, 0.8)","rgba(239, 68, 68, 0.8)","rgba(251, 146, 60, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(156, 163, 175)","rgb(239, 68, 68)","rgb(251, 146, 60)"],borderWidth:1}]}:null,E={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}},A=w=>w>=70?t.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"High"}):w>=40?t.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Moderate"}):t.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Low"}),T=w=>{const _={Active:"bg-blue-100 text-blue-800",Inactive:"bg-gray-100 text-gray-800",Suspended:"bg-red-100 text-red-800"};return t.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${_[w]||"bg-gray-100 text-gray-800"}`,children:w})};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:()=>s("/admin/reports"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition",children:[t.jsx(Ms,{className:"h-5 w-5 mr-2"}),"Back to Reports"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"User Activity Report"}),t.jsx("p",{className:"text-gray-600",children:"Track user engagement, identify idle users, and analyze activity patterns"})]}),t.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[t.jsxs("button",{onClick:()=>p(!f),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[t.jsx(yu,{className:"h-4 w-4 mr-2"}),f?"Hide Filters":"Show Filters"]}),t.jsxs("button",{onClick:S,disabled:!e?.users,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:[t.jsx(Li,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),t.jsxs("button",{onClick:C,disabled:!e,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:[t.jsx(Li,{className:"h-4 w-4 mr-2"}),"Export JSON"]}),t.jsx("button",{onClick:y,disabled:r,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50",children:r?"Refreshing...":"Refresh Report"})]}),f&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters"}),t.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(Pr,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),t.jsx("input",{type:"date",value:u.startDate,onChange:w=>m({...u,startDate:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),t.jsx("input",{type:"date",value:u.endDate,onChange:w=>m({...u,endDate:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Days Idle"}),t.jsx("input",{type:"number",min:"1",value:u.minDaysDormant,onChange:w=>m({...u,minDaysDormant:parseInt(w.target.value)||30}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]})]}),t.jsxs("div",{className:"flex gap-3 mt-4",children:[t.jsx("button",{onClick:v,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Apply Filters"}),t.jsx("button",{onClick:j,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Clear Filters"})]})]}),o&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:o}),r&&t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading report data..."})]})}),!r&&e&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(WT,{className:"h-10 w-10 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.summary.totalUsers})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(oa,{className:"h-10 w-10 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Users"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.summary.activeUsers})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(xu,{className:"h-10 w-10 text-orange-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Idle Users"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.summary.dormantUsers})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(la,{className:"h-10 w-10 text-purple-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg Engagement"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.summary.averageEngagementScore})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Engagement Distribution"}),t.jsx("div",{style:{height:"250px"},children:N&&t.jsx(ws,{data:N,options:E})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"User Status Distribution"}),t.jsx("div",{style:{height:"250px"},children:D&&t.jsx(ws,{data:D,options:E})})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["User Details (",e.users.length,")"]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Activity"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Engagement"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enrollments"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completions"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Progress"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Idle"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.users.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"8",className:"px-6 py-8 text-center text-gray-500",children:"No users found matching the criteria"})}):e.users.map(w=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.name}),t.jsx("div",{className:"text-sm text-gray-500",children:w.email})]})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T(w.status)}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[t.jsx("div",{children:new Date(w.lastActivityDate).toLocaleDateString()}),t.jsxs("div",{className:"text-xs text-gray-500",children:[w.daysSinceLastActivity," days ago"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:w.engagementScore}),A(w.engagementScore)]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.enrollments}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.completions}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[w.averageProgress,"%"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.isDormant?t.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-orange-100 text-orange-800",children:"Yes"}):t.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"No"})})]},w.userId))})]})})]})]})]})]})}function zR(){tt("User Progress Report");const s=ze(),[e,a]=b.useState(null),[r,l]=b.useState(!0),[o,d]=b.useState(null),[u,m]=b.useState({startDate:"",endDate:""}),[f,p]=b.useState(!1),y=async()=>{l(!0),d(null);try{const w=await CR({startDate:u.startDate||void 0,endDate:u.endDate||void 0});a(w)}catch(w){console.error("Error fetching user progress report:",w),d(w.response?.data?.error||"Failed to load report")}finally{l(!1)}};b.useEffect(()=>{y()},[]);const v=()=>{y(),p(!1)},j=()=>{m({startDate:"",endDate:""})},S=()=>{if(e?.users){const w=e.users.map(_=>({Name:_.name,Email:_.email,"Courses Enrolled":_.coursesEnrolled,"Courses Completed":_.coursesCompleted,"Courses In Progress":_.coursesInProgress,"Overall Progress":_.overallProgress+"%","Avg Completion Time (Days)":_.averageCompletionTime,"Learning Velocity (Courses/Month)":_.learningVelocity}));ma(w,"user_progress_report")}},C=()=>{e&&fa(e,"user_progress_report")},N=e?.users?{labels:e.users.sort((w,_)=>_.coursesCompleted-w.coursesCompleted).slice(0,10).map(w=>w.name.split(" ")[0]),datasets:[{label:"Courses Completed",data:e.users.sort((w,_)=>_.coursesCompleted-w.coursesCompleted).slice(0,10).map(w=>w.coursesCompleted),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgb(59, 130, 246)",borderWidth:1}]}:null,D=e?.users?{labels:["0-25%","26-50%","51-75%","76-100%"],datasets:[{label:"Number of Users",data:[e.users.filter(w=>w.overallProgress<=25).length,e.users.filter(w=>w.overallProgress>25&&w.overallProgress<=50).length,e.users.filter(w=>w.overallProgress>50&&w.overallProgress<=75).length,e.users.filter(w=>w.overallProgress>75).length],backgroundColor:["rgba(239, 68, 68, 0.8)","rgba(251, 191, 36, 0.8)","rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)"],borderColor:["rgb(239, 68, 68)","rgb(251, 191, 36)","rgb(34, 197, 94)","rgb(59, 130, 246)"],borderWidth:1}]}:null,E={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"}}},A=w=>w>=75?"text-blue-600 bg-blue-100":w>=50?"text-green-600 bg-green-100":w>=25?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",T=w=>w>=75?"bg-blue-600":w>=50?"bg-green-600":w>=25?"bg-yellow-600":"bg-red-600";return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:()=>s("/admin/reports"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition",children:[t.jsx(Ms,{className:"h-5 w-5 mr-2"}),"Back to Reports"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"User Progress Report"}),t.jsx("p",{className:"text-gray-600",children:"View individual user progress across all courses and learning pathways"})]}),t.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[t.jsxs("button",{onClick:()=>p(!f),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[t.jsx(yu,{className:"h-4 w-4 mr-2"}),f?"Hide Filters":"Show Filters"]}),t.jsxs("button",{onClick:S,disabled:!e?.users,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:[t.jsx(Li,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),t.jsxs("button",{onClick:C,disabled:!e,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:[t.jsx(Li,{className:"h-4 w-4 mr-2"}),"Export JSON"]}),t.jsx("button",{onClick:y,disabled:r,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50",children:r?"Refreshing...":"Refresh Report"})]}),f&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters"}),t.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(Pr,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),t.jsx("input",{type:"date",value:u.startDate,onChange:w=>m({...u,startDate:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),t.jsx("input",{type:"date",value:u.endDate,onChange:w=>m({...u,endDate:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]})]}),t.jsxs("div",{className:"flex gap-3 mt-4",children:[t.jsx("button",{onClick:v,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Apply Filters"}),t.jsx("button",{onClick:j,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Clear Filters"})]})]}),o&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:o}),r&&t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading report data..."})]})}),!r&&e&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ln,{className:"h-10 w-10 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Learners"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.summary.totalLearners})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(zt,{className:"h-10 w-10 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Completions"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.summary.totalCompletions})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(oa,{className:"h-10 w-10 text-purple-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg Progress"}),t.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[e.summary.averageProgress,"%"]})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(oa,{className:"h-10 w-10 text-orange-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg Completion"}),t.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[e.summary.averageCompletionTime,"d"]})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(FT,{className:"h-10 w-10 text-indigo-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg Velocity"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.summary.averageLearningVelocity}),t.jsx("p",{className:"text-xs text-gray-500",children:"courses/month"})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top 10 Learners by Completions"}),t.jsx("div",{style:{height:"300px"},children:N&&t.jsx(js,{data:N,options:E})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Progress Distribution"}),t.jsx("div",{style:{height:"300px"},children:D&&t.jsx(js,{data:D,options:E})})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["User Details (",e.users.length,")"]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enrolled"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completed"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"In Progress"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Overall Progress"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Time (Days)"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Velocity"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.users.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500",children:"No users found matching the criteria"})}):e.users.map(w=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.name}),t.jsx("div",{className:"text-sm text-gray-500",children:w.email})]})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.coursesEnrolled}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:w.coursesCompleted})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:w.coursesInProgress})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 w-24",children:t.jsx("div",{className:`h-2 rounded-full ${T(w.overallProgress)}`,style:{width:`${w.overallProgress}%`}})}),t.jsxs("span",{className:`text-xs font-semibold px-2 py-1 rounded ${A(w.overallProgress)}`,children:[w.overallProgress,"%"]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.averageCompletionTime}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[t.jsx("span",{className:"font-medium",children:w.learningVelocity}),t.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"c/m"})]})]},w.userId))})]})})]})]})]})]})}function PR(){const s=ze(),[e,a]=b.useState(null),[r,l]=b.useState(!0),[o,d]=b.useState({startDate:"",endDate:""}),[u,m]=b.useState(""),[f,p]=b.useState("all");b.useEffect(()=>{y()},[]);const y=async()=>{try{l(!0);const _=await kR(o);a(_)}catch(_){console.error("Failed to load course enrollment report:",_),alert("Failed to load report data")}finally{l(!1)}},v=_=>{d({...o,[_.target.name]:_.target.value})},j=()=>{y()},S=()=>{if(!e?.courses)return;const _=e.courses.map(R=>({"Course Title":R.courseTitle,Category:R.category||"N/A",Status:R.status,"Total Enrollments":R.totalEnrollments,Active:R.activeEnrollments,Completed:R.completedEnrollments,"Completion Rate":`${R.completionRate}%`,"Dropoff Rate":`${R.dropoffRate}%`,Popularity:R.popularity}));ma(_,"course-enrollment-report.csv")},C=()=>{e&&fa(e,"course-enrollment-report.json")};if(r)return t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading report..."})]})});if(!e)return null;const N=e.courses.filter(_=>{const R=_.courseTitle.toLowerCase().includes(u.toLowerCase())||(_.category||"").toLowerCase().includes(u.toLowerCase()),z=f==="all"||_.category===f;return R&&z}),D=["all",...new Set(e.courses.map(_=>_.category||"Uncategorized"))],E=[...e.courses].slice(0,10),A={labels:E.map(_=>_.courseTitle.length>20?_.courseTitle.substring(0,20)+"...":_.courseTitle),datasets:[{label:"Total Enrollments",data:E.map(_=>_.totalEnrollments),backgroundColor:"rgba(59, 130, 246, 0.8)"},{label:"Completed",data:E.map(_=>_.completedEnrollments),backgroundColor:"rgba(34, 197, 94, 0.8)"}]},T={labels:e.categoryBreakdown.map(_=>_.category),datasets:[{data:e.categoryBreakdown.map(_=>_.totalEnrollments),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(34, 197, 94, 0.8)","rgba(249, 115, 22, 0.8)","rgba(168, 85, 247, 0.8)","rgba(236, 72, 153, 0.8)"]}]},w={labels:["High","Medium","Low"],datasets:[{data:[e.courses.filter(_=>_.popularity==="High").length,e.courses.filter(_=>_.popularity==="Medium").length,e.courses.filter(_=>_.popularity==="Low").length],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(249, 115, 22, 0.8)","rgba(239, 68, 68, 0.8)"]}]};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:()=>s("/admin/reports"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition",children:[t.jsx(Ms,{className:"h-5 w-5 mr-2"}),"Back to Reports"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Course Enrollment Report"}),t.jsx("p",{className:"text-gray-600",children:"Track course enrollments, completion rates, and popularity metrics"})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),t.jsx("input",{type:"date",name:"startDate",value:o.startDate,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),t.jsx("input",{type:"date",name:"endDate",value:o.endDate,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:j,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:"Apply Filters"})}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition text-sm",children:"Export CSV"}),t.jsx("button",{onClick:C,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition text-sm",children:"Export JSON"})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Courses"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary.totalCourses})]}),t.jsx(ln,{className:"h-12 w-12 text-blue-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Enrollments"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary.totalEnrollments}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Avg: ",e.summary.averageEnrollmentPerCourse," per course"]})]}),t.jsx(Wn,{className:"h-12 w-12 text-green-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Active Enrollments"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary.activeEnrollments}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"In Progress"})]}),t.jsx(Vf,{className:"h-12 w-12 text-orange-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Completion Rate"}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[e.summary.averageCompletionRate,"%"]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Dropoff: ",e.summary.averageDropoffRate,"%"]})]}),t.jsx(zt,{className:"h-12 w-12 text-purple-500"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsx("div",{className:"bg-linear-to-r from-green-50 to-green-100 rounded-lg shadow p-6 border border-green-200",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Vf,{className:"h-8 w-8 text-green-600 mr-3 shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-green-800 mb-1",children:"Most Popular Course"}),t.jsx("p",{className:"text-lg font-bold text-green-900",children:e.summary.mostPopularCourse})]})]})}),t.jsx("div",{className:"bg-linear-to-r from-red-50 to-red-100 rounded-lg shadow p-6 border border-red-200",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(KE,{className:"h-8 w-8 text-red-600 mr-3 shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:"Least Popular Course"}),t.jsx("p",{className:"text-lg font-bold text-red-900",children:e.summary.leastPopularCourse})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top 10 Courses by Enrollment"}),t.jsx("div",{className:"h-80",children:t.jsx(js,{data:A,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}},plugins:{legend:{position:"top"}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Enrollments by Category"}),t.jsx("div",{className:"h-80",children:t.jsx(ws,{data:T,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Popularity Distribution"}),t.jsx("div",{className:"h-64",children:t.jsx(ws,{data:w,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Category Statistics"}),t.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:e.categoryBreakdown.map((_,R)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:_.category}),t.jsxs("p",{className:"text-sm text-gray-600",children:[_.courses," courses"]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-lg font-bold text-blue-600",children:_.totalEnrollments}),t.jsx("p",{className:"text-xs text-gray-500",children:"enrollments"})]})]},R))})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Courses"}),t.jsx("input",{type:"text",value:u,onChange:_=>m(_.target.value),placeholder:"Search by title or category...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Category"}),t.jsx("select",{value:f,onChange:_=>p(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:D.map(_=>t.jsx("option",{value:_,children:_==="all"?"All Categories":_},_))})]})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Course Details"}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",N.length," of ",e.courses.length," courses"]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enrollments"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Active"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completed"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completion Rate"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dropoff Rate"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Popularity"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(_=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.courseTitle})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:_.category||"N/A"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:_.status})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-semibold",children:_.totalEnrollments}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.activeEnrollments}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.completedEnrollments}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mr-2",children:t.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min(_.completionRate,100)}%`}})}),t.jsxs("span",{className:"text-sm text-gray-900 font-medium",children:[_.completionRate,"%"]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("span",{className:`text-sm font-medium ${_.dropoffRate>50?"text-red-600":_.dropoffRate>25?"text-orange-600":"text-green-600"}`,children:[_.dropoffRate,"%"]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_.popularity==="High"?"bg-green-100 text-green-800":_.popularity==="Medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:_.popularity})})]},_.courseId))})]})})]})]})]})}function UR(){const s=ze(),[e,a]=b.useState(null),[r,l]=b.useState(!0),[o,d]=b.useState({startDate:"",endDate:""}),[u,m]=b.useState(""),[f,p]=b.useState("all"),[y,v]=b.useState("all");b.useEffect(()=>{j()},[]);const j=async()=>{try{l(!0);const q=await _R(o);a(q)}catch(q){console.error("Failed to load course completion report:",q),alert("Failed to load report data")}finally{l(!1)}},S=q=>{d({...o,[q.target.name]:q.target.value})},C=()=>{j()},N=()=>{if(!e?.courses)return;const q=e.courses.map(ne=>({"Course Title":ne.courseTitle,Category:ne.category||"N/A","Total Enrollments":ne.totalEnrollments,Completed:ne.completedCount,"In Progress":ne.inProgressCount,"Not Started":ne.notStartedCount,"Completion Rate":`${ne.completionRate}%`,"Avg Completion Time (days)":ne.averageCompletionTime,Performance:ne.performance}));ma(q,"course-completion-report.csv")},D=()=>{e&&fa(e,"course-completion-report.json")};if(r)return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading report..."})]})})]});if(!e)return null;const E=e.courses.filter(q=>{const ne=q.courseTitle.toLowerCase().includes(u.toLowerCase())||(q.category||"").toLowerCase().includes(u.toLowerCase()),U=f==="all"||q.category===f,re=y==="all"||q.performance===y;return ne&&U&&re}),A=["all",...new Set(e.courses.map(q=>q.category||"Uncategorized"))],T=["all","Excellent","Good","Fair","Poor"],w=[...e.courses].slice(0,10),_={labels:w.map(q=>q.courseTitle.length>20?q.courseTitle.substring(0,20)+"...":q.courseTitle),datasets:[{label:"Completion Rate (%)",data:w.map(q=>q.completionRate),backgroundColor:"rgba(34, 197, 94, 0.8)"}]},R={labels:e.completionTrends.map(q=>q.date),datasets:[{label:"Completions",data:e.completionTrends.map(q=>q.count),borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},z={labels:e.categoryBreakdown.map(q=>q.category),datasets:[{data:e.categoryBreakdown.map(q=>q.totalCompletions),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(34, 197, 94, 0.8)","rgba(249, 115, 22, 0.8)","rgba(168, 85, 247, 0.8)","rgba(236, 72, 153, 0.8)"]}]},H={labels:["Excellent","Good","Fair","Poor"],datasets:[{data:[e.courses.filter(q=>q.performance==="Excellent").length,e.courses.filter(q=>q.performance==="Good").length,e.courses.filter(q=>q.performance==="Fair").length,e.courses.filter(q=>q.performance==="Poor").length],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(249, 115, 22, 0.8)","rgba(239, 68, 68, 0.8)"]}]};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:()=>s("/admin/reports"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition",children:[t.jsx(Ms,{className:"h-5 w-5 mr-2"}),"Back to Reports"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Course Completion Report"}),t.jsx("p",{className:"text-gray-600",children:"Track course completion rates, performance metrics, and trends"})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),t.jsx("input",{type:"date",name:"startDate",value:o.startDate,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),t.jsx("input",{type:"date",name:"endDate",value:o.endDate,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:C,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:"Apply Filters"})}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx("button",{onClick:N,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition text-sm",children:"Export CSV"}),t.jsx("button",{onClick:D,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition text-sm",children:"Export JSON"})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg Completion Rate"}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[e.summary.averageCompletionRate,"%"]})]}),t.jsx(la,{className:"h-12 w-12 text-blue-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Completions"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary.totalCompletions})]}),t.jsx(zt,{className:"h-12 w-12 text-green-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"In Progress"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary.totalInProgress}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Incomplete: ",e.summary.totalIncomplete]})]}),t.jsx(oa,{className:"h-12 w-12 text-orange-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg Completion Time"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary.averageCompletionTime}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"days"})]}),t.jsx(ln,{className:"h-12 w-12 text-purple-500"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsx("div",{className:"bg-linear-to-r from-green-50 to-green-100 rounded-lg shadow p-6 border border-green-200",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(YT,{className:"h-8 w-8 text-green-600 mr-3 shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-green-800 mb-1",children:"Best Performing Course"}),t.jsx("p",{className:"text-lg font-bold text-green-900",children:e.summary.bestPerforming})]})]})}),t.jsx("div",{className:"bg-linear-to-r from-red-50 to-red-100 rounded-lg shadow p-6 border border-red-200",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(xu,{className:"h-8 w-8 text-red-600 mr-3 shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:"Needs Improvement"}),t.jsx("p",{className:"text-lg font-bold text-red-900",children:e.summary.worstPerforming})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top 10 Courses by Completion Rate"}),t.jsx("div",{className:"h-80",children:t.jsx(js,{data:_,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:100}},plugins:{legend:{display:!1}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Distribution"}),t.jsx("div",{className:"h-80",children:t.jsx(ws,{data:H,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Completion Trends (Last 30 Days)"}),t.jsx("div",{className:"h-64",children:t.jsx(Mo,{data:R,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Completions by Category"}),t.jsx("div",{className:"h-64",children:t.jsx(ws,{data:z,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Category Performance"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.categoryBreakdown.map((q,ne)=>t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"font-medium text-gray-900",children:q.category}),t.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600",children:[t.jsxs("p",{children:[q.courses," courses"]}),t.jsxs("p",{children:[q.totalCompletions," completions"]}),t.jsxs("p",{className:"font-semibold text-blue-600",children:[q.averageCompletionRate,"% avg rate"]})]})]},ne))})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Courses"}),t.jsx("input",{type:"text",value:u,onChange:q=>m(q.target.value),placeholder:"Search by title or category...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Category"}),t.jsx("select",{value:f,onChange:q=>p(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:A.map(q=>t.jsx("option",{value:q,children:q==="all"?"All Categories":q},q))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Performance"}),t.jsx("select",{value:y,onChange:q=>v(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:T.map(q=>t.jsx("option",{value:q,children:q==="all"?"All Performance":q},q))})]})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Course Details"}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",E.length," of ",e.courses.length," courses"]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enrolled"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completed"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"In Progress"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completion Rate"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Time (days)"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(q=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:q.courseTitle})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:q.category||"N/A"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.totalEnrollments}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:q.completedCount}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.inProgressCount}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mr-2",children:t.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min(q.completionRate,100)}%`}})}),t.jsxs("span",{className:"text-sm text-gray-900 font-medium",children:[q.completionRate,"%"]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.averageCompletionTime||"N/A"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${q.performance==="Excellent"?"bg-green-100 text-green-800":q.performance==="Good"?"bg-blue-100 text-blue-800":q.performance==="Fair"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:q.performance})})]},q.courseId))})]})})]})]})]})}function BR(){const s=ze(),[e,a]=b.useState(null),[r,l]=b.useState(!0),[o,d]=b.useState({courseId:"",lessonType:"",startDate:"",endDate:""}),[u,m]=b.useState(""),[f,p]=b.useState("all");b.useEffect(()=>{y()},[]);const y=async()=>{try{l(!0);const _=await AR(o);a(_)}catch(_){console.error("Failed to load lesson analytics report:",_),alert("Failed to load report data")}finally{l(!1)}},v=_=>{d({...o,[_.target.name]:_.target.value})},j=()=>{y()},S=()=>{if(!e?.lessons)return;const _=e.lessons.map(R=>({"Lesson Title":R.lessonTitle,Course:R.courseTitle,Type:R.lessonType,Order:R.order,"Duration (min)":R.duration,"Total Enrollments":R.totalEnrollments,Completions:R.completions,"In Progress":R.inProgress,"Not Started":R.notStarted,"Completion Rate":`${R.completionRate}%`,"Avg Progress":`${R.averageProgress}%`,Engagement:R.engagementLevel,Difficulty:R.difficulty,Popular:R.isPopular?"Yes":"No"}));ma(_,"lesson-analytics-report.csv")},C=()=>{e&&fa(e,"lesson-analytics-report.json")};if(r)return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading report..."})]})})]});if(!e)return null;const N=e.lessons.filter(_=>{const R=_.lessonTitle.toLowerCase().includes(u.toLowerCase())||_.courseTitle.toLowerCase().includes(u.toLowerCase())||_.lessonType.toLowerCase().includes(u.toLowerCase()),z=f==="all"||_.engagementLevel===f;return R&&z}),D={labels:e.engagementBreakdown.map(_=>_.level),datasets:[{data:e.engagementBreakdown.map(_=>_.count),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(251, 191, 36, 0.8)","rgba(239, 68, 68, 0.8)"]}]},E={labels:e.typeBreakdown.map(_=>_.type),datasets:[{label:"Lesson Count",data:e.typeBreakdown.map(_=>_.count),backgroundColor:"rgba(59, 130, 246, 0.8)"}]},A={labels:e.difficultyBreakdown.map(_=>_.level),datasets:[{data:e.difficultyBreakdown.map(_=>_.count),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(251, 191, 36, 0.8)","rgba(239, 68, 68, 0.8)"]}]},T=[...e.lessons].sort((_,R)=>R.completionRate-_.completionRate).slice(0,10),w={labels:T.map(_=>_.lessonTitle.length>20?_.lessonTitle.substring(0,20)+"...":_.lessonTitle),datasets:[{label:"Completion Rate (%)",data:T.map(_=>_.completionRate),backgroundColor:"rgba(34, 197, 94, 0.8)"}]};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:()=>s("/admin/reports"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition",children:[t.jsx(Ms,{className:"h-5 w-5 mr-2"}),"Back to Reports"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Lesson Analytics Report"}),t.jsx("p",{className:"text-gray-600",children:"Analyze lesson performance, engagement levels, and difficulty"})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lesson Type"}),t.jsxs("select",{name:"lessonType",value:o.lessonType,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"All Types"}),t.jsx("option",{value:"Video",children:"Video"}),t.jsx("option",{value:"Text",children:"Text"}),t.jsx("option",{value:"Quiz",children:"Quiz"}),t.jsx("option",{value:"Assignment",children:"Assignment"}),t.jsx("option",{value:"SCORM",children:"SCORM"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),t.jsx("input",{type:"date",name:"startDate",value:o.startDate,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),t.jsx("input",{type:"date",name:"endDate",value:o.endDate,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:j,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:"Apply Filters"})}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition text-sm",children:"Export CSV"}),t.jsx("button",{onClick:C,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition text-sm",children:"Export JSON"})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Lessons"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary.totalLessons})]}),t.jsx(ln,{className:"h-12 w-12 text-blue-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg Completion Rate"}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[e.summary.averageCompletionRate,"%"]})]}),t.jsx(zt,{className:"h-12 w-12 text-green-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Enrollments"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary.totalEnrollments})]}),t.jsx(la,{className:"h-12 w-12 text-purple-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg Progress"}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[e.summary.averageProgress,"%"]})]}),t.jsx(oa,{className:"h-12 w-12 text-orange-500"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-linear-to-r from-green-50 to-green-100 rounded-lg shadow p-6 border border-green-200",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx(Qf,{className:"h-6 w-6 text-green-600 mr-2"}),t.jsxs("h3",{className:"text-lg font-semibold text-green-900",children:["Popular Lessons (",e.popularLessons.length,")"]})]}),e.popularLessons.length>0?t.jsx("div",{className:"space-y-2",children:e.popularLessons.map((_,R)=>t.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:_.lessonTitle}),t.jsxs("span",{className:"text-sm text-green-600 font-semibold",children:[_.completionRate,"%"]})]},R))}):t.jsx("p",{className:"text-green-700 text-sm",children:"No popular lessons identified"})]}),t.jsxs("div",{className:"bg-linear-to-r from-red-50 to-red-100 rounded-lg shadow p-6 border border-red-200",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx(xu,{className:"h-6 w-6 text-red-600 mr-2"}),t.jsxs("h3",{className:"text-lg font-semibold text-red-900",children:["Needs Improvement (",e.problematicLessons.length,")"]})]}),e.problematicLessons.length>0?t.jsx("div",{className:"space-y-2",children:e.problematicLessons.map((_,R)=>t.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:_.lessonTitle}),t.jsxs("span",{className:"text-sm text-red-600 font-semibold",children:[_.completionRate,"%"]})]},R))}):t.jsx("p",{className:"text-red-700 text-sm",children:"No problematic lessons identified"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top 10 Lessons by Completion Rate"}),t.jsx("div",{className:"h-80",children:t.jsx(js,{data:w,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:100}},plugins:{legend:{display:!1}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Lessons by Type"}),t.jsx("div",{className:"h-80",children:t.jsx(js,{data:E,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Engagement Level Distribution"}),t.jsx("div",{className:"h-80",children:t.jsx(ws,{data:D,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Difficulty Distribution"}),t.jsx("div",{className:"h-80",children:t.jsx(RE,{data:A,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Breakdown by Lesson Type"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:e.typeBreakdown.map((_,R)=>t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"font-medium text-gray-900 mb-2",children:_.type}),t.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[t.jsxs("p",{children:[_.count," lessons"]}),t.jsxs("p",{children:[_.totalEnrollments," enrollments"]}),t.jsxs("p",{className:"font-semibold text-blue-600",children:[_.averageCompletionRate,"% avg rate"]})]})]},R))})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Lessons"}),t.jsx("input",{type:"text",value:u,onChange:_=>m(_.target.value),placeholder:"Search by title, course, or type...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Engagement"}),t.jsxs("select",{value:f,onChange:_=>p(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"All Levels"}),t.jsx("option",{value:"High",children:"High"}),t.jsx("option",{value:"Medium",children:"Medium"}),t.jsx("option",{value:"Low",children:"Low"}),t.jsx("option",{value:"Very Low",children:"Very Low"})]})]})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Lesson Details"}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",N.length," of ",e.lessons.length," lessons"]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lesson"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enrollments"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completions"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completion Rate"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Engagement"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Difficulty"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(_=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.lessonTitle}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Order: ",_.order," ",_.duration?` ${_.duration} min`:""]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.courseTitle}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:_.lessonType})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.totalEnrollments}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:_.completions}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mr-2",children:t.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min(_.completionRate,100)}%`}})}),t.jsxs("span",{className:"text-sm text-gray-900 font-medium",children:[_.completionRate,"%"]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_.engagementLevel==="High"?"bg-green-100 text-green-800":_.engagementLevel==="Medium"?"bg-blue-100 text-blue-800":_.engagementLevel==="Low"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:_.engagementLevel})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_.difficulty==="Easy"?"bg-green-100 text-green-800":_.difficulty==="Moderate"?"bg-blue-100 text-blue-800":_.difficulty==="Challenging"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:_.difficulty})})]},_.lessonId))})]})})]})]})]})}function FR(){tt("Time Tracking & Engagement Report");const s=ze(),[e,a]=b.useState(null),[r,l]=b.useState(!0),[o,d]=b.useState(null),[u,m]=b.useState({userId:"",courseId:"",startDate:"",endDate:""}),[f,p]=b.useState("summary");b.useEffect(()=>{y()},[]);const y=async()=>{try{l(!0),d(null);const z=await ER(u);a(z)}catch(z){console.error("Failed to load time tracking report:",z),d(z.response?.data?.error||"Failed to load report")}finally{l(!1)}},v=z=>{m({...u,[z.target.name]:z.target.value})},j=()=>{y()},S=()=>{if(!e)return;let z=[];f==="users"?z=e.userTimeAnalytics.map(H=>({User:H.userName,Email:H.email,"Total Hours":H.totalTimeSpentHours,"Courses Accessed":H.coursesAccessed,"Lessons Accessed":H.lessonsAccessed,"Avg Session (min)":H.averageSessionMinutes,"Active Days":H.activeDays,"Last Activity":H.lastActivityDate})):f==="courses"?z=e.courseTimeAnalytics.map(H=>({Course:H.courseTitle,"Total Hours":H.totalTimeSpentHours,"Unique Learners":H.uniqueLearners,"Avg Time Per Learner (min)":H.averageTimePerLearnerMinutes,"Total Lessons":H.totalLessons,"Completed Lessons":H.completedLessons})):f==="lessons"&&(z=e.lessonTimeAnalytics.map(H=>({Lesson:H.lessonTitle,Type:H.lessonType,Course:H.courseTitle,"Total Hours":H.totalTimeSpentHours,"Unique Learners":H.uniqueLearners,"Avg Time Per Learner (min)":H.averageTimePerLearnerMinutes,Completions:H.completions,"Completion Rate":`${H.completionRate}%`,"Video Bookmarks":H.videoBookmarkCount,"Last Accessed":H.lastAccessedAt}))),ma(z,`time-tracking-${f}-report.csv`)},C=()=>{e&&fa(e,"time-tracking-report.json")};if(r)return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading report..."})]})})]});if(o)return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsx("p",{className:"text-red-800",children:o})})})]});if(!e)return null;const{summary:N,userTimeAnalytics:D,courseTimeAnalytics:E,lessonTimeAnalytics:A,dailyTimeBreakdown:T,timeByLessonType:w}=e,_={labels:T.map(z=>new Date(z.date).toLocaleDateString()),datasets:[{label:"Time Spent (Hours)",data:T.map(z=>z.totalTimeSpentHours),backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgb(59, 130, 246)",borderWidth:2,fill:!0}]},R={labels:w.map(z=>z.lessonType),datasets:[{label:"Time Spent (Hours)",data:w.map(z=>z.totalTimeSpentHours),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(251, 146, 60, 0.8)","rgba(139, 92, 246, 0.8)","rgba(244, 63, 94, 0.8)"]}]};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:()=>s("/admin/reports"),className:"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700 mb-4",children:[t.jsx(Ms,{className:"h-5 w-5 mr-1"}),"Back to Reports"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Time Tracking & Engagement Report"}),t.jsx("p",{className:"text-gray-600",children:"Comprehensive analytics on time spent by learners across courses and lessons"})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[t.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Filters"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),t.jsx("input",{type:"date",name:"startDate",value:u.startDate,onChange:v,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),t.jsx("input",{type:"date",name:"endDate",value:u.endDate,onChange:v,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:j,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Apply Filters"})}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx("button",{onClick:S,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 text-sm",children:"Export CSV"}),t.jsx("button",{onClick:C,className:"flex-1 bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 text-sm",children:"Export JSON"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[t.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Time Spent"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[N.totalTimeSpentHours,"h"]})]}),t.jsx(oa,{className:"h-12 w-12 text-blue-500"})]})}),t.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Unique Learners"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:N.totalUniqueLearners})]}),t.jsx(Wn,{className:"h-12 w-12 text-green-500"})]})}),t.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Courses Accessed"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:N.totalCoursesAccessed})]}),t.jsx(ln,{className:"h-12 w-12 text-purple-500"})]})}),t.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Lessons Accessed"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:N.totalLessonsAccessed})]}),t.jsx(i2,{className:"h-12 w-12 text-orange-500"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Time Per Learner"}),t.jsxs("p",{className:"text-xl font-bold text-gray-900 mt-1",children:[N.averageTimePerLearnerHours,"h"]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Time Per Course"}),t.jsxs("p",{className:"text-xl font-bold text-gray-900 mt-1",children:[N.averageTimePerCourseHours,"h"]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Time Per Lesson"}),t.jsxs("p",{className:"text-xl font-bold text-gray-900 mt-1",children:[N.averageTimePerLessonMinutes," min"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Daily Time Spent"}),t.jsx(Mo,{data:_,options:{responsive:!0,maintainAspectRatio:!0}})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Time by Lesson Type"}),t.jsx(ws,{data:R,options:{responsive:!0,maintainAspectRatio:!0}})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:["summary","users","courses","lessons","daily"].map(z=>t.jsx("button",{onClick:()=>p(z),className:`py-4 px-1 border-b-2 font-medium text-sm capitalize ${f===z?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:z},z))})}),t.jsxs("div",{className:"p-6",children:[f==="summary"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" Key Insights"}),t.jsxs("ul",{className:"list-disc list-inside text-blue-800 space-y-1",children:[t.jsxs("li",{children:["Most Active Day: ",t.jsx("strong",{children:N.mostActiveDay})," (",N.peakActivityHours,"h)"]}),t.jsxs("li",{children:["Most Time-Consuming Course: ",t.jsx("strong",{children:N.mostTimeConsuming})]}),t.jsxs("li",{children:["Average time per learner: ",t.jsxs("strong",{children:[N.averageTimePerLearnerHours," hours"]})]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsx("h4",{className:"font-semibold mb-2",children:"Time by Lesson Type"}),t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Type"}),t.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-700",children:"Hours"}),t.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-700",children:"Avg/Lesson"})]})}),t.jsx("tbody",{className:"divide-y",children:w.map(z=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-4 py-2 text-sm",children:z.lessonType}),t.jsxs("td",{className:"px-4 py-2 text-sm text-right",children:[z.totalTimeSpentHours,"h"]}),t.jsxs("td",{className:"px-4 py-2 text-sm text-right",children:[z.averageTimePerLessonMinutes," min"]})]},z.lessonType))})]})]})})]}),f==="users"&&t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Hours"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Courses"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Lessons"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Avg Session"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Active Days"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Activity"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(z=>t.jsxs("tr",{children:[t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:z.userName}),t.jsx("div",{className:"text-sm text-gray-500",children:z.email})]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:[z.totalTimeSpentHours,"h"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:z.coursesAccessed}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:z.lessonsAccessed}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:[z.averageSessionMinutes," min"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:z.activeDays}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:z.lastActivityDate?new Date(z.lastActivityDate).toLocaleDateString():"N/A"})]},z.userId))})]})}),f==="courses"&&t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Course"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Hours"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Learners"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Avg Time/Learner"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Lessons"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Completed"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(z=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:z.courseTitle}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:[z.totalTimeSpentHours,"h"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:z.uniqueLearners}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:[z.averageTimePerLearnerMinutes," min"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:z.totalLessons}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:z.completedLessons})]},z.courseId))})]})}),f==="lessons"&&t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Lesson"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Hours"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Learners"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Avg Time"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Completion %"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bookmarks"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(z=>t.jsxs("tr",{children:[t.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:[t.jsx("div",{children:z.lessonTitle}),t.jsx("div",{className:"text-xs text-gray-500",children:z.courseTitle})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.lessonType}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:[z.totalTimeSpentHours,"h"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:z.uniqueLearners}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:[z.averageTimePerLearnerMinutes," min"]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:[z.completionRate,"%"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:z.videoBookmarkCount})]},z.lessonId))})]})}),f==="daily"&&t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Hours"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Unique Learners"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Lessons Accessed"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Courses Accessed"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(z=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:new Date(z.date).toLocaleDateString()}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:[z.totalTimeSpentHours,"h"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:z.uniqueLearners}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:z.lessonsAccessed}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:z.coursesAccessed})]},z.date))})]})})]})]})]})]})}function HR(){const s=ze(),[e,a]=b.useState(null),[r,l]=b.useState(!0),[o,d]=b.useState({category:"",startDate:"",endDate:""}),[u,m]=b.useState(""),[f,p]=b.useState("all");b.useEffect(()=>{y()},[]);const y=async()=>{try{l(!0);const w=await MR(o);a(w)}catch(w){console.error("Failed to load content usage report:",w),alert("Failed to load report data")}finally{l(!1)}},v=w=>{d({...o,[w.target.name]:w.target.value})},j=()=>{y()},S=()=>{if(!e?.content)return;const w=e.content.map(_=>({"Content Title":_.contentTitle,Category:_.category,Type:_.contentType,"Access Count":_.accessCount,"Unique Users":_.uniqueUsers,Completions:_.completions,"Completion Rate":`${_.completionRate}%`,"Avg Progress":`${_.averageProgress}%`,Engagement:_.engagementLevel,Lessons:_.lessonCount,"Last Access":_.lastAccessDate||"N/A","Days Since Access":_.daysSinceLastAccess||"N/A",Status:_.isUnused?"Unused":"Active"}));ma(w,"content-usage-report.csv")},C=()=>{e&&fa(e,"content-usage-report.json")};if(r)return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading report..."})]})})]});if(!e)return null;const N=e.content.filter(w=>{const _=w.contentTitle.toLowerCase().includes(u.toLowerCase())||w.category.toLowerCase().includes(u.toLowerCase()),R=f==="all"||w.engagementLevel===f;return _&&R}),D=["all",...new Set(e.content.map(w=>w.category))],E={labels:e.engagementBreakdown.map(w=>w.level),datasets:[{data:e.engagementBreakdown.map(w=>w.count),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(251, 191, 36, 0.8)","rgba(156, 163, 175, 0.8)"]}]},A={labels:e.usageTrends.map(w=>w.category),datasets:[{label:"Total Accesses",data:e.usageTrends.map(w=>w.accessCount),backgroundColor:"rgba(59, 130, 246, 0.8)"}]},T={labels:e.topContent.map(w=>w.contentTitle.length>20?w.contentTitle.substring(0,20)+"...":w.contentTitle),datasets:[{label:"Access Count",data:e.topContent.map(w=>w.accessCount),backgroundColor:"rgba(34, 197, 94, 0.8)"}]};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:()=>s("/admin/reports"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition",children:[t.jsx(Ms,{className:"h-5 w-5 mr-2"}),"Back to Reports"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Content Usage Report"}),t.jsx("p",{className:"text-gray-600",children:"Track content access patterns, identify unused content, and measure engagement"})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),t.jsxs("select",{name:"category",value:o.category,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"All Categories"}),D.filter(w=>w!=="all").map(w=>t.jsx("option",{value:w,children:w},w))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),t.jsx("input",{type:"date",name:"startDate",value:o.startDate,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),t.jsx("input",{type:"date",name:"endDate",value:o.endDate,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:j,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:"Apply Filters"})}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition text-sm",children:"Export CSV"}),t.jsx("button",{onClick:C,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition text-sm",children:"Export JSON"})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Content"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary.totalContent})]}),t.jsx(Kl,{className:"h-12 w-12 text-blue-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Accesses"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary.totalAccesses})]}),t.jsx(la,{className:"h-12 w-12 text-green-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Unique Users"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary.totalUniqueUsers})]}),t.jsx(Wn,{className:"h-12 w-12 text-purple-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg Access/Content"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary.averageAccessPerContent})]}),t.jsx(Qf,{className:"h-12 w-12 text-orange-500"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-linear-to-r from-red-50 to-red-100 rounded-lg shadow p-6 border border-red-200",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(qv,{className:"h-6 w-6 text-red-600 mr-2"}),t.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Unused Content"})]}),t.jsx("p",{className:"text-3xl font-bold text-red-900",children:e.summary.unusedContent}),t.jsxs("p",{className:"text-sm text-red-700 mt-1",children:[e.summary.totalContent>0?Math.round(e.summary.unusedContent/e.summary.totalContent*100):0,"% of total"]})]}),t.jsxs("div",{className:"bg-linear-to-r from-yellow-50 to-yellow-100 rounded-lg shadow p-6 border border-yellow-200",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx($i,{className:"h-6 w-6 text-yellow-600 mr-2"}),t.jsx("h3",{className:"text-lg font-semibold text-yellow-900",children:"Underutilized"})]}),t.jsx("p",{className:"text-3xl font-bold text-yellow-900",children:e.summary.underutilizedContent}),t.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Less than 10 accesses"})]}),t.jsxs("div",{className:"bg-linear-to-r from-green-50 to-green-100 rounded-lg shadow p-6 border border-green-200",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(Qf,{className:"h-6 w-6 text-green-600 mr-2"}),t.jsx("h3",{className:"text-lg font-semibold text-green-900",children:"High Engagement"})]}),t.jsx("p",{className:"text-3xl font-bold text-green-900",children:e.summary.highEngagement}),t.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Over 100 accesses"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top 10 Most Accessed Content"}),t.jsx("div",{className:"h-80",children:t.jsx(js,{data:T,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Usage by Category"}),t.jsx("div",{className:"h-80",children:t.jsx(js,{data:A,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Engagement Level Distribution"}),t.jsx("div",{className:"h-80",children:t.jsx(ws,{data:E,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Category Breakdown"}),t.jsx("div",{className:"space-y-3 overflow-y-auto max-h-80",children:e.categoryBreakdown.map((w,_)=>t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:"font-medium text-gray-900",children:w.category}),t.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[w.totalAccesses," accesses"]})]}),t.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{children:[w.contentCount," items"]}),t.jsxs("span",{children:[w.totalUsers," users"]})]}),w.unusedContent>0&&t.jsxs("div",{className:"text-red-600",children:[" ",w.unusedContent," unused"]})]})]},_))})]})]}),e.unusedContent.length>0&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg shadow p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx(qv,{className:"h-6 w-6 text-red-600 mr-2"}),t.jsxs("h3",{className:"text-lg font-semibold text-red-900",children:["Unused Content (",e.unusedContent.length,")"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.unusedContent.map((w,_)=>t.jsxs("div",{className:"bg-white p-3 rounded border border-red-200",children:[t.jsx("div",{className:"font-medium text-gray-900",children:w.contentTitle}),t.jsxs("div",{className:"text-sm text-gray-600",children:[w.category,"  ",w.lessonCount," lessons"]})]},_))})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Content"}),t.jsx("input",{type:"text",value:u,onChange:w=>m(w.target.value),placeholder:"Search by title or category...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Engagement"}),t.jsxs("select",{value:f,onChange:w=>p(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"All Levels"}),t.jsx("option",{value:"High",children:"High"}),t.jsx("option",{value:"Medium",children:"Medium"}),t.jsx("option",{value:"Low",children:"Low"}),t.jsx("option",{value:"None",children:"None (Unused)"})]})]})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Content Details"}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",N.length," of ",e.content.length," items"]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Content"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Accesses"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Users"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completions"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Engagement"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Access"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(w=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.contentTitle}),t.jsxs("div",{className:"text-xs text-gray-500",children:[w.lessonCount," lessons"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:w.category})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:w.accessCount}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.uniqueUsers}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.completions}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w.engagementLevel==="High"?"bg-green-100 text-green-800":w.engagementLevel==="Medium"?"bg-blue-100 text-blue-800":w.engagementLevel==="Low"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:w.engagementLevel})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.lastAccessDate?t.jsxs("div",{children:[t.jsx("div",{children:new Date(w.lastAccessDate).toLocaleDateString()}),t.jsxs("div",{className:"text-xs text-gray-500",children:[w.daysSinceLastAccess," days ago"]})]}):t.jsx("span",{className:"text-gray-400",children:"Never"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.isUnused?t.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Unused"}):t.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Active"})})]},w.contentId))})]})})]})]})]})}function qR(){const s=ze(),[e,a]=b.useState(!0),[r,l]=b.useState(null),[o,d]=b.useState({startDate:"",endDate:"",activeOnly:!0});b.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const N=await TR(o.startDate||void 0,o.endDate||void 0,o.activeOnly);l(N)}catch(N){console.error("Error fetching pathway progress report:",N)}finally{a(!1)}},m=N=>{const{name:D,value:E,type:A,checked:T}=N.target;d(w=>({...w,[D]:A==="checkbox"?T:E}))},f=()=>{u()},p=()=>{if(!r?.pathways)return;const N=r.pathways.map(D=>({"Pathway Title":D.pathwayTitle,Status:D.isActive?"Active":"Inactive",Courses:D.courseCount,"Total Enrollments":D.totalEnrollments,Completed:D.completions,"In Progress":D.inProgress,"Not Started":D.notStarted,"Completion Rate":`${D.completionRate}%`,"Avg Progress":`${D.averageProgress}%`,"Avg Completion Time (days)":D.averageCompletionTime,"Engagement Level":D.engagementLevel}));ma(N,"pathway-progress-report")},y=()=>{r&&fa(r,"pathway-progress-report")};if(e)return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading report..."})]})})]});if(!r)return null;const v={labels:r.completionTrends.map(N=>N.month),datasets:[{label:"Completions",data:r.completionTrends.map(N=>N.completions),borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.1)",tension:.3,fill:!0}]},j={labels:r.engagementBreakdown.map(N=>N.level),datasets:[{data:r.engagementBreakdown.map(N=>N.count),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(251, 191, 36, 0.8)","rgba(239, 68, 68, 0.8)","rgba(156, 163, 175, 0.8)"],borderWidth:2,borderColor:"#fff"}]},S={labels:r.topPathways.map(N=>N.pathwayTitle.substring(0,30)),datasets:[{label:"Completion Rate %",data:r.topPathways.map(N=>N.completionRate),backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},C=N=>{switch(N){case"Excellent":return"bg-green-100 text-green-800";case"Good":return"bg-blue-100 text-blue-800";case"Fair":return"bg-yellow-100 text-yellow-800";case"Poor":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:()=>s("/admin/reports"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition",children:[t.jsx(Ms,{className:"h-5 w-5 mr-2"}),"Back to Reports"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Pathway Progress Report"}),t.jsx("p",{className:"text-gray-600",children:"Track learning pathway enrollments, completions, and engagement metrics"})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),t.jsx("input",{type:"date",name:"startDate",value:o.startDate,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),t.jsx("input",{type:"date",name:"endDate",value:o.endDate,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filters"}),t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer px-3 py-2",children:[t.jsx("input",{type:"checkbox",name:"activeOnly",checked:o.activeOnly,onChange:m,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Active Only"})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:f,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:"Apply Filters"})}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx("button",{onClick:p,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition text-sm",children:"Export CSV"}),t.jsx("button",{onClick:y,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition text-sm",children:"Export JSON"})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Pathways"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.summary.totalPathways}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r.summary.activePathways," active"]})]}),t.jsx(vo,{className:"h-12 w-12 text-blue-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Enrollments"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.summary.totalEnrollments}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r.summary.totalInProgress," in progress"]})]}),t.jsx(Wn,{className:"h-12 w-12 text-indigo-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg Completion Rate"}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[r.summary.averageCompletionRate,"%"]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r.summary.totalCompletions," completions"]})]}),t.jsx(zt,{className:"h-12 w-12 text-green-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg Completion Time"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.summary.averageCompletionTime}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"days"})]}),t.jsx(oa,{className:"h-12 w-12 text-orange-500"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(ln,{className:"h-5 w-5 text-green-600 mr-2"}),t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Successful"})]}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.summary.mostSuccessfulPathway})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(la,{className:"h-5 w-5 text-blue-600 mr-2"}),t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Popular"})]}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.summary.mostPopularPathway})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(vo,{className:"h-5 w-5 text-gray-600 mr-2"}),t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"No Enrollments"})]}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[r.summary.pathwaysWithNoEnrollments," pathways"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Completion Trends (6 Months)"}),t.jsx("div",{className:"h-64",children:t.jsx(Mo,{data:v,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Engagement Distribution"}),t.jsx("div",{className:"h-64 flex items-center justify-center",children:t.jsx(ws,{data:j,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:15,boxWidth:12}}}}})})]})]}),r.topPathways.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Performing Pathways (by Completion Rate)"}),t.jsx("div",{className:"h-64",children:t.jsx(js,{data:S,options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0,max:100,ticks:{callback:N=>N+"%"}}}}})})]}),(r.popularPathways.length>0||r.strugglingPathways.length>0)&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[r.popularPathways.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Popular Pathways"}),t.jsx("div",{className:"space-y-3",children:r.popularPathways.map((N,D)=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition",children:[t.jsx("div",{className:"font-medium text-gray-900 mb-2",children:N.pathwayTitle}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-600",children:[t.jsxs("div",{children:[" ",N.courseCount," courses"]}),t.jsxs("div",{children:[" ",N.totalEnrollments," enrolled"]}),t.jsxs("div",{children:[" ",N.completionRate,"% completion"]}),t.jsxs("div",{children:[" ",N.averageCompletionTime," days avg"]})]})]},D))})]}),r.strugglingPathways.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Struggling Pathways (Needs Attention)"}),t.jsx("div",{className:"space-y-3",children:r.strugglingPathways.map((N,D)=>t.jsxs("div",{className:"border border-red-200 bg-red-50 rounded-lg p-4",children:[t.jsx("div",{className:"font-medium text-gray-900 mb-2",children:N.pathwayTitle}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-600",children:[t.jsxs("div",{children:[" ",N.totalEnrollments," enrolled"]}),t.jsxs("div",{children:[" ",N.completionRate,"% completion"]}),t.jsxs("div",{className:"col-span-2 text-red-600 font-medium",children:[" ",N.dropoutRate,"% dropout rate"]})]})]},D))})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"All Pathways"})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pathway"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Courses"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enrollments"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completion Rate"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Time"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Engagement"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.pathways.map((N,D)=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.pathwayTitle}),N.description&&t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[N.description.substring(0,60),"..."]})]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:N.isActive?"Active":"Inactive"})}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:N.courseCount}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("div",{className:"text-sm text-gray-900",children:N.totalEnrollments}),t.jsxs("div",{className:"text-xs text-gray-500",children:[N.recentEnrollments," recent (30d)"]})]}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"text-xs space-y-1",children:[t.jsxs("div",{className:"text-green-600",children:[" ",N.completions," completed"]}),t.jsxs("div",{className:"text-blue-600",children:[" ",N.inProgress," in progress"]}),t.jsxs("div",{className:"text-gray-600",children:[" ",N.notStarted," not started"]})]})}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[N.completionRate,"%"]}),t.jsxs("div",{className:"text-xs text-gray-500",children:[N.averageProgress,"% avg progress"]})]}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:N.averageCompletionTime>0?`${N.averageCompletionTime} days`:"N/A"}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C(N.engagementLevel)}`,children:N.engagementLevel})})]},D))})]})})]})]})]})}function VR(){const s=ze(),[e,a]=b.useState(null),[r,l]=b.useState(!0),[o,d]=b.useState({pathwayId:"",activeOnly:!0}),[u,m]=b.useState(null),[f,p]=b.useState(!1);b.useEffect(()=>{y()},[]);const y=async()=>{try{l(!0);const w=await RR(o.pathwayId||void 0,o.activeOnly);a(w),m(null),p(!1)}catch(w){console.error("Failed to load pathway assignments report:",w),alert("Failed to load report data")}finally{l(!1)}},v=w=>{const{name:_,value:R,type:z,checked:H}=w.target;d(q=>({...q,[_]:z==="checkbox"?H:R}))},j=()=>{y()},S=()=>{if(!e?.pathways)return;const w=e.pathways.flatMap(_=>_.userAssignments.map(R=>({Pathway:_.pathwayTitle,"User Name":R.userName,Email:R.email,"Enrolled Date":new Date(R.enrolledAt).toLocaleDateString(),Status:R.status,Progress:`${R.progressPercent}%`,"Completed Date":R.completedAt?new Date(R.completedAt).toLocaleDateString():"N/A"})));ma(w,"pathway-assignments-report")},C=()=>{e&&fa(e,"pathway-assignments-report")},N=w=>{m(w),p(!0)};if(r)return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading report..."})]})})]});if(!e)return null;const D=w=>{switch(w){case"Completed":return"bg-green-100 text-green-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Not Started":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},E={labels:e.assignmentTrends?.map(w=>w.month)||[],datasets:[{label:"Assignments",data:e.assignmentTrends?.map(w=>w.assignments)||[],borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.1)",tension:.3,fill:!0}]},A={labels:["Completed","In Progress","Not Started"],datasets:[{data:[e.summary?.totalCompleted||0,e.summary?.totalInProgress||0,e.summary?.totalNotStarted||0],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(156, 163, 175, 0.8)"],borderWidth:2,borderColor:"#fff"}]},T={labels:e.topAssigned?.map(w=>w.pathwayTitle.substring(0,30))||[],datasets:[{label:"Assigned Users",data:e.topAssigned?.map(w=>w.assignedUsers)||[],backgroundColor:"rgba(99, 102, 241, 0.8)",borderColor:"rgba(99, 102, 241, 1)",borderWidth:1}]};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:()=>s("/admin/reports"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition",children:[t.jsx(Ms,{className:"h-5 w-5 mr-2"}),"Back to Reports"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Pathway Assignments Report"}),t.jsx("p",{className:"text-gray-600",children:"Track which pathways are assigned to users and monitor their progress"})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Pathway"}),t.jsxs("select",{name:"pathwayId",value:o.pathwayId,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"All Pathways"}),e?.pathways?.map(w=>t.jsx("option",{value:w.pathwayId,children:w.pathwayTitle},w.pathwayId))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filters"}),t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer px-3 py-2",children:[t.jsx("input",{type:"checkbox",name:"activeOnly",checked:o.activeOnly,onChange:v,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Active Only"})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:j,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:"Apply Filters"})}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition text-sm",children:"Export CSV"}),t.jsx("button",{onClick:C,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition text-sm",children:"Export JSON"})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Assignments"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary?.totalAssignments||0}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.summary?.recentAssignments||0," recent (30d)"]})]}),t.jsx(Wn,{className:"h-12 w-12 text-blue-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Pathways"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary?.totalPathways||0}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.summary?.activePathways||0," active"]})]}),t.jsx(vo,{className:"h-12 w-12 text-indigo-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Completed"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary?.totalCompleted||0}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.summary?.averageCompletionRate||0,"% avg rate"]})]}),t.jsx(zt,{className:"h-12 w-12 text-green-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"In Progress"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary?.totalInProgress||0}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.summary?.totalNotStarted||0," not started"]})]}),t.jsx(oa,{className:"h-12 w-12 text-orange-500"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(la,{className:"h-5 w-5 text-blue-600 mr-2"}),t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Assigned Pathway"})]}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.summary?.mostAssignedPathway||"N/A"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx($i,{className:"h-5 w-5 text-yellow-600 mr-2"}),t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Unassigned Pathways"})]}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[e.summary?.unassignedPathwaysCount||0," pathways"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Assignment Trends (6 Months)"}),t.jsx("div",{className:"h-64",children:t.jsx(Mo,{data:E,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status Distribution"}),t.jsx("div",{className:"h-64 flex items-center justify-center",children:t.jsx(ws,{data:A,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:15,boxWidth:12}}}}})})]})]}),e.topAssigned&&e.topAssigned.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Assigned Pathways"}),t.jsx("div",{className:"h-64",children:t.jsx(js,{data:T,options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0,ticks:{precision:0}}}}})})]}),e.unassignedPathways&&e.unassignedPathways.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Unassigned Pathways"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.unassignedPathways.map((w,_)=>t.jsxs("div",{className:"border border-yellow-200 bg-yellow-50 rounded-lg p-4",children:[t.jsx("div",{className:"font-medium text-gray-900",children:w.pathwayTitle}),t.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["Status: ",t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.isActive?"Active":"Inactive"})]})]},_))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pathway Assignments"})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pathway"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Users"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completion Rate"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recent (30d)"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.pathways&&e.pathways.map((w,_)=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.pathwayTitle}),w.description&&t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[w.description.substring(0,60),"..."]})]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.isActive?"Active":"Inactive"})}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:w.assignedUsers}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"text-xs space-y-1",children:[t.jsxs("div",{className:"text-green-600",children:[" ",w.completed," completed"]}),t.jsxs("div",{className:"text-blue-600",children:[" ",w.inProgress," in progress"]}),t.jsxs("div",{className:"text-gray-600",children:[" ",w.notStarted," not started"]})]})}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[w.completionRate,"%"]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:t.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${w.completionRate}%`}})})]}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:w.recentAssignments}),t.jsx("td",{className:"px-6 py-4",children:w.assignedUsers>0&&t.jsx("button",{onClick:()=>N(w),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View Users"})})]},_))})]})})]}),f&&u&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Users Assigned to: ",u.pathwayTitle]}),t.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Enrolled"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Progress"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Completed"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.userAssignments&&u.userAssignments.map((w,_)=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:w.userName}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:w.email}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(w.enrolledAt).toLocaleDateString()}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center",children:[t.jsxs("span",{className:"text-sm text-gray-900 mr-2",children:[w.progressPercent,"%"]}),t.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${w.progressPercent}%`}})})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${D(w.status)}`,children:w.status})}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:w.completedAt?new Date(w.completedAt).toLocaleDateString():"N/A"})]},_))})]})})})]})})]})]})}function $R(){const s=ze(),[e,a]=b.useState(null),[r,l]=b.useState(!0),[o,d]=b.useState({search:"",courseId:"",status:"",startDate:"",endDate:""}),[u,m]=b.useState(!1),[f,p]=b.useState(1),[y]=b.useState(20);b.useEffect(()=>{v()},[]);const v=async()=>{try{l(!0);const U=await DR(o.search||void 0,o.courseId||void 0,o.status||void 0,o.startDate||void 0,o.endDate||void 0);a(U),p(1)}catch(U){console.error("Failed to load user-course progress report:",U),alert("Failed to load report data")}finally{l(!1)}},j=U=>{const{name:re,value:fe}=U.target;d(Z=>({...Z,[re]:fe}))},S=()=>{v()},C=()=>{d({search:"",courseId:"",status:"",startDate:"",endDate:""}),setTimeout(()=>v(),100)},N=()=>{if(!e?.userCourseProgress)return;const U=e.userCourseProgress.map(re=>({"User Name":re.userName,Email:re.email,Course:re.courseTitle,Category:re.courseCategory,Progress:`${re.progressPercent}%`,Status:re.status,"Days To Complete":re.daysToComplete||"N/A",Performance:re.performance,"Completed Date":re.completedAt?new Date(re.completedAt).toLocaleDateString():"N/A"}));ma(U,"user-course-progress-report")},D=()=>{e&&fa(e,"user-course-progress-report")};if(r)return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading report..."})]})})]});if(!e)return null;const E=U=>{switch(U){case"Completed":return"bg-green-100 text-green-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Not Started":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},A=U=>{switch(U){case"Excellent":return"bg-green-100 text-green-800";case"Good":return"bg-blue-100 text-blue-800";case"Average":return"bg-yellow-100 text-yellow-800";case"Slow":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},T=f*y,w=T-y,_=e.userCourseProgress.slice(w,T),R=Math.ceil(e.userCourseProgress.length/y),z=[...new Set(e.courseStats?.map(U=>({id:U.courseId,title:U.courseTitle}))||[])],H={labels:e.statusBreakdown?.map(U=>U.status)||[],datasets:[{data:e.statusBreakdown?.map(U=>U.count)||[],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(156, 163, 175, 0.8)"],borderWidth:2,borderColor:"#fff"}]},q={labels:e.performanceBreakdown?.map(U=>U.performance)||[],datasets:[{label:"Users",data:e.performanceBreakdown?.map(U=>U.count)||[],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(251, 191, 36, 0.8)","rgba(239, 68, 68, 0.8)"],borderWidth:1}]},ne={labels:e.courseStats?.slice(0,5).map(U=>U.courseTitle.substring(0,30))||[],datasets:[{label:"Total Enrolled",data:e.courseStats?.slice(0,5).map(U=>U.totalEnrolled)||[],backgroundColor:"rgba(99, 102, 241, 0.8)",borderColor:"rgba(99, 102, 241, 1)",borderWidth:1}]};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Ve,{}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:()=>s("/admin/reports"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition",children:[t.jsx(Ms,{className:"h-5 w-5 mr-2"}),"Back to Reports"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"User-Course Progress Report"}),t.jsx("p",{className:"text-gray-600",children:"Comprehensive view of all users and their course progress"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("button",{onClick:()=>m(!u),className:"flex items-center text-gray-700 hover:text-gray-900",children:[t.jsx(yu,{className:"h-5 w-5 mr-2"}),u?"Hide Filters":"Show Filters"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:N,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition text-sm",children:"Export CSV"}),t.jsx("button",{onClick:D,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition text-sm",children:"Export JSON"})]})]}),u&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",name:"search",value:o.search,onChange:j,placeholder:"Search by user, email, or course...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx(Id,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course"}),t.jsxs("select",{name:"courseId",value:o.courseId,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"All Courses"}),z.map((U,re)=>t.jsx("option",{value:U.id,children:U.title},re))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsxs("select",{name:"status",value:o.status,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"Completed",children:"Completed"}),t.jsx("option",{value:"In Progress",children:"In Progress"}),t.jsx("option",{value:"Not Started",children:"Not Started"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),t.jsx("input",{type:"date",name:"startDate",value:o.startDate,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),t.jsx("input",{type:"date",name:"endDate",value:o.endDate,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:"Apply Filters"}),t.jsx("button",{onClick:C,className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition",children:"Clear"})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Enrollments"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary?.totalEnrollments||0}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.summary?.activeUsers||0," active users"]})]}),t.jsx(ln,{className:"h-12 w-12 text-blue-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Completion Rate"}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[e.summary?.overallCompletionRate||0,"%"]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.summary?.totalCompleted||0," completed"]})]}),t.jsx(zt,{className:"h-12 w-12 text-green-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg Progress"}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[e.summary?.averageProgressPercent||0,"%"]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.summary?.totalInProgress||0," in progress"]})]}),t.jsx(oa,{className:"h-12 w-12 text-orange-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Stale Enrollments"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.summary?.staleEnrollmentsCount||0}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"In progress, <50% completion"})]}),t.jsx(xu,{className:"h-12 w-12 text-yellow-500"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status Distribution"}),t.jsx("div",{className:"h-64 flex items-center justify-center",children:t.jsx(ws,{data:H,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:10,boxWidth:12}}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance"}),t.jsx("div",{className:"h-64",children:t.jsx(js,{data:q,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Courses"}),t.jsx("div",{className:"h-64",children:t.jsx(js,{data:ne,options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0,ticks:{precision:0}}}}})})]})]}),e.topPerformers&&e.topPerformers.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Performers (3+ courses)"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:e.topPerformers.slice(0,5).map((U,re)=>t.jsxs("div",{className:"border border-green-200 bg-green-50 rounded-lg p-4",children:[t.jsx("div",{className:"font-medium text-gray-900 mb-2",children:U.userName}),t.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[t.jsxs("div",{children:[" ",U.totalCourses," courses"]}),t.jsxs("div",{children:[" ",U.completed," completed"]}),t.jsxs("div",{className:"font-semibold text-green-700",children:[U.completionRate,"% rate"]})]})]},re))})]}),e.staleEnrollments&&e.staleEnrollments.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Stale Enrollments (Needs Attention)"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Course"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Progress"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Days To Complete"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Completed Date"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.staleEnrollments.map((U,re)=>t.jsxs("tr",{className:"hover:bg-yellow-50",children:[t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:U.userName}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:U.courseTitle}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center",children:[t.jsxs("span",{className:"text-sm text-gray-900 mr-2",children:[U.progressPercent,"%"]}),t.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-yellow-600 h-2 rounded-full",style:{width:`${U.progressPercent}%`}})})]})}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:U.daysToComplete?`${U.daysToComplete} days`:"In Progress"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:U.completedAt?new Date(U.completedAt).toLocaleDateString():"N/A"})]},re))})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User-Course Progress Details"}),t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",w+1,"-",Math.min(T,e.userCourseProgress.length)," of ",e.userCourseProgress.length," records"]})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completed Date"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map((U,re)=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.userName}),t.jsx("div",{className:"text-xs text-gray-500",children:U.email})]}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("div",{className:"text-sm text-gray-900",children:U.courseTitle}),t.jsx("div",{className:"text-xs text-gray-500",children:U.courseCategory})]}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs("span",{className:"text-sm text-gray-900 mr-2",children:[U.progressPercent,"%"]}),t.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full ${U.completed?"bg-green-600":U.progressPercent>0?"bg-blue-600":"bg-gray-400"}`,style:{width:`${U.progressPercent}%`}})})]}),U.daysToComplete&&t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Completed in ",U.daysToComplete," days"]})]}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${E(U.status)}`,children:U.status}),U.isStale&&t.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:" Stale"})]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${A(U.performance)}`,children:U.performance})}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:U.completedAt?new Date(U.completedAt).toLocaleDateString():"N/A"})]},re))})]})}),R>1&&t.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[t.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",f," of ",R]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>p(U=>Math.max(1,U-1)),disabled:f===1,className:"px-3 py-1 border border-gray-300 rounded-md text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),t.jsx("button",{onClick:()=>p(U=>Math.min(R,U+1)),disabled:f===R,className:"px-3 py-1 border border-gray-300 rounded-md text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]})}function IR(){const s=ze(),[e,a]=b.useState(!1),[r,l]=b.useState(null),[o,d]=b.useState({entityType:"users",metrics:[],groupBy:"",sortBy:"",sortDescending:!0,filterBy:"",filterValue:"",startDate:"",endDate:"",limit:100}),u=[{value:"users",label:"Users",icon:""},{value:"courses",label:"Courses",icon:""},{value:"pathways",label:"Learning Pathways",icon:""},{value:"progress",label:"Learning Progress",icon:""}],m={users:[{value:"enrollments",label:"Total Enrollments"},{value:"completions",label:"Completed Courses"},{value:"averageProgress",label:"Average Progress"},{value:"engagementScore",label:"Engagement Score"},{value:"lastActivity",label:"Last Activity Date"}],courses:[{value:"enrollments",label:"Total Enrollments"},{value:"completions",label:"Total Completions"},{value:"completionRate",label:"Completion Rate"},{value:"averageProgress",label:"Average Progress"},{value:"averageCompletionTime",label:"Avg Completion Time"}],pathways:[{value:"enrollments",label:"Total Enrollments"},{value:"completions",label:"Total Completions"},{value:"completionRate",label:"Completion Rate"},{value:"averageProgress",label:"Average Progress"}],progress:[{value:"timeToComplete",label:"Time to Complete"}]},f={users:["status","createdAt"],courses:["category","createdAt"],pathways:["isActive"],progress:["completed","courseTitle"]},p=(A,T)=>{d(w=>({...w,[A]:T}))},y=A=>{d(T=>({...T,metrics:T.metrics.includes(A)?T.metrics.filter(w=>w!==A):[...T.metrics,A]}))},v=async()=>{if(o.metrics.length===0){alert("Please select at least one metric");return}try{a(!0);const A=await LR(o);l(A)}catch(A){console.error("Failed to generate report:",A),alert("Failed to generate report: "+(A.response?.data?.error||A.message))}finally{a(!1)}},j=()=>{r?.dataPoints&&ma(r.dataPoints,"custom-report")},S=()=>{r&&fa(r,"custom-report")},C=()=>{if(!r?.dataPoints||r.dataPoints.length===0)return null;const A=o.metrics.find(R=>{const z=r.dataPoints[0];return z&&typeof z[R]=="number"});if(!A)return null;const T=r.dataPoints.slice(0,10),_={labels:T.map(R=>R.name?R.name.length>20?R.name.substring(0,20)+"...":R.name:R.title?R.title.length>20?R.title.substring(0,20)+"...":R.title:R.email?R.email.length>20?R.email.substring(0,20)+"...":R.email:"Item "+(T.indexOf(R)+1)),datasets:[{label:A,data:T.map(R=>R[A]||0),backgroundColor:"rgba(59, 130, 246, 0.8)"}]};return t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Top 10 by ",A]}),t.jsx("div",{className:"h-80",children:t.jsx(js,{data:_,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}}})})]})},N=()=>r?.groupedData?t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Grouped by ",o.groupBy]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(r.groupedData).map(([A,T])=>t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[t.jsx("div",{className:"font-medium text-gray-900 mb-2",children:A}),t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:T.count}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"items"})]},A))})]}):null,D=()=>r?.summary?t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Summary Statistics"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(r.summary).map(([A,T])=>t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-sm text-gray-600 capitalize mb-1",children:A.replace(/_/g," ")}),t.jsx("div",{className:"text-xl font-bold text-gray-900",children:typeof T=="number"?T.toFixed(2):T})]},A))})]}):null,E=()=>{if(!r?.dataPoints||r.dataPoints.length===0)return null;const A=Object.keys(r.dataPoints[0]);return t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Data Records"}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",r.dataPoints.length," of ",r.totalRecords," records"]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsx("tr",{children:A.map(T=>t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:T},T))})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.dataPoints.map((T,w)=>t.jsx("tr",{className:"hover:bg-gray-50",children:A.map(_=>t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:typeof T[_]=="object"&&T[_]!==null?JSON.stringify(T[_]):String(T[_]??"N/A")},_))},w))})]})})]})};return t.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:()=>s("/admin/reports"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition",children:[t.jsx(Ms,{className:"h-5 w-5 mr-2"}),"Back to Reports"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Custom Report Builder"}),t.jsx("p",{className:"text-gray-600",children:"Create custom reports by selecting entity type, metrics, and filters"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx(YE,{className:"h-6 w-6 text-blue-600 mr-2"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Report Configuration"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Entity Type"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:u.map(A=>t.jsxs("button",{onClick:()=>{p("entityType",A.value),p("metrics",[]),p("groupBy","")},className:`p-4 rounded-lg border-2 transition ${o.entityType===A.value?"border-blue-600 bg-blue-50 text-blue-900":"border-gray-300 hover:border-gray-400"}`,children:[t.jsx("div",{className:"text-2xl mb-2",children:A.icon}),t.jsx("div",{className:"font-medium",children:A.label})]},A.value))})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Metrics (Choose at least one)"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:m[o.entityType]?.map(A=>t.jsxs("label",{className:`flex items-center p-3 rounded-lg border cursor-pointer transition ${o.metrics.includes(A.value)?"border-blue-600 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[t.jsx("input",{type:"checkbox",checked:o.metrics.includes(A.value),onChange:()=>y(A.value),className:"mr-2"}),t.jsx("span",{className:"text-sm",children:A.label})]},A.value))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),t.jsx("input",{type:"date",value:o.startDate,onChange:A=>p("startDate",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),t.jsx("input",{type:"date",value:o.endDate,onChange:A=>p("endDate",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Limit Results"}),t.jsx("input",{type:"number",value:o.limit,onChange:A=>p("limit",parseInt(A.target.value)),min:"10",max:"1000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Group By"}),t.jsxs("select",{value:o.groupBy,onChange:A=>p("groupBy",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"No Grouping"}),f[o.entityType]?.map(A=>t.jsx("option",{value:A,children:A},A))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),t.jsxs("select",{value:o.sortBy,onChange:A=>p("sortBy",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"Default"}),o.metrics.map(A=>t.jsx("option",{value:A,children:A},A))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),t.jsxs("select",{value:o.sortDescending?"desc":"asc",onChange:A=>p("sortDescending",A.target.value==="desc"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"desc",children:"Descending"}),t.jsx("option",{value:"asc",children:"Ascending"})]})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("button",{onClick:v,disabled:e||o.metrics.length===0,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition font-medium",children:[t.jsx(Yf,{className:"h-5 w-5 mr-2"}),e?"Generating...":"Generate Report"]}),r&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:j,className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 transition font-medium",children:[t.jsx(Li,{className:"h-5 w-5 mr-2"}),"Export CSV"]}),t.jsxs("button",{onClick:S,className:"inline-flex items-center px-6 py-3 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition font-medium",children:[t.jsx(Li,{className:"h-5 w-5 mr-2"}),"Export JSON"]})]})]})]}),r&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(la,{className:"h-6 w-6 text-blue-600 mr-3 mt-1"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Report Generated"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-blue-800",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Entity:"})," ",r.entityType]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Metrics:"})," ",r.metrics.join(", ")]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Total Records:"})," ",r.totalRecords]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Generated:"})," ",new Date(r.generatedAt).toLocaleString()]})]})]})]})}),D(),N(),C(),E()]}),!r&&!e&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[t.jsx(VT,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Report Generated Yet"}),t.jsx("p",{className:"text-gray-600 mb-4",children:'Configure your report settings above and click "Generate Report" to see results'})]})]})}function wd({children:s}){const e=Xs(),a=su();return console.log(" ProtectedRoute check:",{path:e.pathname,isAuthenticated:a,timestamp:new Date().toISOString()}),a?(console.log(" Protected route access granted for:",e.pathname),s):(console.warn(" Not authenticated, redirecting to login from:",e.pathname),t.jsx(Rr,{to:"/login",replace:!0}))}function Je({children:s}){return su()?cp()?s:t.jsx(Rr,{to:"/courses/all",replace:!0}):t.jsx(Rr,{to:"/login",replace:!0})}function QR(){const s=ze(),[e,a]=b.useState({firstName:"",lastName:""}),[r,l]=b.useState(!0),[o,d]=b.useState(!1),u=cn();tt("Complete Your Profile"),b.useEffect(()=>{(async()=>{try{const p=await hp();a({firstName:p.firstName||"",lastName:p.lastName||""})}catch(p){console.error(p)}finally{l(!1)}})()},[]);const m=async()=>{if(!e.firstName.trim()||!e.lastName.trim()){G.error("Please enter both first and last name");return}d(!0);try{await w4({firstName:e.firstName.trim(),lastName:e.lastName.trim()}),G.success("Profile updated"),s(u==="admin"||u==="Admin"||u==="OrgAdmin"||u==="SuperAdmin"?"/admin/dashboard":"/courses/all")}catch(p){console.error(p),G.error(p.response?.data?.message||"Failed to update profile")}finally{d(!1)}},f=u==="admin"||u==="Admin"||u==="OrgAdmin"||u==="SuperAdmin"?Ve:Ar;return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(f,{}),t.jsxs("div",{className:"max-w-xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Complete Your Profile"}),t.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Please provide your name to continue using the platform."}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r?t.jsx("div",{className:"text-gray-500",children:"Loading..."}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),t.jsx("input",{value:e.firstName,onChange:p=>a({...e,firstName:p.target.value}),className:"w-full border rounded px-4 py-2 border-gray-300",placeholder:"First name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),t.jsx("input",{value:e.lastName,onChange:p=>a({...e,lastName:p.target.value}),className:"w-full border rounded px-4 py-2 border-gray-300",placeholder:"Last name"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[t.jsx("button",{onClick:()=>s(-1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Back"}),t.jsx("button",{disabled:o,onClick:m,className:"px-4 py-2 bg-boxlms-primary-btn text-boxlms-primary-btn-txt rounded hover:brightness-90 disabled:opacity-50",children:"Save and Continue"})]})]})})]})]})}const ca="https://lmsbox-e0d2dqb4hwb8aqfp.uksouth-01.azurewebsites.net",Ur=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}),YR=async(s,e)=>{const a=await fetch(`${ca}/api/SuperAdmin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:e})});if(!a.ok){const r=await a.json();throw new Error(r.error||"Login failed")}return a.json()},c2=async()=>{const s=await fetch(`${ca}/api/SuperAdmin/organisations`,{headers:Ur()});if(!s.ok)throw new Error("Failed to fetch organisations");return s.json()},GR=async s=>{const e=await fetch(`${ca}/api/SuperAdmin/organisations/${s}`,{headers:Ur()});if(!e.ok)throw new Error("Failed to fetch organisation");return e.json()},WR=async s=>{const e=await fetch(`${ca}/api/SuperAdmin/organisations`,{method:"POST",headers:Ur(),body:JSON.stringify(s)});if(!e.ok){const a=await e.json();throw new Error(a.error||"Failed to create organisation")}return e.json()},XR=async(s,e)=>{const a=await fetch(`${ca}/api/SuperAdmin/organisations/${s}`,{method:"PUT",headers:Ur(),body:JSON.stringify({...e,id:s})});if(!a.ok){const r=await a.json();throw new Error(r.error||"Failed to update organisation")}return a.json()},ZR=async(s,e)=>{const a=await fetch(`${ca}/api/SuperAdmin/organisations/${s}/upload-token?fileType=${e}`,{method:"POST",headers:Ur()});if(!a.ok)throw new Error("Failed to get upload token");return a.json()},KR=async(s=null)=>{const e=s?`${ca}/api/SuperAdmin/global-library?contentType=${s}`:`${ca}/api/SuperAdmin/global-library`,a=await fetch(e,{headers:Ur()});if(!a.ok)throw new Error("Failed to fetch global library");return a.json()},JR=async s=>{const e=await fetch(`${ca}/api/SuperAdmin/global-library/${s}`,{method:"DELETE",headers:Ur()});if(!e.ok)throw new Error("Failed to delete content");return e.json()},eD=async(s,e,a)=>new Promise((r,l)=>{const o=new XMLHttpRequest;o.upload.addEventListener("progress",d=>{d.lengthComputable}),o.addEventListener("load",()=>{o.status>=200&&o.status<300?r():l(new Error(`Upload failed with status ${o.status}`))}),o.addEventListener("error",()=>{l(new Error("Upload failed"))}),o.open("PUT",s),o.setRequestHeader("x-ms-blob-type","BlockBlob"),o.send(e)}),tD=async(s,e,a,r,l)=>new Promise((o,d)=>{const u=new FormData;u.append("video",s),u.append("title",e),u.append("description",a||""),u.append("tags",r||"");const m=new XMLHttpRequest;m.upload.addEventListener("progress",p=>{if(p.lengthComputable&&l){const y=p.loaded/p.total*100;l(y)}}),m.addEventListener("load",()=>{if(m.status>=200&&m.status<300)try{const p=JSON.parse(m.responseText);o(p)}catch{d(new Error("Invalid response from server"))}else try{const p=JSON.parse(m.responseText);d(new Error(p.message||`Upload failed with status ${m.status}`))}catch{d(new Error(`Upload failed with status ${m.status}`))}}),m.addEventListener("error",()=>{d(new Error("Upload failed"))});const f=localStorage.getItem("token");m.open("POST",`${ca}/api/SuperAdmin/global-library/upload-video`),m.setRequestHeader("Authorization",`Bearer ${f}`),m.send(u)}),sD=async(s,e,a,r,l)=>new Promise((o,d)=>{const u=new FormData;u.append("pdf",s),u.append("title",e),u.append("description",a||""),u.append("tags",r||"");const m=new XMLHttpRequest;m.upload.addEventListener("progress",p=>{if(p.lengthComputable&&l){const y=p.loaded/p.total*100;l(y)}}),m.addEventListener("load",()=>{if(m.status>=200&&m.status<300)try{const p=JSON.parse(m.responseText);o(p)}catch{d(new Error("Invalid response from server"))}else try{const p=JSON.parse(m.responseText);d(new Error(p.message||`Upload failed with status ${m.status}`))}catch{d(new Error(`Upload failed with status ${m.status}`))}}),m.addEventListener("error",()=>{d(new Error("Upload failed"))});const f=localStorage.getItem("token");m.open("POST",`${ca}/api/SuperAdmin/global-library/upload-pdf`),m.setRequestHeader("Authorization",`Bearer ${f}`),m.send(u)});function aD(){tt("Super Admin Login");const s=ze(),[e,a]=b.useState({email:"",password:""}),[r,l]=b.useState(""),[o,d]=b.useState(!1),u=f=>{a({...e,[f.target.name]:f.target.value}),l("")},m=async f=>{f.preventDefault(),l(""),d(!0);try{const p=await YR(e.email,e.password);op(p.token),localStorage.setItem("user",JSON.stringify({email:p.email,firstName:p.firstName,lastName:p.lastName,role:p.role})),s("/superadmin/dashboard")}catch(p){l(p.message||"An error occurred during login")}finally{d(!1)}};return t.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",style:{backgroundColor:"#1b365d"},children:t.jsxs("div",{className:"max-w-md w-full space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:"p-6",children:t.jsx("img",{src:co,alt:"LMS Box",className:"h-16 w-auto mx-auto"})})}),t.jsx("h2",{className:"mt-6 text-4xl font-extrabold",style:{fontFamily:"Albert Sans, sans-serif",fontWeight:800,letterSpacing:"-0.04em",color:"#FFFFFF"},children:"Super Admin Portal"}),t.jsx("p",{className:"mt-2 text-sm",style:{fontFamily:"Inter, sans-serif",color:"#E5E7EB",letterSpacing:"-0.02em"},children:"Multi-Tenancy Management System"})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:[t.jsxs("form",{className:"space-y-6",onSubmit:m,children:[r&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start",children:[t.jsx($i,{className:"h-5 w-5 text-red-600 mr-2 shrink-0 mt-0.5"}),t.jsx("span",{className:"text-sm text-red-800",children:r})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",style:{fontFamily:"Inter, sans-serif",color:"#36454F",letterSpacing:"-0.02em"},children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(If,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e.email,onChange:u,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{fontFamily:"Inter, sans-serif",letterSpacing:"-0.02em"},onFocus:f=>f.target.style.borderColor="#2afeae",onBlur:f=>f.target.style.borderColor="#d1d5db",placeholder:"superadmin@lmsbox.system"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-2",style:{fontFamily:"Inter, sans-serif",color:"#36454F",letterSpacing:"-0.02em"},children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(wT,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:e.password,onChange:u,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{fontFamily:"Inter, sans-serif",letterSpacing:"-0.02em"},onFocus:f=>f.target.style.borderColor="#2afeae",onBlur:f=>f.target.style.borderColor="#d1d5db",placeholder:""})]})]}),t.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",style:{backgroundColor:"#2afeae",color:"#1b365d",fontFamily:"Inter, sans-serif",fontWeight:600,letterSpacing:"-0.02em"},onMouseEnter:f=>!o&&(f.target.style.backgroundColor="#25e89e"),onMouseLeave:f=>!o&&(f.target.style.backgroundColor="#2afeae"),children:o?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5",style:{color:"#1b365d"},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Authenticating..."]}):"Sign in to Super Admin"})]}),t.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:t.jsxs("p",{className:"text-xs text-center text-gray-500",children:["This portal is for authorized Super Administrators only.",t.jsx("br",{}),"All actions are logged and monitored."]})})]}),t.jsx("div",{className:"text-center",children:t.jsx("a",{href:"/",className:"text-sm font-medium text-indigo-200 hover:text-white transition-colors",children:" Back to regular login"})})]})})}function nD(){const s=ze(),[e,a]=b.useState(!1),[r,l]=b.useState(!1),[o,d]=b.useState(!1),[u,m]=b.useState(""),f=b.useRef(null),p=b.useRef(null),y=b.useRef(null);b.useEffect(()=>{m(dp())},[]),b.useEffect(()=>{function S(C){f.current&&!f.current.contains(C.target)&&C.target.id!=="toggleOpen"&&d(!1),p.current&&!p.current.contains(C.target)&&!y.current?.contains(C.target)&&a(!1)}return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[]);const v=async()=>{try{l(!1);const S=G.loading("Logging out...");Eo(),localStorage.clear(),sessionStorage.clear(),G.dismiss(S),G.success("Logged out successfully"),s("/superadmin/login")}catch(S){console.error("Logout error:",S),G.error("Failed to logout. Please try again.")}},j=()=>{a(!1),l(!0)};return t.jsxs(t.Fragment,{children:[t.jsx("header",{className:"flex shadow-md py-3 px-4 sm:px-10 min-h-[70px] tracking-wide relative z-50",style:{backgroundColor:"#1b365d"},children:t.jsxs("div",{className:"flex flex-wrap items-center justify-between lg:gap-y-4 gap-y-6 gap-x-4 w-full",children:[t.jsxs(ls,{to:"/superadmin/dashboard",className:"flex items-center space-x-3",children:[t.jsx("img",{src:co,alt:"LMS Box",className:"h-10 w-auto"}),t.jsx("span",{className:"text-xl font-bold text-white",style:{fontFamily:"Albert Sans, sans-serif",fontWeight:800,letterSpacing:"-0.04em"},children:"Super Admin Portal"})]}),t.jsxs("div",{ref:f,className:`${o?"block":"hidden"} lg:block fixed lg:relative inset-0 lg:inset-auto z-50`,children:[t.jsx("div",{className:`${o?"block":"hidden"} lg:hidden fixed inset-0 bg-gray-900 bg-opacity-40`,onClick:()=>d(!1)}),t.jsx("button",{onClick:()=>d(!1),className:"lg:hidden fixed top-2 right-4 z-50 rounded-full bg-white w-9 h-9 flex items-center justify-center border border-gray-200",children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-3.5 h-3.5 fill-gray-800",viewBox:"0 0 320.591 320.591",children:[t.jsx("path",{d:"M30.391 318.583a30.37 30.37 0 0 1-21.56-7.288c-11.774-11.844-11.774-30.973 0-42.817L266.643 10.665c12.246-11.459 31.462-10.822 42.921 1.424 10.362 11.074 10.966 28.095 1.414 39.875L51.647 311.295a30.366 30.366 0 0 1-21.256 7.288z"}),t.jsx("path",{d:"M287.9 318.583a30.37 30.37 0 0 1-21.257-8.806L8.83 51.963C-2.078 39.225-.595 20.055 12.143 9.146c11.369-9.736 28.136-9.736 39.504 0l259.331 257.813c12.243 11.462 12.876 30.679 1.414 42.922-.456.487-.927.958-1.414 1.414a30.368 30.368 0 0 1-23.078 7.288z"})]})}),t.jsxs("ul",{className:"lg:flex lg:gap-x-10 max-lg:space-y-3 fixed lg:relative bg-white lg:bg-transparent w-2/3 lg:w-auto min-w-[300px] lg:min-w-0 top-0 left-0 h-full lg:h-auto p-4 lg:p-0 shadow-md lg:shadow-none overflow-auto lg:overflow-visible z-50",children:[t.jsx("li",{className:"mb-6 hidden max-lg:block",children:t.jsxs(Ti,{to:"/superadmin/dashboard",className:"flex items-center space-x-2",children:[t.jsx("img",{src:co,alt:"LMS Box",className:"h-8 w-auto"}),t.jsx("span",{className:"text-lg font-bold",style:{color:"#1b365d",fontFamily:"Albert Sans, sans-serif",fontWeight:800,letterSpacing:"-0.04em"},children:"Super Admin"})]})}),[{to:"/superadmin/dashboard",label:"Dashboard"},{to:"/superadmin/organisations",label:"Organisations"},{to:"/superadmin/library",label:"Library"},{to:"/superadmin/reports",label:"Reports"}].map(S=>t.jsxs("li",{className:"nav-item relative group",children:[t.jsx(Ti,{to:S.to,className:({isActive:C})=>`block text-[15px] font-medium relative py-2 px-1 transition-colors duration-200
                      ${C?"text-white lg:text-white":"text-white lg:text-white max-lg:text-gray-700 hover:text-white lg:hover:text-white max-lg:hover:text-indigo-600"}
                      lg:after:content-[""] lg:after:block lg:after:absolute lg:after:h-0.5 
                      lg:after:w-full lg:after:scale-x-0 lg:hover:after:scale-x-100 
                      lg:after:transition-transform lg:after:duration-300 lg:after:origin-left
                      ${C?"lg:after:scale-x-100 lg:after:bg-[#2afeae]":"lg:after:bg-[#2afeae]"}`,style:{fontFamily:"Inter, sans-serif",fontWeight:500,letterSpacing:"-0.02em"},onClick:()=>d(!1),children:S.label}),t.jsx("span",{className:"lg:hidden absolute left-0 w-1 h-full transform scale-y-0 group-hover:scale-y-100 transition-transform duration-200",style:{backgroundColor:"#2afeae"}})]},S.to))]})]}),t.jsxs("div",{className:"flex items-center max-sm:ml-auto space-x-6",children:[t.jsxs("div",{className:"relative flex items-center space-x-3",children:[t.jsxs("div",{className:"hidden sm:block text-right",children:[t.jsx("div",{className:"text-sm font-medium text-white",children:u}),t.jsx("div",{className:"text-xs text-gray-300",children:"Super Admin"})]}),t.jsx("button",{ref:y,onClick:()=>a(!e),className:"relative px-1",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",className:"cursor-pointer fill-white hover:fill-[#2afeae]",viewBox:"0 0 512 512",children:t.jsx("path",{d:"M437.02 74.981C388.667 26.629 324.38 0 256 0S123.333 26.629 74.98 74.981C26.629 123.333 0 187.62 0 256s26.629 132.667 74.98 181.019C123.333 485.371 187.62 512 256 512s132.667-26.629 181.02-74.981C485.371 388.667 512 324.38 512 256s-26.629-132.667-74.98-181.019zM256 482c-66.869 0-127.037-29.202-168.452-75.511C113.223 338.422 178.948 290 256 290c-49.706 0-90-40.294-90-90s40.294-90 90-90 90 40.294 90 90-40.294 90-90 90c77.052 0 142.777 48.422 168.452 116.489C383.037 452.798 322.869 482 256 482z"})})}),e&&t.jsxs("div",{ref:p,className:"absolute right-0 top-10 bg-white shadow-lg py-6 px-6 rounded-sm sm:min-w-[320px] max-sm:min-w-[250px] z-50",children:[t.jsx("h6",{className:"font-semibold text-[15px]",style:{fontFamily:"Albert Sans, sans-serif",fontWeight:800,letterSpacing:"-0.04em",color:"#1b365d"},children:"Super Admin Account"}),t.jsx("p",{className:"text-sm mt-1",style:{color:"#36454F"},children:"System Administrator"}),t.jsx("hr",{className:"border-b-0 my-4 border-gray-300"}),t.jsxs("ul",{className:"space-y-1.5",children:[t.jsx("li",{children:t.jsx(ls,{to:"/superadmin/profile",className:"text-sm hover:text-slate-900",style:{color:"#36454F"},onClick:()=>a(!1),children:"Profile Settings"})}),t.jsx("li",{children:t.jsx(ls,{to:"/superadmin/settings",className:"text-sm hover:text-slate-900",style:{color:"#36454F"},onClick:()=>a(!1),children:"System Settings"})})]}),t.jsx("hr",{className:"border-b-0 my-4 border-gray-300"}),t.jsx("button",{onClick:j,className:"w-full rounded-sm px-4 py-2 text-sm font-medium cursor-pointer transition-colors",style:{backgroundColor:"#2afeae",color:"#1b365d",fontFamily:"Inter, sans-serif",fontWeight:600,letterSpacing:"-0.02em"},onMouseEnter:S=>S.target.style.backgroundColor="#25e89e",onMouseLeave:S=>S.target.style.backgroundColor="#2afeae",children:"Logout"}),t.jsx(Xd,{position:"top-right"})]})]}),t.jsx("button",{onClick:()=>d(!0),className:"lg:hidden cursor-pointer",id:"toggleOpen",children:t.jsx("svg",{className:"w-7 h-7",fill:"white",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})})]})]})}),t.jsx(qi,{isOpen:r,onClose:()=>l(!1),onConfirm:v,title:"Confirm Logout",message:"Are you sure you want to logout?"})]})}function on({children:s}){return cn()!=="SuperAdmin"?t.jsx(Rr,{to:"/superadmin/login",replace:!0}):t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(nD,{}),t.jsx("main",{children:s})]})}function rD(){tt("Super Admin Dashboard");const s=ze(),[e,a]=b.useState([]),[r,l]=b.useState(!0),[o,d]=b.useState({totalOrgs:0,activeOrgs:0,totalUsers:0,totalStorage:0});b.useEffect(()=>{u()},[]);const u=async()=>{try{const m=await c2();a(m);const f={totalOrgs:m.length,activeOrgs:m.filter(p=>p.isActive).length,totalUsers:m.reduce((p,y)=>p+y.totalUsers,0),totalStorage:m.reduce((p,y)=>p+y.allocatedStorageGB,0)};d(f)}catch(m){console.error("Error fetching organisations:",m),G.error("Failed to load organisations")}finally{l(!1)}};return r?t.jsx(on,{children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),t.jsx("p",{className:"ml-4 text-gray-600",children:"Loading..."})]})})}):t.jsx(on,{children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Organisations"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:o.totalOrgs})]}),t.jsx($f,{className:"h-12 w-12 text-indigo-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Active Organisations"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:o.activeOrgs})]}),t.jsx(zt,{className:"h-12 w-12 text-green-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Users"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:o.totalUsers})]}),t.jsx(Wn,{className:"h-12 w-12 text-blue-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Allocated Storage"}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[o.totalStorage," GB"]})]}),t.jsx(Vv,{className:"h-12 w-12 text-purple-500"})]})})]}),t.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("button",{onClick:()=>s("/superadmin/organisations"),className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow text-left",children:[t.jsx($f,{className:"h-8 w-8 text-indigo-500 mb-3"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Organisations"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Manage all organisations"})]}),t.jsxs("button",{onClick:()=>s("/superadmin/library"),className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow text-left",children:[t.jsx(Vv,{className:"h-8 w-8 text-purple-500 mb-3"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Global Library"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Manage global content library"})]}),t.jsxs("button",{onClick:()=>s("/superadmin/reports"),className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow text-left",children:[t.jsx(la,{className:"h-8 w-8 text-blue-500 mb-3"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Analytics & Reports"}),t.jsx("p",{className:"text-sm text-gray-600",children:"View system-wide analytics"})]})]})]})})}function iD(){tt("Organisations - Super Admin");const s=ze(),[e,a]=b.useState([]),[r,l]=b.useState(!0),[o,d]=b.useState(""),[u,m]=b.useState("all"),[f,p]=b.useState(1),[y]=b.useState(10);b.useEffect(()=>{v()},[]);const v=async()=>{try{l(!0);const E=await c2();a(E)}catch(E){console.error("Error fetching organisations:",E),G.error("Failed to load organisations")}finally{l(!1)}},j=e.filter(E=>{if(u==="active"&&!E.isActive||u==="inactive"&&E.isActive)return!1;if(o){const A=o.toLowerCase();return E.name?.toLowerCase().includes(A)||E.domain?.toLowerCase().includes(A)||E.adminEmail?.toLowerCase().includes(A)||E.managerName?.toLowerCase().includes(A)}return!0}),S=Math.ceil(j.length/y),C=(f-1)*y,N=C+y,D=j.slice(C,N);return b.useEffect(()=>{p(1)},[o,u]),r?t.jsx(on,{children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading organisations..."})]})})}):t.jsx(on,{children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Organisations"}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage all organisations and their settings"})]}),t.jsxs("button",{onClick:()=>s("/superadmin/organisations/create"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[t.jsx(Tr,{className:"h-5 w-5 mr-2"}),"Create Organisation"]})]})}),t.jsxs("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(Id,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{type:"text",value:o,onChange:E=>d(E.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Search by name, domain, admin email..."})]})}),t.jsx("div",{className:"sm:w-48",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(yu,{className:"h-5 w-5 text-gray-400"})}),t.jsxs("select",{value:u,onChange:E=>m(E.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"active",children:"Active Only"}),t.jsx("option",{value:"inactive",children:"Inactive Only"})]})]})})]}),t.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:["Showing ",C+1,"-",Math.min(N,j.length)," of ",j.length," organisations"]})]}),t.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:D.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Id,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No organisations found"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:o||u!=="all"?"Try adjusting your search or filters.":"Get started by creating a new organisation."}),!o&&u==="all"&&t.jsx("div",{className:"mt-6",children:t.jsxs("button",{onClick:()=>s("/superadmin/organisations/create"),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:[t.jsx(Tr,{className:"h-5 w-5 mr-2"}),"New Organisation"]})})]}):t.jsxs(t.Fragment,{children:[t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organisation"}),t.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Domain"}),t.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Users"}),t.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Storage"}),t.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Renewal"}),t.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(E=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.name}),t.jsx("div",{className:"text-sm text-gray-500",children:E.adminEmail||"No admin email"})]})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-900",children:E.domain||"-"})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsxs("div",{className:"text-sm text-gray-900",children:[E.totalUsers||0," / ",E.maxUsers]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:t.jsx("div",{className:"bg-indigo-600 h-1.5 rounded-full",style:{width:`${Math.min(E.totalUsers/E.maxUsers*100,100)}%`}})})]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[E.allocatedStorageGB," GB"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.renewalDate?new Date(E.renewalDate).toLocaleDateString():"-"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E.isActive?t.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[t.jsx(zt,{className:"h-4 w-4 mr-1"}),"Active"]}):t.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[t.jsx(JT,{className:"h-4 w-4 mr-1"}),"Inactive"]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx("button",{onClick:()=>s(`/superadmin/organisations/${E.id}/edit`),className:"text-indigo-600 hover:text-indigo-900",title:"Edit Organisation",children:t.jsx(DT,{className:"h-5 w-5"})}),t.jsx("button",{onClick:()=>s(`/superadmin/organisations/${E.id}/analytics`),className:"text-blue-600 hover:text-blue-900",title:"View Analytics",children:t.jsx(la,{className:"h-5 w-5"})})]})})]},E.id))})]}),S>1&&t.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[t.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[t.jsx("button",{onClick:()=>p(Math.max(1,f-1)),disabled:f===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),t.jsx("button",{onClick:()=>p(Math.min(S,f+1)),disabled:f===S,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),t.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[t.jsx("div",{children:t.jsxs("p",{className:"text-sm text-gray-700",children:["Page ",t.jsx("span",{className:"font-medium",children:f})," of"," ",t.jsx("span",{className:"font-medium",children:S})]})}),t.jsx("div",{children:t.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[t.jsxs("button",{onClick:()=>p(Math.max(1,f-1)),disabled:f===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx("span",{className:"sr-only",children:"Previous"}),t.jsx(rT,{className:"h-5 w-5","aria-hidden":"true"})]}),[...Array(S)].map((E,A)=>{const T=A+1;return T===1||T===S||T>=f-1&&T<=f+1?t.jsx("button",{onClick:()=>p(T),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${T===f?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:T},T):T===f-2||T===f+2?t.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."},T):null}),t.jsxs("button",{onClick:()=>p(Math.min(S,f+1)),disabled:f===S,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx("span",{className:"sr-only",children:"Next"}),t.jsx(lT,{className:"h-5 w-5","aria-hidden":"true"})]})]})})]})]})]})})]})})}function Jv(){const{id:s}=Xn(),e=ze(),a=!!s;tt(a?"Edit Organisation":"Create Organisation");const[r,l]=b.useState(a),[o,d]=b.useState(!1),[u,m]=b.useState({banner:!1,favicon:!1}),[f,p]=b.useState({name:"",description:"",maxUsers:100,allocatedStorageGB:10,domain:"",bannerUrl:"",faviconUrl:"",themeSettings:"",smtpHost:"",smtpPort:587,smtpUsername:"",smtpPassword:"",smtpUseSsl:!0,sendGridApiKey:"",fromEmail:"",fromName:"",supportEmail:"",managerName:"",managerEmail:"",managerPhone:"",renewalDate:"",isActive:!0});b.useEffect(()=>{a&&y()},[s]);const y=async()=>{try{const C=await GR(s);p({...C,renewalDate:C.renewalDate?new Date(C.renewalDate).toISOString().split("T")[0]:"",smtpPort:C.smtpPort||587,themeSettings:C.themeSettings||""})}catch(C){console.error("Error fetching organisation:",C),G.error("Failed to load organisation"),e("/superadmin/organisations")}finally{l(!1)}},v=C=>{const{name:N,value:D,type:E,checked:A}=C.target;p(T=>({...T,[N]:E==="checkbox"?A:E==="number"?parseInt(D)||0:D}))},j=async(C,N)=>{const D=C.target.files?.[0];if(!D)return;if(!(N==="banner"?["image/jpeg","image/png","image/gif","image/webp"]:["image/x-icon","image/vnd.microsoft.icon","image/png"]).includes(D.type)){G.error(`Invalid file type for ${N}. Please select a valid image.`);return}try{m(R=>({...R,[N]:!0}));const A=`.${D.name.split(".").pop()}`,{uploadUrl:T,blobPath:w}=await ZR(s||0,A);await eD(T,D);const _=N==="banner"?"bannerUrl":"faviconUrl";p(R=>({...R,[_]:w})),G.success(`${N==="banner"?"Banner":"Favicon"} uploaded successfully`)}catch(A){console.error("Upload error:",A),G.error(`Failed to upload ${N}`)}finally{m(A=>({...A,[N]:!1}))}},S=async C=>{if(C.preventDefault(),!f.name.trim()){G.error("Organisation name is required");return}try{d(!0);const N={...f,renewalDate:f.renewalDate||null};a?(await XR(s,N),G.success("Organisation updated successfully")):(await WR(N),G.success("Organisation created successfully")),e("/superadmin/organisations")}catch(N){console.error("Error saving organisation:",N),G.error(N.message||"Failed to save organisation")}finally{d(!1)}};return r?t.jsx(on,{children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})})})}):t.jsx(on,{children:t.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("button",{onClick:()=>e("/superadmin/organisations"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4",children:[t.jsx(Ms,{className:"h-4 w-4 mr-1"}),"Back to Organisations"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a?"Edit Organisation":"Create New Organisation"}),t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:a?"Update organisation details and settings":"Set up a new organisation for your LMS"})]}),t.jsxs("form",{onSubmit:S,className:"space-y-8",children:[t.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[t.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),t.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Organisation Name *"}),t.jsx("input",{type:"text",name:"name",value:f.name,onChange:v,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),t.jsx("textarea",{name:"description",value:f.description,onChange:v,rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Max Users *"}),t.jsx("input",{type:"number",name:"maxUsers",value:f.maxUsers,onChange:v,min:"1",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Allocated Storage (GB) *"}),t.jsx("input",{type:"number",name:"allocatedStorageGB",value:f.allocatedStorageGB,onChange:v,min:"1",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Domain"}),t.jsx("input",{type:"text",name:"domain",value:f.domain,onChange:v,placeholder:"example.com",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Renewal Date"}),t.jsx("input",{type:"date",name:"renewalDate",value:f.renewalDate,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",name:"isActive",checked:f.isActive,onChange:v,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),t.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Active"})]})]})]}),a&&t.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[t.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Branding"}),t.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Banner Image"}),f.bannerUrl&&t.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Current: ",f.bannerUrl]}),t.jsx("div",{className:"flex items-center",children:t.jsxs("label",{className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[t.jsx(Or,{className:"h-5 w-5 mr-2"}),u.banner?"Uploading...":"Upload Banner",t.jsx("input",{type:"file",accept:"image/*",onChange:C=>j(C,"banner"),disabled:u.banner,className:"hidden"})]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Favicon"}),f.faviconUrl&&t.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Current: ",f.faviconUrl]}),t.jsx("div",{className:"flex items-center",children:t.jsxs("label",{className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[t.jsx(Or,{className:"h-5 w-5 mr-2"}),u.favicon?"Uploading...":"Upload Favicon",t.jsx("input",{type:"file",accept:".ico,image/x-icon,image/png",onChange:C=>j(C,"favicon"),disabled:u.favicon,className:"hidden"})]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Theme Settings (JSON)"}),t.jsx("textarea",{name:"themeSettings",value:f.themeSettings,onChange:v,rows:4,placeholder:'{"primaryColor": "#4F46E5", "secondaryColor": "#7C3AED"}',className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 font-mono text-sm"})]})]})]}),t.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[t.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact Information"}),t.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Support Email"}),t.jsx("input",{type:"email",name:"supportEmail",value:f.supportEmail,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Manager Name"}),t.jsx("input",{type:"text",name:"managerName",value:f.managerName,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Manager Email"}),t.jsx("input",{type:"email",name:"managerEmail",value:f.managerEmail,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Manager Phone"}),t.jsx("input",{type:"tel",name:"managerPhone",value:f.managerPhone,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]})]})]}),t.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[t.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Email Configuration"}),t.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"From Email"}),t.jsx("input",{type:"email",name:"fromEmail",value:f.fromEmail,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"From Name"}),t.jsx("input",{type:"text",name:"fromName",value:f.fromName,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SendGrid API Key"}),t.jsx("input",{type:"password",name:"sendGridApiKey",value:f.sendGridApiKey,onChange:v,placeholder:"SG.xxxxxxxxxxxxx",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:"SMTP Settings (Alternative to SendGrid)"}),t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SMTP Host"}),t.jsx("input",{type:"text",name:"smtpHost",value:f.smtpHost,onChange:v,placeholder:"smtp.example.com",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Port"}),t.jsx("input",{type:"number",name:"smtpPort",value:f.smtpPort,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SMTP Username"}),t.jsx("input",{type:"text",name:"smtpUsername",value:f.smtpUsername,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SMTP Password"}),t.jsx("input",{type:"password",name:"smtpPassword",value:f.smtpPassword,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",name:"smtpUseSsl",checked:f.smtpUseSsl,onChange:v,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),t.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Use SSL/TLS"})]})]})]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx("button",{type:"button",onClick:()=>e("/superadmin/organisations"),disabled:o,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:o,className:"inline-flex justify-center items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:o?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):a?"Update Organisation":"Create Organisation"})]})]})]})})}function lD(){tt("Global Library - Super Admin");const s=ze(),[e,a]=b.useState([]),[r,l]=b.useState(!0),[o,d]=b.useState("all"),[u,m]=b.useState({isOpen:!1,contentId:null,contentTitle:""});b.useEffect(()=>{f()},[o]);const f=async()=>{try{l(!0);const S=await KR(o==="all"?null:o);a(S)}catch(j){console.error("Error fetching content:",j),G.error("Failed to load content")}finally{l(!1)}},p=j=>{m({isOpen:!0,contentId:j.id,contentTitle:j.title})},y=async()=>{try{await JR(u.contentId),G.success("Content deleted successfully"),f()}catch(j){console.error("Error deleting content:",j),G.error("Failed to delete content")}finally{m({isOpen:!1,contentId:null,contentTitle:""})}},v=j=>{if(j===0)return"0 Bytes";const S=1024,C=["Bytes","KB","MB","GB"],N=Math.floor(Math.log(j)/Math.log(S));return Math.round(j/Math.pow(S,N)*100)/100+" "+C[N]};return r?t.jsx(on,{children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})})})}):t.jsxs(on,{children:[t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Global Library"}),t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage global content accessible to all organisations"})]}),t.jsxs("button",{onClick:()=>s("/superadmin/library/create"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[t.jsx(Tr,{className:"h-5 w-5 mr-2"}),"Add Content"]})]}),t.jsx("div",{className:"mt-6 border-b border-gray-200",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"all",label:"All Content",count:e.length},{key:"pdf",label:"PDF Documents",icon:io},{key:"video",label:"Videos",icon:jo}].map(j=>t.jsxs("button",{onClick:()=>d(j.key),className:`${o===j.key?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm inline-flex items-center`,children:[j.icon&&t.jsx(j.icon,{className:"h-5 w-5 mr-2"}),j.label,j.count!==void 0&&t.jsx("span",{className:`ml-2 py-0.5 px-2.5 rounded-full text-xs font-medium ${o===j.key?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900"}`,children:j.count})]},j.key))})})]}),e.length===0?t.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[t.jsx(io,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No content"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding content to the global library."}),t.jsx("div",{className:"mt-6",children:t.jsxs("button",{onClick:()=>s("/superadmin/library/create"),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:[t.jsx(Tr,{className:"h-5 w-5 mr-2"}),"Add Content"]})})]}):t.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Content"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Size"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Uploaded"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Uploaded By"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(j=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center",children:[j.contentType==="pdf"?t.jsx(io,{className:"h-8 w-8 text-red-500 shrink-0"}):t.jsx(jo,{className:"h-8 w-8 text-blue-500 shrink-0"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.title}),j.description&&t.jsx("div",{className:"text-sm text-gray-500 line-clamp-1",children:j.description}),j.fileName&&t.jsx("div",{className:"text-xs text-gray-400 mt-1",children:j.fileName})]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${j.contentType==="pdf"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:j.contentType.toUpperCase()})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v(j.fileSizeBytes)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(j.uploadedOn).toLocaleDateString()}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.uploadedBy}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsx("button",{onClick:()=>p(j),className:"text-red-600 hover:text-red-900",title:"Delete content",children:t.jsx(IT,{className:"h-5 w-5"})})})]},j.id))})]})})]}),t.jsx(qi,{isOpen:u.isOpen,onClose:()=>m({isOpen:!1,contentId:null,contentTitle:""}),onConfirm:y,title:"Delete Content",message:`Are you sure you want to delete "${u.contentTitle}"? This action cannot be undone.`,confirmText:"Delete",confirmButtonClass:"bg-red-600 hover:bg-red-700"})]})}function oD(){tt("Add Content - Global Library");const s=ze(),[e,a]=b.useState("pdf"),[r,l]=b.useState(null),[o,d]=b.useState(!1),[u,m]=b.useState(0),[f,p]=b.useState({title:"",description:"",tags:""}),y=C=>{const N=C.target.files?.[0];if(!N)return;if(!(e==="pdf"?["application/pdf"]:["video/mp4","video/webm","video/ogg","video/quicktime"]).includes(N.type)){G.error(`Invalid file type. Please select a valid ${e==="pdf"?"PDF":"video"} file.`);return}const E=e==="pdf"?50*1024*1024:500*1024*1024;if(N.size>E){G.error(`File size exceeds maximum allowed (${e==="pdf"?"50MB":"500MB"})`);return}if(l(N),!f.title){const A=N.name.replace(/\.[^/.]+$/,"");p(T=>({...T,title:A}))}},v=C=>{const{name:N,value:D}=C.target;p(E=>({...E,[N]:D}))},j=async C=>{if(C.preventDefault(),!r){G.error("Please select a file to upload");return}if(!f.title.trim()){G.error("Please enter a title");return}try{d(!0),m(0);let N;e==="video"?N=await tD(r,f.title,f.description,f.tags,D=>m(Math.round(D))):N=await sD(r,f.title,f.description,f.tags,D=>m(Math.round(D))),G.success(N.message||"Content uploaded successfully"),s("/superadmin/library")}catch(N){console.error("Upload error:",N),G.error(N.message||"Failed to upload content")}finally{d(!1),m(0)}},S=C=>{if(C===0)return"0 Bytes";const N=1024,D=["Bytes","KB","MB","GB"],E=Math.floor(Math.log(C)/Math.log(N));return Math.round(C/Math.pow(N,E)*100)/100+" "+D[E]};return t.jsx(on,{children:t.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("button",{onClick:()=>s("/superadmin/library"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4",children:[t.jsx(Ms,{className:"h-4 w-4 mr-1"}),"Back to Library"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Add Content to Global Library"}),t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Upload PDF documents or video files accessible to all organisations"})]}),t.jsxs("form",{onSubmit:j,className:"space-y-6",children:[t.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Content Type"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("button",{type:"button",onClick:()=>{a("pdf"),l(null)},className:`p-6 border-2 rounded-lg transition-colors ${e==="pdf"?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:border-gray-400"}`,children:[t.jsx(io,{className:`h-12 w-12 mx-auto mb-3 ${e==="pdf"?"text-indigo-600":"text-gray-400"}`}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-medium text-gray-900",children:"PDF Document"}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Max 50MB"})]})]}),t.jsxs("button",{type:"button",onClick:()=>{a("video"),l(null)},className:`p-6 border-2 rounded-lg transition-colors ${e==="video"?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:border-gray-400"}`,children:[t.jsx(jo,{className:`h-12 w-12 mx-auto mb-3 ${e==="video"?"text-indigo-600":"text-gray-400"}`}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-medium text-gray-900",children:"Video"}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Max 500MB"})]})]})]})]}),t.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select File *"}),r?t.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[e==="pdf"?t.jsx(io,{className:"h-8 w-8 text-red-500 shrink-0"}):t.jsx(jo,{className:"h-8 w-8 text-blue-500 shrink-0"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:r.name}),t.jsx("div",{className:"text-xs text-gray-500",children:S(r.size)})]})]}),!o&&t.jsx("button",{type:"button",onClick:()=>l(null),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Remove"})]}),o&&t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-xs text-gray-600",children:"Uploading..."}),t.jsxs("span",{className:"text-xs text-gray-600",children:[u,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${u}%`}})})]})]}):t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors",children:[t.jsx("input",{type:"file",id:"fileInput",accept:e==="pdf"?".pdf":"video/*",onChange:y,disabled:o,className:"hidden"}),t.jsxs("label",{htmlFor:"fileInput",className:"cursor-pointer",children:[t.jsx(Or,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),t.jsxs("div",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Click to upload"})," ","or drag and drop"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="pdf"?"PDF up to 50MB":"Video (MP4, WebM, OGG) up to 500MB"})]})]})]}),t.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Content Details"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),t.jsx("input",{type:"text",name:"title",value:f.title,onChange:v,required:!0,disabled:o,placeholder:"Enter content title",className:"w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{name:"description",value:f.description,onChange:v,disabled:o,rows:3,placeholder:"Optional description of the content",className:"w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),t.jsx("input",{type:"text",name:"tags",value:f.tags,onChange:v,disabled:o,placeholder:"e.g., compliance, safety, training (comma-separated)",className:"w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100"}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Add tags to help categorize and search for this content"})]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx("button",{type:"button",onClick:()=>s("/superadmin/library"),disabled:o,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:o||!r,className:"inline-flex justify-center items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:o?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading ",u,"%"]}):t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"h-5 w-5 mr-2"}),"Upload Content"]})})]})]})]})})}var Gf=function(s,e){return Gf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(a[l]=r[l])},Gf(s,e)};function cD(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Gf(s,e);function a(){this.constructor=s}s.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}var Qt=function(){return Qt=Object.assign||function(e){for(var a,r=1,l=arguments.length;r<l;r++){a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Qt.apply(this,arguments)};var mf,e1;function dD(){if(e1)return mf;e1=1;var s=!1,e,a,r,l,o,d,u,m,f,p,y,v,j,S,C;function N(){if(!s){s=!0;var E=navigator.userAgent,A=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(E),T=/(Mac OS X)|(Windows)|(Linux)/.exec(E);if(v=/\b(iPhone|iP[ao]d)/.exec(E),j=/\b(iP[ao]d)/.exec(E),p=/Android/i.exec(E),S=/FBAN\/\w+;/i.exec(E),C=/Mobile/i.exec(E),y=!!/Win64/.exec(E),A){e=A[1]?parseFloat(A[1]):A[5]?parseFloat(A[5]):NaN,e&&document&&document.documentMode&&(e=document.documentMode);var w=/(?:Trident\/(\d+.\d+))/.exec(E);d=w?parseFloat(w[1])+4:e,a=A[2]?parseFloat(A[2]):NaN,r=A[3]?parseFloat(A[3]):NaN,l=A[4]?parseFloat(A[4]):NaN,l?(A=/(?:Chrome\/(\d+\.\d+))/.exec(E),o=A&&A[1]?parseFloat(A[1]):NaN):o=NaN}else e=a=r=o=l=NaN;if(T){if(T[1]){var _=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(E);u=_?parseFloat(_[1].replace("_",".")):!0}else u=!1;m=!!T[2],f=!!T[3]}else u=m=f=!1}}var D={ie:function(){return N()||e},ieCompatibilityMode:function(){return N()||d>e},ie64:function(){return D.ie()&&y},firefox:function(){return N()||a},opera:function(){return N()||r},webkit:function(){return N()||l},safari:function(){return D.webkit()},chrome:function(){return N()||o},windows:function(){return N()||m},osx:function(){return N()||u},linux:function(){return N()||f},iphone:function(){return N()||v},mobile:function(){return N()||v||j||p||C},nativeApp:function(){return N()||S},android:function(){return N()||p},ipad:function(){return N()||j}};return mf=D,mf}var ff,t1;function uD(){if(t1)return ff;t1=1;var s=!!(typeof window<"u"&&window.document&&window.document.createElement),e={canUseDOM:s,canUseWorkers:typeof Worker<"u",canUseEventListeners:s&&!!(window.addEventListener||window.attachEvent),canUseViewport:s&&!!window.screen,isInWorker:!s};return ff=e,ff}var pf,s1;function hD(){if(s1)return pf;s1=1;var s=uD(),e;s.canUseDOM&&(e=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function a(r,l){if(!s.canUseDOM||l&&!("addEventListener"in document))return!1;var o="on"+r,d=o in document;if(!d){var u=document.createElement("div");u.setAttribute(o,"return;"),d=typeof u[o]=="function"}return!d&&e&&r==="wheel"&&(d=document.implementation.hasFeature("Events.wheel","3.0")),d}return pf=a,pf}var gf,a1;function mD(){if(a1)return gf;a1=1;var s=dD(),e=hD(),a=10,r=40,l=800;function o(d){var u=0,m=0,f=0,p=0;return"detail"in d&&(m=d.detail),"wheelDelta"in d&&(m=-d.wheelDelta/120),"wheelDeltaY"in d&&(m=-d.wheelDeltaY/120),"wheelDeltaX"in d&&(u=-d.wheelDeltaX/120),"axis"in d&&d.axis===d.HORIZONTAL_AXIS&&(u=m,m=0),f=u*a,p=m*a,"deltaY"in d&&(p=d.deltaY),"deltaX"in d&&(f=d.deltaX),(f||p)&&d.deltaMode&&(d.deltaMode==1?(f*=r,p*=r):(f*=l,p*=l)),f&&!u&&(u=f<1?-1:1),p&&!m&&(m=p<1?-1:1),{spinX:u,spinY:m,pixelX:f,pixelY:p}}return o.getEventType=function(){return s.firefox()?"DOMMouseScroll":e("wheel")?"wheel":"mousewheel"},gf=o,gf}var xf,n1;function fD(){return n1||(n1=1,xf=mD()),xf}var pD=fD();const gD=zi(pD);function xD(s,e,a,r,l,o){o===void 0&&(o=0);var d=Oi(s,e,o),u=d.width,m=d.height,f=Math.min(u,a),p=Math.min(m,r);return f>p*l?{width:p*l,height:p}:{width:f,height:f/l}}function yD(s){return s.width>s.height?s.width/s.naturalWidth:s.height/s.naturalHeight}function Gl(s,e,a,r,l){l===void 0&&(l=0);var o=Oi(e.width,e.height,l),d=o.width,u=o.height;return{x:r1(s.x,d,a.width,r),y:r1(s.y,u,a.height,r)}}function r1(s,e,a,r){var l=e*r/2-a/2;return bu(s,-l,l)}function i1(s,e){return Math.sqrt(Math.pow(s.y-e.y,2)+Math.pow(s.x-e.x,2))}function l1(s,e){return Math.atan2(e.y-s.y,e.x-s.x)*180/Math.PI}function bD(s,e,a,r,l,o,d){o===void 0&&(o=0),d===void 0&&(d=!0);var u=d?vD:jD,m=Oi(e.width,e.height,o),f=Oi(e.naturalWidth,e.naturalHeight,o),p={x:u(100,((m.width-a.width/l)/2-s.x/l)/m.width*100),y:u(100,((m.height-a.height/l)/2-s.y/l)/m.height*100),width:u(100,a.width/m.width*100/l),height:u(100,a.height/m.height*100/l)},y=Math.round(u(f.width,p.width*f.width/100)),v=Math.round(u(f.height,p.height*f.height/100)),j=f.width>=f.height*r,S=j?{width:Math.round(v*r),height:v}:{width:y,height:Math.round(y/r)},C=Qt(Qt({},S),{x:Math.round(u(f.width-S.width,p.x*f.width/100)),y:Math.round(u(f.height-S.height,p.y*f.height/100))});return{croppedAreaPercentages:p,croppedAreaPixels:C}}function vD(s,e){return Math.min(s,Math.max(0,e))}function jD(s,e){return e}function wD(s,e,a,r,l,o){var d=Oi(e.width,e.height,a),u=bu(r.width/d.width*(100/s.width),l,o),m={x:u*d.width/2-r.width/2-d.width*u*(s.x/100),y:u*d.height/2-r.height/2-d.height*u*(s.y/100)};return{crop:m,zoom:u}}function ND(s,e,a){var r=yD(e);return a.height>a.width?a.height/(s.height*r):a.width/(s.width*r)}function SD(s,e,a,r,l,o){a===void 0&&(a=0);var d=Oi(e.naturalWidth,e.naturalHeight,a),u=bu(ND(s,e,r),l,o),m=r.height>r.width?r.height/s.height:r.width/s.width,f={x:((d.width-s.width)/2-s.x)*m,y:((d.height-s.height)/2-s.y)*m};return{crop:f,zoom:u}}function o1(s,e){return{x:(e.x+s.x)/2,y:(e.y+s.y)/2}}function CD(s){return s*Math.PI/180}function Oi(s,e,a){var r=CD(a);return{width:Math.abs(Math.cos(r)*s)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*s)+Math.abs(Math.cos(r)*e)}}function bu(s,e,a){return Math.min(Math.max(s,e),a)}function Nd(){for(var s=[],e=0;e<arguments.length;e++)s[e]=arguments[e];return s.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var kD=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,_D=1,AD=3,ED=1,TD=(function(s){cD(e,s);function e(){var a=s!==null&&s.apply(this,arguments)||this;return a.cropperRef=b.createRef(),a.imageRef=b.createRef(),a.videoRef=b.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.previousCropSize=null,a.isInitialized=!1,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var r=!0;a.resizeObserver=new window.ResizeObserver(function(l){if(r){r=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(r){return r.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturechange",a.onGestureChange),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var r=a.computeSizes();r&&(a.previousCropSize=r,a.emitCropData(),a.setInitialCrop(r),a.isInitialized=!0),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(r){if(a.props.initialCroppedAreaPercentages){var l=wD(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,r,a.props.minZoom,a.props.maxZoom),o=l.crop,d=l.zoom;a.props.onCropChange(o),a.props.onZoomChange&&a.props.onZoomChange(d)}else if(a.props.initialCroppedAreaPixels){var u=SD(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,r,a.props.minZoom,a.props.maxZoom),o=u.crop,d=u.zoom;a.props.onCropChange(o),a.props.onZoomChange&&a.props.onZoomChange(d)}},a.computeSizes=function(){var r,l,o,d,u,m,f=a.imageRef.current||a.videoRef.current;if(f&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var p=a.containerRect.width/a.containerRect.height,y=((r=a.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((l=a.videoRef.current)===null||l===void 0?void 0:l.videoWidth)||0,v=((o=a.imageRef.current)===null||o===void 0?void 0:o.naturalHeight)||((d=a.videoRef.current)===null||d===void 0?void 0:d.videoHeight)||0,j=f.offsetWidth<y||f.offsetHeight<v,S=y/v,C=void 0;if(j)switch(a.state.mediaObjectFit){default:case"contain":C=p>S?{width:a.containerRect.height*S,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/S};break;case"horizontal-cover":C={width:a.containerRect.width,height:a.containerRect.width/S};break;case"vertical-cover":C={width:a.containerRect.height*S,height:a.containerRect.height};break}else C={width:f.offsetWidth,height:f.offsetHeight};a.mediaSize=Qt(Qt({},C),{naturalWidth:y,naturalHeight:v}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var N=a.props.cropSize?a.props.cropSize:xD(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((u=a.state.cropSize)===null||u===void 0?void 0:u.height)!==N.height||((m=a.state.cropSize)===null||m===void 0?void 0:m.width)!==N.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(N),a.setState({cropSize:N},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(N),N}},a.saveContainerPosition=function(){if(a.containerRef){var r=a.containerRef.getBoundingClientRect();a.containerPosition={x:r.left,y:r.top}}},a.onMouseDown=function(r){a.currentDoc&&(r.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(e.getMousePoint(r)))},a.onMouseMove=function(r){return a.onDrag(e.getMousePoint(r))},a.onScroll=function(r){a.currentDoc&&(r.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(r){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(r))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),r.touches.length===2?a.onPinchStart(r):r.touches.length===1&&a.onDragStart(e.getTouchPoint(r.touches[0]))))},a.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?a.onPinchMove(r):r.touches.length===1&&a.onDrag(e.getTouchPoint(r.touches[0]))},a.onGestureStart=function(r){a.currentDoc&&(r.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureChange),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureChange=function(r){if(r.preventDefault(),!a.isTouching){var l=e.getMousePoint(r),o=a.gestureZoomStart-1+r.scale;if(a.setNewZoom(o,l,{shouldUpdatePosition:!0}),a.props.onRotationChange){var d=a.gestureRotationStart+r.rotation;a.props.onRotationChange(d)}}},a.onGestureEnd=function(r){a.cleanEvents()},a.onDragStart=function(r){var l,o,d=r.x,u=r.y;a.dragStartPosition={x:d,y:u},a.dragStartCrop=Qt({},a.props.crop),(o=(l=a.props).onInteractionStart)===null||o===void 0||o.call(l)},a.onDrag=function(r){var l=r.x,o=r.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(l===void 0||o===void 0)){var d=l-a.dragStartPosition.x,u=o-a.dragStartPosition.y,m={x:a.dragStartCrop.x+d,y:a.dragStartCrop.y+u},f=a.props.restrictPosition?Gl(m,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):m;a.props.onCropChange(f)}}))},a.onDragStopped=function(){var r,l;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(l=(r=a.props).onInteractionEnd)===null||l===void 0||l.call(r)},a.onWheel=function(r){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(r))){r.preventDefault();var l=e.getMousePoint(r),o=gD(r).pixelY,d=a.props.zoom-o*a.props.zoomSpeed/200;a.setNewZoom(d,l,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var u,m;return(m=(u=a.props).onInteractionStart)===null||m===void 0?void 0:m.call(u)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var u,m;return(m=(u=a.props).onInteractionEnd)===null||m===void 0?void 0:m.call(u)})},250)}},a.getPointOnContainer=function(r,l){var o=r.x,d=r.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(o-l.x),y:a.containerRect.height/2-(d-l.y)}},a.getPointOnMedia=function(r){var l=r.x,o=r.y,d=a.props,u=d.crop,m=d.zoom;return{x:(l+u.x)/m,y:(o+u.y)/m}},a.setNewZoom=function(r,l,o){var d=o===void 0?{}:o,u=d.shouldUpdatePosition,m=u===void 0?!0:u;if(!(!a.state.cropSize||!a.props.onZoomChange)){var f=bu(r,a.props.minZoom,a.props.maxZoom);if(m){var p=a.getPointOnContainer(l,a.containerPosition),y=a.getPointOnMedia(p),v={x:y.x*f-p.x,y:y.y*f-p.y},j=a.props.restrictPosition?Gl(v,a.mediaSize,a.state.cropSize,f,a.props.rotation):v;a.props.onCropChange(j)}a.props.onZoomChange(f)}},a.getCropData=function(){if(!a.state.cropSize)return null;var r=a.props.restrictPosition?Gl(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return bD(r,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var r=a.getCropData();if(r){var l=r.croppedAreaPercentages,o=r.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(l,o),a.props.onCropAreaChange&&a.props.onCropAreaChange(l,o)}},a.emitCropAreaChange=function(){var r=a.getCropData();if(r){var l=r.croppedAreaPercentages,o=r.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(l,o)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var r=a.props.crop;if(a.isInitialized&&a.previousCropSize){var l=Math.abs(a.previousCropSize.width-a.state.cropSize.width)>1e-6||Math.abs(a.previousCropSize.height-a.state.cropSize.height)>1e-6;if(l){var o=a.state.cropSize.width/a.previousCropSize.width,d=a.state.cropSize.height/a.previousCropSize.height;r={x:a.props.crop.x*o,y:a.props.crop.y*d}}}var u=a.props.restrictPosition?Gl(r,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):r;a.previousCropSize=a.state.cropSize,a.props.onCropChange(u),a.emitCropData()}},a.onKeyDown=function(r){var l,o,d=a.props,u=d.crop,m=d.onCropChange,f=d.keyboardStep,p=d.zoom,y=d.rotation,v=f;if(a.state.cropSize){r.shiftKey&&(v*=.2);var j=Qt({},u);switch(r.key){case"ArrowUp":j.y-=v,r.preventDefault();break;case"ArrowDown":j.y+=v,r.preventDefault();break;case"ArrowLeft":j.x-=v,r.preventDefault();break;case"ArrowRight":j.x+=v,r.preventDefault();break;default:return}a.props.restrictPosition&&(j=Gl(j,a.mediaSize,a.state.cropSize,p,y)),r.repeat||(o=(l=a.props).onInteractionStart)===null||o===void 0||o.call(l),m(j)}},a.onKeyUp=function(r){var l,o;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}a.emitCropData(),(o=(l=a.props).onInteractionEnd)===null||o===void 0||o.call(l)},a}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=kD,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var a,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(a){var r,l,o,d,u,m,f,p,y;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((r=a.cropSize)===null||r===void 0?void 0:r.height)!==((l=this.props.cropSize)===null||l===void 0?void 0:l.height)||((o=a.cropSize)===null||o===void 0?void 0:o.width)!==((d=this.props.cropSize)===null||d===void 0?void 0:d.width)?this.computeSizes():(((u=a.crop)===null||u===void 0?void 0:u.x)!==((m=this.props.crop)===null||m===void 0?void 0:m.x)||((f=a.crop)===null||f===void 0?void 0:f.y)!==((p=this.props.crop)===null||p===void 0?void 0:p.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((y=this.videoRef.current)===null||y===void 0||y.load());var v=this.getObjectFit();v!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:v},this.computeSizes)},e.prototype.getAspect=function(){var a=this.props,r=a.cropSize,l=a.aspect;return r?r.width/r.height:l},e.prototype.getObjectFit=function(){var a,r,l,o;if(this.props.objectFit==="cover"){var d=this.imageRef.current||this.videoRef.current;if(d&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var u=this.containerRect.width/this.containerRect.height,m=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,f=((l=this.imageRef.current)===null||l===void 0?void 0:l.naturalHeight)||((o=this.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,p=m/f;return p<u?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(a){var r=e.getTouchPoint(a.touches[0]),l=e.getTouchPoint(a.touches[1]);this.lastPinchDistance=i1(r,l),this.lastPinchRotation=l1(r,l),this.onDragStart(o1(r,l))},e.prototype.onPinchMove=function(a){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var l=e.getTouchPoint(a.touches[0]),o=e.getTouchPoint(a.touches[1]),d=o1(l,o);this.onDrag(d),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var u=i1(l,o),m=r.props.zoom*(u/r.lastPinchDistance);r.setNewZoom(m,d,{shouldUpdatePosition:!1}),r.lastPinchDistance=u;var f=l1(l,o),p=r.props.rotation+(f-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(p),r.lastPinchRotation=f})}},e.prototype.render=function(){var a=this,r,l=this.props,o=l.image,d=l.video,u=l.mediaProps,m=l.cropperProps,f=l.transform,p=l.crop,y=p.x,v=p.y,j=l.rotation,S=l.zoom,C=l.cropShape,N=l.showGrid,D=l.roundCropAreaPixels,E=l.style,A=E.containerStyle,T=E.cropAreaStyle,w=E.mediaStyle,_=l.classes,R=_.containerClassName,z=_.cropAreaClassName,H=_.mediaClassName,q=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return b.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(U){return a.containerRef=U},"data-testid":"container",style:A,className:Nd("reactEasyCrop_Container",R)},o?b.createElement("img",Qt({alt:"",className:Nd("reactEasyCrop_Image",q==="contain"&&"reactEasyCrop_Contain",q==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",q==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",H)},u,{src:o,ref:this.imageRef,style:Qt(Qt({},w),{transform:f||"translate(".concat(y,"px, ").concat(v,"px) rotate(").concat(j,"deg) scale(").concat(S,")")}),onLoad:this.onMediaLoad})):d&&b.createElement("video",Qt({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Nd("reactEasyCrop_Video",q==="contain"&&"reactEasyCrop_Contain",q==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",q==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",H)},u,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Qt(Qt({},w),{transform:f||"translate(".concat(y,"px, ").concat(v,"px) rotate(").concat(j,"deg) scale(").concat(S,")")}),controls:!1}),(Array.isArray(d)?d:[{src:d}]).map(function(ne){return b.createElement("source",Qt({key:ne.src},ne))})),this.state.cropSize&&b.createElement("div",Qt({ref:this.cropperRef,style:Qt(Qt({},T),{width:D?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:D?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Nd("reactEasyCrop_CropArea",C==="round"&&"reactEasyCrop_CropAreaRound",N&&"reactEasyCrop_CropAreaGrid",z)},m)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:AD,minZoom:_D,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:ED},e.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},e.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},e})(b.Component);const RD=s=>new Promise((e,a)=>{const r=new Image;r.addEventListener("load",()=>e(r)),r.addEventListener("error",l=>a(l)),r.src=s});async function DD(s,e){const a=await RD(s),r=document.createElement("canvas"),l=r.getContext("2d");return r.width=e.width,r.height=e.height,l.drawImage(a,e.x,e.y,e.width,e.height,0,0,e.width,e.height),new Promise(o=>{r.toBlob(d=>{if(!d){o(null);return}const u=new File([d],"cropped-banner.jpg",{type:"image/jpeg"});o(u)},"image/jpeg",.95)})}function MD({isOpen:s,onClose:e,onCropComplete:a,aspectRatio:r=37/9}){const[l,o]=b.useState(null),[d,u]=b.useState({x:0,y:0}),[m,f]=b.useState(1),[p,y]=b.useState(null),[v,j]=b.useState(!1),S=b.useCallback((w,_)=>{y(_)},[]),C=async w=>{if(w.target.files&&w.target.files.length>0){const _=w.target.files[0],R=await N(_);o(R),f(1),u({x:0,y:0})}},N=w=>new Promise(_=>{const R=new FileReader;R.addEventListener("load",()=>_(R.result),!1),R.readAsDataURL(w)}),D=async()=>{try{j(!0);const w=await DD(l,p);w&&(await a(w),E())}catch(w){console.error("Error cropping image:",w)}finally{j(!1)}},E=()=>{o(null),u({x:0,y:0}),f(1),y(null),e()},A=()=>{f(w=>Math.min(w+.1,3))},T=()=>{f(w=>Math.max(w-.1,1))};return s?t.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 transition-opacity",onClick:E}),t.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:t.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl transform transition-all w-full max-w-3xl z-10",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:l?"Adjust Your Banner":"Upload Banner Image"}),t.jsx("button",{onClick:E,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx(Pr,{className:"h-6 w-6 text-gray-500"})})]}),t.jsx("div",{className:"p-6",children:l?t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"relative w-full bg-gray-900 rounded-lg overflow-hidden",style:{height:"400px"},children:t.jsx(TD,{image:l,crop:d,zoom:m,aspect:r,onCropChange:u,onZoomChange:f,onCropComplete:S,objectFit:"contain",showGrid:!1,style:{containerStyle:{backgroundColor:"#111827"}}})}),t.jsxs("div",{className:"flex items-center gap-4 px-4 py-3 bg-gray-50 rounded-lg",children:[t.jsx("button",{type:"button",onClick:T,className:"p-2 hover:bg-gray-200 rounded-full transition-colors",disabled:m<=1,children:t.jsx(ST,{className:`h-5 w-5 ${m<=1?"text-gray-300":"text-gray-600"}`})}),t.jsx("div",{className:"flex-1",children:t.jsx("input",{type:"range",value:m,min:1,max:3,step:.1,onChange:w=>f(Number(w.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"})}),t.jsx("button",{type:"button",onClick:A,className:"p-2 hover:bg-gray-200 rounded-full transition-colors",disabled:m>=3,children:t.jsx(kT,{className:`h-5 w-5 ${m>=3?"text-gray-300":"text-gray-600"}`})})]}),t.jsx("p",{className:"text-sm text-center text-gray-500",children:"Drag to reposition  Scroll or use slider to zoom"}),t.jsx("div",{className:"flex justify-center",children:t.jsxs("label",{className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:["Choose Different Image",t.jsx("input",{type:"file",className:"hidden",onChange:C,accept:"image/*"})]})})]}):t.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:t.jsx("div",{className:"w-full max-w-md",children:t.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-xl cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors",children:[t.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[t.jsx("svg",{className:"w-12 h-12 mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),t.jsx("p",{className:"mb-2 text-sm text-gray-500 font-semibold",children:"Click to upload or drag and drop"}),t.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG, GIF up to 10MB"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Recommended ratio: 37:9"})]}),t.jsx("input",{type:"file",className:"hidden",onChange:C,accept:"image/*"})]})})})}),l&&t.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-xl",children:[t.jsx("button",{type:"button",onClick:E,className:"px-5 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),t.jsx("button",{type:"button",onClick:D,disabled:v,className:"px-5 py-2.5 text-sm font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:v?"Processing...":"Save & Upload"})]})]})})]}):null}const d2=()=>{const s=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:s?`Bearer ${s}`:""}},LD=()=>{const s=localStorage.getItem("token");return{Authorization:s?`Bearer ${s}`:""}},OD=async()=>{const s=await fetch(`${_a}/api/OrganisationSettings`,{method:"GET",headers:d2()});if(!s.ok){const e=await s.json();throw new Error(e.message||"Failed to fetch organisation settings")}return s.json()},zD=async s=>{const e=await fetch(`${_a}/api/OrganisationSettings`,{method:"PUT",headers:d2(),body:JSON.stringify(s)});if(!e.ok){const a=await e.json();throw new Error(a.message||"Failed to update organisation settings")}return e.json()},PD=async s=>{const e=new FormData;e.append("image",s);const a=await fetch(`${_a}/api/OrganisationSettings/upload-banner`,{method:"POST",headers:LD(),body:e});if(!a.ok){const r=await a.json();throw new Error(r.message||"Failed to upload banner image")}return a.json()};function UD(){const s=ze();tt("Organisation Settings");const[e,a]=b.useState({name:"",description:"",brandName:"",logoUrl:"",supportName:"",supportEmail:"",supportPhone:""}),[r,l]=b.useState(!0),[o,d]=b.useState(!1),[u,m]=b.useState(!1),[f,p]=b.useState(null),[y,v]=b.useState(!1);b.useEffect(()=>{j()},[]);const j=async()=>{try{l(!0);const E=await OD();p(E),a({name:E.name||"",description:E.description||"",brandName:E.brandName||"",logoUrl:E.logoUrl||"",supportName:E.supportName||"",supportEmail:E.supportEmail||"",supportPhone:E.supportPhone||""})}catch(E){console.error(E),G.error(E.message||"Failed to load organisation settings"),E.message&&E.message.includes("Forbidden")&&s("/admin/dashboard")}finally{l(!1)}},S=(E,A)=>{a(T=>({...T,[E]:A}))},C=async E=>{if(E.preventDefault(),!e.name||!e.name.trim()){G.error("Organisation name is required");return}try{d(!0),await zD(e),G.success("Organisation settings updated successfully"),await j()}catch(A){console.error(A),G.error(A.message||"Failed to update organisation settings")}finally{d(!1)}},N=()=>{s("/admin/dashboard")},D=async E=>{try{m(!0);const T=`${(await PD(E)).url}?t=${Date.now()}`;a(w=>({...w,logoUrl:T})),p(w=>({...w,logoUrl:T})),G.success("Banner image uploaded successfully")}catch(A){console.error(A),G.error(A.message||"Failed to upload banner image")}finally{m(!1)}};return r?t.jsxs(t.Fragment,{children:[t.jsx(Ve,{title:"Organisation Settings"}),t.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})]}):t.jsxs(t.Fragment,{children:[t.jsx(Ve,{title:"Organisation Settings"}),t.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsxs("form",{onSubmit:C,className:"space-y-8",children:[t.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx($f,{className:"h-5 w-5 text-gray-400 mr-2"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Organisation Information"})]})}),t.jsxs("div",{className:"px-6 py-6 space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Organisation Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{id:"name",type:"text",value:e.name,onChange:E=>S("name",E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:"Enter organisation name"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{id:"description",value:e.description,onChange:E=>S("description",E.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Brief description of your organisation"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"brandName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand Name"}),t.jsx("input",{id:"brandName",type:"text",value:e.brandName,onChange:E=>S("brandName",E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Brand name for emails and communications"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"This name will appear in system emails and communications"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"logoUrl",className:"block text-sm font-medium text-gray-700 mb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(zT,{className:"h-4 w-4 text-gray-400 mr-1"}),"Company Banner / Logo"]}),t.jsx("button",{type:"button",onClick:()=>v(!0),disabled:u,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Uploading...":"Upload"})]})}),t.jsx("input",{id:"logoUrl",type:"url",value:e.logoUrl,onChange:E=>S("logoUrl",E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/logo.png"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Upload an image (recommended) or paste a URL. Images will be cropped to 37:9 ratio."}),e.logoUrl&&t.jsxs("div",{className:"mt-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Banner Preview (37:9 ratio):"}),t.jsx("div",{className:"border border-gray-200 rounded-lg p-2 bg-white",children:t.jsx("img",{src:e.logoUrl,alt:"Banner preview",className:"w-full max-w-2xl h-auto object-contain",style:{aspectRatio:"37/9"},onError:E=>{E.target.style.display="none"}},e.logoUrl)})]})]})]})]}),t.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(If,{className:"h-5 w-5 text-gray-400 mr-2"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Support Contact Information"})]})}),t.jsxs("div",{className:"px-6 py-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"supportName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Support Contact Name"}),t.jsx("input",{id:"supportName",type:"text",value:e.supportName,onChange:E=>S("supportName",E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Help Desk or John Smith"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"supportEmail",className:"block text-sm font-medium text-gray-700 mb-2",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(If,{className:"h-4 w-4 text-gray-400 mr-1"}),"Support Email"]})}),t.jsx("input",{id:"supportEmail",type:"email",value:e.supportEmail,onChange:E=>S("supportEmail",E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"support@example.com"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Users will use this email to contact support"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"supportPhone",className:"block text-sm font-medium text-gray-700 mb-2",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(LT,{className:"h-4 w-4 text-gray-400 mr-1"}),"Support Phone"]})}),t.jsx("input",{id:"supportPhone",type:"tel",value:e.supportPhone,onChange:E=>S("supportPhone",E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+1 (555) 123-4567"})]})]})]}),f&&t.jsxs("div",{className:"bg-gray-50 shadow-sm rounded-lg border border-gray-200",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"System Information"})}),t.jsx("div",{className:"px-6 py-6 space-y-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Domain"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:f.domain||"Not set"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Status"}),t.jsx("p",{className:"mt-1 text-sm",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f.isActive?"Active":"Inactive"})})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Max Users"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:f.maxUsers})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Storage Allocation"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[f.allocatedStorageGB," GB"]})]})]})})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:N,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium",disabled:o,children:"Cancel"}),t.jsx("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Saving...":"Save Changes"})]})]})}),t.jsx(MD,{isOpen:y,onClose:()=>v(!1),onCropComplete:D,aspectRatio:37/9})]})}function BD(){return t.jsx(k4,{children:t.jsxs($5,{children:[t.jsxs(v5,{children:[t.jsx(Ee,{path:"/superadmin/login",element:t.jsx(aD,{})}),t.jsx(Ee,{path:"/superadmin/dashboard",element:t.jsx(rD,{})}),t.jsx(Ee,{path:"/superadmin/organisations",element:t.jsx(iD,{})}),t.jsx(Ee,{path:"/superadmin/organisations/create",element:t.jsx(Jv,{})}),t.jsx(Ee,{path:"/superadmin/organisations/:id/edit",element:t.jsx(Jv,{})}),t.jsx(Ee,{path:"/superadmin/library",element:t.jsx(lD,{})}),t.jsx(Ee,{path:"/superadmin/library/create",element:t.jsx(oD,{})}),t.jsx(Ee,{path:"/",element:t.jsx(yb,{})}),t.jsx(Ee,{path:"/login",element:t.jsx(yb,{})}),t.jsx(Ee,{path:"/verify-login",element:t.jsx(wC,{})}),t.jsx(Ee,{path:"/auth-test",element:t.jsx(NC,{})}),t.jsx(Ee,{path:"/admin/profile",element:t.jsx(Je,{children:t.jsx(_4,{})})}),t.jsx(Ee,{path:"/profile",element:t.jsx(wd,{children:t.jsx(A4,{})})}),t.jsx(Ee,{path:"/courses",element:t.jsx(Rr,{to:"/courses/all",replace:!0})}),t.jsx(Ee,{path:"/courses/:tab",element:t.jsx(wd,{children:t.jsx(TC,{})})}),t.jsx(Ee,{path:"/profile/complete",element:t.jsx(wd,{children:t.jsx(QR,{})})}),t.jsx(Ee,{path:"/course/:courseId",element:t.jsx(wd,{children:t.jsx(zC,{})})}),t.jsx(Ee,{path:"/certificates",element:t.jsx(Rr,{to:"/courses/certificates",replace:!0})}),t.jsx(Ee,{path:"/admin/dashboard",element:t.jsx(Je,{children:t.jsx(DE,{})})}),t.jsx(Ee,{path:"/admin/users",element:t.jsx(Je,{children:t.jsx(UE,{})})}),t.jsx(Ee,{path:"/admin/users/new",element:t.jsx(Je,{children:t.jsx(Xv,{})})}),t.jsx(Ee,{path:"/admin/users/bulk-new",element:t.jsx(Je,{children:t.jsx(qE,{})})}),t.jsx(Ee,{path:"/admin/users/:userId/edit",element:t.jsx(Je,{children:t.jsx(Xv,{})})}),t.jsx(Ee,{path:"/admin/settings",element:t.jsx(Je,{children:t.jsx(UD,{})})}),t.jsx(Ee,{path:"/admin/courses",element:t.jsx(Je,{children:t.jsx(VE,{})})}),t.jsx(Ee,{path:"/admin/courses/new",element:t.jsx(Je,{children:t.jsx(Gv,{})})}),t.jsx(Ee,{path:"/admin/courses/:courseId/edit",element:t.jsx(Je,{children:t.jsx(Gv,{})})}),t.jsx(Ee,{path:"/admin/surveys",element:t.jsx(Je,{children:t.jsx($E,{})})}),t.jsx(Ee,{path:"/admin/surveys/create",element:t.jsx(Je,{children:t.jsx(Kv,{})})}),t.jsx(Ee,{path:"/admin/surveys/edit/:surveyId",element:t.jsx(Je,{children:t.jsx(Kv,{})})}),t.jsx(Ee,{path:"/admin/reports",element:t.jsx(Je,{children:t.jsx(tR,{})})}),t.jsx(Ee,{path:"/admin/reports/user-activity",element:t.jsx(Je,{children:t.jsx(OR,{})})}),t.jsx(Ee,{path:"/admin/reports/user-progress",element:t.jsx(Je,{children:t.jsx(zR,{})})}),t.jsx(Ee,{path:"/admin/reports/course-enrollment",element:t.jsx(Je,{children:t.jsx(PR,{})})}),t.jsx(Ee,{path:"/admin/reports/course-completion",element:t.jsx(Je,{children:t.jsx(UR,{})})}),t.jsx(Ee,{path:"/admin/reports/lesson-analytics",element:t.jsx(Je,{children:t.jsx(BR,{})})}),t.jsx(Ee,{path:"/admin/reports/time-tracking",element:t.jsx(Je,{children:t.jsx(FR,{})})}),t.jsx(Ee,{path:"/admin/reports/content-usage",element:t.jsx(Je,{children:t.jsx(HR,{})})}),t.jsx(Ee,{path:"/admin/reports/pathway-progress",element:t.jsx(Je,{children:t.jsx(qR,{})})}),t.jsx(Ee,{path:"/admin/reports/pathway-assignments",element:t.jsx(Je,{children:t.jsx(VR,{})})}),t.jsx(Ee,{path:"/admin/reports/user-course-progress",element:t.jsx(Je,{children:t.jsx($R,{})})}),t.jsx(Ee,{path:"/admin/reports/custom-builder",element:t.jsx(Je,{children:t.jsx(IR,{})})}),t.jsx(Ee,{path:"/admin/learning-pathways",element:t.jsx(Je,{children:t.jsx(NR,{})})}),t.jsx(Ee,{path:"/admin/learning-pathways/new",element:t.jsx(Je,{children:t.jsx(Wv,{})})}),t.jsx(Ee,{path:"/admin/learning-pathways/:groupId/edit",element:t.jsx(Je,{children:t.jsx(Wv,{})})}),t.jsx(Ee,{path:"/admin/quiz/create/:courseId?",element:t.jsx(Je,{children:t.jsx(Zv,{})})}),t.jsx(Ee,{path:"/admin/quiz/edit/:quizId",element:t.jsx(Je,{children:t.jsx(Zv,{})})})]}),t.jsx(Xd,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{iconTheme:{primary:"#4ade80",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}TN.createRoot(document.getElementById("root")).render(t.jsx(ct.StrictMode,{children:t.jsx(BD,{})}));
